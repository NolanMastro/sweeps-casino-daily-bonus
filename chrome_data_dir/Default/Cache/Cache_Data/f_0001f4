{"version":3,"file":"widget-main.ba144a0d090cdf1f9910.js","mappings":"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","sources":["webpack://chat-web/webpack/runtime/create fake namespace object","webpack://chat-web/webpack/runtime/load script","webpack://chat-web/./node_modules/classnames/index.js","webpack://chat-web/./src/widget/widget_main/components/Avatar/avatar.scss","webpack://chat-web/./src/widget/widget_main/components/ChatIcon/chatIcon.scss","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/ChatBubble/chatBubble.scss","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/TemplateMessage/templateMessage.scss","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/chatMessage.scss","webpack://chat-web/./src/widget/widget_main/components/ChatRootIcon/chatRootIcon.scss","webpack://chat-web/./src/widget/widget_main/components/ErrorBoundary/errorBoundary.scss","webpack://chat-web/./src/widget/widget_main/components/FocusTrap/focusTrap.scss","webpack://chat-web/./src/widget/widget_main/components/Footer/FooterConsent/footerConsent.scss","webpack://chat-web/./src/widget/widget_main/components/Footer/footer.scss","webpack://chat-web/./src/widget/widget_main/components/KBHeader/kbHeader.scss","webpack://chat-web/./src/widget/widget_main/components/Markdown/markdown.scss","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/mediaWithPreview.scss","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentButton/attachmentButton.scss","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentPreviews/attachmentPreviews.scss","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/EmojiPicker/EmojiPicker.scss","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/messageThreadInput.scss","webpack://chat-web/./src/widget/widget_main/components/NewConversationButton/newConversationButton.scss","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/CloseProactiveChatButton/closeProactiveChatButton.scss","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatInput/proactiveChatInput.scss","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatMessage/proactiveChatMessage.scss","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/proactivePopup.scss","webpack://chat-web/./src/widget/widget_main/components/TitleBarButton/titleBarButton.scss","webpack://chat-web/./src/widget/widget_main/components/TitleBarButtons/titleBarButtons.scss","webpack://chat-web/./src/widget/widget_main/components/Unread/unread.scss","webpack://chat-web/./src/widget/widget_main/components/Widget/widget.scss","webpack://chat-web/./src/widget/widget_main/components/ui/Button/button.scss","webpack://chat-web/./src/widget/widget_main/components/ui/Checkbox/checkbox.scss","webpack://chat-web/./src/widget/widget_main/components/ui/Loader/loader.scss","webpack://chat-web/./src/widget/widget_main/components/ui/Modal/modal.scss","webpack://chat-web/./src/widget/widget_main/components/ui/Radio/radio.scss","webpack://chat-web/./src/widget/widget_main/components/ui/TextArea/textArea.scss","webpack://chat-web/./src/widget/widget_main/screens/Conversations/ConversationsHeader/conversationsHeader.scss","webpack://chat-web/./src/widget/widget_main/screens/Conversations/conversations.scss","webpack://chat-web/./src/widget/widget_main/screens/KBArticle/kbArticle.scss","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/KBSearchListItem/kbSearchListItem.scss","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/kbSearchList.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/MessageThreadHeader/messageThreadHeader.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/satisfactionMessageModal.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale/satisfactionMessageScale.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/satisfactionMessage.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/ScrollToCurrent/scrollToCurrent.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/ListAction/listAction.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/MLLModal/mllModal.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/templateActions.scss","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/messageThread.scss","webpack://chat-web/./src/widget/widget_main/styles/base.scss","webpack://chat-web/./src/widget/widget_main/styles/colors.scss","webpack://chat-web/./src/widget/widget_main/styles/sizings.scss","webpack://chat-web/./node_modules/css-loader/dist/runtime/api.js","webpack://chat-web/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://chat-web/./node_modules/dlv/dist/dlv.umd.js","webpack://chat-web/./src/widget/widget_main/styles/fonts/Inter/Inter.var.woff2","webpack://chat-web/./node_modules/lodash.debounce/index.js","webpack://chat-web/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://chat-web/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://chat-web/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://chat-web/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://chat-web/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://chat-web/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://chat-web/webpack/bootstrap","webpack://chat-web/webpack/runtime/compat get default export","webpack://chat-web/webpack/runtime/define property getters","webpack://chat-web/webpack/runtime/ensure chunk","webpack://chat-web/webpack/runtime/get javascript chunk filename","webpack://chat-web/webpack/runtime/global","webpack://chat-web/webpack/runtime/hasOwnProperty shorthand","webpack://chat-web/webpack/runtime/make namespace object","webpack://chat-web/webpack/runtime/publicPath","webpack://chat-web/webpack/runtime/jsonp chunk loading","webpack://chat-web/webpack/runtime/nonce","webpack://chat-web/./node_modules/promise-polyfill/src/finally.js","webpack://chat-web/./node_modules/promise-polyfill/src/allSettled.js","webpack://chat-web/./node_modules/promise-polyfill/src/index.js","webpack://chat-web/./node_modules/promise-polyfill/src/polyfill.js","webpack://chat-web/./node_modules/custom-event-polyfill/polyfill.js","webpack://chat-web/./node_modules/preact/dist/preact.module.js","webpack://chat-web/./node_modules/preact/hooks/dist/hooks.module.js","webpack://chat-web/./src/polyfills/helpers.ts","webpack://chat-web/./node_modules/immer/dist/immer.esm.js","webpack://chat-web/./src/widget/widget_main/globals/keyboardEvents.ts","webpack://chat-web/./src/widget/widget_main/globals/helpers.ts","webpack://chat-web/./src/widget/widget_main/styles/colors.scss?7cb6","webpack://chat-web/./src/widget/widget_main/globals/constants.ts","webpack://chat-web/./src/widget/widget_main/app/constants.ts","webpack://chat-web/./src/widget/widget_main/app/helpers.ts","webpack://chat-web/./src/helpers/nonce/helpers.ts","webpack://chat-web/./node_modules/preact-i18n/dist/preact-i18n.esm.js","webpack://chat-web/./src/widget/widget_main/store/index.ts","webpack://chat-web/./src/widget/widget_main/globals/messages.ts","webpack://chat-web/./src/i18n/hooks.ts","webpack://chat-web/./src/globals/errors.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/wifiStrengthOffOutline.svg","webpack://chat-web/./src/globals/sentry.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/send.svg","webpack://chat-web/./node_modules/preact/compat/dist/compat.module.js","webpack://chat-web/./src/widget/widget_main/components/ui/Button/button.scss?02c3","webpack://chat-web/./src/widget/widget_main/components/ui/Button/Button.tsx","webpack://chat-web/./src/widget/widget_main/components/ui/Button/index.ts","webpack://chat-web/./src/widget/widget_main/components/Text/Text.tsx","webpack://chat-web/./src/widget/widget_main/components/Text/index.ts","webpack://chat-web/./src/widget/widget_main/components/ErrorBoundary/errorBoundary.scss?42f0","webpack://chat-web/./src/widget/widget_main/components/ErrorBoundary/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ErrorBoundary/ErrorBoundaryComponent.tsx","webpack://chat-web/./src/widget/widget_main/components/ErrorBoundary/ErrorBoundary.tsx","webpack://chat-web/./src/widget/widget_main/vendors/hooks.ts","webpack://chat-web/./src/widget/widget_main/components/ErrorBoundary/index.ts","webpack://chat-web/./src/i18n/languageMap.ts","webpack://chat-web/./src/i18n/locales.ts","webpack://chat-web/./src/i18n/helpers/index.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Loader/loader.scss?cca9","webpack://chat-web/./src/widget/widget_main/components/ui/Loader/index.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Loader/Loader.tsx","webpack://chat-web/./src/widget/widget_main/styles/sizings.scss?d359","webpack://chat-web/./src/widget/widget_main/globals/dom.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/chevronLeft.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/close.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/open_in_new.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/minimizeIcon.svg","webpack://chat-web/./src/widget/widget_main/components/TitleBarButton/titleBarButton.scss?e8e1","webpack://chat-web/./src/widget/widget_main/components/TitleBarButton/TitleBarButton.tsx","webpack://chat-web/./src/widget/widget_main/components/TitleBarButton/index.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Modal/modal.scss?5fe5","webpack://chat-web/./src/widget/widget_main/components/ui/Modal/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Modal/index.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Modal/Modal.tsx","webpack://chat-web/./src/widget/widget_main/components/TitleBarButtons/titleBarButtons.scss?20ea","webpack://chat-web/./src/widget/widget_main/components/TitleBarButtons/messages.ts","webpack://chat-web/./src/widget/widget_main/components/TitleBarButtons/TitleBarButtons.tsx","webpack://chat-web/./src/widget/widget_main/components/TitleBarButtons/index.ts","webpack://chat-web/./src/widget/widget_main/components/TitleBarButtons/helpers.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/kustyIcon.ts","webpack://chat-web/./src/widget/widget_main/components/ChatIcon/chatIcon.scss?80ad","webpack://chat-web/./src/widget/widget_main/components/ChatIcon/ChatIcon.tsx","webpack://chat-web/./src/widget/widget_main/components/ChatIcon/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ChatIcon/index.ts","webpack://chat-web/./src/widget/widget_main/components/Markdown/helpers.ts","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/MediaPreviewModal/messages.ts","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/MediaPreviewModal/MediaPreviewModal.tsx","webpack://chat-web/./src/widget/widget_main/components/Markdown/markdown.scss?7b96","webpack://chat-web/./src/widget/widget_main/components/Markdown/Markdown.tsx","webpack://chat-web/./src/widget/widget_main/screens/Conversations/ConversationsHeader/conversationsHeader.scss?a293","webpack://chat-web/./src/widget/widget_main/screens/Conversations/ConversationsHeader/index.ts","webpack://chat-web/./src/widget/widget_main/screens/Conversations/ConversationsHeader/ConversationsHeader.tsx","webpack://chat-web/./src/widget/widget_main/components/Avatar/avatar.scss?d168","webpack://chat-web/./src/widget/widget_main/components/Avatar/messages.ts","webpack://chat-web/./src/widget/widget_main/components/Avatar/Avatar.tsx","webpack://chat-web/./src/widget/widget_main/components/Avatar/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/MessageThreadHeader/messageThreadHeader.scss?3d97","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/MessageThreadHeader/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/MessageThreadHeader/MessageThreadHeader.tsx","webpack://chat-web/./src/widget/widget_main/globals/assets/conversationsEmpty.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/offline.svg","webpack://chat-web/./src/widget/widget_main/components/TimeAgo/helpers.ts","webpack://chat-web/./src/widget/widget_main/components/TimeAgo/messages.ts","webpack://chat-web/./src/widget/widget_main/components/TimeAgo/index.ts","webpack://chat-web/./src/widget/widget_main/components/TimeAgo/TimeAgo.tsx","webpack://chat-web/./src/widget/widget_main/components/Unread/unread.scss?76f8","webpack://chat-web/./src/widget/widget_main/globals/session.ts","webpack://chat-web/./src/widget/widget_main/components/Unread/index.ts","webpack://chat-web/./src/widget/widget_main/components/Unread/Unread.tsx","webpack://chat-web/./src/widget/widget_main/app/helpers/assistant.ts","webpack://chat-web/./src/widget/widget_main/components/NewConversationButton/newConversationButton.scss?2f49","webpack://chat-web/./src/widget/widget_main/components/NewConversationButton/messages.ts","webpack://chat-web/./src/widget/widget_main/components/NewConversationButton/NewConversationButton.tsx","webpack://chat-web/./src/widget/widget_main/components/NewConversationButton/index.ts","webpack://chat-web/./src/widget/widget_main/components/Image/DecorativeImage.tsx","webpack://chat-web/./src/widget/widget_main/screens/Conversations/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/Conversations/conversations.scss?5b99","webpack://chat-web/./src/widget/widget_main/screens/Conversations/Conversations.tsx","webpack://chat-web/./src/widget/widget_main/screens/Conversations/index.ts","webpack://chat-web/./src/widget/widget_main/screens/Conversations/helpers.ts","webpack://chat-web/./src/helpers/viewport_meta_tag/index.ts","webpack://chat-web/./src/helpers/kustomer_api_iframe/index.ts","webpack://chat-web/./src/widget/widget_main/globals/hooks.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/chevronRight.svg","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/constants.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/ScrollToCurrent/scrollToCurrent.scss?b20e","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/ScrollToCurrent/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/ScrollToCurrent/ScrollToCurrent.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/ScrollToCurrent/index.tsx","webpack://chat-web/./src/widget/widget_main/globals/assets/pdfFile.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/filePresent.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/botSparkle.svg","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/ChatBubble/chatBubble.scss?bda4","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/ChatBubble/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/ChatBubble/ChatBubble.tsx","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/ChatBubble/index.ts","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/MediaPreviewModal/index.ts","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/messages.ts","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/mediaWithPreview.scss?0c98","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/MediaWithPreview.tsx","webpack://chat-web/./src/widget/widget_main/components/MediaWithPreview/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale/satisfactionMessageScale.scss?d16b","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale/constants.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale/SatisfactionMessageScale.tsx","webpack://chat-web/./src/widget/widget_main/components/ui/TextArea/textArea.scss?f20e","webpack://chat-web/./src/widget/widget_main/components/ui/TextArea/TextArea.tsx","webpack://chat-web/./src/widget/widget_main/components/ui/TextArea/index.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Checkbox/checkbox.scss?a539","webpack://chat-web/./src/widget/widget_main/components/ui/Checkbox/Checkbox.tsx","webpack://chat-web/./src/widget/widget_main/components/ui/Checkbox/index.ts","webpack://chat-web/./src/widget/widget_main/components/ui/Radio/radio.scss?664b","webpack://chat-web/./src/widget/widget_main/components/ui/Radio/Radio.tsx","webpack://chat-web/./src/widget/widget_main/globals/assets/checkCircle.svg","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/satisfactionMessageModal.scss?b5c5","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/helpers.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/SatisfactionMessageModal.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/constants.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/satisfactionMessage.scss?6467","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessage.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/SatisfactionMessage/index.ts","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/chatMessage.scss?ffa6","webpack://chat-web/./src/widget/widget_main/globals/assets/fileDocument.svg","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/TemplateMessage/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/TemplateMessage/templateMessage.scss?ee05","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/TemplateMessage/TemplateMessage.tsx","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/TemplateMessage/index.ts","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/ChatMessage.tsx","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ChatMessage/index.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/playBoxMultiple.svg","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentPreviews/helpers.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentPreviews/attachmentPreviews.scss?5beb","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentPreviews/messages.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentPreviews/index.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentPreviews/AttachmentPreviews.tsx","webpack://chat-web/./src/widget/widget_main/globals/assets/paperClip.svg","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentButton/constants.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentButton/attachmentButton.scss?60c3","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentButton/messages.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentButton/index.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/AttachmentButton/AttachmentButton.tsx","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/messageThreadInput.scss?6635","webpack://chat-web/./node_modules/emoji-picker-element/database.js","webpack://chat-web/./node_modules/emoji-picker-element/picker.js","webpack://chat-web/./src/widget/widget_main/globals/assets/emoticon-happy-outline.svg","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/EmojiPicker/messages.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/EmojiPicker/EmojiPicker.scss?a061","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/EmojiPicker/EmojiPicker.tsx","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/MessageThreadInput.tsx","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/messages.ts","webpack://chat-web/./src/widget/widget_main/components/MessageThreadInput/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/constants.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/MLLModal/mllModal.scss?73d6","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/MLLModal/MLLModal.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/MLLModal/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/MLLModal/helpers.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/imagePlaceholder.svg","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/helpers.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/ListAction/listAction.scss?33d6","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/ListAction/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/ListAction/ListAction.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/ListAction/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/templateActions.scss?2b20","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/TemplateActions.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/helpers.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/TemplateActions/index.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/messageThread.scss?0781","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/MessageThread.tsx","webpack://chat-web/./src/widget/widget_main/screens/MessageThread/index.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/articlesEmpty.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/folder.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/fileDocumentOutline.svg","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/KBSearchListItem/kbSearchListItem.scss?22d4","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/KBSearchListItem/KbSearchListItem.tsx","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/KBSearchListItem/index.ts","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/helpers.ts","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/kbSearchList.scss?75e0","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/messages.ts","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/KBSearchList.tsx","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/index.ts","webpack://chat-web/./src/widget/widget_main/screens/KBSearchList/constants.ts","webpack://chat-web/./src/widget/widget_main/globals/assets/kustomer-footer-logo.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/messageProcessing.svg","webpack://chat-web/./src/widget/widget_main/globals/assets/bookOpenPageVariant.svg","webpack://chat-web/./src/widget/widget_main/components/Footer/messages.ts","webpack://chat-web/./src/widget/widget_main/components/Footer/footer.scss?4f6a","webpack://chat-web/./src/widget/widget_main/components/Footer/FooterConsent/messages.ts","webpack://chat-web/./src/widget/widget_main/components/Footer/FooterConsent/footerConsent.scss?024f","webpack://chat-web/./src/widget/widget_main/components/Footer/FooterConsent/FooterConsent.tsx","webpack://chat-web/./src/widget/widget_main/components/Footer/FooterConsent/index.ts","webpack://chat-web/./src/widget/widget_main/components/Footer/Footer.tsx","webpack://chat-web/./src/widget/widget_main/components/Footer/index.ts","webpack://chat-web/./src/widget/widget_main/components/Widget/widget.scss?78fd","webpack://chat-web/./src/widget/widget_main/globals/assets/magnify.svg","webpack://chat-web/./src/widget/widget_main/components/KBHeader/kbHeader.scss?81c9","webpack://chat-web/./src/widget/widget_main/components/KBHeader/messages.ts","webpack://chat-web/./src/widget/widget_main/components/KBHeader/KBHeader.tsx","webpack://chat-web/./src/widget/widget_main/components/KBHeader/index.ts","webpack://chat-web/./src/widget/widget_main/screens/KBArticle/kbArticle.scss?bf0b","webpack://chat-web/./src/widget/widget_main/screens/KBArticle/KBArticle.tsx","webpack://chat-web/./src/widget/widget_main/components/Widget/messages.ts","webpack://chat-web/./src/widget/widget_main/components/FocusTrap/focusTrap.scss?cbec","webpack://chat-web/./src/widget/widget_main/components/FocusTrap/FocusTrap.tsx","webpack://chat-web/./src/widget/widget_main/components/Widget/Widget.tsx","webpack://chat-web/./src/widget/widget_main/components/Widget/index.ts","webpack://chat-web/./src/widget/widget_main/components/ChatRootIcon/chatRootIcon.scss?16f1","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/proactivePopup.scss?6ea0","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatMessage/proactiveChatMessage.scss?7f89","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/CloseProactiveChatButton/closeProactiveChatButton.scss?6449","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/CloseProactiveChatButton/messages.ts","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/CloseProactiveChatButton/CloseProactiveChatButton.tsx","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatMessage/ProactiveChatMessage.tsx","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatInput/proactiveChatInput.scss?073d","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatInput/helpers.ts","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactiveChatInput/ProactiveChatInput.tsx","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/ProactivePopup.tsx","webpack://chat-web/./src/widget/widget_main/components/ProactivePopup/helpers.ts","webpack://chat-web/./src/widget/widget_main/components/ChatRootIcon/ChatRootIcon.tsx","webpack://chat-web/./src/widget/widget_main/components/ChatRootIcon/index.ts","webpack://chat-web/./src/helpers/browser/index.ts","webpack://chat-web/./src/widget/widget_main/app/polling.ts","webpack://chat-web/./src/helpers/kustomer_api_iframe/helpers.ts","webpack://chat-web/./src/widget/widget_main/app/messages.ts","webpack://chat-web/./src/widget/widget_main/app/helpers/api.ts","webpack://chat-web/./src/widget/widget_main/app/helpers/message.ts","webpack://chat-web/./src/widget/widget_main/app/App.tsx","webpack://chat-web/./src/globals/iframeMessages.ts","webpack://chat-web/./src/widget/widget_api/constants.ts","webpack://chat-web/./src/widget/widget_main/app/index.ts","webpack://chat-web/./src/widget/widget_main/styles/base.scss?868c","webpack://chat-web/./src/widget/widget_main/index.tsx","webpack://chat-web/./src/widget/widget_main/globals/themes/index.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? function(obj) { return Object.getPrototypeOf(obj); } : function(obj) { return obj.__proto__; };\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; typeof current == 'object' && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach(function(key) { def[key] = function() { return value[key]; }; });\n\t}\n\tdef['default'] = function() { return value; };\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","var inProgress = {};\nvar dataWebpackPrefix = \"chat-web:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = function(url, done, key, chunkId) {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = function(prev, event) {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach(function(fn) { return fn(event); });\n\t\tif(prev) return prev(event);\n\t}\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString === Object.prototype.toString) {\n\t\t\t\t\tfor (var key in arg) {\n\t\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".avatar__avatar___6-N\\\\+m{border-radius:50%;overflow:hidden}.avatar__customImg___P8f5Z{width:100%;height:100%;background-size:100%;display:initial}.avatar__hideImg___OtZCK{display:none}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"avatar\": \"avatar__avatar___6-N+m\",\n\t\"customImg\": \"avatar__customImg___P8f5Z\",\n\t\"hideImg\": \"avatar__hideImg___OtZCK\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".chatIcon__chatIcon___7jaa5{width:100%;height:100%;background-repeat:no-repeat;background-position:center center}.chatIcon__chatIcon___7jaa5.chatIcon__pointer___nVps2{cursor:pointer}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"chatIcon\": \"chatIcon__chatIcon___7jaa5\",\n\t\"pointer\": \"chatIcon__pointer___nVps2\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".chatBubble__chatBubble___3Sk1b{max-width:250px;border-radius:18px;padding:10px;overflow-wrap:break-word}.chatBubble__chatBubble___3Sk1b ul{margin-left:20px}.chatBubble__chatBubble___3Sk1b ol{margin-left:20px}.chatBubble__chatBubble___3Sk1b img{width:100%}.chatBubble__inbound___tuLth,.chatBubble__outbound___4CScV{display:flex;flex-direction:column;margin-bottom:5px;direction:ltr}.chatBubble__messageMeta___jJ9Y3{margin-top:5px;display:flex;align-items:center;font-size:12px;color:#717070}.chatBubble__botSparkle___x\\\\+riV{margin:5px 5px 0 0}.chatBubble__separator___i07q9{margin:0 5px}.chatBubble__optimisticError___iugjw{color:red;font-size:12px;margin-top:5px}.chatBubble__inbound___tuLth .chatBubble__avatarAndBubble___cNYb\\\\+{display:flex;align-items:flex-end}.chatBubble__inbound___tuLth .chatBubble__chatBubble___3Sk1b{background-color:var(--agent-bubble-background-color);box-shadow:0 2px 6px 0 rgba(201,201,201,.5);margin-left:35px;color:var(--agent-bubble-primary-font-color)}.chatBubble__inbound___tuLth .chatBubble__chatBubble___3Sk1b.chatBubble__showAvatar___wd2Xf{margin-left:0}.chatBubble__inbound___tuLth .chatBubble__messageMeta___jJ9Y3{margin-left:35px}.chatBubble__inbound___tuLth a{color:#006cec}.chatBubble__identifier___b5gF6 strong{font-weight:600}.chatBubble__outbound___4CScV{justify-content:flex-end;align-items:flex-end}.chatBubble__outbound___4CScV .chatBubble__chatBubble___3Sk1b{background-color:var(--customer-bubble-background-color);color:var(--customer-bubble-primary-font-color)}.chatBubble__avatarWrapper___dG-3L{margin-right:5px}html[dir=\\\"rtl\\\"] .chatBubble__botSparkle___x\\\\+riV .chatBubble__chatBubble___3Sk1b,html[dir=\\\"rtl\\\"] .chatBubble__inbound___tuLth .chatBubble__chatBubble___3Sk1b,html[dir=\\\"rtl\\\"] .chatBubble__outbound___4CScV .chatBubble__chatBubble___3Sk1b{direction:rtl}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"chatBubble\": \"chatBubble__chatBubble___3Sk1b\",\n\t\"inbound\": \"chatBubble__inbound___tuLth\",\n\t\"outbound\": \"chatBubble__outbound___4CScV\",\n\t\"messageMeta\": \"chatBubble__messageMeta___jJ9Y3\",\n\t\"botSparkle\": \"chatBubble__botSparkle___x+riV\",\n\t\"separator\": \"chatBubble__separator___i07q9\",\n\t\"optimisticError\": \"chatBubble__optimisticError___iugjw\",\n\t\"avatarAndBubble\": \"chatBubble__avatarAndBubble___cNYb+\",\n\t\"showAvatar\": \"chatBubble__showAvatar___wd2Xf\",\n\t\"identifier\": \"chatBubble__identifier___b5gF6\",\n\t\"avatarWrapper\": \"chatBubble__avatarWrapper___dG-3L\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".templateMessage__isLastInStreak___ji7d-{margin-bottom:10px}.templateMessage__kbArticlesChatBubble___Y-7xa{padding:0;display:flex;flex-direction:column;width:250px;background-color:#fff !important}.templateMessage__kbArticle___gRggj{display:flex;align-items:center;cursor:pointer;padding:10px;border-bottom:.5px solid #e9eff5}.templateMessage__kbArticle___gRggj:hover{background-color:#f3f5f8}.templateMessage__kbArticle___gRggj:focus{background-color:#f3f5f8}.templateMessage__articleDetails___Gttjs{flex-grow:1;overflow:hidden}.templateMessage__articleTitle___v1ASk{color:var(--primary-button-background-color);text-overflow:ellipsis;white-space:nowrap;overflow:hidden}@supports(-webkit-line-clamp: 2){.templateMessage__articleTitle___v1ASk{white-space:initial;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}}.templateMessage__articleDescription___h12fl{color:#717070;font-size:12px;text-overflow:ellipsis;white-space:nowrap}.templateMessage__articleIcon___2e8FH{color:#717070;display:flex;align-items:center;margin:0 10px 0 0;flex-shrink:0}.templateMessage__chevronRight___6N3rJ{color:#717070;flex-shrink:0}html[dir=\\\"rtl\\\"] .templateMessage__articleIcon___2e8FH{margin:0 0 0 10px}.templateMessage__kbInlineArticleHolder___pTJLG{margin-top:10px;display:flex;row-gap:5px;column-gap:10px;flex-wrap:wrap}.templateMessage__kbInlineArticleHolder___pTJLG .templateMessage__related___eRaR\\\\+{flex:0 0 auto;color:#697182}.templateMessage__kbInlineArticleHolder___pTJLG .templateMessage__button___dTOMF{display:flex;align-items:center;border:1px solid #e9eff5;border-radius:8px;padding:2px 5px;gap:5px;cursor:pointer}.templateMessage__kbInlineArticleHolder___pTJLG .templateMessage__button___dTOMF .templateMessage__icon___992mQ{display:flex;justify-content:center;align-items:center;color:#0047b9}.templateMessage__kbInlineArticleHolder___pTJLG .templateMessage__button___dTOMF .templateMessage__details___pe065{overflow:hidden;color:#0047b9}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"isLastInStreak\": \"templateMessage__isLastInStreak___ji7d-\",\n\t\"kbArticlesChatBubble\": \"templateMessage__kbArticlesChatBubble___Y-7xa\",\n\t\"kbArticle\": \"templateMessage__kbArticle___gRggj\",\n\t\"articleDetails\": \"templateMessage__articleDetails___Gttjs\",\n\t\"articleTitle\": \"templateMessage__articleTitle___v1ASk\",\n\t\"articleDescription\": \"templateMessage__articleDescription___h12fl\",\n\t\"articleIcon\": \"templateMessage__articleIcon___2e8FH\",\n\t\"chevronRight\": \"templateMessage__chevronRight___6N3rJ\",\n\t\"kbInlineArticleHolder\": \"templateMessage__kbInlineArticleHolder___pTJLG\",\n\t\"related\": \"templateMessage__related___eRaR+\",\n\t\"button\": \"templateMessage__button___dTOMF\",\n\t\"icon\": \"templateMessage__icon___992mQ\",\n\t\"details\": \"templateMessage__details___pe065\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".chatMessage__satisfactionBubble___xKYlb{max-width:initial;padding:initial}.chatMessage__isLastInStreak___847Fe{margin-bottom:10px}.chatMessage__attachment___JfAOM{margin-top:15px}.chatMessage__attachmentWithoutMessage___6OTMa:first-of-type{margin-top:0}.chatMessage__mediaPreview___fbeM9{min-width:120px;max-width:230px;height:120px;border-radius:8px;background-size:cover;background-position:center center;background-repeat:no-repeat;display:flex;align-items:center;justify-content:center;cursor:zoom-in}.chatMessage__filePreview___AtKgP{display:flex;align-items:center;word-break:break-all}.chatMessage__pdfIcon___52l1j{margin:0 5px 0 0}@keyframes chatMessage__indicator-delay___A\\\\+jji{0%,80%,to{transform:scale(0);-webkit-transform:scale(0)}40%{transform:scale(1);-webkit-transform:scale(1)}}.chatMessage__aiAssistantTypingIndicator___TXJyb>div{background-color:#006cec !important}.chatMessage__typingIndicator___kKdL\\\\+>div{width:9px;height:9px;background-color:#717070;border-radius:100%;display:inline-block;animation:chatMessage__indicator-delay___A\\\\+jji 1.4s infinite ease-in-out;animation-fill-mode:both;margin:0 0 0 6px}.chatMessage__typingIndicator___kKdL\\\\+>div:first-child{width:4px;height:4px;opacity:.5;animation-delay:-0.32s}.chatMessage__typingIndicator___kKdL\\\\+>div:nth-child(2){width:6px;height:6px;opacity:.8;animation-delay:-0.16s}.chatMessage__retryMessage___ub5P4{cursor:pointer}.chatMessage__visuallyHidden___RtwUP{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important}html[dir=\\\"rtl\\\"] .chatMessage__filePreview___AtKgP{direction:rtl}html[dir=\\\"rtl\\\"] .chatMessage__pdfIcon___52l1j{margin:0 0 0 5px}html[dir=\\\"rtl\\\"] .chatMessage__typingIndicator___kKdL\\\\+>div{margin:0 6px 0 0}.chatMessage__newMessageDivider___L2Zc8{display:flex;justify-content:space-between;align-content:center;margin:15px 0 10px;font-size:12px;color:#717070;text-align:center}.chatMessage__newMessageDividerText___fwn1w{margin-top:-8px;padding:0 15px;background:#fff;min-width:35%}.chatMessage__newMessageDividerLine___8v3Ay{border-top:1px #717070 solid;flex-grow:1}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"satisfactionBubble\": \"chatMessage__satisfactionBubble___xKYlb\",\n\t\"isLastInStreak\": \"chatMessage__isLastInStreak___847Fe\",\n\t\"attachment\": \"chatMessage__attachment___JfAOM\",\n\t\"attachmentWithoutMessage\": \"chatMessage__attachmentWithoutMessage___6OTMa\",\n\t\"mediaPreview\": \"chatMessage__mediaPreview___fbeM9\",\n\t\"filePreview\": \"chatMessage__filePreview___AtKgP\",\n\t\"pdfIcon\": \"chatMessage__pdfIcon___52l1j\",\n\t\"aiAssistantTypingIndicator\": \"chatMessage__aiAssistantTypingIndicator___TXJyb\",\n\t\"typingIndicator\": \"chatMessage__typingIndicator___kKdL+\",\n\t\"indicator-delay\": \"chatMessage__indicator-delay___A+jji\",\n\t\"retryMessage\": \"chatMessage__retryMessage___ub5P4\",\n\t\"visuallyHidden\": \"chatMessage__visuallyHidden___RtwUP\",\n\t\"newMessageDivider\": \"chatMessage__newMessageDivider___L2Zc8\",\n\t\"newMessageDividerText\": \"chatMessage__newMessageDividerText___fwn1w\",\n\t\"newMessageDividerLine\": \"chatMessage__newMessageDividerLine___8v3Ay\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".chatRootIcon__chatIconWrapper___clZcp{display:flex;justify-content:center;align-items:center;position:relative;padding:10px;transition:transform 150ms ease-in-out 0s;filter:drop-shadow(rgba(0, 0, 0, 0.3) 1px 1px 3px)}.chatRootIcon__chatIconWrapper___clZcp:hover{transform:translateY(-4px) scale(1.04)}.chatRootIcon__pointer___QslJf{cursor:pointer}@keyframes chatRootIcon__bounce___bIU9S{0%{transform:scale(1)}50%{transform:translateY(-4px) scale(1.04)}100%{transform:scale(1)}}.chatRootIcon__proactivePopupActive___kYx8Y{animation-name:chatRootIcon__bounce___bIU9S;animation-duration:500ms;animation-timing-function:ease-in-out}.chatRootIcon__proactivePopupWrapper___OBAgl{display:flex;flex-direction:column}.chatRootIcon__unreadProp___oFBiW{position:absolute;top:6px;right:7px;background-color:var(--primary-button-background-color)}html[dir=\\\"rtl\\\"] .chatRootIcon__unreadProp___oFBiW{left:7px;right:initial}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"chatIconWrapper\": \"chatRootIcon__chatIconWrapper___clZcp\",\n\t\"pointer\": \"chatRootIcon__pointer___QslJf\",\n\t\"proactivePopupActive\": \"chatRootIcon__proactivePopupActive___kYx8Y\",\n\t\"bounce\": \"chatRootIcon__bounce___bIU9S\",\n\t\"proactivePopupWrapper\": \"chatRootIcon__proactivePopupWrapper___OBAgl\",\n\t\"unreadProp\": \"chatRootIcon__unreadProp___oFBiW\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".errorBoundary__container___EVs\\\\+k{height:100%;width:100%;display:flex;justify-content:center;align-items:center;flex-direction:column;text-align:center;padding:10px}.errorBoundary__header___wTTIv{color:#222;font-weight:500;margin:50px 20px 10px;font-size:16px}.errorBoundary__subHeader___SXEdk{color:#717070;font-size:12px}.errorBoundary__refreshButton___NriPn{margin-top:25px;width:200px;height:36px;font-size:16px;box-shadow:0 2px 6px 0 rgba(201,201,201,.5)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"container\": \"errorBoundary__container___EVs+k\",\n\t\"header\": \"errorBoundary__header___wTTIv\",\n\t\"subHeader\": \"errorBoundary__subHeader___SXEdk\",\n\t\"refreshButton\": \"errorBoundary__refreshButton___NriPn\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".focusTrap__focusTrap___9TZVN{position:relative;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"focusTrap\": \"focusTrap__focusTrap___9TZVN\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".footerConsent__separator___V42r4{margin:0 10px}body.shop .footerConsent__separator___V42r4{display:none}.footerConsent__consent___4QZMb{font-weight:normal;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;background:none;border:0 none;padding:0;cursor:default}.footerConsent__footerTooltipContainer___vCYa0{position:absolute;bottom:30px;left:0;width:100%}.footerConsent__footerTooltipContent___5mmPn{position:relative;display:block;width:237px;padding:5px;margin:0 auto;background:#1f242d;border:0 none;text-align:left;border-radius:3px}.footerConsent__footerTooltipContentClicked___U\\\\+Csf{width:222px;padding:5px 20px 5px 5px}.footerConsent__footerTooltip___QZlNr{color:#fff;font-weight:normal;font-size:12px}.footerConsent__footerTooltip___QZlNr::after{top:100%;left:50%;content:\\\"\\\";height:0;width:0;position:absolute;pointer-events:none;border-style:solid;border-color:rgba(31,36,45,0);border-top-color:#1f242d;border-width:4px;margin-left:-4px}.footerConsent__closeButton___DqUX2{position:absolute;top:0;right:0}.footerConsent__closeButton___DqUX2 svg{color:#fff}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"separator\": \"footerConsent__separator___V42r4\",\n\t\"consent\": \"footerConsent__consent___4QZMb\",\n\t\"footerTooltipContainer\": \"footerConsent__footerTooltipContainer___vCYa0\",\n\t\"footerTooltipContent\": \"footerConsent__footerTooltipContent___5mmPn\",\n\t\"footerTooltipContentClicked\": \"footerConsent__footerTooltipContentClicked___U+Csf\",\n\t\"footerTooltip\": \"footerConsent__footerTooltip___QZlNr\",\n\t\"closeButton\": \"footerConsent__closeButton___DqUX2\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".footer__footer___MMHBz{display:flex;justify-content:center;align-items:center;height:25px;flex-shrink:0;font-size:10px;font-weight:500;color:#717070;gap:20px}body.shop .footer__footer___MMHBz>div:first-child{display:none}body.shop .footer__footer___MMHBz:not(:has(button)){display:none}.footer__footerNavigation___dgKul{font-weight:500;display:flex;justify-content:space-around;align-items:center;cursor:pointer}.footer__icon___bbLQ5{width:18px;height:18px}.footer__itemContainer___i7b3T{display:flex;flex-direction:column;width:50%;align-items:center;justify-content:center;color:#717070;border-top:.5px solid #e9eff5;padding-top:10px;padding-bottom:5px;height:100%}.footer__itemContainer___i7b3T:hover{color:#27353b}.footer__highlighted___cJheK{border-top:2px solid #27353b;color:#27353b;background-color:#fff}.footer__chatContainer___j-p2I{position:relative;display:flex;gap:5px}.footer__unread___jaE1P{height:16px;width:16px;min-width:10px;background-color:red;text-align:center}.footer__footerContainer___\\\\+Vavx{margin-top:auto}html[dir=\\\"rtl\\\"] .footer__icon___bbLQ5{margin:0 0 0 10px;transform:scaleX(-1)}html[dir=\\\"rtl\\\"] .footer__chatContainer___j-p2I,html[dir=\\\"rtl\\\"] .footer__itemContainer___i7b3T{flex-direction:row-reverse}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"footer\": \"footer__footer___MMHBz\",\n\t\"footerNavigation\": \"footer__footerNavigation___dgKul\",\n\t\"icon\": \"footer__icon___bbLQ5\",\n\t\"itemContainer\": \"footer__itemContainer___i7b3T\",\n\t\"highlighted\": \"footer__highlighted___cJheK\",\n\t\"chatContainer\": \"footer__chatContainer___j-p2I\",\n\t\"unread\": \"footer__unread___jaE1P\",\n\t\"footerContainer\": \"footer__footerContainer___+Vavx\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kbHeader__kbHeader___kf-zd{background-color:var(--header-background-color);width:100%;border-bottom:.5px solid #e9eff5;padding:0 15px 15px 15px}.kbHeader__content___54Vks{display:flex;flex-direction:column;align-items:center;text-align:center}.kbHeader__chatIconWrapper___NIrj2{margin-top:25px;border-radius:50%}.kbHeader__currentView___8ADKV{min-height:76px;display:flex;align-items:center;justify-content:center;background-color:var(--header-background-color);border-bottom:.5px solid #e9eff5}.kbHeader__header___4Ukry{line-height:normal;margin:5px;color:var(--header-font-primary-color);font-size:16px;font-weight:500}.kbHeader__inputContainer___Xcg0j{width:100%;position:relative;margin-top:15px;margin-bottom:20px}.kbHeader__articleSearchInput___1CnmM{width:100%;height:40px;padding:10px 70px 10px 15px;border-radius:8px;border:.5px solid #e9eff5;background-color:#fff}.kbHeader__articleSearchInput___1CnmM:focus{background-color:#fff;box-shadow:0 2px 6px 0 rgba(201,201,201,.5)}.kbHeader__articleSearchInput___1CnmM::-ms-clear{display:none;height:0;width:0}.kbHeader__clearIcon___09Kyj,.kbHeader__searchIcon___3k78o{position:absolute;top:8px;color:#717070;cursor:pointer}.kbHeader__clearIcon___09Kyj{width:23px;right:40px}.kbHeader__searchIcon___3k78o{width:23px;right:15px}.kbHeader__resultsCount___CPzZI{color:var(--header-font-secondary-color);font-size:12px;align-self:flex-start}.kbHeader__highlighted___w6o9c{color:#006cec}html[dir=\\\"rtl\\\"] .kbHeader__articleSearchInput___1CnmM{padding:10px 15px 10px 70px}html[dir=\\\"rtl\\\"] .kbHeader__clearIcon___09Kyj{right:initial;left:50px}html[dir=\\\"rtl\\\"] .kbHeader__searchIcon___3k78o{right:initial;left:15px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"kbHeader\": \"kbHeader__kbHeader___kf-zd\",\n\t\"content\": \"kbHeader__content___54Vks\",\n\t\"chatIconWrapper\": \"kbHeader__chatIconWrapper___NIrj2\",\n\t\"currentView\": \"kbHeader__currentView___8ADKV\",\n\t\"header\": \"kbHeader__header___4Ukry\",\n\t\"inputContainer\": \"kbHeader__inputContainer___Xcg0j\",\n\t\"articleSearchInput\": \"kbHeader__articleSearchInput___1CnmM\",\n\t\"clearIcon\": \"kbHeader__clearIcon___09Kyj\",\n\t\"searchIcon\": \"kbHeader__searchIcon___3k78o\",\n\t\"resultsCount\": \"kbHeader__resultsCount___CPzZI\",\n\t\"highlighted\": \"kbHeader__highlighted___w6o9c\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".markdown__markdownBody___dH3bf p,.markdown__markdownBody___dH3bf ol,.markdown__markdownBody___dH3bf ul{margin-bottom:20px}.markdown__markdownBody___dH3bf ul,.markdown__markdownBody___dH3bf ol{margin-top:20px}.markdown__markdownBody___dH3bf p:last-child{margin-bottom:0}.markdown__markdownBody___dH3bf img{cursor:zoom-in}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"markdownBody\": \"markdown__markdownBody___dH3bf\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mediaWithPreview__videoPoster___ucpQv{max-width:120px;max-height:120px;border-radius:8px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"videoPoster\": \"mediaWithPreview__videoPoster___ucpQv\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachmentButton__attachmentButton___sL2gk{cursor:pointer;margin-top:5px;opacity:.8}.attachmentButton__attachmentButton___sL2gk:hover:enabled{opacity:1}.attachmentButton__fileInput___eUirA{display:none}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"attachmentButton\": \"attachmentButton__attachmentButton___sL2gk\",\n\t\"fileInput\": \"attachmentButton__fileInput___eUirA\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attachmentPreviews__attachments___aHbjI{padding:15px;display:flex;overflow-x:auto}.attachmentPreviews__attachment___9HyeJ{position:relative;margin:0 15px 0 0}.attachmentPreviews__imagePreview___Mx4I\\\\+,.attachmentPreviews__file___7jJMZ{height:60px;border-radius:8px;border:1px solid #e9eff5}.attachmentPreviews__file___7jJMZ{width:160px;padding:10px 5px;display:flex;align-items:center}.attachmentPreviews__file___7jJMZ .attachmentPreviews__pdfIcon___qinHK{color:#27353b;margin:0 5px 0 0;flex-shrink:0}.attachmentPreviews__file___7jJMZ .attachmentPreviews__pdfDetails___AbecK{font-size:11px}.attachmentPreviews__file___7jJMZ .attachmentPreviews__fileName___QqVvR{width:110px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.attachmentPreviews__file___7jJMZ .attachmentPreviews__fileSize___0JBoe{color:#717070}.attachmentPreviews__imagePreview___Mx4I\\\\+{width:60px;background-size:cover;background-position:center center;background-repeat:no-repeat}.attachmentPreviews__removeAttachmentButton___WGpcI{border-radius:50%;width:18px;height:18px;position:absolute;top:-9px;right:-9px;display:flex;align-items:center;justify-content:center;padding:3px}.attachmentPreviews__closeIcon___J-YPh{width:100%;height:100%}html[dir=\\\"rtl\\\"] .attachmentPreviews__attachment___9HyeJ{margin:0 0 0 15px}html[dir=\\\"rtl\\\"] .attachmentPreviews__pdfIcon___qinHK{margin:0 0 0 5px}html[dir=\\\"rtl\\\"] .attachmentPreviews__removeAttachmentButton___WGpcI{left:-9px;right:initial}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"attachments\": \"attachmentPreviews__attachments___aHbjI\",\n\t\"attachment\": \"attachmentPreviews__attachment___9HyeJ\",\n\t\"imagePreview\": \"attachmentPreviews__imagePreview___Mx4I+\",\n\t\"file\": \"attachmentPreviews__file___7jJMZ\",\n\t\"pdfIcon\": \"attachmentPreviews__pdfIcon___qinHK\",\n\t\"pdfDetails\": \"attachmentPreviews__pdfDetails___AbecK\",\n\t\"fileName\": \"attachmentPreviews__fileName___QqVvR\",\n\t\"fileSize\": \"attachmentPreviews__fileSize___0JBoe\",\n\t\"removeAttachmentButton\": \"attachmentPreviews__removeAttachmentButton___WGpcI\",\n\t\"closeIcon\": \"attachmentPreviews__closeIcon___J-YPh\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".EmojiPicker__tooltip___z2dby{position:absolute;left:50%;bottom:55px;transform:translate(-50%);height:270px;box-shadow:0 2px 10px 0 #bdbdbd;border-radius:4px;background:#fff;padding:4px 8px;z-index:1}.EmojiPicker__emojiIconButton___eJCry{margin-top:5px;background-color:#fff;cursor:pointer;opacity:.8;padding:0 0 0 2px}emoji-picker{--background: $backgroundPrimaryColor;--emoji-size: 1.5rem;--num-columns: 6;width:100%;height:100%}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"tooltip\": \"EmojiPicker__tooltip___z2dby\",\n\t\"emojiIconButton\": \"EmojiPicker__emojiIconButton___eJCry\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".messageThreadInput__submitButton___I6zgd{border-radius:50%;width:35px;height:35px;display:flex;justify-content:center;align-items:center}.messageThreadInput__submitButton___I6zgd:not(:enabled){background-color:#717070}.messageThreadInput__messageInput___WEWbK{position:relative;max-height:250px;background-color:#fff;margin:0 10px 10px 10px;border-radius:12px;display:flex;flex-direction:column;flex-shrink:0;color:#717070;border:1px solid #dce0e9}.messageThreadInput__messageInput___WEWbK.messageThreadInput__hasError___kppkZ{border-top:1px solid red;border-bottom:1px solid red}.messageThreadInput__messageInput___WEWbK.messageThreadInput__isInputHidden___l0L-9{display:none}.messageThreadInput__messageInput___WEWbK:focus-within{color:inherit}.messageThreadInput__messageInput___WEWbK:focus-within .messageThreadInput__submitButton___I6zgd{background-color:var(--primary-button-background-color)}.messageThreadInput__messageInput___WEWbK:focus-within .messageThreadInput__submitButton___I6zgd:hover:enabled{background-color:var(--primary-button-background-hover-color)}.messageThreadInput__attachmentsPreview___93BEy{display:flex}.messageThreadInput__lowerSection___J5zCP{width:100%;display:flex;align-items:center;padding:5px 10px 5px 10px}.messageThreadInput__textArea___8Uzlh{flex-grow:1;margin:0 5px;min-height:20px;height:20px;max-height:160px;display:flex;border:none;align-items:center;justify-content:center;line-height:1.2;overflow:hidden}.messageThreadInput__sendIcon___-ChR9{width:20px;height:20px;margin:0 0 0 2px}html[dir=\\\"rtl\\\"] .messageThreadInput__sendIcon___-ChR9{transform:rotate(180deg);margin:0 2px 0 0}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"submitButton\": \"messageThreadInput__submitButton___I6zgd\",\n\t\"messageInput\": \"messageThreadInput__messageInput___WEWbK\",\n\t\"hasError\": \"messageThreadInput__hasError___kppkZ\",\n\t\"isInputHidden\": \"messageThreadInput__isInputHidden___l0L-9\",\n\t\"attachmentsPreview\": \"messageThreadInput__attachmentsPreview___93BEy\",\n\t\"lowerSection\": \"messageThreadInput__lowerSection___J5zCP\",\n\t\"textArea\": \"messageThreadInput__textArea___8Uzlh\",\n\t\"sendIcon\": \"messageThreadInput__sendIcon___-ChR9\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".newConversationButton__newConversationButton___W7rWS{width:236px;height:40px;font-size:16px;box-shadow:0 2px 6px 0 rgba(201,201,201,.5)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"newConversationButton\": \"newConversationButton__newConversationButton___W7rWS\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".closeProactiveChatButton__closeProactiveChatButton___SfQp\\\\+{padding:2px;border-radius:30px;border:none;display:flex;align-items:center;justify-content:center;transform:translateY(40px);margin-bottom:-40px;opacity:0;transition:transform 700ms,opacity 700ms,margin 1ms 700ms}.closeProactiveChatButton__closeProactiveChatButtonWrapper___iD2uB{overflow:hidden;align-self:flex-end}@media all and (-ms-high-contrast: none){.closeProactiveChatButton__closeProactiveChatButton___SfQp\\\\+{margin-bottom:0;transform:none;transition:opacity 700ms}}html[dir=\\\"rtl\\\"] .closeProactiveChatButton__closeProactiveChatButtonWrapper___iD2uB{align-self:flex-start}body.align-chat-icon-left .closeProactiveChatButton__closeProactiveChatButtonWrapper___iD2uB{align-self:flex-start}html[dir=\\\"rtl\\\"] body.align-chat-icon-left .closeProactiveChatButton__closeProactiveChatButtonWrapper___iD2uB{align-self:flex-end}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"closeProactiveChatButton\": \"closeProactiveChatButton__closeProactiveChatButton___SfQp+\",\n\t\"closeProactiveChatButtonWrapper\": \"closeProactiveChatButton__closeProactiveChatButtonWrapper___iD2uB\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".proactiveChatInput__inputContainer___GW5jj{width:100%;flex:0;overflow:hidden;transition:flex 500ms ease-out;will-change:flex;margin-top:-2px;height:0}.proactiveChatInput__inputContainer___GW5jj.proactiveChatInput__expand___dJ5kD{flex:1;padding:2px;height:min-content}@media all and (-ms-high-contrast: none){.proactiveChatInput__inputContainer___GW5jj{opacity:0;transition:opacity 500ms ease-out;height:auto;flex:auto}.proactiveChatInput__inputContainer___GW5jj.proactiveChatInput__expand___dJ5kD{opacity:1;flex:auto;height:auto}.proactiveChatInput__inputContainer___GW5jj textarea{overflow:auto}}.proactiveChatInput__inputField___n48eh,.proactiveChatInput__templateActions___zw-Ok{overflow:hidden}.proactiveChatInput__inputField___n48eh{border-radius:10px;box-shadow:0 1px 4px rgba(0,0,0,.15),0 2px 4px rgba(0,0,0,.08)}.proactiveChatInput__templateActions___zw-Ok{padding:0;justify-content:flex-end}body.align-chat-icon-left .proactiveChatInput__templateActions___zw-Ok{justify-content:flex-start}html[dir=\\\"rtl\\\"] body.align-chat-icon-left .proactiveChatInput__templateActions___zw-Ok{justify-content:flex-end}html[dir=\\\"rtl\\\"] body.align-chat-icon-right .proactiveChatInput__templateActions___zw-Ok{align-items:flex-start}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"inputContainer\": \"proactiveChatInput__inputContainer___GW5jj\",\n\t\"expand\": \"proactiveChatInput__expand___dJ5kD\",\n\t\"inputField\": \"proactiveChatInput__inputField___n48eh\",\n\t\"templateActions\": \"proactiveChatInput__templateActions___zw-Ok\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".proactiveChatMessage__proactiveChatMessage___md3FK{opacity:0;display:flex;flex-direction:column;align-items:flex-end;margin-right:2px;cursor:pointer}.proactiveChatMessage__proactiveChatMessage___md3FK .proactiveChatMessage__chatBubble___PfYe4{box-shadow:0 1px 4px rgba(0,0,0,.15),0 2px 4px rgba(0,0,0,.08);max-width:262px;margin-left:0;margin-bottom:5px}.proactiveChatMessage__proactiveChatMessage___md3FK.proactiveChatMessage__fadeIn___8VB1H{opacity:1;transition:opacity 500ms}@media all and (-ms-high-contrast: none){.proactiveChatMessage__proactiveChatMessage___md3FK .proactiveChatMessage__chatBubble___PfYe4{width:100%}}body.align-chat-icon-left .proactiveChatMessage__proactiveChatMessage___md3FK{align-items:flex-start}body.align-chat-icon-left .proactiveChatMessage__chatBubble___PfYe4{border-bottom-right-radius:12px}html[dir=\\\"rtl\\\"] body.align-chat-icon-left .proactiveChatMessage__proactiveChatMessage___md3FK{align-items:flex-end}html[dir=\\\"rtl\\\"] body.align-chat-icon-right .proactiveChatMessage__proactiveChatMessage___md3FK{align-items:flex-start}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"proactiveChatMessage\": \"proactiveChatMessage__proactiveChatMessage___md3FK\",\n\t\"chatBubble\": \"proactiveChatMessage__chatBubble___PfYe4\",\n\t\"fadeIn\": \"proactiveChatMessage__fadeIn___8VB1H\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".proactivePopup__proactivePopup___wZ8uh{width:100%}.proactivePopup__proactivePopupWrapper___lfpDy{width:100%;padding:2px 12px 0 2px;display:flex;flex-direction:column;align-items:stretch;justify-content:flex-end}.proactivePopup__proactivePopupWrapper___lfpDy:hover .proactivePopup__showCloseButton___oIqwO,.proactivePopup__proactivePopupWrapper___lfpDy.proactivePopup__mobile___\\\\+8EbH .proactivePopup__showCloseButton___oIqwO{margin-bottom:10px;transform:translateY(0);transition:transform 700ms,opacity 700ms;opacity:1}@media all and (-ms-high-contrast: none){.proactivePopup__proactivePopupWrapper___lfpDy:hover .proactivePopup__showCloseButton___oIqwO,.proactivePopup__proactivePopupWrapper___lfpDy.proactivePopup__mobile___\\\\+8EbH .proactivePopup__showCloseButton___oIqwO{margin-bottom:0;transform:none;transition:opacity 700ms;opacity:1}}body.align-chat-icon-left .proactivePopup__proactivePopupWrapper___lfpDy{align-items:flex-start;padding-right:2px;padding-left:12px}html[dir=\\\"rtl\\\"] body.align-chat-icon-left .proactivePopup__proactivePopupWrapper___lfpDy{align-items:flex-end}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"proactivePopupIframeWidth\": \"276px\",\n\t\"proactivePopup\": \"proactivePopup__proactivePopup___wZ8uh\",\n\t\"proactivePopupWrapper\": \"proactivePopup__proactivePopupWrapper___lfpDy\",\n\t\"showCloseButton\": \"proactivePopup__showCloseButton___oIqwO\",\n\t\"mobile\": \"proactivePopup__mobile___+8EbH\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".titleBarButton__titleBarButton___2zJQU{cursor:pointer;border-radius:8px;padding:2px;display:flex;justify-content:center;align-items:center;color:var(--header-font-secondary-color);background-color:rgba(0,0,0,0)}.titleBarButton__titleBarButton___2zJQU:hover{background-color:rgba(118,118,118,.1)}.titleBarButton__titleBarButton___2zJQU:focus{background-color:rgba(118,118,118,.1)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"titleBarButton\": \"titleBarButton__titleBarButton___2zJQU\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".titleBarButtons__button___HyLvl{margin:0 0 0 5px}.titleBarButtons__backButton___K\\\\+RyP{position:absolute;margin:25px 15px}.titleBarButtons__right___nRidl{position:absolute;top:0;right:0;padding:15px;display:flex}.titleBarButtons__endChatQuestion___R2pAd{padding:10px;text-align:center}.titleBarButtons__modalButton___O-\\\\+kk{font-weight:500;height:40px;margin-top:15px}.titleBarButtons__cancelButton___Yvcuz{color:#717070}html[dir=\\\"rtl\\\"] .titleBarButtons__button___HyLvl{margin:0 5px 0 0}html[dir=\\\"rtl\\\"] .titleBarButtons__backButton___K\\\\+RyP{transform:rotate(180deg);margin:25px 15px}html[dir=\\\"rtl\\\"] .titleBarButtons__right___nRidl{left:0;right:initial}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"button\": \"titleBarButtons__button___HyLvl\",\n\t\"backButton\": \"titleBarButtons__backButton___K+RyP\",\n\t\"right\": \"titleBarButtons__right___nRidl\",\n\t\"endChatQuestion\": \"titleBarButtons__endChatQuestion___R2pAd\",\n\t\"modalButton\": \"titleBarButtons__modalButton___O-+kk\",\n\t\"cancelButton\": \"titleBarButtons__cancelButton___Yvcuz\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".unread__unread___k7MRf{border-radius:50%;font-size:10px;display:flex;align-items:center;justify-content:center;color:var(--primary-button-font-color);padding:3px;min-width:18px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"unread\": \"unread__unread___k7MRf\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".widget__widgetWrapper___gAToq{width:100%;height:100%;padding:12.5px}.widget__widgetWrapper___gAToq.widget__mobile___1R4aB{padding:0}.widget__widget___uExal{width:100%;height:100%;border-radius:8px;box-shadow:0 2px 10px 0 #bdbdbd;background-color:#fff;display:flex;flex-direction:column;overflow:hidden;position:relative}.widget__modalContainer___fJ8sh{position:relative;flex-grow:1;min-height:30px;display:flex;flex-direction:column}.widget__connectionContainer___zXQUC{min-height:40px;display:flex;align-items:center;justify-content:center;background-color:#ffccc9}.widget__wifiIcon___J0x5C{margin-right:10px;color:#717070}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"widgetWrapper\": \"widget__widgetWrapper___gAToq\",\n\t\"mobile\": \"widget__mobile___1R4aB\",\n\t\"widget\": \"widget__widget___uExal\",\n\t\"modalContainer\": \"widget__modalContainer___fJ8sh\",\n\t\"connectionContainer\": \"widget__connectionContainer___zXQUC\",\n\t\"wifiIcon\": \"widget__wifiIcon___J0x5C\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".button__button___TubGu{border-radius:8px}.button__button___TubGu[aria-disabled=true]{opacity:.7;cursor:default}.button__block___PNJTT{width:100%}.button__primary___8WBD3{background-color:var(--primary-button-background-color);color:var(--primary-button-font-color)}.button__primary___8WBD3:hover:not([aria-disabled=true]){background-color:var(--primary-button-background-hover-color)}.button__primary___8WBD3:focus:not([aria-disabled=true]){background-color:var(--primary-button-background-hover-color)}.button__secondary___9iJ7w{background-color:#717070;color:#fff}.button__secondary___9iJ7w:hover:not([aria-disabled=true]){background-color:#4d4d51}.button__danger___FR4Lt{background-color:#fff;border:1px solid red;color:red}.button__danger___FR4Lt:hover:not([aria-disabled=true]){background-color:red;color:#fff}.button__link___IysyO{padding:0;background-color:#fff;border:0;color:var(--primary-button-background-color)}.button__link___IysyO:hover:not([aria-disabled=true]){text-decoration:underline}.button__outlinePrimary___T54\\\\+y{border:1px solid var(--primary-button-background-color);color:var(--primary-button-background-color);background-color:#fff}.button__outlinePrimary___T54\\\\+y:hover:not([aria-disabled=true]){background-color:var(--primary-button-background-color);color:var(--primary-button-font-color)}.button__outlinePrimary___T54\\\\+y:focus:not([aria-disabled=true]){background-color:var(--primary-button-background-color);color:var(--primary-button-font-color)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"button__primary___8WBD3\",\n\t\"secondary\": \"button__secondary___9iJ7w\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"button\": \"button__button___TubGu\",\n\t\"block\": \"button__block___PNJTT\",\n\t\"danger\": \"button__danger___FR4Lt\",\n\t\"link\": \"button__link___IysyO\",\n\t\"outlinePrimary\": \"button__outlinePrimary___T54+y\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".checkbox__container___HA66S{display:flex;align-items:flex-start;margin:10px 0}.checkbox__label___cWvsQ{margin-top:1px;margin-left:5px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"container\": \"checkbox__container___HA66S\",\n\t\"label\": \"checkbox__label___cWvsQ\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@keyframes loader__animation-spinner___KLQeW{0%{transform:rotate(-360deg)}50%{transform:rotate(-180deg)}100%{transform:rotate(0deg)}}.loader__loader___kQxuj{width:35px;height:35px;border-radius:100%;border-width:1px;border-style:solid;border-image:initial;border-color:#717070 #717070 rgba(0,0,0,0);display:inline-block;animation:loader__animation-spinner___KLQeW 1s linear infinite;background:rgba(0,0,0,0) !important;margin-top:auto;margin-left:auto;margin-right:auto}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"loader\": \"loader__loader___kQxuj\",\n\t\"animation-spinner\": \"loader__animation-spinner___KLQeW\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".modal__container___YKj-W{position:absolute;top:0;width:100%;height:100%;background-color:rgba(0,0,0,.1);display:flex;flex-direction:column;justify-content:flex-end}.modal__modal___tYBpK{background-color:#fff;border-top-left-radius:12px;border-top-right-radius:12px;position:relative}.modal__body___XQSiE{padding:20px;width:100%}.modal__closeButton___ZLht4{position:absolute;top:10px;right:10px;z-index:100;color:#717070}html[dir=\\\"rtl\\\"] .modal__closeButton___ZLht4{right:initial;left:10px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"container\": \"modal__container___YKj-W\",\n\t\"modal\": \"modal__modal___tYBpK\",\n\t\"body\": \"modal__body___XQSiE\",\n\t\"closeButton\": \"modal__closeButton___ZLht4\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".radio__container___M4U\\\\+w{display:flex;align-items:flex-start;margin:10px 0}.radio__label___PNKu2{margin-left:10px;margin-top:1px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"container\": \"radio__container___M4U+w\",\n\t\"label\": \"radio__label___PNKu2\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".textArea__textArea___hSFnB{resize:none}.textArea__textArea___hSFnB:disabled{background-color:#fff}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"textArea\": \"textArea__textArea___hSFnB\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".conversationsHeader__conversationsHeader___-eXHO{background-color:var(--header-background-color);flex-shrink:0;overflow:hidden;width:100%;border-bottom:.5px solid #e9eff5;padding-bottom:5px}.conversationsHeader__content___V8xis{padding:0 35px 35px 35px;display:flex;flex-direction:column;align-items:center;text-align:center}.conversationsHeader__chatIconWrapper___SRhTT{margin-top:25px;border-radius:50%}.conversationsHeader__teamName___af2jA{font-size:16px;font-weight:500;margin:5px;color:var(--header-font-primary-color)}.conversationsHeader__greeting___UJAq3,.conversationsHeader__waitMessage___VaUQM{line-height:1.3;margin-top:5px;color:var(--header-font-secondary-color);width:100%}.conversationsHeader__waitMessage___VaUQM{font-size:12px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"conversationsHeader\": \"conversationsHeader__conversationsHeader___-eXHO\",\n\t\"content\": \"conversationsHeader__content___V8xis\",\n\t\"chatIconWrapper\": \"conversationsHeader__chatIconWrapper___SRhTT\",\n\t\"teamName\": \"conversationsHeader__teamName___af2jA\",\n\t\"greeting\": \"conversationsHeader__greeting___UJAq3\",\n\t\"waitMessage\": \"conversationsHeader__waitMessage___VaUQM\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".conversations__container___MOqV8{min-height:100px;flex-grow:1;overflow-y:auto}.conversations__conversationList___tN6hy{position:relative;padding-bottom:80px}.conversations__conversation___3vdYu{cursor:pointer;height:80px;background-color:#fff;padding:20px;display:flex;border-bottom:.5px solid #e9eff5}.conversations__conversation___3vdYu:hover{background-color:#f3f5f8}.conversations__conversation___3vdYu:focus{background-color:#f3f5f8}.conversations__preview___Y2S1u{color:#717070;text-overflow:ellipsis;overflow:hidden;padding:0 5px 0 0;white-space:nowrap}.conversations__preview___Y2S1u p,.conversations__preview___Y2S1u ol,.conversations__preview___Y2S1u ul{display:inline}.conversations__preview___Y2S1u p li,.conversations__preview___Y2S1u ol li,.conversations__preview___Y2S1u ul li{margin:0 0 0 5px;display:inline}.conversations__unreadConversation___cVzlf .conversations__preview___Y2S1u{color:#222}.conversations__endedConversation___M\\\\+4Ym{background-color:#fff}.conversations__avatar___PrPXw{margin:0 15px 0 0;flex-shrink:0}.conversations__conversationDetails___Hu2bH{display:flex;flex-direction:column;flex-grow:1;min-width:100px}.conversations__conversationHeader___HRTcd{display:flex;justify-content:space-between}.conversations__conversationHeader___HRTcd .conversations__agentName___Cszrk{font-weight:500;margin-bottom:5px}.conversations__conversationHeader___HRTcd .conversations__timestamp___mybbx{font-size:12px;color:#717070}.conversations__conversationBody___cKIkQ{display:flex;justify-content:space-between;align-items:center}.conversations__unreadProp___gqtzc{background-color:red}.conversations__createConversationButton___QB485{position:fixed;left:50%;margin:0 0 0 -118px;bottom:55px}.conversations__createConversationButtonWithNavigation___TRFFb{bottom:120px}.conversations__empty___fDecN{display:flex;flex-direction:column;align-items:center;text-align:center;padding:50px 20px 10px}.conversations__conversationsEmpty___npfks{min-height:146px}.conversations__offlineCustomImage___m2Icn{max-width:250px}.conversations__loaderWrapper___CYJ5q{position:absolute;bottom:0;right:0;left:0;display:flex;visibility:hidden}.conversations__loaderWrapper___CYJ5q .conversations__loader___nZy4F{margin-bottom:10px}.conversations__loaderWrapper___CYJ5q.conversations__showLoader___lk9C2{visibility:visible;transition:visibility ease-out .25s}.conversations__emptyTitle___T6H8w{font-size:16px;font-weight:500;margin:15px 0 10px}.conversations__emptySubtitle___VCKu2{font-size:12px;color:#717070}html[dir=\\\"rtl\\\"] .conversations__preview___Y2S1u{padding:0 0 0 5px}html[dir=\\\"rtl\\\"] .conversations__preview___Y2S1u ol li,html[dir=\\\"rtl\\\"] .conversations__preview___Y2S1u ul li{margin:0 5px 0 0}html[dir=\\\"rtl\\\"] .conversations__avatar___PrPXw{margin:0 0 0 15px}html[dir=\\\"rtl\\\"] .conversations__createConversationButton___QB485{right:50%;left:intitial;margin:0 -118px 0 0}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"container\": \"conversations__container___MOqV8\",\n\t\"conversationList\": \"conversations__conversationList___tN6hy\",\n\t\"conversation\": \"conversations__conversation___3vdYu\",\n\t\"preview\": \"conversations__preview___Y2S1u\",\n\t\"unreadConversation\": \"conversations__unreadConversation___cVzlf\",\n\t\"endedConversation\": \"conversations__endedConversation___M+4Ym\",\n\t\"avatar\": \"conversations__avatar___PrPXw\",\n\t\"conversationDetails\": \"conversations__conversationDetails___Hu2bH\",\n\t\"conversationHeader\": \"conversations__conversationHeader___HRTcd\",\n\t\"agentName\": \"conversations__agentName___Cszrk\",\n\t\"timestamp\": \"conversations__timestamp___mybbx\",\n\t\"conversationBody\": \"conversations__conversationBody___cKIkQ\",\n\t\"unreadProp\": \"conversations__unreadProp___gqtzc\",\n\t\"createConversationButton\": \"conversations__createConversationButton___QB485\",\n\t\"createConversationButtonWithNavigation\": \"conversations__createConversationButtonWithNavigation___TRFFb\",\n\t\"empty\": \"conversations__empty___fDecN\",\n\t\"conversationsEmpty\": \"conversations__conversationsEmpty___npfks\",\n\t\"offlineCustomImage\": \"conversations__offlineCustomImage___m2Icn\",\n\t\"loaderWrapper\": \"conversations__loaderWrapper___CYJ5q\",\n\t\"loader\": \"conversations__loader___nZy4F\",\n\t\"showLoader\": \"conversations__showLoader___lk9C2\",\n\t\"emptyTitle\": \"conversations__emptyTitle___T6H8w\",\n\t\"emptySubtitle\": \"conversations__emptySubtitle___VCKu2\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kbArticle__articleIframe___\\\\+6p2T{height:100%;width:100%;background-color:#fff;overflow:hidden}.kbArticle__articleContainer___OHVJ8{height:100%;width:100%;background-color:#fff;overflow:hidden}.kbArticle__loaderWrapper___w7ALp{height:100%;width:100%;display:flex;justify-content:center;align-items:center;background-color:#fff}.kbArticle__loader___\\\\+vnwK{margin-top:unset}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"articleIframe\": \"kbArticle__articleIframe___+6p2T\",\n\t\"articleContainer\": \"kbArticle__articleContainer___OHVJ8\",\n\t\"loaderWrapper\": \"kbArticle__loaderWrapper___w7ALp\",\n\t\"loader\": \"kbArticle__loader___+vnwK\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kbSearchListItem__itemContainer___xmnpE{display:flex;background-color:#fff;flex-grow:1;cursor:pointer;padding:0}.kbSearchListItem__itemContainer___xmnpE.kbSearchListItem__isLast___tncdA{border-bottom:.5px solid #e9eff5}.kbSearchListItem__itemContainer___xmnpE:hover{background-color:#f3f5f8}.kbSearchListItem__itemContainer___xmnpE:focus{background-color:#f3f5f8}.kbSearchListItem__container___czVaz{height:75px;width:100%;border-bottom:1px solid #e9eff5;padding:0 20px;display:flex;justify-content:space-between;align-items:center}.kbSearchListItem__container___czVaz.kbSearchListItem__isLast___tncdA{border-bottom:0}.kbSearchListItem__details___1sADg{display:flex;min-width:100px}.kbSearchListItem__itemIcon___fi-tX{margin:0 10px 0 0;color:#222;width:18px;height:18px;flex-shrink:0}.kbSearchListItem__information___FUnrJ{display:flex;flex-direction:column;white-space:nowrap;overflow:hidden}.kbSearchListItem__title___B9qqB{text-overflow:ellipsis;overflow:hidden;font-weight:500}.kbSearchListItem__description___wOUKK{font-size:12px;color:#717070;margin-top:10px;overflow:hidden;text-overflow:ellipsis}.kbSearchListItem__chevronIcon___HK\\\\+r2{color:#979797;flex-shrink:0}html[dir=\\\"rtl\\\"] .kbSearchListItem__itemContainer___xmnpE{padding:0 20px 0 0}html[dir=\\\"rtl\\\"] .kbSearchListItem__container___czVaz{padding:0 0 0 20px}html[dir=\\\"rtl\\\"] .kbSearchListItem__itemIcon___fi-tX{margin:0 0 0 10px}html[dir=\\\"rtl\\\"] .kbSearchListItem__chevronIcon___HK\\\\+r2{transform:rotate(180deg)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"itemContainer\": \"kbSearchListItem__itemContainer___xmnpE\",\n\t\"isLast\": \"kbSearchListItem__isLast___tncdA\",\n\t\"container\": \"kbSearchListItem__container___czVaz\",\n\t\"details\": \"kbSearchListItem__details___1sADg\",\n\t\"itemIcon\": \"kbSearchListItem__itemIcon___fi-tX\",\n\t\"information\": \"kbSearchListItem__information___FUnrJ\",\n\t\"title\": \"kbSearchListItem__title___B9qqB\",\n\t\"description\": \"kbSearchListItem__description___wOUKK\",\n\t\"chevronIcon\": \"kbSearchListItem__chevronIcon___HK+r2\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kbSearchList__list___w9Sz6{min-height:100px;flex-grow:1;overflow-y:auto}.kbSearchList__listLoading___Sxq9M{display:flex;align-items:center;justify-content:center;background-color:#fff}.kbSearchList__empty___26Swx{display:flex;flex-direction:column;align-items:center;text-align:center;padding:45px 20px 10px}.kbSearchList__articlesEmpty___ZzKSo{min-height:129px}.kbSearchList__emptyMessage___6F1p9{font-size:12px;margin-top:10px}.kbSearchList__maxResultsLabel___A5c5N{text-align:center;font-size:12px;padding:20px}.kbSearchList__headerContainer___2UbiF{background-color:#fff;padding:20px;border-bottom:1px solid #e9eff5}.kbSearchList__headerTitle___0hhbt{font-size:15px;font-weight:600}.kbSearchList__headerDescription___nwu51{color:#717070;margin-top:10px}.kbSearchList__loader___iANJO{margin:initial}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"list\": \"kbSearchList__list___w9Sz6\",\n\t\"listLoading\": \"kbSearchList__listLoading___Sxq9M\",\n\t\"empty\": \"kbSearchList__empty___26Swx\",\n\t\"articlesEmpty\": \"kbSearchList__articlesEmpty___ZzKSo\",\n\t\"emptyMessage\": \"kbSearchList__emptyMessage___6F1p9\",\n\t\"maxResultsLabel\": \"kbSearchList__maxResultsLabel___A5c5N\",\n\t\"headerContainer\": \"kbSearchList__headerContainer___2UbiF\",\n\t\"headerTitle\": \"kbSearchList__headerTitle___0hhbt\",\n\t\"headerDescription\": \"kbSearchList__headerDescription___nwu51\",\n\t\"loader\": \"kbSearchList__loader___iANJO\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".messageThreadHeader__messageThreadHeader___HkJKF{background-color:var(--header-background-color);min-height:76px;width:100%;padding:10px 65px 10px 45px;font-size:18px;display:flex;align-items:center;border-bottom:.5px solid #e9eff5;flex-wrap:wrap}.messageThreadHeader__avatar___9dQ-x{flex-shrink:0}.messageThreadHeader__info___sWSsw{margin:0 0 0 10px;display:flex;flex-direction:column}.messageThreadHeader__teamName___00zcO{font-weight:500;color:var(--header-font-primary-color)}.messageThreadHeader__waitMessage___ia8b7{font-size:12px;margin-top:10px;margin-bottom:10px;color:var(--header-font-secondary-color);line-height:normal;overflow-x:hidden;overflow-y:auto;text-overflow:ellipsis;display:none;justify-content:center;max-height:150px;padding:0 5px}.messageThreadHeader__waitMessage___ia8b7:not(:empty){display:flex;flex-basis:100%}html[dir=\\\"rtl\\\"] .messageThreadHeader__messageThreadHeader___HkJKF{padding:10px 45px 10px 65px}html[dir=\\\"rtl\\\"] .messageThreadHeader__info___sWSsw{margin:0 10px 0 0}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"messageThreadHeader\": \"messageThreadHeader__messageThreadHeader___HkJKF\",\n\t\"avatar\": \"messageThreadHeader__avatar___9dQ-x\",\n\t\"info\": \"messageThreadHeader__info___sWSsw\",\n\t\"teamName\": \"messageThreadHeader__teamName___00zcO\",\n\t\"waitMessage\": \"messageThreadHeader__waitMessage___ia8b7\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".satisfactionMessageModal__modal___gMiqF{display:flex;align-items:center;justify-content:center;flex-direction:column;width:100%;max-height:100%}.satisfactionMessageModal__modalBody___Z1JC5{overflow-y:auto}.satisfactionMessageModal__followupQuestions___\\\\+-6ay{padding:0 10px}.satisfactionMessageModal__questionContainer___iKnsk{margin:25px 0}.satisfactionMessageModal__questionLabel___JiuDQ{font-size:14px;color:#222;margin-bottom:10px}.satisfactionMessageModal__textArea___82j0D{height:90px;width:100%;border-radius:8px;padding:10px}.satisfactionMessageModal__submitButton___LAzas{width:100%;height:40px;margin-top:15px;font-size:16px;box-shadow:0 2px 6px 0 rgba(201,201,201,.5)}.satisfactionMessageModal__checkCircleIcon___N-cAz{width:50px;height:50px;color:#00bd67;margin-bottom:15px}.satisfactionMessageModal__requiredTag___cfmM-{color:red}.satisfactionMessageModal__successScreen___vh7fM{text-align:center}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"modal\": \"satisfactionMessageModal__modal___gMiqF\",\n\t\"modalBody\": \"satisfactionMessageModal__modalBody___Z1JC5\",\n\t\"followupQuestions\": \"satisfactionMessageModal__followupQuestions___+-6ay\",\n\t\"questionContainer\": \"satisfactionMessageModal__questionContainer___iKnsk\",\n\t\"questionLabel\": \"satisfactionMessageModal__questionLabel___JiuDQ\",\n\t\"textArea\": \"satisfactionMessageModal__textArea___82j0D\",\n\t\"submitButton\": \"satisfactionMessageModal__submitButton___LAzas\",\n\t\"checkCircleIcon\": \"satisfactionMessageModal__checkCircleIcon___N-cAz\",\n\t\"requiredTag\": \"satisfactionMessageModal__requiredTag___cfmM-\",\n\t\"successScreen\": \"satisfactionMessageModal__successScreen___vh7fM\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".satisfactionMessageScale__ratingOptionContainer___cV5eR{cursor:pointer;width:50px;height:50px;background-size:contain;background-repeat:no-repeat;display:inline-block}.satisfactionMessageScale__optionContainer___pbmLv{display:flex;width:100%;justify-content:space-around}.satisfactionMessageScale__labels___RDK7j{width:100%;display:flex;justify-content:space-between;margin:15px 0}.satisfactionMessageScale__container___fCjWW{width:115px;height:2.4em;overflow:hidden}.satisfactionMessageScale__label___xVz4-{color:var(--agent-bubble-secondary-font-color);display:block;display:-webkit-box;-webkit-box-orient:vertical;position:relative;overflow:hidden;text-overflow:ellipsis;-webkit-line-clamp:2;height:2.4em}.satisfactionMessageScale__label___xVz4-::after{content:\\\"...\\\";text-align:right;bottom:0;right:0;width:10%;display:block;position:absolute;height:1.2em;background:var(--agent-bubble-background-color);color:var(--agent-bubble-secondary-font-color)}@supports(-webkit-line-clamp: 1){.satisfactionMessageScale__label___xVz4-::after{display:none}}html[dir=\\\"rtl\\\"] .satisfactionMessageScale__optionContainer___pbmLv{direction:rtl}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"ratingOptionContainer\": \"satisfactionMessageScale__ratingOptionContainer___cV5eR\",\n\t\"optionContainer\": \"satisfactionMessageScale__optionContainer___pbmLv\",\n\t\"labels\": \"satisfactionMessageScale__labels___RDK7j\",\n\t\"container\": \"satisfactionMessageScale__container___fCjWW\",\n\t\"label\": \"satisfactionMessageScale__label___xVz4-\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".satisfactionMessage__container___rzXPT{display:flex;align-items:center;flex-direction:column;text-align:center;max-width:280px}.satisfactionMessage__satisfactionContainer___GQED9{padding:15px;width:100%}.satisfactionMessage__feedbackButton___qsBir{margin:0}.satisfactionMessage__changeFeedback___YKhNB{border-top:.5px solid #e9eff5;padding:15px 0}.satisfactionMessage__introduction___s4Ns3{font-size:14px;color:var(--agent-bubble-primary-font-color);font-weight:500}.satisfactionMessage__ratingPrompt___qW9Rb{font-size:12px;color:var(--agent-bubble-primary-font-color);margin:10px 0}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"container\": \"satisfactionMessage__container___rzXPT\",\n\t\"satisfactionContainer\": \"satisfactionMessage__satisfactionContainer___GQED9\",\n\t\"feedbackButton\": \"satisfactionMessage__feedbackButton___qsBir\",\n\t\"changeFeedback\": \"satisfactionMessage__changeFeedback___YKhNB\",\n\t\"introduction\": \"satisfactionMessage__introduction___s4Ns3\",\n\t\"ratingPrompt\": \"satisfactionMessage__ratingPrompt___qW9Rb\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".scrollToCurrent__scrollToCurrentContainer___AmN9i{position:sticky;bottom:0;display:flex;justify-content:center;margin-top:-34px}.scrollToCurrent__scrollToCurrentContainer___AmN9i.scrollToCurrent__scrollToContainerFadeIn___UYuUW{opacity:1;transition:opacity 100ms ease-out}.scrollToCurrent__scrollToCurrentContainer___AmN9i.scrollToCurrent__scrollToContainerFadeOut___bEAeV{opacity:0;transition:opacity 100ms ease-out;pointer-events:none}.scrollToCurrent__scrollToCurrent___qCF\\\\+W{background-color:#fff;color:#697182;border-radius:18px;align-items:center;min-width:34px;min-height:34px;justify-content:center;display:flex;box-shadow:0 2px 6px 0 rgba(201,201,201,.5);padding:0}.scrollToCurrent__scrollToCurrent___qCF\\\\+W.scrollToCurrent__hasNewMessages___\\\\+QaTc{padding:0 10px 0 6px}.scrollToCurrent__chevronDown___SYB4Z{transform:rotate(90deg)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"scrollToCurrentContainer\": \"scrollToCurrent__scrollToCurrentContainer___AmN9i\",\n\t\"scrollToContainerFadeIn\": \"scrollToCurrent__scrollToContainerFadeIn___UYuUW\",\n\t\"scrollToContainerFadeOut\": \"scrollToCurrent__scrollToContainerFadeOut___bEAeV\",\n\t\"scrollToCurrent\": \"scrollToCurrent__scrollToCurrent___qCF+W\",\n\t\"hasNewMessages\": \"scrollToCurrent__hasNewMessages___+QaTc\",\n\t\"chevronDown\": \"scrollToCurrent__chevronDown___SYB4Z\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".listAction__listItemContainer___I8E8Q{justify-content:flex-end;align-items:flex-end;width:100%;cursor:pointer}.listAction__listItemContainer___I8E8Q .listAction__listItem___LUIo0{border-radius:3px;padding:10px;background-color:var(--agent-bubble-background-color);box-shadow:0 2px 6px 0 rgba(201,201,201,.5);color:var(--agent-bubble-primary-font-color);margin-top:10px;display:flex;align-items:center}.listAction__listItemContainer___I8E8Q .listAction__listItem___LUIo0:hover{box-shadow:0 0 5px 0 var(--primary-button-background-hover-color)}.listAction__listItemContainer___I8E8Q img{width:100px;height:70px}.listAction__infoContainer___P0O-F{display:flex;flex-direction:column;margin-left:10px}.listAction__detailsText___viir5{margin-top:10px;color:var(--agent-bubble-secondary-font-color);font-size:12px}html[dir=\\\"rtl\\\"] .listAction__infoContainer___P0O-F{margin-left:initial;margin-right:10px}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"listItemContainer\": \"listAction__listItemContainer___I8E8Q\",\n\t\"listItem\": \"listAction__listItem___LUIo0\",\n\t\"infoContainer\": \"listAction__infoContainer___P0O-F\",\n\t\"detailsText\": \"listAction__detailsText___viir5\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".mllModal__modal___OEtr8{min-height:210px;max-height:99%}.mllModal__modalBody___7aD\\\\+V{padding:0;width:100%;height:100%;display:flex;flex-direction:column}.mllModal__header___4xdFZ{flex-shrink:0;min-height:45px;padding:10px 45px;display:flex;align-items:center;justify-content:center;border-bottom:.5px solid #e9eff5;position:relative;text-align:center;box-shadow:0 2px 5px #e9eff5}.mllModal__headerBackButton___aTCkd{color:#717070;position:absolute;left:5px;cursor:pointer;display:flex;align-items:center}.mllModal__headerBackButton___aTCkd:hover{background-color:rgba(118,118,118,.1)}.mllModal__mllOptions___witgq{flex-grow:1;overflow-y:auto;padding-bottom:30px;background:linear-gradient(white 30%, rgba(255, 255, 255, 0)) center top,linear-gradient(rgba(255, 255, 255, 0), white 70%) center bottom,radial-gradient(farthest-side at 50% 0, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0)) center top,radial-gradient(farthest-side at 50% 100%, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0)) center bottom;background-repeat:no-repeat;background-size:100% 40px,100% 40px,100% 14px,100% 14px;background-attachment:local,local,scroll,scroll}.mllModal__mllOption___ZNIP8{border-bottom:.5px solid #e9eff5;color:var(--primary-button-background-color);text-align:center;cursor:pointer;position:relative;height:45px;display:flex;justify-content:center;align-items:center;padding:0 15px}.mllModal__mllOption___ZNIP8:hover:not(.mllModal__disabled___dI1dF){background-color:#f3f5f8}.mllModal__mllOption___ZNIP8:focus:not(.mllModal__disabled___dI1dF){background-color:#f3f5f8}.mllModal__disabled___dI1dF{opacity:.7;cursor:default}.mllModal__label___yiaXO{flex-grow:1}.mllModal__mllChevron___\\\\+TxXw{color:#717070;position:absolute;right:5px;top:25%}html[dir=\\\"rtl\\\"] .mllModal__headerBackButton___aTCkd{right:5px;left:initial;transform:rotate(180deg)}html[dir=\\\"rtl\\\"] .mllModal__mllChevron___\\\\+TxXw{left:5px;right:initial;transform:rotate(180deg)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"modal\": \"mllModal__modal___OEtr8\",\n\t\"modalBody\": \"mllModal__modalBody___7aD+V\",\n\t\"header\": \"mllModal__header___4xdFZ\",\n\t\"headerBackButton\": \"mllModal__headerBackButton___aTCkd\",\n\t\"mllOptions\": \"mllModal__mllOptions___witgq\",\n\t\"mllOption\": \"mllModal__mllOption___ZNIP8\",\n\t\"disabled\": \"mllModal__disabled___dI1dF\",\n\t\"label\": \"mllModal__label___yiaXO\",\n\t\"mllChevron\": \"mllModal__mllChevron___+TxXw\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".templateActions__templateActions___-e4EK{padding:10px 15px;display:flex;justify-content:center;flex-wrap:wrap}.templateActions__blockTemplateAnswer___LWcl9{background:#fff}.templateActions__inThread___QDOOi{padding:10px 0}.templateActions__quickReplyButton___tWpPV,.templateActions__mllButton___1G7lr{min-width:80px;padding:8px 15px;margin:5px;display:flex;align-items:center}.templateActions__quickReplyButton___tWpPV{justify-content:center;margin-top:10px}.templateActions__mllButton___1G7lr{justify-content:flex-end}.templateActions__mllButton___1G7lr.templateActions__mllButtonWithChevron___IltVO{padding-right:5px}.templateActions__mllText___zK-RG{flex-grow:1}.templateActions__mllChevron___cjR0X{height:100%}.templateActions__answerFeedbackContainer___7GbQj{padding-left:35px;display:flex;gap:10px}.templateActions__emojiReplyButton___CGaXN{padding:5px 20px;font-size:16px}html[dir=\\\"rtl\\\"] .templateActions__mllButton___1G7lr.templateActions__mllButtonWithChevron___IltVO{padding-left:5px;padding-right:8px}html[dir=\\\"rtl\\\"] .templateActions__mllButton___1G7lr.templateActions__mllButtonWithChevron___IltVO>svg{transform:rotate(180deg)}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"templateActions\": \"templateActions__templateActions___-e4EK\",\n\t\"blockTemplateAnswer\": \"templateActions__blockTemplateAnswer___LWcl9\",\n\t\"inThread\": \"templateActions__inThread___QDOOi\",\n\t\"quickReplyButton\": \"templateActions__quickReplyButton___tWpPV\",\n\t\"mllButton\": \"templateActions__mllButton___1G7lr\",\n\t\"mllButtonWithChevron\": \"templateActions__mllButtonWithChevron___IltVO\",\n\t\"mllText\": \"templateActions__mllText___zK-RG\",\n\t\"mllChevron\": \"templateActions__mllChevron___cjR0X\",\n\t\"answerFeedbackContainer\": \"templateActions__answerFeedbackContainer___7GbQj\",\n\t\"emojiReplyButton\": \"templateActions__emojiReplyButton___CGaXN\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".messageThread__flex___d5g74{display:flex}.messageThread__messageThread___ZIR-3{display:flex;flex-direction:column;justify-content:space-between;flex-grow:1;min-height:200px}.messageThread__messageThreadMobile___fj\\\\+bt{justify-content:flex-end}.messageThread__chatMessages___hvRsu{overflow-y:auto;padding:20px;display:flex;flex-direction:column-reverse;flex:1}.messageThread__loaderWrapper___7RU6u{margin-top:10px;position:absolute;top:0;right:0;left:0;display:flex;visibility:hidden}.messageThread__loaderWrapper___7RU6u .messageThread__loader___LkSMn{margin-bottom:10px}.messageThread__loaderWrapper___7RU6u.messageThread__showLoader___rlIeE{visibility:visible;transition:visibility ease-out .25s}.messageThread__chatDividerContainer___fNwLb{display:flex;align-items:center;color:#717070;font-size:12px;margin:20px 0}.messageThread__chatDividerLabel___woSqF{margin:0 15px}.messageThread__chatDividerLine___jY4u3{height:1px;flex-grow:1;background-color:#e9eff5}.messageThread__createConversationContainer___B\\\\+vG3{flex-shrink:0;display:flex;background-color:#fff;padding:20px;border-top-left-radius:12px;border-top-right-radius:12px;justify-content:center;box-shadow:0 -1px 6px 0 rgba(201,201,201,.3)}.messageThread__inputContainer___HHTGL{display:flex;flex-direction:column;flex-shrink:0}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\",\n\t\"flex\": \"messageThread__flex___d5g74\",\n\t\"messageThread\": \"messageThread__messageThread___ZIR-3\",\n\t\"messageThreadMobile\": \"messageThread__messageThreadMobile___fj+bt\",\n\t\"chatMessages\": \"messageThread__chatMessages___hvRsu\",\n\t\"loaderWrapper\": \"messageThread__loaderWrapper___7RU6u\",\n\t\"loader\": \"messageThread__loader___LkSMn\",\n\t\"showLoader\": \"messageThread__showLoader___rlIeE\",\n\t\"chatDividerContainer\": \"messageThread__chatDividerContainer___fNwLb\",\n\t\"chatDividerLabel\": \"messageThread__chatDividerLabel___woSqF\",\n\t\"chatDividerLine\": \"messageThread__chatDividerLine___jY4u3\",\n\t\"createConversationContainer\": \"messageThread__createConversationContainer___B+vG3\",\n\t\"inputContainer\": \"messageThread__inputContainer___HHTGL\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nimport ___CSS_LOADER_URL_IMPORT_0___ from \"./fonts/Inter/Inter.var.woff2\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"@font-face{font-family:\\\"Inter\\\";src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format(\\\"woff2\\\");font-weight:400;font-style:normal;font-display:swap}@font-face{font-family:\\\"Inter\\\";src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format(\\\"woff2\\\");font-weight:500;font-style:normal;font-display:swap}@font-face{font-family:\\\"Inter\\\";src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format(\\\"woff2\\\");font-weight:600;font-style:normal;font-display:swap}html,body{font-family:\\\"Inter\\\",\\\"Helvetica Neue\\\",\\\"Arial\\\",sans-serif;font-weight:400;font-size:14px;color:#222;width:100%;height:100%;box-sizing:border-box;overflow:hidden;line-height:normal;letter-spacing:-0.3px}strong{font-weight:500}em{font-style:italic}ul{list-style-type:disc}ol{list-style-type:decimal}button,textarea,input{font-size:100%;font-family:inherit;color:inherit;letter-spacing:-0.3px}button{border:0;cursor:pointer}svg{overflow:visible}*,*::before,*::after{box-sizing:inherit}#root{width:100%;height:100%;display:flex;justify-content:flex-end;align-items:flex-end;flex-direction:column}#root:not(.userIsTabbing) *{outline:none}body.align-chat-icon-left #root{align-items:flex-start}html[dir=\\\"rtl\\\"] body.align-chat-icon-left #root{align-items:flex-end}html[dir=\\\"rtl\\\"] body.align-chat-icon-right #root{align-items:flex-start}\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\",\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"white\": \"#fff\",\n\t\"primary\": \"#222\",\n\t\"secondary\": \"#717070\",\n\t\"primaryBlue\": \"#006cec\",\n\t\"primaryDarkerBlue\": \"#0047b9\",\n\t\"primarySlate\": \"#27353b\",\n\t\"borderPrimary\": \"#dce0e9\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(function(i){return i[1]});\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"\", \"\"]);\n// Exports\n___CSS_LOADER_EXPORT___.locals = {\n\t\"widgetFrameWidth\": \"400px\",\n\t\"widgetFrameHeight\": \"calc(100% - 30px)\",\n\t\"widgetFrameMaxHeight\": \"650px\",\n\t\"mobileScreenWidth\": \"550px\",\n\t\"mobileScreenHeight\": \"550px\",\n\t\"widgetMinWidth\": \"400px\",\n\t\"widgetMaxWidth\": \"720px\"\n};\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\n// eslint-disable-next-line func-names\nmodule.exports = function (cssWithMappingToString) {\n  var list = []; // return the list of modules as css string\n\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = cssWithMappingToString(item);\n\n      if (item[2]) {\n        return \"@media \".concat(item[2], \" {\").concat(content, \"}\");\n      }\n\n      return content;\n    }).join(\"\");\n  }; // import a list of modules into the list\n  // eslint-disable-next-line func-names\n\n\n  list.i = function (modules, mediaQuery, dedupe) {\n    if (typeof modules === \"string\") {\n      // eslint-disable-next-line no-param-reassign\n      modules = [[null, modules, \"\"]];\n    }\n\n    var alreadyImportedModules = {};\n\n    if (dedupe) {\n      for (var i = 0; i < this.length; i++) {\n        // eslint-disable-next-line prefer-destructuring\n        var id = this[i][0];\n\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n\n    for (var _i = 0; _i < modules.length; _i++) {\n      var item = [].concat(modules[_i]);\n\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        // eslint-disable-next-line no-continue\n        continue;\n      }\n\n      if (mediaQuery) {\n        if (!item[2]) {\n          item[2] = mediaQuery;\n        } else {\n          item[2] = \"\".concat(mediaQuery, \" and \").concat(item[2]);\n        }\n      }\n\n      list.push(item);\n    }\n  };\n\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    // eslint-disable-next-line no-param-reassign\n    options = {};\n  } // eslint-disable-next-line no-underscore-dangle, no-param-reassign\n\n\n  url = url && url.__esModule ? url.default : url;\n\n  if (typeof url !== \"string\") {\n    return url;\n  } // If url is already wrapped in quotes, remove them\n\n\n  if (/^['\"].*['\"]$/.test(url)) {\n    // eslint-disable-next-line no-param-reassign\n    url = url.slice(1, -1);\n  }\n\n  if (options.hash) {\n    // eslint-disable-next-line no-param-reassign\n    url += options.hash;\n  } // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n\n\n  if (/[\"'() \\t\\n]/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n\n  return url;\n};","!function(t,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}:\"function\"==typeof define&&define.amd?define(function(){return function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}}):t.dlv=function(t,n,e,i,o){for(n=n.split?n.split(\".\"):n,i=0;i<n.length;i++)t=t?t[n[i]]:o;return t===o?e:t}}(this);\n//# sourceMappingURL=dlv.umd.js.map\n","export default __webpack_public_path__ + \"c2fe3cb2b7c746f7966a973d869d21c3.woff2\";","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = debounce;\n","\"use strict\";\n\nvar stylesInDOM = [];\n\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n\n  return result;\n}\n\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n\n    identifiers.push(identifier);\n  }\n\n  return identifiers;\n}\n\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n\n  return updater;\n}\n\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n\n    var newLastIdentifiers = modulesToDom(newList, options);\n\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n\n      var _index = getIndexByIdentifier(_identifier);\n\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n/* istanbul ignore next  */\n\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target); // Special case to return head of iframe instead of iframe itself\n\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n\n    memo[target] = styleTarget;\n  }\n\n  return memo[target];\n}\n/* istanbul ignore next  */\n\n\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n\n  target.appendChild(style);\n}\n\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\n\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\n\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n\n  var needLayer = typeof obj.layer !== \"undefined\";\n\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n\n  css += obj.css;\n\n  if (needLayer) {\n    css += \"}\";\n  }\n\n  if (obj.media) {\n    css += \"}\";\n  }\n\n  if (obj.supports) {\n    css += \"}\";\n  }\n\n  var sourceMap = obj.sourceMap;\n\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  } // For old IE\n\n  /* istanbul ignore if  */\n\n\n  options.styleTagTransform(css, styleElement, options.options);\n}\n\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n\n  styleElement.parentNode.removeChild(styleElement);\n}\n/* istanbul ignore next  */\n\n\nfunction domAPI(options) {\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\n\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\n\nmodule.exports = styleTagTransform;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = function(chunkId) {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce(function(promises, key) {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks\n__webpack_require__.u = function(chunkId) {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + {\"intl-relativetimeformat\":\"67f935f6643dd7681954\",\"vendors-node_modules_formatjs_intl-getcanonicallocales_polyfill_js-node_modules_formatjs_intl-64af64\":\"44e6f2b71650cc2a2461\",\"polyfills\":\"54c6462c8ebb5c0a42fd\",\"css-vars-ponyfill\":\"f8220e70902dd3df5d25\",\"sentry\":\"0464547f5ec91ecdb455\",\"marked\":\"a3a03723431395874341\",\"dompurify\":\"d724c78f7a89c03bed0d\",\"locale_en\":\"0d3e1e615c873506bf58\",\"lang_es\":\"9e3051ab6b5f094f0458\",\"locale_es\":\"c57261f66f8244a0a3bc\",\"lang_fr\":\"f3e0544ef13ef160b318\",\"locale_fr\":\"68f15e3bfbb80f5200e9\",\"lang_de\":\"970da7f5c2ee0c3fead2\",\"locale_de\":\"03f0a824ca6931c15528\",\"lang_pt\":\"56a214ffaa162ca28138\",\"locale_pt\":\"f8fa11b6a2c657f43152\",\"lang_ar\":\"d5318a05efb644925757\",\"locale_ar\":\"7f9eef122046800007d4\",\"lang_he\":\"d6ce58ac495bec24e4bf\",\"locale_he\":\"ebc014ae89195619ac0c\",\"lang_af\":\"2380e7153937be405aa3\",\"loclae_af\":\"d1e3f8f9ed36702f1548\",\"lang_am\":\"c78e92fe0bf15590c2e6\",\"locale_am\":\"e487a1e3016ce8b56fb6\",\"lang_be\":\"0a358d5fbb8a6fed8764\",\"locale_be\":\"70e03dcc18e5aa34b1d8\",\"lang_bg\":\"af21696a5036b687c7fe\",\"locale_bg\":\"3161102ec9b7170241f8\",\"lang_bs\":\"22ba6c516c1c8dbbd525\",\"locale_bs\":\"2509bab8a874677b2a49\",\"lang_ca\":\"f949de5c66d4afad90b3\",\"locale_ca\":\"ce78926b74524d6ebcf0\",\"lang_cs\":\"e5f1e25846b4c16de2ae\",\"locale_cs\":\"a45eccc3845e08d8e750\",\"lang_da\":\"e21afe0ee1ecbbebf133\",\"locale_da\":\"20392eb427281fa08efa\",\"lang_nl\":\"e6ed5add6ae19d42db8f\",\"locale_nl\":\"77d362feda67bb6ac76d\",\"lang_el\":\"7c814d9f247292237d05\",\"locale_el\":\"64940041883b730c22b5\",\"lang_et\":\"64681dc9a73ccbcee05f\",\"locale_et\":\"506df51aaa4b520de0a3\",\"lang_fi\":\"4eafe13070acf0594a9a\",\"locale_fi\":\"26f0cd103f1172f021ce\",\"lang_fil\":\"8332f73b55ad03f87e36\",\"locale_fil\":\"8d3e43d60d0b5fad8369\",\"lang_hi\":\"fe5e639400e3779ae30a\",\"locale_hi\":\"2a4f05a231f85657ab55\",\"lang_hr\":\"0a7341c61457a96fe813\",\"locale_hr\":\"e23fa4460f899e7e8f23\",\"lang_hu\":\"e80f3153c0e10c2ef844\",\"locale_hu\":\"9c8b03ef0c602c134dfd\",\"lang_id\":\"0bf2a524df61c8831d58\",\"locale_id\":\"1d9cc4cf5afbc41c8420\",\"lang_is\":\"cf53e5252b502e1973eb\",\"locale_is\":\"f5f909dcd054d3b9aaea\",\"lang_it\":\"d587e5667bbad55e69f6\",\"locale_it\":\"18c427cda56f0fd838d9\",\"lang_ja\":\"996745827535790f94ce\",\"locale_ja\":\"c3f95b6bd8fc2e0acee8\",\"lang_ka\":\"f937ac32d5f91a04d0cd\",\"locale_ka\":\"e358b7309752122d04d6\",\"lang_kk\":\"6ab6a4c9bf36ab476937\",\"locale_kk\":\"ab6f0e928f680d87129c\",\"lang_kn\":\"8de61b112c9848de8b0f\",\"locale_kn\":\"5657b2620effbc912e69\",\"lang_ko\":\"78d073a323adcae4ab49\",\"locale_ko\":\"2eab1fb8470006f78716\",\"lang_ky\":\"f224879554df275bbb0c\",\"locale_ky\":\"2f52d2e187d44e1b1cac\",\"lang_lt\":\"bdf27e5969a25404e1fb\",\"locale_lt\":\"51a53ad301ea28e35514\",\"lang_lv\":\"c50475a4cc0abd089bdb\",\"locale_lv\":\"7e8afa694caf44845962\",\"lang_ms\":\"6e2517f1eae65b08fe5e\",\"locale_ms\":\"3535d382ebd184bdff80\",\"lang_no\":\"276cd364a2e76465410b\",\"lang_pa\":\"e7a98d84243126370a45\",\"locale_pa\":\"59895df9c5bfe359ccaf\",\"lang_pl\":\"0b03fbf0f8beab625d65\",\"locale_pl\":\"cb9e9706ee282fb57003\",\"lang_pt_br\":\"31b342988b6ca32b6d92\",\"lang_ro\":\"b3c87331753f9dbced4f\",\"locale_ro\":\"668157511fb3271f93e3\",\"lang_ru\":\"98286022b8133b841d1c\",\"locale_ru\":\"4f9ec23dc0c129a8fd1d\",\"lang_sk\":\"3b597b09de9608f10416\",\"locale_sk\":\"d6d46112477f1d312ccd\",\"lang_sl\":\"d7ddfbcdf913c14e3d23\",\"locale_sl\":\"27e56c683f6d1d768ee4\",\"lang_sq\":\"f5fda3c50c43ef37b82b\",\"locale_sq\":\"47904077fcec9b6d99dd\",\"lang_sr\":\"5d2fa6a0d0292c2d30d0\",\"locale_sr\":\"6a5b1b9880dc0fdd5963\",\"lang_sv\":\"310840c1d36250efecce\",\"locale_sv\":\"de861debb6adaf0b6757\",\"lang_sw\":\"e8105f432f40c46568e4\",\"locale_sw\":\"15008b7dc825f0967ca7\",\"lang_te\":\"f2c2bc5a4dbd690d2b8f\",\"locale_te\":\"c5818095f0621198465e\",\"lang_th\":\"ec821a4e17bb582d49ef\",\"locale_th\":\"f11679ec63b1eb6a3b76\",\"lang_tr\":\"dcaaa4153b8587bc321f\",\"locale_tr\":\"9818212226ae217fe57f\",\"lang_tw\":\"9fa90a31107418ed94e6\",\"locale_ak\":\"963b6c22084b28390a44\",\"lang_uk\":\"ff54dfbb4614d53fe1c9\",\"locale_uk\":\"cd754a6b5dd3d203cede\",\"lang_ur\":\"93b128de33308af0b113\",\"locale_ur\":\"f163adacdb847a32acf0\",\"lang_uz\":\"3a00135fa18da076325c\",\"locale_uz\":\"13abca0a0cdcf4cd1f95\",\"lang_vi\":\"7045fee3c1eeaedc7371\",\"locale_vi\":\"47d917513b2ba51ec675\",\"lang_zh_cn\":\"27b10551d41e4d383e7c\"}[chunkId] + \".js\";\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"https://cdn.kustomerapp.com/chat-web/release-v0.1.419/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"widget-main\": 0\n};\n\n__webpack_require__.f.j = function(chunkId, promises) {\n\t\t// JSONP chunk loading for javascript\n\t\tvar installedChunkData = __webpack_require__.o(installedChunks, chunkId) ? installedChunks[chunkId] : undefined;\n\t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n\t\t\t// a Promise means \"currently loading\".\n\t\t\tif(installedChunkData) {\n\t\t\t\tpromises.push(installedChunkData[2]);\n\t\t\t} else {\n\t\t\t\tif(true) { // all chunks have JS\n\t\t\t\t\t// setup Promise in chunk cache\n\t\t\t\t\tvar promise = new Promise(function(resolve, reject) { installedChunkData = installedChunks[chunkId] = [resolve, reject]; });\n\t\t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n\t\t\t\t\t// start chunk loading\n\t\t\t\t\tvar url = __webpack_require__.p + __webpack_require__.u(chunkId);\n\t\t\t\t\t// create error before stack unwound to get useful stacktrace later\n\t\t\t\t\tvar error = new Error();\n\t\t\t\t\tvar loadingEnded = function(event) {\n\t\t\t\t\t\tif(__webpack_require__.o(installedChunks, chunkId)) {\n\t\t\t\t\t\t\tinstalledChunkData = installedChunks[chunkId];\n\t\t\t\t\t\t\tif(installedChunkData !== 0) installedChunks[chunkId] = undefined;\n\t\t\t\t\t\t\tif(installedChunkData) {\n\t\t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\t\t\t\t\terror.type = errorType;\n\t\t\t\t\t\t\t\terror.request = realSrc;\n\t\t\t\t\t\t\t\tinstalledChunkData[1](error);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t\t__webpack_require__.l(url, loadingEnded, \"chunk-\" + chunkId, chunkId);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n};\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkchat_web\"] = self[\"webpackChunkchat_web\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","__webpack_require__.nc = undefined;","/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n","function allSettled(arr) {\n  var P = this;\n  return new P(function(resolve, reject) {\n    if (!(arr && typeof arr.length !== 'undefined')) {\n      return reject(\n        new TypeError(\n          typeof arr +\n            ' ' +\n            arr +\n            ' is not iterable(cannot read property Symbol(Symbol.iterator))'\n        )\n      );\n    }\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        var then = val.then;\n        if (typeof then === 'function') {\n          then.call(\n            val,\n            function(val) {\n              res(i, val);\n            },\n            function(e) {\n              args[i] = { status: 'rejected', reason: e };\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            }\n          );\n          return;\n        }\n      }\n      args[i] = { status: 'fulfilled', value: val };\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n}\n\nexport default allSettled;\n","import promiseFinally from './finally';\nimport allSettled from './allSettled';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n// @ts-ignore\nvar setImmediateFunc = typeof setImmediate !== 'undefined' ? setImmediate : null;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.allSettled = allSettled;\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediateFunc === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediateFunc(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n","import Promise from './index';\nimport promiseFinally from './finally';\nimport allSettled from './allSettled';\n\n/** @suppress {undefinedVars} */\nvar globalNS = (function() {\n  // the only reliable means to get the global object is\n  // `Function('return this')()`\n  // However, this causes CSP violations in Chrome apps.\n  if (typeof self !== 'undefined') {\n    return self;\n  }\n  if (typeof window !== 'undefined') {\n    return window;\n  }\n  if (typeof global !== 'undefined') {\n    return global;\n  }\n  throw new Error('unable to locate global object');\n})();\n\n// Expose the polyfill if Promise is undefined or set to a\n// non-function value. The latter can be due to a named HTMLElement\n// being exposed by browsers for legacy reasons.\n// https://github.com/taylorhakes/promise-polyfill/issues/114\nif (typeof globalNS['Promise'] !== 'function') {\n  globalNS['Promise'] = Promise;\n} else {\n  if (!globalNS.Promise.prototype['finally']) {\n    globalNS.Promise.prototype['finally'] = promiseFinally;\n  } \n  if (!globalNS.Promise.allSettled) {\n    globalNS.Promise.allSettled = allSettled;\n  }\n}\n","// Polyfill for creating CustomEvents on IE9/10/11\n\n// code pulled from:\n// https://github.com/d4tocchini/customevent-polyfill\n// https://developer.mozilla.org/en-US/docs/Web/API/CustomEvent#Polyfill\n\n(function() {\n  if (typeof window === 'undefined') {\n    return;\n  }\n\n  try {\n    var ce = new window.CustomEvent('test', { cancelable: true });\n    ce.preventDefault();\n    if (ce.defaultPrevented !== true) {\n      // IE has problems with .preventDefault() on custom events\n      // http://stackoverflow.com/questions/23349191\n      throw new Error('Could not prevent default');\n    }\n  } catch (e) {\n    var CustomEvent = function(event, params) {\n      var evt, origPrevent;\n      params = params || {};\n      params.bubbles = !!params.bubbles;\n      params.cancelable = !!params.cancelable;\n\n      evt = document.createEvent('CustomEvent');\n      evt.initCustomEvent(\n        event,\n        params.bubbles,\n        params.cancelable,\n        params.detail\n      );\n      origPrevent = evt.preventDefault;\n      evt.preventDefault = function() {\n        origPrevent.call(this);\n        try {\n          Object.defineProperty(this, 'defaultPrevented', {\n            get: function() {\n              return true;\n            }\n          });\n        } catch (e) {\n          this.defaultPrevented = true;\n        }\n      };\n      return evt;\n    };\n\n    CustomEvent.prototype = window.Event.prototype;\n    window.CustomEvent = CustomEvent; // expose definition to window\n  }\n})();\n","var n,l,u,i,t,r,o,f,e={},c=[],s=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function a(n,l){for(var u in l)n[u]=l[u];return n}function h(n){var l=n.parentNode;l&&l.removeChild(n)}function v(l,u,i){var t,r,o,f={};for(o in u)\"key\"==o?t=u[o]:\"ref\"==o?r=u[o]:f[o]=u[o];if(arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),\"function\"==typeof l&&null!=l.defaultProps)for(o in l.defaultProps)void 0===f[o]&&(f[o]=l.defaultProps[o]);return y(l,f,t,r,null)}function y(n,i,t,r,o){var f={type:n,props:i,key:t,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:null==o?++u:o};return null==o&&null!=l.vnode&&l.vnode(f),f}function p(){return{current:null}}function d(n){return n.children}function _(n,l){this.props=n,this.context=l}function k(n,l){if(null==l)return n.__?k(n.__,n.__.__k.indexOf(n)+1):null;for(var u;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e)return u.__e;return\"function\"==typeof n.type?k(n):null}function b(n){var l,u;if(null!=(n=n.__)&&null!=n.__c){for(n.__e=n.__c.base=null,l=0;l<n.__k.length;l++)if(null!=(u=n.__k[l])&&null!=u.__e){n.__e=n.__c.base=u.__e;break}return b(n)}}function m(n){(!n.__d&&(n.__d=!0)&&t.push(n)&&!g.__r++||o!==l.debounceRendering)&&((o=l.debounceRendering)||r)(g)}function g(){for(var n;g.__r=t.length;)n=t.sort(function(n,l){return n.__v.__b-l.__v.__b}),t=[],n.some(function(n){var l,u,i,t,r,o;n.__d&&(r=(t=(l=n).__v).__e,(o=l.__P)&&(u=[],(i=a({},t)).__v=t.__v+1,j(o,t,i,l.__n,void 0!==o.ownerSVGElement,null!=t.__h?[r]:null,u,null==r?k(t):r,t.__h),z(u,t),t.__e!=r&&b(t)))})}function w(n,l,u,i,t,r,o,f,s,a){var h,v,p,_,b,m,g,w=i&&i.__k||c,A=w.length;for(u.__k=[],h=0;h<l.length;h++)if(null!=(_=u.__k[h]=null==(_=l[h])||\"boolean\"==typeof _?null:\"string\"==typeof _||\"number\"==typeof _||\"bigint\"==typeof _?y(null,_,null,null,_):Array.isArray(_)?y(d,{children:_},null,null,null):_.__b>0?y(_.type,_.props,_.key,null,_.__v):_)){if(_.__=u,_.__b=u.__b+1,null===(p=w[h])||p&&_.key==p.key&&_.type===p.type)w[h]=void 0;else for(v=0;v<A;v++){if((p=w[v])&&_.key==p.key&&_.type===p.type){w[v]=void 0;break}p=null}j(n,_,p=p||e,t,r,o,f,s,a),b=_.__e,(v=_.ref)&&p.ref!=v&&(g||(g=[]),p.ref&&g.push(p.ref,null,_),g.push(v,_.__c||b,_)),null!=b?(null==m&&(m=b),\"function\"==typeof _.type&&_.__k===p.__k?_.__d=s=x(_,s,n):s=P(n,_,p,w,b,s),\"function\"==typeof u.type&&(u.__d=s)):s&&p.__e==s&&s.parentNode!=n&&(s=k(p))}for(u.__e=m,h=A;h--;)null!=w[h]&&(\"function\"==typeof u.type&&null!=w[h].__e&&w[h].__e==u.__d&&(u.__d=k(i,h+1)),N(w[h],w[h]));if(g)for(h=0;h<g.length;h++)M(g[h],g[++h],g[++h])}function x(n,l,u){for(var i,t=n.__k,r=0;t&&r<t.length;r++)(i=t[r])&&(i.__=n,l=\"function\"==typeof i.type?x(i,l,u):P(u,i,i,t,i.__e,l));return l}function A(n,l){return l=l||[],null==n||\"boolean\"==typeof n||(Array.isArray(n)?n.some(function(n){A(n,l)}):l.push(n)),l}function P(n,l,u,i,t,r){var o,f,e;if(void 0!==l.__d)o=l.__d,l.__d=void 0;else if(null==u||t!=r||null==t.parentNode)n:if(null==r||r.parentNode!==n)n.appendChild(t),o=null;else{for(f=r,e=0;(f=f.nextSibling)&&e<i.length;e+=2)if(f==t)break n;n.insertBefore(t,r),o=r}return void 0!==o?o:t.nextSibling}function C(n,l,u,i,t){var r;for(r in u)\"children\"===r||\"key\"===r||r in l||H(n,r,null,u[r],i);for(r in l)t&&\"function\"!=typeof l[r]||\"children\"===r||\"key\"===r||\"value\"===r||\"checked\"===r||u[r]===l[r]||H(n,r,l[r],u[r],i)}function $(n,l,u){\"-\"===l[0]?n.setProperty(l,u):n[l]=null==u?\"\":\"number\"!=typeof u||s.test(l)?u:u+\"px\"}function H(n,l,u,i,t){var r;n:if(\"style\"===l)if(\"string\"==typeof u)n.style.cssText=u;else{if(\"string\"==typeof i&&(n.style.cssText=i=\"\"),i)for(l in i)u&&l in u||$(n.style,l,\"\");if(u)for(l in u)i&&u[l]===i[l]||$(n.style,l,u[l])}else if(\"o\"===l[0]&&\"n\"===l[1])r=l!==(l=l.replace(/Capture$/,\"\")),l=l.toLowerCase()in n?l.toLowerCase().slice(2):l.slice(2),n.l||(n.l={}),n.l[l+r]=u,u?i||n.addEventListener(l,r?T:I,r):n.removeEventListener(l,r?T:I,r);else if(\"dangerouslySetInnerHTML\"!==l){if(t)l=l.replace(/xlink[H:h]/,\"h\").replace(/sName$/,\"s\");else if(\"href\"!==l&&\"list\"!==l&&\"form\"!==l&&\"tabIndex\"!==l&&\"download\"!==l&&l in n)try{n[l]=null==u?\"\":u;break n}catch(n){}\"function\"==typeof u||(null!=u&&(!1!==u||\"a\"===l[0]&&\"r\"===l[1])?n.setAttribute(l,u):n.removeAttribute(l))}}function I(n){this.l[n.type+!1](l.event?l.event(n):n)}function T(n){this.l[n.type+!0](l.event?l.event(n):n)}function j(n,u,i,t,r,o,f,e,c){var s,h,v,y,p,k,b,m,g,x,A,P=u.type;if(void 0!==u.constructor)return null;null!=i.__h&&(c=i.__h,e=u.__e=i.__e,u.__h=null,o=[e]),(s=l.__b)&&s(u);try{n:if(\"function\"==typeof P){if(m=u.props,g=(s=P.contextType)&&t[s.__c],x=s?g?g.props.value:s.__:t,i.__c?b=(h=u.__c=i.__c).__=h.__E:(\"prototype\"in P&&P.prototype.render?u.__c=h=new P(m,x):(u.__c=h=new _(m,x),h.constructor=P,h.render=O),g&&g.sub(h),h.props=m,h.state||(h.state={}),h.context=x,h.__n=t,v=h.__d=!0,h.__h=[]),null==h.__s&&(h.__s=h.state),null!=P.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=a({},h.__s)),a(h.__s,P.getDerivedStateFromProps(m,h.__s))),y=h.props,p=h.state,v)null==P.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(null==P.getDerivedStateFromProps&&m!==y&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(m,x),!h.__e&&null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(m,h.__s,x)||u.__v===i.__v){h.props=m,h.state=h.__s,u.__v!==i.__v&&(h.__d=!1),h.__v=u,u.__e=i.__e,u.__k=i.__k,u.__k.forEach(function(n){n&&(n.__=u)}),h.__h.length&&f.push(h);break n}null!=h.componentWillUpdate&&h.componentWillUpdate(m,h.__s,x),null!=h.componentDidUpdate&&h.__h.push(function(){h.componentDidUpdate(y,p,k)})}h.context=x,h.props=m,h.state=h.__s,(s=l.__r)&&s(u),h.__d=!1,h.__v=u,h.__P=n,s=h.render(h.props,h.state,h.context),h.state=h.__s,null!=h.getChildContext&&(t=a(a({},t),h.getChildContext())),v||null==h.getSnapshotBeforeUpdate||(k=h.getSnapshotBeforeUpdate(y,p)),A=null!=s&&s.type===d&&null==s.key?s.props.children:s,w(n,Array.isArray(A)?A:[A],u,i,t,r,o,f,e,c),h.base=u.__e,u.__h=null,h.__h.length&&f.push(h),b&&(h.__E=h.__=null),h.__e=!1}else null==o&&u.__v===i.__v?(u.__k=i.__k,u.__e=i.__e):u.__e=L(i.__e,u,i,t,r,o,f,c);(s=l.diffed)&&s(u)}catch(n){u.__v=null,(c||null!=o)&&(u.__e=e,u.__h=!!c,o[o.indexOf(e)]=null),l.__e(n,u,i)}}function z(n,u){l.__c&&l.__c(u,n),n.some(function(u){try{n=u.__h,u.__h=[],n.some(function(n){n.call(u)})}catch(n){l.__e(n,u.__v)}})}function L(l,u,i,t,r,o,f,c){var s,a,v,y=i.props,p=u.props,d=u.type,_=0;if(\"svg\"===d&&(r=!0),null!=o)for(;_<o.length;_++)if((s=o[_])&&\"setAttribute\"in s==!!d&&(d?s.localName===d:3===s.nodeType)){l=s,o[_]=null;break}if(null==l){if(null===d)return document.createTextNode(p);l=r?document.createElementNS(\"http://www.w3.org/2000/svg\",d):document.createElement(d,p.is&&p),o=null,c=!1}if(null===d)y===p||c&&l.data===p||(l.data=p);else{if(o=o&&n.call(l.childNodes),a=(y=i.props||e).dangerouslySetInnerHTML,v=p.dangerouslySetInnerHTML,!c){if(null!=o)for(y={},_=0;_<l.attributes.length;_++)y[l.attributes[_].name]=l.attributes[_].value;(v||a)&&(v&&(a&&v.__html==a.__html||v.__html===l.innerHTML)||(l.innerHTML=v&&v.__html||\"\"))}if(C(l,p,y,r,c),v)u.__k=[];else if(_=u.props.children,w(l,Array.isArray(_)?_:[_],u,i,t,r&&\"foreignObject\"!==d,o,f,o?o[0]:i.__k&&k(i,0),c),null!=o)for(_=o.length;_--;)null!=o[_]&&h(o[_]);c||(\"value\"in p&&void 0!==(_=p.value)&&(_!==y.value||_!==l.value||\"progress\"===d&&!_)&&H(l,\"value\",_,y.value,!1),\"checked\"in p&&void 0!==(_=p.checked)&&_!==l.checked&&H(l,\"checked\",_,y.checked,!1))}return l}function M(n,u,i){try{\"function\"==typeof n?n(u):n.current=u}catch(n){l.__e(n,i)}}function N(n,u,i){var t,r;if(l.unmount&&l.unmount(n),(t=n.ref)&&(t.current&&t.current!==n.__e||M(t,null,u)),null!=(t=n.__c)){if(t.componentWillUnmount)try{t.componentWillUnmount()}catch(n){l.__e(n,u)}t.base=t.__P=null}if(t=n.__k)for(r=0;r<t.length;r++)t[r]&&N(t[r],u,\"function\"!=typeof n.type);i||null==n.__e||h(n.__e),n.__e=n.__d=void 0}function O(n,l,u){return this.constructor(n,u)}function S(u,i,t){var r,o,f;l.__&&l.__(u,i),o=(r=\"function\"==typeof t)?null:t&&t.__k||i.__k,f=[],j(i,u=(!r&&t||i).__k=v(d,null,[u]),o||e,e,void 0!==i.ownerSVGElement,!r&&t?[t]:o?null:i.firstChild?n.call(i.childNodes):null,f,!r&&t?t:o?o.__e:i.firstChild,r),z(f,u)}function q(n,l){S(n,l,q)}function B(l,u,i){var t,r,o,f=a({},l.props);for(o in u)\"key\"==o?t=u[o]:\"ref\"==o?r=u[o]:f[o]=u[o];return arguments.length>2&&(f.children=arguments.length>3?n.call(arguments,2):i),y(l.type,f,t||l.key,r||l.ref,null)}function D(n,l){var u={__c:l=\"__cC\"+f++,__:n,Consumer:function(n,l){return n.children(l)},Provider:function(n){var u,i;return this.getChildContext||(u=[],(i={})[l]=this,this.getChildContext=function(){return i},this.shouldComponentUpdate=function(n){this.props.value!==n.value&&u.some(m)},this.sub=function(n){u.push(n);var l=n.componentWillUnmount;n.componentWillUnmount=function(){u.splice(u.indexOf(n),1),l&&l.call(n)}}),n.children}};return u.Provider.__=u.Consumer.contextType=u}n=c.slice,l={__e:function(n,l){for(var u,i,t;l=l.__;)if((u=l.__c)&&!u.__)try{if((i=u.constructor)&&null!=i.getDerivedStateFromError&&(u.setState(i.getDerivedStateFromError(n)),t=u.__d),null!=u.componentDidCatch&&(u.componentDidCatch(n),t=u.__d),t)return u.__E=u}catch(l){n=l}throw n}},u=0,i=function(n){return null!=n&&void 0===n.constructor},_.prototype.setState=function(n,l){var u;u=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=a({},this.state),\"function\"==typeof n&&(n=n(a({},u),this.props)),n&&a(u,n),null!=n&&this.__v&&(l&&this.__h.push(l),m(this))},_.prototype.forceUpdate=function(n){this.__v&&(this.__e=!0,n&&this.__h.push(n),m(this))},_.prototype.render=d,t=[],r=\"function\"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,g.__r=0,f=0;export{S as render,q as hydrate,v as createElement,v as h,d as Fragment,p as createRef,i as isValidElement,_ as Component,B as cloneElement,D as createContext,A as toChildArray,l as options};\n//# sourceMappingURL=preact.module.js.map\n","import{options as n}from\"preact\";var t,u,r,o=0,i=[],c=n.__b,f=n.__r,e=n.diffed,a=n.__c,v=n.unmount;function m(t,r){n.__h&&n.__h(u,t,o||r),o=0;var i=u.__H||(u.__H={__:[],__h:[]});return t>=i.__.length&&i.__.push({}),i.__[t]}function l(n){return o=1,p(w,n)}function p(n,r,o){var i=m(t++,2);return i.t=n,i.__c||(i.__=[o?o(r):w(void 0,r),function(n){var t=i.t(i.__[0],n);i.__[0]!==t&&(i.__=[t,i.__[1]],i.__c.setState({}))}],i.__c=u),i.__}function y(r,o){var i=m(t++,3);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__H.__h.push(i))}function h(r,o){var i=m(t++,4);!n.__s&&k(i.__H,o)&&(i.__=r,i.__H=o,u.__h.push(i))}function s(n){return o=5,d(function(){return{current:n}},[])}function _(n,t,u){o=6,h(function(){\"function\"==typeof n?n(t()):n&&(n.current=t())},null==u?u:u.concat(n))}function d(n,u){var r=m(t++,7);return k(r.__H,u)&&(r.__=n(),r.__H=u,r.__h=n),r.__}function A(n,t){return o=8,d(function(){return n},t)}function F(n){var r=u.context[n.__c],o=m(t++,9);return o.c=n,r?(null==o.__&&(o.__=!0,r.sub(u)),r.props.value):n.__}function T(t,u){n.useDebugValue&&n.useDebugValue(u?u(t):t)}function q(n){var r=m(t++,10),o=l();return r.__=n,u.componentDidCatch||(u.componentDidCatch=function(n){r.__&&r.__(n),o[1](n)}),[o[0],function(){o[1](void 0)}]}function x(){var t;for(i.sort(function(n,t){return n.__v.__b-t.__v.__b});t=i.pop();)if(t.__P)try{t.__H.__h.forEach(g),t.__H.__h.forEach(j),t.__H.__h=[]}catch(u){t.__H.__h=[],n.__e(u,t.__v)}}n.__b=function(n){u=null,c&&c(n)},n.__r=function(n){f&&f(n),t=0;var r=(u=n.__c).__H;r&&(r.__h.forEach(g),r.__h.forEach(j),r.__h=[])},n.diffed=function(t){e&&e(t);var o=t.__c;o&&o.__H&&o.__H.__h.length&&(1!==i.push(o)&&r===n.requestAnimationFrame||((r=n.requestAnimationFrame)||function(n){var t,u=function(){clearTimeout(r),b&&cancelAnimationFrame(t),setTimeout(n)},r=setTimeout(u,100);b&&(t=requestAnimationFrame(u))})(x)),u=null},n.__c=function(t,u){u.some(function(t){try{t.__h.forEach(g),t.__h=t.__h.filter(function(n){return!n.__||j(n)})}catch(r){u.some(function(n){n.__h&&(n.__h=[])}),u=[],n.__e(r,t.__v)}}),a&&a(t,u)},n.unmount=function(t){v&&v(t);var u,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{g(n)}catch(n){u=n}}),u&&n.__e(u,r.__v))};var b=\"function\"==typeof requestAnimationFrame;function g(n){var t=u,r=n.__c;\"function\"==typeof r&&(n.__c=void 0,r()),u=t}function j(n){var t=u;n.__c=n.__(),u=t}function k(n,t){return!n||n.length!==t.length||t.some(function(t,u){return t!==n[u]})}function w(n,t){return\"function\"==typeof t?t(n):t}export{l as useState,p as useReducer,y as useEffect,h as useLayoutEffect,s as useRef,_ as useImperativeHandle,d as useMemo,A as useCallback,F as useContext,T as useDebugValue,q as useErrorBoundary};\n//# sourceMappingURL=hooks.module.js.map\n","import { srcDocSet } from './srcDocPolyfillBackup';\n\nexport const isBrowserIE = (): boolean => {\n  const { userAgent } = window.navigator;\n  return userAgent.indexOf('MSIE') > 0 || userAgent.indexOf('Trident') > 0;\n};\nexport const supportsIntlRelativeTimeFormat = () => {\n  return !!window?.Intl?.RelativeTimeFormat;\n};\n\nexport const installRelativeTimeFormatPolyfills = (): Promise<unknown> => {\n  if (supportsIntlRelativeTimeFormat()) return Promise.resolve();\n\n  return import(\n    /* webpackChunkName: \"intl-relativetimeformat\" */ '@formatjs/intl-relativetimeformat/polyfill'\n  );\n};\n\nexport const installPolyfills = (): Promise<unknown> => {\n  if (isBrowserIE()) {\n    return import(/* webpackChunkName: \"polyfills\" */ './polyfills').catch(\n      (error) => `An error occurred while loading polyfills, ${error}`,\n    );\n  }\n\n  return Promise.resolve();\n};\n\nexport const setIframeSrcDoc = (\n  iframe: HTMLIFrameElement,\n  content: string,\n): void => {\n  const iframeToUpdate = iframe;\n  if (isBrowserIE()) {\n    srcDocSet(iframeToUpdate, content);\n  }\n  iframeToUpdate.srcdoc = content;\n};\n","function n(n){for(var t=arguments.length,r=Array(t>1?t-1:0),e=1;e<t;e++)r[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,r):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(r.length?\" \"+r.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function t(n){return!!n&&!!n[Q]}function r(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var t=Object.getPrototypeOf(n);if(null===t)return!0;var r=Object.hasOwnProperty.call(t,\"constructor\")&&t.constructor;return r===Object||\"function\"==typeof r&&Function.toString.call(r)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(r){return t(r)||n(23,r),r[Q].t}function i(n,t,r){void 0===r&&(r=!1),0===o(n)?(r?Object.keys:nn)(n).forEach((function(e){r&&\"symbol\"==typeof e||t(e,n[e],n)})):n.forEach((function(r,e){return t(e,r,n)}))}function o(n){var t=n[Q];return t?t.i>3?t.i-4:t.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,t){return 2===o(n)?n.has(t):Object.prototype.hasOwnProperty.call(n,t)}function a(n,t){return 2===o(n)?n.get(t):n[t]}function f(n,t,r){var e=o(n);2===e?n.set(t,r):3===e?(n.delete(t),n.add(r)):n[t]=r}function c(n,t){return n===t?0!==n||1/n==1/t:n!=n&&t!=t}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var t=tn(n);delete t[Q];for(var r=nn(t),e=0;e<r.length;e++){var i=r[e],o=t[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(t[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),t)}function d(n,e){return void 0===e&&(e=!1),y(n)||t(n)||!r(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,t){return d(t,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(t){var r=rn[t];return r||n(18,t),r}function m(n,t){rn[n]||(rn[n]=t)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,t){t&&(b(\"Patches\"),n.u=[],n.s=[],n.v=t)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var t=n[Q];0===t.i||1===t.i?t.j():t.O=!0}function P(t,e){e._=e.p.length;var i=e.p[0],o=void 0!==t&&t!==i;return e.h.g||b(\"ES5\").S(e,t,o),o?(i[Q].P&&(O(e),n(4)),r(t)&&(t=M(e,t),e.l||x(e,t)),e.u&&b(\"Patches\").M(i[Q],t,e.u,e.s)):t=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),t!==H?t:void 0}function M(n,t,r){if(y(t))return t;var e=t[Q];if(!e)return i(t,(function(i,o){return A(n,e,t,i,o,r)}),!0),t;if(e.A!==n)return t;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(t,i){return A(n,e,o,t,i,r)})),x(n,o,!1),r&&n.u&&b(\"Patches\").R(e,r,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),t(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!t(v))return;e.m=!1}if(r(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,t,r){void 0===r&&(r=!1),n.h.F&&n.m&&d(t,r)}function z(n,t){var r=n[Q];return(r?p(r):n)[t]}function I(n,t){if(t in n)for(var r=Object.getPrototypeOf(n);r;){var e=Object.getOwnPropertyDescriptor(r,t);if(e)return e;r=Object.getPrototypeOf(r)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,t,r){var e=s(t)?b(\"MapSet\").N(t,r):v(t)?b(\"MapSet\").T(t,r):n.g?function(n,t){var r=Array.isArray(n),e={i:r?1:0,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;r&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(t,r):b(\"ES5\").J(t,r);return(r?r.A:_()).p.push(e),e}function D(e){return t(e)||n(22,e),function n(t){if(!r(t))return t;var e,u=t[Q],c=o(t);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(t,c),u.I=!1}else e=F(t,c);return i(e,(function(t,r){u&&a(u.t,t)===r||f(e,t,n(r))})),3===c?new Set(e):e}(e)}function F(n,t){switch(t){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function r(n,t){var r=s[n];return r?r.enumerable=t:s[n]=r={configurable:!0,enumerable:t,get:function(){var t=this[Q];return\"production\"!==process.env.NODE_ENV&&f(t),en.get(t,n)},set:function(t){var r=this[Q];\"production\"!==process.env.NODE_ENV&&f(r),en.set(r,n,t)}},r}function e(n){for(var t=n.length-1;t>=0;t--){var r=n[t][Q];if(!r.P)switch(r.i){case 5:a(r)&&k(r);break;case 4:o(r)&&k(r)}}}function o(n){for(var t=n.t,r=n.k,e=nn(r),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=t[o];if(void 0===a&&!u(t,o))return!0;var f=r[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!t[Q];return e.length!==nn(t).length+(v?0:1)}function a(n){var t=n.k;if(t.length!==n.t.length)return!0;var r=Object.getOwnPropertyDescriptor(t,t.length-1);return!(!r||r.get)}function f(t){t.O&&n(3,JSON.stringify(p(t)))}var s={};m(\"ES5\",{J:function(n,t){var e=Array.isArray(n),i=function(n,t){if(n){for(var e=Array(t.length),i=0;i<t.length;i++)Object.defineProperty(e,\"\"+i,r(i,!0));return e}var o=tn(t);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=r(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(t),o)}(e,n),o={i:e?5:4,A:t?t.A:_(),P:!1,I:!1,D:{},l:t,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,r,o){o?t(r)&&r[Q].A===n&&e(n.p):(n.u&&function n(t){if(t&&\"object\"==typeof t){var r=t[Q];if(r){var e=r.t,o=r.k,f=r.D,c=r.i;if(4===c)i(o,(function(t){t!==Q&&(void 0!==e[t]||u(e,t)?f[t]||n(o[t]):(f[t]=!0,k(r)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(r))}));else if(5===c){if(a(r)&&(k(r),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!r(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var t=Object.create(Object.getPrototypeOf(n));for(var i in n)t[i]=e(n[i]);return u(n,L)&&(t[L]=n[L]),t}function f(n){return t(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(t,r){return r.forEach((function(r){for(var i=r.path,u=r.op,f=t,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(r.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(r.value);default:return delete f[h]}default:n(17,u)}})),t},R:function(n,t,r,e){switch(n.i){case 0:case 4:case 2:return function(n,t,r,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=t.concat(n);r.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,t,r,e);case 5:case 1:return function(n,t,r,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,r];r=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=t.concat([v]);r.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=t.concat([l]);r.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:t.concat([\"length\"]),value:i.length})}(n,t,r,e);case 3:return function(n,t,r,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=t.concat([u]);r.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=t.concat([u]);r.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,t,r,e)}},M:function(n,t,r,e){r.push({op:\"replace\",path:[],value:t===H?void 0:t}),e.push({op:\"replace\",path:[],value:n.t})}})}function C(){function t(n,t){function r(){this.constructor=n}a(n,t),n.prototype=(r.prototype=t.prototype,new r)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(t){if(r(t)){var e=R(n.A.h,t,n);n.p.set(t,e),n.o.add(e)}else n.o.add(t)})))}function u(t){t.O&&n(3,JSON.stringify(p(t)))}var a=function(n,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])})(n,t)},f=function(){function n(n,t){return this[Q]={i:2,l:t,A:t?t.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}t(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,t){var r=this[Q];return u(r),p(r).has(n)&&p(r).get(n)===t||(e(r),k(r),r.D.set(n,!0),r.o.set(n,t),r.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var t=this[Q];return u(t),e(t),k(t),t.D.set(n,!1),t.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(t){n.D.set(t,!1)})),n.o.clear())},o.forEach=function(n,t){var r=this;p(this[Q]).forEach((function(e,i){n.call(t,r.get(i),i,r)}))},o.get=function(n){var t=this[Q];u(t);var i=p(t).get(n);if(t.I||!r(i))return i;if(i!==t.t.get(n))return i;var o=R(t.A.h,i,t);return e(t),t.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,t=this,r=this.keys();return(n={})[V]=function(){return t.values()},n.next=function(){var n=r.next();return n.done?n:{done:!1,value:t.get(n.value)}},n},o.entries=function(){var n,t=this,r=this.keys();return(n={})[V]=function(){return t.entries()},n.next=function(){var n=r.next();if(n.done)return n;var e=t.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,t){return this[Q]={i:3,l:t,A:t?t.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}t(n,Set);var r=n.prototype;return Object.defineProperty(r,\"size\",{get:function(){return p(this[Q]).size}}),r.has=function(n){var t=this[Q];return u(t),t.o?!!t.o.has(n)||!(!t.p.has(n)||!t.o.has(t.p.get(n))):t.t.has(n)},r.add=function(n){var t=this[Q];return u(t),this.has(n)||(o(t),k(t),t.o.add(n)),this},r.delete=function(n){if(!this.has(n))return!1;var t=this[Q];return u(t),o(t),k(t),t.o.delete(n)||!!t.p.has(n)&&t.o.delete(t.p.get(n))},r.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},r.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},r.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},r.keys=function(){return this.values()},r[V]=function(){return this.values()},r.forEach=function(n,t){for(var r=this.values(),e=r.next();!e.done;)n.call(t,e.value,e.value,this),e=r.next()},n}();m(\"MapSet\",{N:function(n,t){return new f(n,t)},T:function(n,t){return new c(n,t)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,tn=Object.getOwnPropertyDescriptors||function(n){var t={};return nn(n).forEach((function(r){t[r]=Object.getOwnPropertyDescriptor(n,r)})),t},rn={},en={get:function(n,t){if(t===Q)return n;var e=p(n);if(!u(e,t))return function(n,t,r){var e,i=I(t,r);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,t);var i=e[t];return n.I||!r(i)?i:i===z(n.t,t)?(E(n),n.o[t]=R(n.A.h,i,n)):i},has:function(n,t){return t in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,t,r){var e=I(p(n),t);if(null==e?void 0:e.set)return e.set.call(n.k,r),!0;if(!n.P){var i=z(p(n),t),o=null==i?void 0:i[Q];if(o&&o.t===r)return n.o[t]=r,n.D[t]=!1,!0;if(c(r,i)&&(void 0!==r||u(n.t,t)))return!0;E(n),k(n)}return n.o[t]===r&&\"number\"!=typeof r&&(void 0!==r||t in n.o)||(n.o[t]=r,n.D[t]=!0,!0)},deleteProperty:function(n,t){return void 0!==z(n.t,t)||t in n.t?(n.D[t]=!1,E(n),k(n)):delete n.D[t],n.o&&delete n.o[t],!0},getOwnPropertyDescriptor:function(n,t){var r=p(n),e=Reflect.getOwnPropertyDescriptor(r,t);return e?{writable:!0,configurable:1!==n.i||\"length\"!==t,enumerable:e.enumerable,value:r[t]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,t){on[n]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}})),on.deleteProperty=function(t,r){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(r))&&n(13),en.deleteProperty.call(this,t[0],r)},on.set=function(t,r,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==r&&isNaN(parseInt(r))&&n(14),en.set.call(this,t[0],r,e,t[0])};var un=function(){function e(t){var e=this;this.g=B,this.F=!0,this.produce=function(t,i,o){if(\"function\"==typeof t&&\"function\"!=typeof i){var u=i;i=t;var a=e;return function(n){var t=this;void 0===n&&(n=u);for(var r=arguments.length,e=Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var r;return(r=i).call.apply(r,[t,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),r(t)){var c=w(e),s=R(e,t,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!t||\"object\"!=typeof t){if((f=i(t))===H)return;return void 0===f&&(f=t),e.F&&d(f,!0),f}n(21,t)},this.produceWithPatches=function(n,t){return\"function\"==typeof n?function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return e.produceWithPatches(t,(function(t){return n.apply(void 0,[t].concat(i))}))}:[e.produce(n,t,(function(n,t){r=n,i=t})),r,i];var r,i},\"boolean\"==typeof(null==t?void 0:t.useProxies)&&this.setUseProxies(t.useProxies),\"boolean\"==typeof(null==t?void 0:t.autoFreeze)&&this.setAutoFreeze(t.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){r(e)||n(8),t(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(t,r){var e=t&&t[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,r),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(t){t&&!B&&n(20),this.g=t},i.applyPatches=function(n,r){var e;for(e=r.length-1;e>=0;e--){var i=r[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(r=r.slice(e+1));var o=b(\"Patches\").$;return t(n)?o(n,r):this.produce(n,(function(n){return o(n,r)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,t as isDraft,r as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","export const isEnterKey = (e: KeyboardEvent) => {\n  const { which } = e;\n  const { key } = e;\n  const { keyCode } = e;\n\n  return which === 13 || key === 'Enter' || keyCode === 13;\n};\n\nexport const isTabKey = (e: KeyboardEvent) => {\n  const { which } = e;\n  const { key } = e;\n  const { keyCode } = e;\n\n  return which === 9 || key === 'Tab' || keyCode === 9;\n};\n\nexport const isEscKey = (e: KeyboardEvent) => {\n  const { which } = e;\n  const { key } = e;\n  const { keyCode } = e;\n  const escapeText = key === 'Escape' || key === 'Esc'; // \"Esc\" is IE/Edge specific\n\n  return which === 27 || escapeText || keyCode === 27;\n};\n\nexport const isShiftKey = (e: KeyboardEvent) => {\n  const { which } = e;\n  const { key } = e;\n  const { keyCode } = e;\n  const { shiftKey } = e;\n  const escapeText =\n    key === 'Shift' || key === 'ShiftLeft' || key === 'ShiftRight';\n\n  return which === 16 || escapeText || keyCode === 16 || shiftKey;\n};\n","import { KustomerCoreWindow, KustomerCore } from 'core/types';\nimport { ConversationEntity, MessagesState } from 'widget_main/store/types';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport {\n  KustomerWindow,\n  Kustomer,\n  KustomerWidgetEventTypes,\n} from 'widget/types';\nimport { SettingsAttributes } from 'core_main/api/settings/types';\nimport { MessageCallbackResponse } from 'core_main/sdk/send_message/types';\nimport { InitAssistantCallbackResponse } from 'core_main/sdk/init_assistant/types';\nimport { Message } from 'widget_main/components/ChatMessage/types';\nimport { KustomerLocalStorage } from './types';\n\nexport const getItemFromLocalStorage = (key: string) => {\n  return window.localStorage?.getItem(key);\n};\n\nexport const setItemInLocalStorage = (key: string, value: string) => {\n  window.localStorage?.setItem(key, value);\n};\n\nexport const getKustomerCore = () => {\n  const kustomerCoreWindow = window as KustomerCoreWindow;\n  return kustomerCoreWindow.KustomerCore as KustomerCore;\n};\n\nexport const getKustomer = () => {\n  const kustomerWindow = window.parent as KustomerWindow;\n  return kustomerWindow.Kustomer as Kustomer;\n};\n\nexport const handleMouseClick = () => {\n  document.getElementById('root')?.classList.remove('userIsTabbing');\n  window.removeEventListener('mousedown', handleMouseClick);\n\n  // eslint-disable-next-line no-use-before-define\n  window.addEventListener('keydown', handleFirstTab);\n};\n\nexport const handleFirstTab = (e: KeyboardEvent) => {\n  if (keyboardEventHelpers.isTabKey(e)) {\n    document.getElementById('root')?.classList.add('userIsTabbing');\n    window.removeEventListener('keydown', handleFirstTab);\n\n    window.addEventListener('mousedown', handleMouseClick);\n  }\n};\n\nexport const getKustomerLocalStorage = <K extends keyof KustomerLocalStorage>(\n  key: K,\n) => {\n  const kustomerState = JSON.parse(\n    getItemFromLocalStorage('kustomerState') || '{}',\n  ) as KustomerLocalStorage;\n  return kustomerState[key];\n};\n\nexport const setKustomerLocalStorage = (\n  key: keyof KustomerLocalStorage,\n  value,\n) => {\n  const kustomerState = JSON.parse(\n    getItemFromLocalStorage('kustomerState') || '{}',\n  ) as KustomerLocalStorage;\n\n  setItemInLocalStorage(\n    'kustomerState',\n    JSON.stringify({\n      ...kustomerState,\n      [key]: value,\n    }),\n  );\n};\n\nexport const runKustomerListenersForEvent = (\n  eventType: KustomerWidgetEventTypes,\n  response?,\n  error?: Error,\n) => {\n  getKustomer()?.listeners?.[eventType]?.forEach((callback) => {\n    callback(response, error);\n  });\n};\n\nexport const getLastMessageInConversation = (\n  conversation: ConversationEntity,\n  messagesState: MessagesState,\n) => {\n  const { messages } = conversation;\n\n  if (!messages?.length) {\n    return undefined;\n  }\n\n  const lastMessageId = messages[messages.length - 1];\n\n  return messagesState.messageData[lastMessageId];\n};\n\nexport const getLastAgentMessageInConversation = (\n  conversation?: ConversationEntity,\n  messagesState?: MessagesState,\n) => {\n  if (!conversation?.messages || !messagesState) return undefined;\n\n  const { messages } = conversation;\n\n  const agentMessageId = messages\n    .slice()\n    .reverse()\n    .find(\n      (messageId) =>\n        messagesState.messageData?.[messageId]?.sentBy?.type === 'user',\n    );\n\n  if (agentMessageId) {\n    return messagesState.messageData[agentMessageId];\n  }\n\n  return undefined;\n};\n\nexport const getMessageAgentInformation = (\n  messageSentBy?:\n    | MessageCallbackResponse['sentBy']\n    | Message['sentBy']\n    | ConversationEntity['lastResponder'],\n  settings?: SettingsAttributes,\n  initAssistantPayload?: InitAssistantCallbackResponse,\n) => {\n  return {\n    avatarUrl:\n      messageSentBy?.avatarUrl ||\n      initAssistantPayload?.attributes?.avatarUrl ||\n      settings?.teamIconUrl,\n    displayName:\n      messageSentBy?.displayName ||\n      initAssistantPayload?.attributes?.publicName ||\n      initAssistantPayload?.attributes?.name ||\n      settings?.teamName,\n  };\n};\n\nexport const getLastMessagePreview = (conversation: ConversationEntity) => {\n  const { satisfaction, lastMessageAt, preview } = conversation;\n\n  const satisfactionTimetoken = satisfaction?.timetoken;\n  const satisfactionIntroduction = satisfaction?.form?.introduction;\n\n  const isSatisfactionLater =\n    satisfactionTimetoken &&\n    lastMessageAt &&\n    lastMessageAt < satisfactionTimetoken;\n\n  return isSatisfactionLater ? satisfactionIntroduction : preview;\n};\n\nexport const truncate = (input, length) =>\n  input.length > length ? `${input?.substring(0, length)}...` : input;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./colors.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./colors.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { KustomerWidgetEventTypes } from 'widget/types';\n\n// routes\nexport const CONVERSATIONS_PATH = 'conversations';\nexport const MESSAGE_THREAD_PATH = 'message_thread';\nexport const KB_ARTICLE_PATH = 'kb-article';\nexport const KB_DEFLECT_ARTICLE_PATH = 'kb-deflect-article';\nexport const KB_SEARCH_PATH = 'kb-search';\nexport const MODAL_ROOT_ID = 'kustomer-ui-modal-root';\n\nexport const WIDGET_TYPE_CHAT = 'chat';\n\nexport const WIDGET_TYPE_KB = 'kb';\n\nexport const WIDGET_TYPE_CHAT_KB = 'chat-kb';\n\n// KustomerWidgetEventTypes\nexport const kustomerWidgetEventTypes: Record<\n  string,\n  KustomerWidgetEventTypes\n> = {\n  onUnread: 'onUnread',\n  onConversationCreate: 'onConversationCreate',\n  onOpen: 'onOpen',\n  onClose: 'onClose',\n  onLogin: 'onLogin',\n  onLogout: 'onLogout',\n};\n\nexport const DEFAULT_SESSION_PAGE_SIZE = 100;\nexport const OFFLINE = 'offline';\n","import {\n  KB_ARTICLE_PATH,\n  KB_DEFLECT_ARTICLE_PATH,\n} from 'widget_main/globals/constants';\nimport { Page } from 'widget_main/store/types';\nimport { AppState } from './types';\n\nexport const INITIAL_STATE: AppState = {\n  widgetActions: {} as AppState['widgetActions'],\n  isChatHidden: true,\n  isMobile: false,\n  showWidget: false,\n  navigation: {\n    currentConversationId: undefined,\n    page: undefined,\n  } as AppState['navigation'],\n  conversations: {\n    data: {},\n    pages: {\n      next: 1,\n    },\n  } as AppState['conversations'],\n  messages: {\n    messageData: {},\n  } as AppState['messages'],\n  unreadCounts: {\n    total: 0,\n    conversations: {},\n  },\n  kb: {\n    categories: {},\n    articles: {},\n    articleSearchResults: undefined,\n    articleSearchInput: '',\n    currentCategoryId: undefined,\n    currentArticleId: undefined,\n  } as AppState['kb'],\n  connection: 'online',\n  loading: false,\n  retryCount: 0,\n};\n\nexport const DEFAULT_CHAT_ICON_SIZE = 60;\n\nexport const ALLOWED_MESSAGE_EVENT_ORIGINS = [\n  'https://cdn.kustomerapp.com', // Prod\n  'https://cdn.helpapp.io', // Staging\n  'https://cdn.helpsimply.com', // QA\n  'http://localhost:9000', // dev\n];\n\nexport const EXPAND_NAV_ITEMS: Page[] = [\n  KB_ARTICLE_PATH,\n  KB_DEFLECT_ARTICLE_PATH,\n];\n\nexport const MESSAGE_POLL_SETTINGS = {\n  interval: 60000,\n};\n","import { createTheme } from 'widget_main/globals/themes';\nimport { isBrowserIE } from 'polyfills/helpers';\nimport { InitCallbackResponse } from 'core_main/sdk/init/types';\nimport { getKustomer } from 'widget_main/globals/helpers';\nimport { ChatIconPosition, ChatIconSize } from 'widget/widget_api/types';\nimport { GetConversationsCallbackResponse } from 'core_main/sdk/get_conversations/types';\nimport { ConversationsState, Page } from 'widget_main/store/types';\nimport {\n  CONVERSATIONS_PATH,\n  KB_ARTICLE_PATH,\n  KB_DEFLECT_ARTICLE_PATH,\n  KB_SEARCH_PATH,\n  MESSAGE_THREAD_PATH,\n  WIDGET_TYPE_CHAT,\n  WIDGET_TYPE_CHAT_KB,\n  WIDGET_TYPE_KB,\n} from 'widget_main/globals/constants';\nimport { DEFAULT_CHAT_ICON_SIZE } from './constants';\n\nexport const setThemeVariables = (\n  settings: InitCallbackResponse['settings'],\n) => {\n  const theme = createTheme(settings);\n\n  if (isBrowserIE()) {\n    return import(\n      /* webpackChunkName: \"css-vars-ponyfill\" */ 'css-vars-ponyfill'\n    ).then((module) => {\n      module.default({\n        variables: theme as unknown as { [key: string]: string },\n      });\n    });\n  }\n  Object.entries(theme).forEach((value) => {\n    const variable = value[0];\n    const style = value[1];\n    document.documentElement.style.setProperty(variable, style);\n  });\n  return Promise.resolve();\n};\n\nexport const getChatIconSize = (): ChatIconSize => {\n  const startParameters = getKustomer()?.startParameters;\n  return (\n    startParameters?.chatIconSize || {\n      width: DEFAULT_CHAT_ICON_SIZE,\n      height: DEFAULT_CHAT_ICON_SIZE,\n    }\n  );\n};\n\nexport const getChatIconPosition = (): ChatIconPosition => {\n  const { startParameters } = getKustomer();\n  return startParameters.chatIconPosition;\n};\n\nexport const mapConversationState = (\n  conversations: GetConversationsCallbackResponse['conversations'],\n  conversationDataState: ConversationsState['data'],\n): ConversationsState['data'] => {\n  return conversations\n    .map((conversation) => {\n      const currentConversation =\n        conversationDataState[conversation.conversationId];\n\n      const optimisticMessages = currentConversation?.optimisticMessages || [];\n      const messages = currentConversation?.messages || [];\n      const satisfaction = currentConversation?.satisfaction;\n      const assistantId = currentConversation?.assistantId;\n      const hasAllMessages = currentConversation?.hasAllMessages;\n      const createdAt =\n        conversation.createdAt || currentConversation?.createdAt;\n\n      return {\n        ...conversation,\n        messages,\n        optimisticMessages,\n        satisfaction,\n        assistantId,\n        hasAllMessages,\n        createdAt,\n      };\n    })\n    .reduce((acc, val) => {\n      acc[val.conversationId] = val;\n      return acc;\n    }, {} as ConversationsState['data']);\n};\n\n/**\n * This is only needed to support testing live chat preview and the _rare_ case of an org\n *  changing their widget type to one that does not support a previous last page opened\n * @param lastOpenedPage\n * @param widgetType\n */\nexport const lastOpenedPageIsSupportedByWidgetType = (\n  lastOpenedPage: Page,\n  widgetType: string,\n): boolean => {\n  switch (lastOpenedPage) {\n    case KB_ARTICLE_PATH:\n    case KB_SEARCH_PATH:\n    case KB_DEFLECT_ARTICLE_PATH:\n      return [WIDGET_TYPE_KB, WIDGET_TYPE_CHAT_KB].includes(widgetType);\n    case CONVERSATIONS_PATH:\n    case MESSAGE_THREAD_PATH:\n      return [WIDGET_TYPE_CHAT, WIDGET_TYPE_CHAT_KB].includes(widgetType);\n    default:\n      return false;\n  }\n};\n","/// Minimal interface that only includes what we need\ninterface WindowWithKustomerGetNonce extends Window {\n  KustomerGetNonce?: (\n    scriptEmbedElement?: HTMLScriptElement | null,\n  ) => string | undefined;\n}\n\n/**\n * URLs that are allowed to receive CSP nonces when applying nonce to dynamic scripts.\n * These are trusted domains that are safe to apply CSP nonces to.\n */\nexport const CSP_NONCE_ALLOWED_URLS = [\n  'https://cdn.kustomerapp.com',\n  'https://cdn.helpapp.io',\n  'http://localhost:9000'\n];\n\n/**\n * Main function to get the nonce from script tags\n *\n * This function looks for nonce attributes in script tags that load the Kustomer SDK.\n * It now only looks for script tags with `data-kustomer-api-key` attribute,\n * as all entry points (widget.js, core.js, widget_api) now include this attribute.\n *\n * The function prioritizes the passed scriptEmbedElement parameter, then falls back\n * to searching the DOM for the appropriate script tag.\n *\n * @param scriptEmbedElement - Optional script element to check for nonce\n * @returns The nonce value if found, undefined otherwise\n */\nexport const getNonce = (scriptEmbedElement?: HTMLScriptElement | null): string | undefined => {\n  // First try the passed script element, then search DOM for [data-kustomer-api-key] script tag\n  const embedElement = scriptEmbedElement || document.querySelector(\n    '[data-kustomer-api-key]',\n  ) as HTMLScriptElement | null;\n\n  const nonce = embedElement?.getAttribute('nonce') || undefined;\n  return nonce;\n};\n\n// Add to window for browser-side files to use without imports\nif (typeof window !== 'undefined') {\n  (window as WindowWithKustomerGetNonce).KustomerGetNonce = getNonce;\n}\n","import { createContext, h, cloneElement } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport delve from 'dlv';\n\nvar IntlContext = createContext({ intl: {} });\n\n/** Check if an object is not null or undefined\n *\t@private\n */\nfunction defined(obj) {\n\treturn obj!==null && obj!==undefined;\n}\n\n\n/** A simpler Object.assign\n *  @private\n */\nfunction assign(obj, props) {\n\tfor (var i in props) {\n\t\tobj[i] = props[i];\n\t}\n\treturn obj;\n}\n\n\n/** Recursively copy keys from `source` to `target`, skipping truthy values already in `target`.\n *\t@private\n */\nfunction deepAssign(target, source) {\n\tvar out = assign({}, target);\n\tfor (var i in source) {\n\t\tif (source.hasOwnProperty(i)) {\n\t\t\tif (target[i] && source[i] && typeof target[i]==='object' && typeof source[i]==='object') {\n\t\t\t\tout[i] = deepAssign(target[i], source[i]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tout[i] = target[i] || source[i];\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n/** select('foo,bar') creates a mapping: `{ foo, bar }`\n *\t@private\n */\nfunction select(properties) {\n\tproperties = properties || {};\n\tif (typeof properties==='string') {\n\t\tproperties = properties.split(',');\n\t}\n\tif ('join' in properties) {\n\t\tvar selected = {};\n\t\tfor (var i=0; i<properties.length; i++) {\n\t\t\tvar val = properties[i].trim();\n\t\t\tif (val) { selected[val.split('.').pop()] = val; }\n\t\t}\n\t\treturn selected;\n\t}\n\treturn properties;\n}\n\nfunction objectWithoutProperties (obj, exclude) { var target = {}; for (var k in obj) if (Object.prototype.hasOwnProperty.call(obj, k) && exclude.indexOf(k) === -1) target[k] = obj[k]; return target; }\n\n\nvar URL_FLAG = /[?&#]intl=show/;\n\n\n/** `<IntlProvider>` is a nestable internationalization definition provider.\n *\tIt exposes an Intl scope & definition into the tree,\n *\tmaking them available to descendant components.\n *\n *\t> **Note:** When nested, gives precedence to keys higher up the tree!\n *\t> This means lower-level components can set their defaults by wrapping themselves\n *\t> in an `<IntlProvider>`, but still remain localizable by their parent components.\n *\n *\t@name IntlProvider\n *\t@param props\n *\t@param {String} [props.scope]\t\t\tNest `definition` under a root key, and set the active scope for the tree (essentially prefixing all `<Text />` keys).\n *\t@param {Boolean} [props.mark=false]\t\tIf `true`, all `<Text>` elements will be shown with a red/green background indicating whether they have valid Intl keys.\n *\t@param {Object} [props.definition={}]\tMerge the given definition into the current intl definition, giving the *current* definition precedence (i.e., only adding keys, acting as defaults)\n *\n *\t@example\n *\t// generally imported from a JSON file:\n *\tlet definition = {\n *\t\tfoo: 'Le Feux'\n *\t};\n *\n *\t<IntlProvider scope=\"weather\" definition={definition}>\n *\t\t<Text key=\"foo\">The Foo</Text>\n *\t</IntlProvider>\n *\n *\t// This will render the text:\n *\t\"Le Feux\"\n */\n\nfunction IntlProvider(ref) {\n\tvar scope = ref.scope;\n\tvar mark = ref.mark;\n\tvar definition = ref.definition;\n\tvar rest = objectWithoutProperties( ref, [\"scope\", \"mark\", \"definition\"] );\n\tvar props = rest;\n\n\tvar ref$1 = useContext(IntlContext);\n\tvar parentIntl = ref$1.intl;\n\tvar intl = assign({}, parentIntl || {});\n\n\t// set active scope for the tree if given\n\tif (scope) { intl.scope = scope; }\n\n\t// merge definition into current with lower precedence\n\tif (definition) {\n\t\tintl.dictionary = deepAssign(intl.dictionary || {}, definition);\n\t}\n\n\tif (mark || (typeof location!=='undefined' && String(location).match(URL_FLAG))) {\n\t\tintl.mark = true;\n\t}\n\n\treturn (\n\t\th( IntlContext.Provider, { value: { intl: intl } },\n\t\t\tprops.children\n\t\t)\n\t);\n}\n\n/**\n * Higher-order function that creates an `<IntlProvider />` wrapper component for the given component.  It\n * takes two forms depending on how many arguments it's given:\n * It can take a functional form like:\n * intl(ComponentToWrap, options)\n *\n * or it can take an annotation form like:\n * @intl(options)\n * class ComponentToWrap extends Component {}\n *\n *\t@param {Component or Object} args[0] If there are two arguments, the first argument is the Component to wrap in `<IntlProvider/>`. If there is just one argument, this is the options object to pass as `props` to `<IntlProvider/>`. See the definition of the options param below for details.\n *\t@param {Object} options If there are two arguments, the second argument is Passed as `props` to `<IntlProvider />`\n *\t@param [options.scope]\t\t\tNest `definition` under a root key, and set the active scope for the tree (essentially prefixing all `<Text />` keys).\n *\t@param [options.definition={}]\tMerge the given definition into the current intl definition, giving the *current* definition precedence (i.e., only adding keys, acting as defaults)\n */\nfunction intl(Child, options) {\n\tif (arguments.length<2) {\n\t\toptions = Child;\n\t\treturn function (Child) { return intl(Child, options); };\n\t}\n\tfunction IntlProviderWrapper(props) {\n\t\treturn h(\n\t\t\tIntlProvider,\n\t\t\toptions || {},\n\t\t\th(Child, props)\n\t\t);\n\t}\n\n\tIntlProviderWrapper.getWrappedComponent = Child && Child.getWrappedComponent || (function () { return Child; });\n\treturn IntlProviderWrapper;\n}\n\nvar EMPTY = {};\n\n/** Populate {{template.fields}} within a given string.\n *\n *\t@private\n *\t@param {String} template\tThe string containing fields to be resolved\n *\t@param {Object} [fields={}]\tOptionally nested object of fields, referencable from `template`.\n *\t@example\n *\t\ttemplate('foo{{bar}}', { bar:'baz' }) === 'foobaz'\n */\nfunction template(template, fields, scope, dictionary) {\n\treturn template && template.replace(/\\{\\{([\\w.-]+)\\}\\}/g, replacer.bind(null, fields || EMPTY, scope, dictionary));\n}\n\n/** Replacement callback for injecting fields into a String\n *\t@private\n */\nfunction replacer(currentFields, scope, dictionary, s, field) {\n\tvar parts = field.split('.'),\n\t\tv = currentFields;\n\tfor (var i=0; i<parts.length; i++) {\n\t\tv = v[parts[i]];\n\t\tif (v == null) { return ''; } // eslint-disable-line eqeqeq\n\n\t\t//allow field values to be <Text /> nodes\n\t\tif (v && v.type === Text) {\n\t\t\treturn translate(v.props.id, scope, dictionary, v.props.fields, v.props.plural, v.props.fallback);\n\t\t}\n\t}\n\t// allow for recursive {{config.xx}} references:\n\tif (typeof v==='string' && v.match(/\\{\\{/)) {\n\t\tv = template(v, currentFields);\n\t}\n\treturn v;\n}\n\n/** Attempts to look up a translated value from a given dictionary.\n *  Also supports json templating using the format: {{variable}}\n *  Falls back to default text.\n *\n *  @param {String} id  \t\t\tIntl field name/id (subject to scope)\n *  @param {String} [scope='']\t\tScope, which prefixes `id` with `${scope}.`\n *  @param {Object} dictionary\t\tA nested object containing translations\n *  @param {Object} [fields={}]\t\tTemplate fields for use by translated strings\n *  @param {Number} [plural]\t\tIndicates a quantity, used to trigger pluralization\n *  @param {String|Array} [fallback]\tText to return if no translation is found\n *  @returns {String} translated\n */\nfunction translate(id, scope, dictionary, fields, plural, fallback) {\n\tif (scope) { id = scope + '.' + id; }\n\n\tvar value = dictionary && delve(dictionary, id);\n\n\t// plural forms:\n\t// key: ['plural', 'singular']\n\t// key: { none, one, many }\n\t// key: { singular, plural }\n\tif ((plural || plural===0) && value && typeof value==='object') {\n\t\tif (value.splice) {\n\t\t\tvalue = value[plural] || value[0];\n\t\t}\n\t\telse if (plural===0 && defined(value.none)) {\n\t\t\tvalue = value.none;\n\t\t}\n\t\telse if (plural===1 && defined(value.one || value.singular)) {\n\t\t\tvalue = value.one || value.singular;\n\t\t}\n\t\telse {\n\t\t\tvalue = value.some || value.many || value.plural || value.other || value;\n\t\t}\n\t}\n\n\treturn value && template(value, fields, scope, dictionary) || fallback || null;\n}\n\n/** Highlight/colorize the i18n'd node if `mark` is set on `intl` in context.  If not, just returns `value`\n *\n *\t@private\n *\t@param {String|VNode} value\tThe l10n'd text/vnode to highlight or pass through\n *\t@param {string} id\tThe key used to lookup the value in the intl dictionary\n */\nfunction HighlightI18N(ref) {\n\tvar value = ref.value;\n\tvar id = ref.id;\n\n\tvar ref$1 = useContext(IntlContext);\n\tvar intl = ref$1.intl;\n\n\tif (intl && intl.mark) {\n\t\tvar dictionaryKey = \"dictionary\" + (intl && intl.scope ? (\".\" + (intl.scope)) : '') + \".\" + id;\n\t\treturn (\n\t\t\th( 'mark', {\n\t\t\t\tstyle: {\n\t\t\t\t\tbackground: value\n\t\t\t\t\t\t? delve(intl, dictionaryKey)\n\t\t\t\t\t\t\t? 'rgba(119,231,117,.5)'\n\t\t\t\t\t\t\t: 'rgba(229,226,41,.5)'\n\t\t\t\t\t\t: 'rgba(228,147,51,.5)'\n\t\t\t\t}, title: id },\n\t\t\t\tvalue\n\t\t\t)\n\t\t);\n\t}\n\n\treturn value;\n}\n\n/** `<Text>` renders internationalized text.\n *\tIt attempts to look up translated values from a dictionary in context.\n *\n *\tTemplate strings can contain `{{field}}` placeholders,\n *\twhich injects values from the `fields` prop.\n *\n *\tWhen string lookup fails, renders its children as fallback text.\n *\n *\t@param {Object}       props               props\n *\t@param {String}       props.id            Key to look up in intl dictionary, within any parent scopes (`$scope1.$scope2.$id`)\n *\t@param {ReactElement} [props.children]    Fallback text if no definition is found\n *\t@param {Object}       [props.fields={}]   Values to inject into template `{{fields}}`. Values in the `fields` object will be coerced to strings, with the exception of `<Text/>` nodes which will be resolved to their translated value\n *\t@param {Number}       [props.plural]      Integer \"count\", used to select plural forms\n *\n *\t@example\n *\t// If there is no dictionary in context..\n *\t<Text id=\"foo\">The Foo</Text>\n *\t// ..produces the text:\n *\t\"The Foo\"\n *\n *\t@example\n *\t// Given a dictionary and some fields..\n *\t<IntlProvider definition={{ foo:'Le Feux {{bar}}' }}>\n *\t\t<Text id=\"foo\" fields={{ bar: 'BEAR' }}>The Foo</Text>\n *\t</IntlProvider>\n *\t// ..produces the text:\n *\t\"Le Feux BEAR\"\n *\n *\t@example\n *\t// Within a scope, both `id` and the definition are namespaced..\n *\t<IntlProvider scope=\"weather\" definition={{ foo:'Le Feux' }}>\n *\t\t<Text id=\"foo\">The Foo</Text>\n *\t</IntlProvider>\n *\t// ..produces the text:\n *\t\"Le Feux\"\n */\nfunction Text(ref) {\n\tvar id = ref.id;\n\tvar fallback = ref.children;\n\tvar plural = ref.plural;\n\tvar fields = ref.fields;\n\n\tvar ref$1 = useContext(IntlContext);\n\tvar intl = ref$1.intl;\n\n\tvar value = translate(\n\t\tid,\n\t\tintl && intl.scope,\n\t\tintl && intl.dictionary,\n\t\tfields,\n\t\tplural,\n\t\tfallback\n\t);\n\n\treturn h( HighlightI18N, { id: id, value: value });\n}\n\n/** Translates the property values in an Object, returning a copy.\n *\t**Note:** By default, `String` keys will be treated as Intl ID's.\n *\tPass `true` to return an Object containing *only* translated\n *\tvalues where the prop is a <Text /> node.\n *\n *\t@private\n *\t@param {Object} props\tAn object with values to translate\n *\t@param {Object} intl\tAn intl context object (eg: `context.intl`)\n *\t@param {Boolean} [onlyTextNodes=false]\tOnly process `<Text />` values\n *\t@returns {Object} translatedProps\n */\nfunction translateMapping(props, intl, onlyTextNodes) {\n\tvar out = {};\n\tintl = intl || {};\n\tprops = select(props);\n\tfor (var name in props) {\n\t\tif (props.hasOwnProperty(name) && props[name]) {\n\t\t\tvar def = props[name];\n\n\t\t\t// if onlyTextNodes=true, skip any props that aren't <Text /> vnodes\n\t\t\tif (!onlyTextNodes && typeof def==='string') {\n\t\t\t\tout[name] = translate(def, intl.scope, intl.dictionary);\n\t\t\t}\n\t\t\telse if (def.type===Text) {\n\t\t\t\t// it's a <Text />, just grab its props:\n\t\t\t\tdef = assign({\n\t\t\t\t\t// use children as fallback content\n\t\t\t\t\tfallback: def.props.children\n\t\t\t\t}, def.props);\n\t\t\t\tout[name] = translate(def.id, intl.scope, intl.dictionary, def.fields, def.plural, def.fallback);\n\t\t\t}\n\t\t}\n\t}\n\treturn out;\n}\n\n/** `<Localizer />` is a Compositional Component.\n *\tIt \"renders\" out any `<Text />` values in its child's props.\n *\n *\t@name Localizer\n *\t@param {Object} props\n *\t@param {Object} props.children\tChild components with props to localize.\n *\t@param {Object} context\n *\t@param {Object} context.intl\t\t[internal] dictionary and scope info\n *\t@example\n *\t<Localizer>\n *\t\t<input placeholder={<Text id=\"username.placeholder\" />} />\n *\t</Localizer>\n *\t// produces:\n *\t<input placeholder=\"foo\" />\n *\n *\t@example\n *\t<Localizer>\n *\t\t<abbr title={<Text id=\"oss-title\">Open Source Software</Text>}>\n *\t\t\t<Text id=\"oss\">OSS</Text>\n *\t\t</abbr>\n *\t</Localizer>\n *\t// produces:\n *\t<abbr title=\"Open Source Software\">OSS</abbr>\n */\nfunction Localizer(ref) {\n\tvar children = ref.children;\n\n\tvar ref$1 = useContext(IntlContext);\n\tvar intl = ref$1.intl;\n\n\treturn children && children.length\n\t\t? children.map(function (child) { return cloneElement(child, translateMapping(child.props, intl, true)); })\n\t\t: children && cloneElement(children, translateMapping(children.props, intl, true));\n}\n\n/* eslint-disable react/no-danger */\n\n/** `<MarkupText>` is just like {@link Text} but it can also contain html markup in rendered strings.  It wraps its contents in a `<span>` tag.\n *\n *\t@param {Object} props\t\t\t\tprops\n *\t@param {String} props.id\t\t\tKey to look up in intl dictionary, within any parent scopes (`$scope1.$scope2.$id`)\n *\t@param {Object} [props.fields={}]\tValues to inject into template `{{fields}}`.  Values in the `fields` object will be coerced to strings, with the exception of `<Text/>` nodes which will be resolved to their translated value\n *\t@param {Number} [props.plural]\t\tInteger \"count\", used to select plural forms\n *\t@param {Object} context\n *\t@param {Object} context.intl\t\t[internal] dictionary and scope info\n *\n *\t@example\n *\t// If there is no dictionary in context..\n *\t<MarkupText id=\"foo\"><b>The Foo</b></MarkupText>\n *\t// ..produces the vnode:\n *\t<span><b>The Foo</b></span>\n *\n *\t@example\n *\t// Given a dictionary and some fields..\n *\t<IntlProvider definition={{ foo:'Le Feux <b>{{bar}}</b>' }}>\n *\t\t<MarkupText id=\"foo\" fields={{ bar: 'BEAR' }}>The Foo</MarkupText>\n *\t</IntlProvider>\n *\t// ..produces the vnode:\n *\t<span>Le Feux <b>BEAR</b></span>\n *\n *\t@example\n *\t// Within a scope, both `id` and the definition are namespaced..\n *\t<IntlProvider scope=\"weather\" definition={{ foo:'Le <a href=\"http://foo.com\">Feux</a>' }}>\n *\t\t<MarkupText id=\"foo\">The Foo</MarkupText>\n *\t</IntlProvider>\n *\t// ..produces the vnode:\n *\t<span>Le <a href=\"http://foo.com\">Feux</a></span>\n *\n *\t@example\n *\t// renders nothing if there is no key match and no fallback\n *\t<div><MarkupText /></div>\n *\t// ..produces the vnode:\n *\t<div/>\n */\nfunction MarkupText(props) {\n\treturn (\n\t\th( Localizer, null,\n\t\t\th( Html, { html: h( Text, props), id: props.id })\n\t\t)\n\t);\n}\n\nfunction Html(ref) {\n\tvar html = ref.html;\n\tvar id = ref.id;\n\n\tvar value = !html ? html : typeof html === 'string' ? h( 'span', { dangerouslySetInnerHTML: { __html: html } }) : h( 'span', null, html ) ;\n\treturn h( HighlightI18N, { id: id, value: value });\n}\n\n/** `@withText()` is a Higher Order Component, often used as a decorator.\n *\n *\tIt wraps a child component and passes it translations\n *\tbased on a mapping to the dictionary & scope in context.\n *\n *\t@param {Object|Function|String} mapping\t\tMaps prop names to intl keys (or `<Text>` nodes).\n *\n *\t@example @withText({\n *\t\tplaceholder: 'user.placeholder'\n *\t})\n *\tclass Foo {\n *\t\t// now the `placeholder` prop is our localized String:\n *\t\trender({ placeholder }) {\n *\t\t\treturn <input placeholder={placeholder} />\n *\t\t}\n *\t}\n *\n *\t@example @withText({\n *\t\tplaceholder: <Text id=\"user.placeholder\">fallback text</Text>\n *\t})\n *\tclass Foo {\n *\t\trender({ placeholder }) {\n *\t\t\treturn <input placeholder={placeholder} />\n *\t\t}\n *\t}\n *\n *\t@example @withText('user.placeholder')\n *\tclass Foo {\n *\t\t// for Strings/Arrays, the last path segment becomes the prop name:\n *\t\trender({ placeholder }) {\n *\t\t\treturn <input placeholder={placeholder} />\n *\t\t}\n *\t}\n *\n *\t@example <caption>Works with functional components, too</caption>\n *\tconst Foo = withText('user.placeholder')( props =>\n *\t\t<input placeholder={props.placeholder} />\n *\t)\n *\n * \t@example <caption>getWrappedComponent() returns wrapped child Component</caption>\n *\tconst Foo = () => <div/>;\n *\tconst WrappedFoo = withText('user.placeholer')(Foo);\n *\tWrappedFoo.getWrappedComponent() === Foo; // true\n */\nfunction withText(mapping) {\n\treturn function withTextWrapper(Child) {\n\t\tfunction WithTextWrapper(props, context) {\n\t\t\tvar ref = useContext(IntlContext);\n\t\t\tvar intl = ref.intl;\n\n\t\t\tvar map = typeof mapping==='function' ? mapping(props, { intl: intl }) : mapping;\n\t\t\tvar translations = translateMapping(map, intl);\n\t\t\treturn h(Child, assign(assign({}, props), translations));\n\t\t}\n\n\t\tWithTextWrapper.getWrappedComponent = Child && Child.getWrappedComponent || (function () { return Child; });\n\t\treturn WithTextWrapper;\n\t};\n}\n\n/** `useText` is the hook version of {@link withText}\n *\n *\t@param {Object|Function|String} mapping\t\tMaps prop names to intl keys (or `<Text>` nodes).\n *\n *\t@example function MyComponent() {\n *\t\tconst { placeholder } = useText({\n *\t\t\tplaceholder: 'user.placeholder'\n *\t\t});\n *\t\treturn <input placeholder={placeholder} />\n *\t}\n *\n *\t@example function MyComponent() {\n *\t\tconst { placeholder } = useText({\n *\t\t\tplaceholder: <Text id=\"user.placeholder\">fallback text</Text>\n *\t\t});\n *\t\treturn <input placeholder={placeholder} />\n *\t}\n *\n *\t@example function MyComponent() {\n *\t\t// for Strings/Arrays, the last path segment becomes the prop name:\n *\t\tconst { placeholder } = useText('user.placeholder');\n *\n *\t\treturn <input placeholder={placeholder} />\n *\t}\n */\nfunction useText(mapping) {\n\tvar ref = useContext(IntlContext);\n\tvar intl = ref.intl;\n\n\treturn translateMapping(\n\t\ttypeof mapping==='function' ? mapping({ intl: intl }) : mapping,\n\t\tintl\n\t);\n}\n\nintl.intl = intl;\nintl.IntlContext = IntlContext;\nintl.IntlProvider = IntlProvider;\nintl.Text = Text;\nintl.MarkupText = MarkupText;\nintl.Localizer = Localizer;\nintl.withText = withText;\nintl.useText = useText;\nintl.translate = translate;\n\nexport default intl;\nexport { IntlContext, IntlProvider, Localizer, MarkupText, Text, intl, translate, useText, withText };\n//# sourceMappingURL=preact-i18n.esm.js.map\n","import { createContext } from 'preact';\nimport { SettingsAttributes } from 'core_main/api/settings/types';\nimport { CONVERSATIONS_PATH } from 'widget_main/globals/constants';\nimport { Availability } from 'core_main/sdk/is_chat_available/types';\nimport { UnreadCountsState } from 'core_main/types';\nimport {\n  NavigationState,\n  WidgetActions,\n  ConversationsState,\n  MessagesState,\n  KBState,\n  ConnectionState,\n  ProactiveChatState,\n} from './types';\n\nexport const ChatAvailabilityContext = createContext<Availability | undefined>(\n  undefined,\n);\n\nexport const SettingsContext = createContext({} as SettingsAttributes);\nexport const HideNewConversationButtonSettingsContext = createContext({\n  onChatHistory: false,\n  onConversationEnd: false,\n});\nexport const NavigationContext = createContext({\n  page: CONVERSATIONS_PATH,\n} as NavigationState);\n\nexport const WidgetActionsContext = createContext({} as WidgetActions);\n\nexport const ConversationsContext = createContext({} as ConversationsState);\n\nexport const MessagesContext = createContext({} as MessagesState);\n\nexport const UnreadCountsContext = createContext({} as UnreadCountsState);\n\nexport const ProactiveChatContext = createContext({} as ProactiveChatState);\n\nexport const ConnectionContext = createContext<ConnectionState>('online');\n\nexport const KBContext = createContext({} as KBState);\n","export default {\n  answers: 'Answers',\n  goBack: 'Go Back',\n  done: 'Done',\n  yes: 'Yes',\n  no: 'No',\n  newMessages: 'New Messages',\n};\n","import { useText } from 'preact-i18n';\nimport globalMessages from 'widget_main/globals/messages';\n\ntype GlobalMessages = typeof globalMessages;\nexport const useTranslations = <\n  M extends Record<string, string>,\n  G extends keyof GlobalMessages\n>(\n  messages: M,\n  globalIds?: G[],\n): M & Pick<GlobalMessages, G> => {\n  const contextInput = Object.entries(messages).reduce((acc, val) => {\n    const key = val[0];\n    acc[key] = key;\n    return acc;\n  }, {});\n\n  const globals = globalIds?.reduce((acc, id) => {\n    const globalMessage = globalMessages[id];\n\n    if (globalMessage) {\n      acc[id] = id;\n    }\n\n    return acc;\n  }, {} as GlobalMessages);\n\n  const withGlobals = { ...contextInput, ...globals };\n\n  const definitions = useText(withGlobals);\n\n  const withDefaults = Object.entries(definitions).reduce((acc, val) => {\n    const key = val[0];\n    const value = val[1];\n\n    if (!value) {\n      acc[key] = messages[key] || globalMessages[key];\n    }\n\n    return acc;\n  }, definitions);\n\n  return { ...withDefaults };\n};\n","import { captureException } from './sentry';\n\nexport enum ErrorMessage {\n  CHAT_DISABLED = 'Kustomer Chat is disabled in your org settings. Initialization will not continue.',\n}\n\nexport interface ErrorProps {\n  message?: string;\n  tags?: Record<string, any>;\n}\n\nexport const handleError = (error, { message, tags }: ErrorProps = {}) => {\n  console.error(message, error);\n  if (error.message === ErrorMessage.CHAT_DISABLED) {\n    return undefined;\n  }\n  return captureException(error, {\n    tags: {\n      errorBoundary: false,\n      ...tags,\n    },\n  });\n};\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"xmlns:xlink\":\"http://www.w3.org/1999/xlink\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n   \", h('path', {\"fill\":\"currentColor\",\"d\":\"M3.27,1.44L2,2.72L4.05,4.77C2.75,5.37 1.5,6.11 0.38,7C4.2,11.8 8.14,16.67 12,21.5L15.91,16.63L19.23,19.95L20.5,18.68C14.87,13.04 3.27,1.44 3.27,1.44M12,3C10.6,3 9.21,3.17 7.86,3.5L9.56,5.19C10.37,5.07 11.18,5 12,5C15.07,5 18.09,5.86 20.71,7.45L16.76,12.38L18.18,13.8C20.08,11.43 22,9 23.65,7C20.32,4.41 16.22,3 12,3M5.57,6.29L14.5,15.21L12,18.3L3.27,7.44C4,7 4.78,6.61 5.57,6.29Z\"}, []), \"\\n\"]);\n};\n\n        ","export function getSentry() {\n  return import(/* webpackChunkName: \"sentry\" */ '@sentry/browser');\n}\n\nexport function initSentry(key, orgId?) {\n  return getSentry().then((Sentry) => {\n    // todo set org and user info (tracking token? customer id?)\n    if (!Sentry.getClient()) {\n      Sentry.init({\n        dsn: `https://${key}@o38471.ingest.sentry.io/6150287`, // 6150287 is project ID. not sure what o38471 is\n        environment: process.env.SENTRY_ENV,\n        release: process.env.VERSION,\n        initialScope: {\n          tags: { orgId },\n        },\n        beforeSend(event) {\n          if (event.exception?.values?.length) {\n            // Even though values is an array, we can safely assume that the first one is our error.\n            // The only time there will be more than one exeption is with linked errors, which we are not using.\n            const exception = event.exception.values[0];\n            if (!exception.stacktrace) {\n              return null;\n            }\n          }\n          return event;\n        },\n        integrations: [\n          Sentry.httpClientIntegration({\n            failedRequestStatusCodes: [400, 599],\n          }),\n        ],\n        ignoreErrors: [\n          'TypeError: Failed to fetch',\n          'TypeError: NetworkError when attempting to fetch resource.',\n          'TypeError: cancelled',\n          'TypeError: Abgebrochen', // German\n          'TypeError: Kumottu', // Finnish\n          'TypeError: annullato', // Italian\n          'TypeError: annulleret', // Danish\n          'TypeError: avbrutt', // Norwegian\n          'TypeError: geannuleerd', // Dutch\n          'TypeError: poništeno', // Bosnian\n          'TypeError: vazgeçildi', // Turkish\n          'TypeError: visszavonva', // Hungarian\n          'TypeError: скасовано', // Ukrainian\n          'TypeError: ถูกยกเลิก', // Thai\n          'TypeError: キャンセルしました', // Japanese\n          'TypeError: 已取消', // Chinese\n          'TypeError: 취소됨', // Korean\n        ],\n      });\n    }\n    return Sentry;\n  });\n}\n\nexport function captureException(error, context) {\n  return getSentry().then((Sentry) => {\n    return Sentry.captureException(error, context);\n  });\n}\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"20\",\"height\":\"20\",\"viewBox\":\"0 0 20 20\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"d\":\"M9.19999 10.0001H4.33472M4.19681 10.6378L3.39301 13.0389C2.95276 14.354 2.73264 15.0115 2.89061 15.4164C3.0278 15.768 3.32243 16.0346 3.68598 16.1361C4.10463 16.2529 4.73695 15.9684 6.00159 15.3993L14.1091 11.7509C15.3435 11.1954 15.9607 10.9177 16.1515 10.5319C16.3172 10.1967 16.3172 9.80338 16.1515 9.46818C15.9607 9.08235 15.3435 8.80461 14.1091 8.24914L5.98761 4.59449C4.72678 4.02712 4.09637 3.74343 3.67814 3.8598C3.31492 3.96087 3.02032 4.22675 2.88266 4.57774C2.72415 4.98188 2.94192 5.63799 3.37746 6.9502L4.19837 9.4235C4.27318 9.64887 4.31058 9.76156 4.32535 9.87681C4.33845 9.97908 4.33831 10.0826 4.32495 10.1848C4.30989 10.3001 4.2722 10.4127 4.19681 10.6378Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"1.6\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","import{useState as n,useReducer as t,useEffect as e,useLayoutEffect as r,useRef as u,useImperativeHandle as o,useMemo as i,useCallback as l,useContext as c,useDebugValue as f}from\"preact/hooks\";export*from\"preact/hooks\";import{Component as a,createElement as s,options as h,toChildArray as d,Fragment as v,render as p,hydrate as m,cloneElement as y,createRef as b,createContext as _}from\"preact\";export{createElement,createContext,createRef,Fragment,Component}from\"preact\";function S(n,t){for(var e in t)n[e]=t[e];return n}function C(n,t){for(var e in n)if(\"__source\"!==e&&!(e in t))return!0;for(var r in t)if(\"__source\"!==r&&n[r]!==t[r])return!0;return!1}function E(n){this.props=n}function g(n,t){function e(n){var e=this.props.ref,r=e==n.ref;return!r&&e&&(e.call?e(null):e.current=null),t?!t(this.props,n)||!r:C(this.props,n)}function r(t){return this.shouldComponentUpdate=e,s(n,t)}return r.displayName=\"Memo(\"+(n.displayName||n.name)+\")\",r.prototype.isReactComponent=!0,r.__f=!0,r}(E.prototype=new a).isPureReactComponent=!0,E.prototype.shouldComponentUpdate=function(n,t){return C(this.props,n)||C(this.state,t)};var w=h.__b;h.__b=function(n){n.type&&n.type.__f&&n.ref&&(n.props.ref=n.ref,n.ref=null),w&&w(n)};var R=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.forward_ref\")||3911;function x(n){function t(t,e){var r=S({},t);return delete r.ref,n(r,(e=t.ref||e)&&(\"object\"!=typeof e||\"current\"in e)?e:null)}return t.$$typeof=R,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName=\"ForwardRef(\"+(n.displayName||n.name)+\")\",t}var N=function(n,t){return null==n?null:d(d(n).map(t))},k={map:N,forEach:N,count:function(n){return n?d(n).length:0},only:function(n){var t=d(n);if(1!==t.length)throw\"Children.only\";return t[0]},toArray:d},A=h.__e;h.__e=function(n,t,e){if(n.then)for(var r,u=t;u=u.__;)if((r=u.__c)&&r.__c)return null==t.__e&&(t.__e=e.__e,t.__k=e.__k),r.__c(n,t);A(n,t,e)};var O=h.unmount;function L(){this.__u=0,this.t=null,this.__b=null}function U(n){var t=n.__.__c;return t&&t.__e&&t.__e(n)}function F(n){var t,e,r;function u(u){if(t||(t=n()).then(function(n){e=n.default||n},function(n){r=n}),r)throw r;if(!e)throw t;return s(e,u)}return u.displayName=\"Lazy\",u.__f=!0,u}function M(){this.u=null,this.o=null}h.unmount=function(n){var t=n.__c;t&&t.__R&&t.__R(),t&&!0===n.__h&&(n.type=null),O&&O(n)},(L.prototype=new a).__c=function(n,t){var e=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(e);var u=U(r.__v),o=!1,i=function(){o||(o=!0,e.__R=null,u?u(l):l())};e.__R=i;var l=function(){if(!--r.__u){if(r.state.__e){var n=r.state.__e;r.__v.__k[0]=function n(t,e,r){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=r)),t}(n,n.__c.__P,n.__c.__O)}var t;for(r.setState({__e:r.__b=null});t=r.t.pop();)t.forceUpdate()}},c=!0===t.__h;r.__u++||c||r.setState({__e:r.__b=r.__v.__k[0]}),n.then(i,i)},L.prototype.componentWillUnmount=function(){this.t=[]},L.prototype.render=function(n,t){if(this.__b){if(this.__v.__k){var e=document.createElement(\"div\"),r=this.__v.__k[0].__c;this.__v.__k[0]=function n(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(n){\"function\"==typeof n.__c&&n.__c()}),t.__c.__H=null),null!=(t=S({},t)).__c&&(t.__c.__P===r&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(t){return n(t,e,r)})),t}(this.__b,e,r.__O=r.__P)}this.__b=null}var u=t.__e&&s(v,null,n.fallback);return u&&(u.__h=null),[s(v,null,t.__e?null:n.children),u]};var T=function(n,t,e){if(++e[1]===e[0]&&n.o.delete(t),n.props.revealOrder&&(\"t\"!==n.props.revealOrder[0]||!n.o.size))for(e=n.u;e;){for(;e.length>3;)e.pop()();if(e[1]<e[0])break;n.u=e=e[2]}};function D(n){return this.getChildContext=function(){return n.context},n.children}function I(n){var t=this,e=n.i;t.componentWillUnmount=function(){p(null,t.l),t.l=null,t.i=null},t.i&&t.i!==e&&t.componentWillUnmount(),n.__v?(t.l||(t.i=e,t.l={nodeType:1,parentNode:e,childNodes:[],appendChild:function(n){this.childNodes.push(n),t.i.appendChild(n)},insertBefore:function(n,e){this.childNodes.push(n),t.i.appendChild(n)},removeChild:function(n){this.childNodes.splice(this.childNodes.indexOf(n)>>>1,1),t.i.removeChild(n)}}),p(s(D,{context:t.context},n.__v),t.l)):t.l&&t.componentWillUnmount()}function W(n,t){return s(I,{__v:n,i:t})}(M.prototype=new a).__e=function(n){var t=this,e=U(t.__v),r=t.o.get(n);return r[0]++,function(u){var o=function(){t.props.revealOrder?(r.push(u),T(t,n,r)):u()};e?e(o):o()}},M.prototype.render=function(n){this.u=null,this.o=new Map;var t=d(n.children);n.revealOrder&&\"b\"===n.revealOrder[0]&&t.reverse();for(var e=t.length;e--;)this.o.set(t[e],this.u=[1,0,this.u]);return n.children},M.prototype.componentDidUpdate=M.prototype.componentDidMount=function(){var n=this;this.o.forEach(function(t,e){T(n,e,t)})};var j=\"undefined\"!=typeof Symbol&&Symbol.for&&Symbol.for(\"react.element\")||60103,P=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|marker(?!H|W|U)|overline|paint|stop|strikethrough|stroke|text(?!L)|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,V=\"undefined\"!=typeof document,z=function(n){return(\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol()?/fil|che|rad/i:/fil|che|ra/i).test(n)};function B(n,t,e){return null==t.__k&&(t.textContent=\"\"),p(n,t),\"function\"==typeof e&&e(),n?n.__c:null}function $(n,t,e){return m(n,t),\"function\"==typeof e&&e(),n?n.__c:null}a.prototype.isReactComponent={},[\"componentWillMount\",\"componentWillReceiveProps\",\"componentWillUpdate\"].forEach(function(n){Object.defineProperty(a.prototype,n,{configurable:!0,get:function(){return this[\"UNSAFE_\"+n]},set:function(t){Object.defineProperty(this,n,{configurable:!0,writable:!0,value:t})}})});var H=h.event;function Z(){}function Y(){return this.cancelBubble}function q(){return this.defaultPrevented}h.event=function(n){return H&&(n=H(n)),n.persist=Z,n.isPropagationStopped=Y,n.isDefaultPrevented=q,n.nativeEvent=n};var G,J={configurable:!0,get:function(){return this.class}},K=h.vnode;h.vnode=function(n){var t=n.type,e=n.props,r=e;if(\"string\"==typeof t){var u=-1===t.indexOf(\"-\");for(var o in r={},e){var i=e[o];V&&\"children\"===o&&\"noscript\"===t||\"value\"===o&&\"defaultValue\"in e&&null==i||(\"defaultValue\"===o&&\"value\"in e&&null==e.value?o=\"value\":\"download\"===o&&!0===i?i=\"\":/ondoubleclick/i.test(o)?o=\"ondblclick\":/^onchange(textarea|input)/i.test(o+t)&&!z(e.type)?o=\"oninput\":/^onfocus$/i.test(o)?o=\"onfocusin\":/^onblur$/i.test(o)?o=\"onfocusout\":/^on(Ani|Tra|Tou|BeforeInp)/.test(o)?o=o.toLowerCase():u&&P.test(o)?o=o.replace(/[A-Z0-9]/,\"-$&\").toLowerCase():null===i&&(i=void 0),r[o]=i)}\"select\"==t&&r.multiple&&Array.isArray(r.value)&&(r.value=d(e.children).forEach(function(n){n.props.selected=-1!=r.value.indexOf(n.props.value)})),\"select\"==t&&null!=r.defaultValue&&(r.value=d(e.children).forEach(function(n){n.props.selected=r.multiple?-1!=r.defaultValue.indexOf(n.props.value):r.defaultValue==n.props.value})),n.props=r,e.class!=e.className&&(J.enumerable=\"className\"in e,null!=e.className&&(r.class=e.className),Object.defineProperty(r,\"className\",J))}n.$$typeof=j,K&&K(n)};var Q=h.__r;h.__r=function(n){Q&&Q(n),G=n.__c};var X={ReactCurrentDispatcher:{current:{readContext:function(n){return G.__n[n.__c].props.value}}}},nn=\"17.0.2\";function tn(n){return s.bind(null,n)}function en(n){return!!n&&n.$$typeof===j}function rn(n){return en(n)?y.apply(null,arguments):n}function un(n){return!!n.__k&&(p(null,n),!0)}function on(n){return n&&(n.base||1===n.nodeType&&n)||null}var ln=function(n,t){return n(t)},cn=function(n,t){return n(t)},fn=v;export default{useState:n,useReducer:t,useEffect:e,useLayoutEffect:r,useRef:u,useImperativeHandle:o,useMemo:i,useCallback:l,useContext:c,useDebugValue:f,version:\"17.0.2\",Children:k,render:B,hydrate:$,unmountComponentAtNode:un,createPortal:W,createElement:s,createContext:_,createFactory:tn,cloneElement:rn,createRef:b,Fragment:v,isValidElement:en,findDOMNode:on,Component:a,PureComponent:E,memo:g,forwardRef:x,flushSync:cn,unstable_batchedUpdates:ln,StrictMode:v,Suspense:L,SuspenseList:M,lazy:F,__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:X};export{nn as version,k as Children,B as render,$ as hydrate,un as unmountComponentAtNode,W as createPortal,tn as createFactory,rn as cloneElement,en as isValidElement,on as findDOMNode,E as PureComponent,g as memo,x as forwardRef,cn as flushSync,ln as unstable_batchedUpdates,fn as StrictMode,L as Suspense,M as SuspenseList,F as lazy,X as __SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED};\n//# sourceMappingURL=compat.module.js.map\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./button.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./button.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, JSX } from 'preact';\nimport { memo } from 'preact/compat';\nimport { Ref } from 'preact/hooks';\nimport classNames from 'classnames';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport styles from './button.scss';\n\ninterface ButtonProps {\n  variant: 'primary' | 'secondary' | 'danger' | 'link' | 'outlinePrimary';\n  type: 'button' | 'submit' | 'reset';\n  ariaLabel?: string | JSX.Element;\n  onClick: (e: Event) => unknown;\n  className?: string;\n  block?: boolean;\n  children?: JSX.Element | JSX.Element[] | string;\n  disabled?: boolean;\n  buttonRef?: Ref<HTMLButtonElement>;\n}\n\nconst Button = ({\n  variant,\n  type,\n  ariaLabel,\n  onClick,\n  className,\n  children,\n  block,\n  disabled,\n  buttonRef,\n  ...props\n}: ButtonProps) => {\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      onClick(e);\n    }\n  };\n\n  return (\n    <button\n      ref={buttonRef}\n      type={type}\n      aria-label={ariaLabel}\n      class={classNames(\n        styles.button,\n        { [styles.block]: block },\n        `${styles[variant]}`,\n        className,\n      )}\n      onClick={disabled ? undefined : onClick}\n      onKeyPress={disabled ? undefined : handleKeyPress}\n      aria-disabled={disabled}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};\n\nButton.defaultProps = {\n  variant: 'primary',\n  type: 'button',\n};\n\nexport default memo(Button);\n","import Button from './Button';\n\nexport default Button;\n","import { h } from 'preact';\nimport { Text, useText } from 'preact-i18n';\n\ninterface TextProps {\n  defaultMessage: string;\n  id: string;\n  fields?: Record<string, string | number>;\n}\n\nconst TextWraper = ({ defaultMessage, id, fields }: TextProps) => {\n  const { message } = useText({ message: id });\n\n  if (fields) {\n    let fallbackMessage = defaultMessage;\n\n    if (!message) {\n      fallbackMessage = Object.keys(fields).reduce((acc, val) => {\n        const fieldValue = String(fields[val]);\n        const newMessage = acc.replace(`{{${val}}}`, fieldValue);\n        return newMessage;\n      }, defaultMessage);\n    }\n\n    return (\n      <Text fields={{ ...fields }} id={id}>\n        {fallbackMessage}\n      </Text>\n    );\n  }\n\n  return <Text id={id}>{defaultMessage}</Text>;\n};\nexport default TextWraper;\n","import Text from './Text';\n\nexport default Text;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./errorBoundary.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./errorBoundary.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  errorBoundaryHeader: 'Sorry…we’re experiencing a problem.',\n  errorBoundarySubHeader: 'Please refresh the page to try again.',\n  errorBoundaryWithRefreshSubHeader: 'Please click below to refresh.',\n  refreshButtonLabel: 'Refresh',\n};\n","import { h } from 'preact';\nimport Send from '../../globals/assets/send.svg';\nimport Button from '../ui/Button';\nimport Text from '../Text';\nimport styles from './errorBoundary.scss';\nimport messages from './messages';\n\nexport const ErrorBoundaryComponent = ({ restartApp }) => {\n  const showRefreshButton = typeof restartApp === 'function';\n  return (\n    <div className={styles.container}>\n      <Send />\n      <p className={styles.header}>\n        <Text\n          id=\"errorBoundaryHeader\"\n          defaultMessage={messages.errorBoundaryHeader}\n        />\n      </p>\n      <p className={styles.subHeader}>\n        {showRefreshButton ? (\n          <Text\n            id=\"errorBoundaryWithRefreshSubHeader\"\n            defaultMessage={messages.errorBoundaryWithRefreshSubHeader}\n          />\n        ) : (\n          <Text\n            id=\"errorBoundarySubHeader\"\n            defaultMessage={messages.errorBoundarySubHeader}\n          />\n        )}\n      </p>\n      {showRefreshButton ? (\n        <Button\n          className={styles.refreshButton}\n          variant={'primary'}\n          type={'button'}\n          onClick={restartApp}\n          ariaLabel={messages.refreshButtonLabel}\n        >\n          <Text\n            id=\"refreshButtonLabel\"\n            defaultMessage={messages.refreshButtonLabel}\n          />\n        </Button>\n      ) : null}\n    </div>\n  );\n};\n","import { h, Component } from 'preact';\nimport produce, { Draft } from 'immer';\nimport { handleError } from 'globals/errors';\nimport { ErrorBoundaryComponent } from './ErrorBoundaryComponent';\nimport { ErrorBoundaryProps, ErrorBoundaryState } from './types';\n\nclass ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\n  constructor(props) {\n    super(props);\n\n    this.state = { errored: false };\n  }\n\n  componentDidUpdate(prevProps, prevState) {\n    const { errored } = prevState;\n\n    if (errored && prevProps.page !== this.props.page) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState(\n        produce((draftState: Draft<ErrorBoundaryState>) => {\n          draftState.errored = false;\n        }),\n      );\n    }\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    if (this.state.errored !== nextState.errored) {\n      return true;\n    }\n\n    if (nextProps.page !== this.props.page) {\n      return true;\n    }\n\n    return false;\n  }\n\n  componentDidCatch(error) {\n    this.setState(\n      produce((draftState: Draft<ErrorBoundaryState>) => {\n        draftState.errored = true;\n      }),\n      () => {\n        handleError(error);\n      },\n    );\n  }\n\n  render(props, state) {\n    if (state.errored) {\n      return <ErrorBoundaryComponent restartApp={this.props.restartApp} />;\n    }\n\n    return props.children;\n  }\n}\n\nexport default ErrorBoundary;\n","import { initLocale } from 'i18n/helpers';\n\nimport { useContext, useEffect, useState } from 'preact/hooks';\nimport { ConnectionContext } from 'widget_main/store';\nimport { UseVendorsState } from './types';\n\nlet vendors: UseVendorsState;\n\nexport const retry = (fn, retriesLeft = 5, interval = 1000) => {\n  return new Promise((resolve, reject) => {\n    fn()\n      .then(resolve)\n      .catch((error) => {\n        setTimeout(() => {\n          if (retriesLeft === 1) {\n            reject(error);\n            return;\n          }\n\n          retry(fn, retriesLeft - 1, interval).then(resolve, reject);\n        }, interval);\n      });\n  });\n};\n\nexport const useLocale = () => {\n  const [isLoadingLocale, setIsLoadingLocale] = useState(true);\n  const connection = useContext(ConnectionContext);\n\n  useEffect(() => {\n    if (connection !== 'online') {\n      setIsLoadingLocale(false);\n      return;\n    }\n\n    retry(() => initLocale())\n      .catch((error) => {\n        console.error(error);\n      })\n      .finally(() => {\n        setIsLoadingLocale(false);\n      });\n  }, [connection]);\n\n  return [isLoadingLocale];\n};\n\nexport const addDomPurifyHooks = (dompurifyModule: {\n  default: UseVendorsState['dompurify'];\n}) => {\n  dompurifyModule?.default?.addHook('afterSanitizeAttributes', (node) => {\n    // set all elements owning target to target=_blank\n    if (node && 'target' in node) {\n      (node as Element).setAttribute('target', '_blank');\n      (node as Element).setAttribute('rel', 'noopener');\n    }\n  });\n};\nexport const useVendors = (): [\n  UseVendorsState | undefined,\n  boolean,\n  Error?,\n] => {\n  const connection = useContext(ConnectionContext);\n\n  const [isLoadingVendors, setIsLoadingVendors] = useState(true);\n  const [loadingVendorsError, setIsLoadingVendorsError] = useState(undefined);\n\n  useEffect(() => {\n    if (connection !== 'online' || vendors) {\n      setIsLoadingVendors(false);\n      return;\n    }\n\n    Promise.all([\n      retry(() => import(/* webpackChunkName: \"marked\" */ 'marked')),\n      retry(() => import(/* webpackChunkName: \"dompurify\" */ 'dompurify')),\n    ])\n      .then((mod) => {\n        const markedModule = mod[0] as { marked: UseVendorsState['marked'] };\n\n        const dompurifyModule = mod[1] as {\n          default: UseVendorsState['dompurify'];\n        };\n        addDomPurifyHooks(dompurifyModule);\n        vendors = {\n          marked: markedModule.marked,\n          dompurify: dompurifyModule.default,\n        };\n      })\n      .catch((error) => {\n        console.error(error);\n        setIsLoadingVendorsError(error);\n      })\n      .finally(() => {\n        setIsLoadingVendors(false);\n      });\n  }, [connection]);\n\n  return [vendors, isLoadingVendors, loadingVendorsError];\n};\n\nexport const getMarked = () => {\n  return vendors?.marked;\n};\n\nexport const sanitizeHtml = (dirtyHtml, config) => {\n  return (vendors?.dompurify?.sanitize(dirtyHtml, config) || '').toString();\n};\n","import ErrorBoundary from './ErrorBoundary';\n\nexport default ErrorBoundary;\n","export const LANGUAGES = {\n  af: 'af',\n  am: 'am',\n  ar: 'ar',\n  be: 'be',\n  bg: 'bg',\n  bs: 'bs',\n  ca: 'ca',\n  cs: 'cs',\n  da: 'da',\n  de: 'de',\n  el: 'el',\n  en: 'en_us',\n  en_ca: 'en_ca',\n  en_gb: 'en_gb',\n  en_us: 'en_us',\n  es: 'es',\n  es_es: 'es_es',\n  et: 'et',\n  fi: 'fi',\n  fil: 'fil',\n  fr: 'fr',\n  fr_ca: 'fr_ca',\n  he: 'he',\n  hi: 'hi',\n  hr: 'hr',\n  hu: 'hu',\n  id: 'id',\n  is: 'is',\n  it: 'it',\n  ja: 'ja',\n  ka: 'ka',\n  kk: 'kk',\n  kn: 'kn',\n  ko: 'ko',\n  ky: 'ky',\n  lt: 'lt',\n  lv: 'lv',\n  ms: 'ms',\n  nl: 'nl',\n  no: 'no',\n  pa: 'pa',\n  pl: 'pl',\n  pt: 'pt',\n  pt_br: 'pt_br',\n  ro: 'ro',\n  ru: 'ru',\n  sk: 'sk',\n  sl: 'sl',\n  sq: 'sq',\n  sr: 'sr',\n  sv: 'sv',\n  sw: 'sw',\n  te: 'te',\n  th: 'th',\n  tr: 'tr',\n  tw: 'zh_tw',\n  uk: 'uk',\n  ur: 'ur',\n  uz: 'uz',\n  vi: 'vi',\n  zh: 'zh_cn',\n  zh_cn: 'zh_cn',\n  zh_tw: 'zh_tw',\n};\n","import { LocalesModules } from './types';\n\nconst EMPTY_OBJECT = {};\n\nconst locales: LocalesModules = {\n  en_us: {\n    getMessages: () => Promise.resolve(EMPTY_OBJECT), // force use of defaultMessage\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_en\" */ '@formatjs/intl-relativetimeformat/locale-data/en'\n      ),\n  },\n  en: {\n    getMessages: () => Promise.resolve(EMPTY_OBJECT), // force use of defaultMessage\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_en\" */ '@formatjs/intl-relativetimeformat/locale-data/en'\n      ),\n  },\n  en_gb: {\n    getMessages: () => Promise.resolve(EMPTY_OBJECT), // force use of defaultMessage\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_en\" */ '@formatjs/intl-relativetimeformat/locale-data/en'\n      ),\n  },\n  en_ca: {\n    getMessages: () => Promise.resolve(EMPTY_OBJECT), // force use of defaultMessage\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_en\" */ '@formatjs/intl-relativetimeformat/locale-data/en'\n      ),\n  },\n  es: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_es\" */ './translations/split/es.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_es\" */ '@formatjs/intl-relativetimeformat/locale-data/es'\n      ),\n  },\n  es_es: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_es\" */ './translations/split/es.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_es\" */ '@formatjs/intl-relativetimeformat/locale-data/es'\n      ),\n  },\n  fr: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_fr\" */ './translations/split/fr.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_fr\" */ '@formatjs/intl-relativetimeformat/locale-data/fr'\n      ),\n  },\n  fr_ca: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_fr\" */ './translations/split/fr.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_fr\" */ '@formatjs/intl-relativetimeformat/locale-data/fr'\n      ),\n  },\n  de: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_de\" */ './translations/split/de.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_de\" */ '@formatjs/intl-relativetimeformat/locale-data/de'\n      ),\n  },\n  pt: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_pt\" */ './translations/split/pt.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_pt\" */ '@formatjs/intl-relativetimeformat/locale-data/pt'\n      ),\n  },\n  ar: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ar\" */ './translations/split/ar.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ar\" */ '@formatjs/intl-relativetimeformat/locale-data/ar'\n      ),\n  },\n  he: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_he\" */ './translations/split/he.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_he\" */ '@formatjs/intl-relativetimeformat/locale-data/he'\n      ),\n  },\n  af: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_af\" */ './translations/split/af.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"loclae_af\" */ '@formatjs/intl-relativetimeformat/locale-data/af'\n      ),\n  },\n  am: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_am\" */ './translations/split/am.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_am\" */ '@formatjs/intl-relativetimeformat/locale-data/am'\n      ),\n  },\n  be: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_be\" */ './translations/split/be.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_be\" */ '@formatjs/intl-relativetimeformat/locale-data/be'\n      ),\n  },\n  bg: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_bg\" */ './translations/split/bg.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_bg\" */ '@formatjs/intl-relativetimeformat/locale-data/bg'\n      ),\n  },\n  bs: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_bs\" */ './translations/split/bs.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_bs\" */ '@formatjs/intl-relativetimeformat/locale-data/bs'\n      ),\n  },\n  ca: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ca\" */ './translations/split/ca.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ca\" */ '@formatjs/intl-relativetimeformat/locale-data/ca'\n      ),\n  },\n  cs: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_cs\" */ './translations/split/cs.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_cs\" */ '@formatjs/intl-relativetimeformat/locale-data/cs'\n      ),\n  },\n  da: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_da\" */ './translations/split/da.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_da\" */ '@formatjs/intl-relativetimeformat/locale-data/da'\n      ),\n  },\n  nl: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_nl\" */ './translations/split/nl.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_nl\" */ '@formatjs/intl-relativetimeformat/locale-data/nl'\n      ),\n  },\n  el: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_el\" */ './translations/split/el.json'),\n\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_el\" */ '@formatjs/intl-relativetimeformat/locale-data/el'\n      ),\n  },\n  et: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_et\" */ './translations/split/et.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_et\" */ '@formatjs/intl-relativetimeformat/locale-data/et'\n      ),\n  },\n  fi: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_fi\" */ './translations/split/fi.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_fi\" */ '@formatjs/intl-relativetimeformat/locale-data/fi'\n      ),\n  },\n  fil: {\n    getMessages: () =>\n      import(\n        /* webpackChunkName: \"lang_fil\" */ './translations/split/fil.json'\n      ),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_fil\" */ '@formatjs/intl-relativetimeformat/locale-data/fil'\n      ),\n  },\n  hi: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_hi\" */ './translations/split/hi.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_hi\" */ '@formatjs/intl-relativetimeformat/locale-data/hi'\n      ),\n  },\n  hr: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_hr\" */ './translations/split/hr.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_hr\" */ '@formatjs/intl-relativetimeformat/locale-data/hr'\n      ),\n  },\n  hu: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_hu\" */ './translations/split/hu.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_hu\" */ '@formatjs/intl-relativetimeformat/locale-data/hu'\n      ),\n  },\n  id: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_id\" */ './translations/split/id.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_id\" */ '@formatjs/intl-relativetimeformat/locale-data/id'\n      ),\n  },\n  is: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_is\" */ './translations/split/is.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_is\" */ '@formatjs/intl-relativetimeformat/locale-data/is'\n      ),\n  },\n  it: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_it\" */ './translations/split/it.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_it\" */ '@formatjs/intl-relativetimeformat/locale-data/it'\n      ),\n  },\n  ja: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ja\" */ './translations/split/ja.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ja\" */ '@formatjs/intl-relativetimeformat/locale-data/ja'\n      ),\n  },\n  ka: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ka\" */ './translations/split/ka.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ka\" */ '@formatjs/intl-relativetimeformat/locale-data/ka'\n      ),\n  },\n  kk: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_kk\" */ './translations/split/kk.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_kk\" */ '@formatjs/intl-relativetimeformat/locale-data/kk'\n      ),\n  },\n  kn: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_kn\" */ './translations/split/kn.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_kn\" */ '@formatjs/intl-relativetimeformat/locale-data/kn'\n      ),\n  },\n  ko: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ko\" */ './translations/split/ko.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ko\" */ '@formatjs/intl-relativetimeformat/locale-data/ko'\n      ),\n  },\n  ky: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ky\" */ './translations/split/ky.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ky\" */ '@formatjs/intl-relativetimeformat/locale-data/ky'\n      ),\n  },\n  lt: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_lt\" */ './translations/split/lt.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_lt\" */ '@formatjs/intl-relativetimeformat/locale-data/lt'\n      ),\n  },\n  lv: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_lv\" */ './translations/split/lv.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_lv\" */ '@formatjs/intl-relativetimeformat/locale-data/lv'\n      ),\n  },\n  ms: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ms\" */ './translations/split/ms.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ms\" */ '@formatjs/intl-relativetimeformat/locale-data/ms'\n      ),\n  },\n  no: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_no\" */ './translations/split/no.json'),\n  },\n  pa: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_pa\" */ './translations/split/pa.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_pa\" */ '@formatjs/intl-relativetimeformat/locale-data/pa'\n      ),\n  },\n  pl: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_pl\" */ './translations/split/pl.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_pl\" */ '@formatjs/intl-relativetimeformat/locale-data/pl'\n      ),\n  },\n  pt_br: {\n    getMessages: () =>\n      import(\n        /* webpackChunkName: \"lang_pt_br\" */ './translations/split/pt_br.json'\n      ),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_pt\" */ '@formatjs/intl-relativetimeformat/locale-data/pt'\n      ),\n  },\n  ro: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ro\" */ './translations/split/ro.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ro\" */ '@formatjs/intl-relativetimeformat/locale-data/ro'\n      ),\n  },\n  ru: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ru\" */ './translations/split/ru.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ru\" */ '@formatjs/intl-relativetimeformat/locale-data/ru'\n      ),\n  },\n  sk: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_sk\" */ './translations/split/sk.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_sk\" */ '@formatjs/intl-relativetimeformat/locale-data/sk'\n      ),\n  },\n  sl: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_sl\" */ './translations/split/sl.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_sl\" */ '@formatjs/intl-relativetimeformat/locale-data/sl'\n      ),\n  },\n  sq: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_sq\" */ './translations/split/sq.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_sq\" */ '@formatjs/intl-relativetimeformat/locale-data/sq'\n      ),\n  },\n  sr: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_sr\" */ './translations/split/sr.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_sr\" */ '@formatjs/intl-relativetimeformat/locale-data/sr'\n      ),\n  },\n  sv: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_sv\" */ './translations/split/sv.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_sv\" */ '@formatjs/intl-relativetimeformat/locale-data/sv'\n      ),\n  },\n  sw: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_sw\" */ './translations/split/sw.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_sw\" */ '@formatjs/intl-relativetimeformat/locale-data/sw'\n      ),\n  },\n  te: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_te\" */ './translations/split/te.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_te\" */ '@formatjs/intl-relativetimeformat/locale-data/te'\n      ),\n  },\n  th: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_th\" */ './translations/split/th.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_th\" */ '@formatjs/intl-relativetimeformat/locale-data/th'\n      ),\n  },\n  tr: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_tr\" */ './translations/split/tr.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_tr\" */ '@formatjs/intl-relativetimeformat/locale-data/tr'\n      ),\n  },\n  tw: {\n    getMessages: () =>\n      import(\n        /* webpackChunkName: \"lang_tw\" */ './translations/split/zh_tw.json'\n      ),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ak\" */ '@formatjs/intl-relativetimeformat/locale-data/zh'\n      ),\n  },\n  uk: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_uk\" */ './translations/split/uk.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_uk\" */ '@formatjs/intl-relativetimeformat/locale-data/uk'\n      ),\n  },\n  ur: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_ur\" */ './translations/split/ur.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_ur\" */ '@formatjs/intl-relativetimeformat/locale-data/ur'\n      ),\n  },\n  uz: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_uz\" */ './translations/split/uz.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_uz\" */ '@formatjs/intl-relativetimeformat/locale-data/uz-Latn'\n      ),\n  },\n  vi: {\n    getMessages: () =>\n      import(/* webpackChunkName: \"lang_vi\" */ './translations/split/vi.json'),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_vi\" */ '@formatjs/intl-relativetimeformat/locale-data/vi'\n      ),\n  },\n  zh_cn: {\n    getMessages: () =>\n      import(\n        /* webpackChunkName: \"lang_zh_cn\" */ './translations/split/zh_cn.json'\n      ),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_zh\" */ '@formatjs/intl-relativetimeformat/locale-data/zh'\n      ),\n  },\n  zh_tw: {\n    getMessages: () =>\n      import(\n        /* webpackChunkName: \"lang_zh_tw\" */ './translations/split/zh_tw.json'\n      ),\n    getLocale: () =>\n      import(\n        /* webpackChunkName: \"locale_zh\" */ '@formatjs/intl-relativetimeformat/locale-data/zh'\n      ),\n  },\n};\n\nexport default locales;\n","import {\n  installRelativeTimeFormatPolyfills,\n  isBrowserIE,\n} from 'polyfills/helpers';\nimport { Ie11Navigator } from 'polyfills/types';\nimport { getKustomer } from 'widget_main/globals/helpers';\nimport { LANGUAGES } from '../languageMap';\nimport * as locales from '../locales';\n\nexport const getBrowserLocale = () => {\n  const windowNavigator = window.navigator as Ie11Navigator;\n  const navigatorLanguage = isBrowserIE()\n    ? windowNavigator?.browserLanguage\n    : windowNavigator?.languages?.[0];\n\n  return navigatorLanguage;\n};\n\nexport const getAppLocale = () => {\n  const startLang = getKustomer()?.startParameters?.lang;\n\n  return startLang || getBrowserLocale();\n};\n\nconst formatLocale = (lang) => {\n  const langLowerCase = lang.toLowerCase();\n  const withoutDash = langLowerCase.replace('-', '_');\n\n  if (withoutDash.indexOf('_') === -1) {\n    return langLowerCase;\n  }\n\n  if (!LANGUAGES[withoutDash]) {\n    const parts = withoutDash.split('_');\n\n    return parts[0];\n  }\n\n  return withoutDash;\n};\nexport const getMappedLanguage = (langCode?: string) => {\n  if (langCode) {\n    return LANGUAGES[langCode];\n  }\n\n  const startLang = getKustomer()?.startParameters?.lang;\n  const startLangLocale =\n    startLang && typeof startLang === 'string' && formatLocale(startLang);\n\n  if (startLangLocale && LANGUAGES[startLangLocale]) {\n    return LANGUAGES[startLangLocale];\n  }\n\n  const browserLocale = formatLocale(getBrowserLocale());\n\n  return LANGUAGES[browserLocale];\n};\nexport const getMessagesForLanguage = () => {\n  const mappedLanguage = getMappedLanguage();\n\n  return locales?.default?.[mappedLanguage]?.getMessages();\n};\n\nexport const getLocaleData = () => {\n  const mappedLanguage = getMappedLanguage();\n\n  const localeFunction = locales?.default?.[mappedLanguage]?.getLocale;\n\n  if ((Intl.RelativeTimeFormat as any).polyfilled && localeFunction) {\n    return localeFunction();\n  }\n\n  return Promise.resolve();\n};\n\nexport const setLocaleDirection = () => {\n  const mappedLanguage = getMappedLanguage();\n\n  if (mappedLanguage === 'he' || mappedLanguage === 'ar') {\n    document.dir = 'rtl';\n  }\n};\n\nexport const initLocale = () => {\n  setLocaleDirection();\n\n  return installRelativeTimeFormatPolyfills()\n    .then(() => {\n      return getLocaleData();\n    })\n    .catch((error) => `An error occurred while getting locale data, ${error}`);\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./loader.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./loader.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import Loader from './Loader';\n\nexport default Loader;\n","import { h } from 'preact';\nimport classNames from 'classnames';\n\nimport styles from './loader.scss';\nimport { LoaderState } from './types';\n\nconst Loader = ({ className }: LoaderState) => (\n  <div className={classNames(styles.loader, className)} />\n);\n\nexport default Loader;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./sizings.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./sizings.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import sizings from 'widget_main/styles/sizings.scss';\nimport { useCallback, useEffect, useState } from 'preact/hooks';\nimport { isShiftKey, isTabKey } from 'widget_main/globals/keyboardEvents';\n\nconst MOBILE_SCREEN_WIDTH = Number(sizings.mobileScreenWidth.slice(0, -2));\nconst MOBILE_SCREEN_HEIGHT = Number(sizings.mobileScreenHeight.slice(0, -2));\n\nexport const focusableElements =\n  'button:not(:disabled), [href], input:not(:disabled), select:not(:disabled), textarea:not(:disabled), [tabindex]:not([tabindex=\"-1\"])';\n\nexport const isMobileViewport = () => {\n  const isMobile =\n    window.parent.innerWidth <= MOBILE_SCREEN_WIDTH ||\n    window.parent.innerHeight <= MOBILE_SCREEN_HEIGHT;\n\n  return isMobile;\n};\n\nexport type FocusableElement =\n  | HTMLInputElement\n  | HTMLButtonElement\n  | HTMLAnchorElement\n  | HTMLSelectElement\n  | HTMLTextAreaElement;\n\nexport const findFocusableElements = (parent: HTMLElement): Element[] => {\n  // query all of our focusable elements, then ensure they are visible by checking their offsetParent which\n  //  will be null if the element's parent is hidden\n  //  https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent\n  //  NOTE: This is an issue for `position: fixed` elements, but should not be an issue for this project (so far)\n  return [...parent.querySelectorAll(focusableElements)].filter(\n    (element) => (element as HTMLElement).offsetParent,\n  );\n};\n\n// For accessibility purposes, we want to lock focus within the widget and modals while it is active\n// for customers using a keyboard or accessibility tools\nexport const useFocusLock = <T extends HTMLElement>() => {\n  const [ref, updateRef] = useState<T | null>(null);\n\n  const getDocument = (): Document => {\n    if (ref) {\n      return ref.ownerDocument;\n    }\n    return document;\n  };\n\n  const eventListener = useCallback(\n    (e: KeyboardEvent) => {\n      if (!ref || !isTabKey(e)) {\n        return;\n      }\n\n      const activeDocument = getDocument();\n      const focusableContent = findFocusableElements(ref);\n      const firstFocusableElement = focusableContent[0] as FocusableElement;\n      const lastFocusableElement = focusableContent[\n        focusableContent.length - 1\n      ] as FocusableElement;\n\n      // if shift key is pressed for shift + tab combination\n      if (isShiftKey(e)) {\n        if (activeDocument.activeElement === firstFocusableElement) {\n          lastFocusableElement.focus(); // add focus for the last focusable element\n          e.preventDefault();\n        }\n      } else if (activeDocument.activeElement === lastFocusableElement) {\n        // if focused has reached the last focusable element then focus first focusable element after pressing tab\n        firstFocusableElement.focus();\n        e.preventDefault();\n      }\n    },\n    [ref],\n  );\n\n  useEffect(() => {\n    if (ref) {\n      ref.addEventListener('keydown', eventListener);\n    }\n    return () => {\n      ref?.removeEventListener('keydown', eventListener);\n    };\n  }, [ref]);\n\n  return updateRef;\n};\n\n/**\n * This is a patch function to solve for an issue with the useIntersectionObserver custom hook that returns a\n *  zeroed-out rootBounds (and intersectionRect + boundingClientRect) causing a false negative when checking\n *  for an intersection which is immediately resolved upon next render.\n *\n * TODO: Remove this function and fix the useIntersectionObserver hook\n * @param intersectionObserver\n */\nexport const isIntersectionObserverUnmounted = (\n  intersectionObserver?: IntersectionObserverEntry,\n) => {\n  if (!intersectionObserver) return true;\n  if (!intersectionObserver.rootBounds) return true;\n  return (\n    intersectionObserver.rootBounds.bottom === 0 &&\n    intersectionObserver.rootBounds.height === 0 &&\n    intersectionObserver.rootBounds.left === 0 &&\n    intersectionObserver.rootBounds.right === 0 &&\n    intersectionObserver.rootBounds.top === 0 &&\n    intersectionObserver.rootBounds.width === 0 &&\n    intersectionObserver.rootBounds.x === 0 &&\n    intersectionObserver.rootBounds.y === 0\n  );\n};\n\nexport const focusOnFirstElementInWidget = (parent: HTMLElement) => {\n  const focusableContent = findFocusableElements(parent);\n  if (focusableContent[0]) {\n    (focusableContent[0] as FocusableElement).focus();\n  }\n};\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"26\",\"height\":\"26\",\"viewBox\":\"0 0 26 26\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"d\":\"M16.125 6.75L9.875 13L16.125 19.25\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"d\":\"M6 6L18 18M18 6L6 18\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"26\",\"height\":\"26\",\"viewBox\":\"0 0 26 26\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-open-in-new-wXmtQoL\",\"d\":\"M16.125 14.5625V9.87499M16.125 9.87499H11.4375M16.125 9.87499L9.8752 16.1249M8.0002 21.3333H18.0002C19.167 21.3333 19.7504 21.3333 20.196 21.1063C20.588 20.9065 20.9067 20.5878 21.1065 20.1958C21.3335 19.7502 21.3335 19.1668 21.3335 18V7.99999C21.3335 6.83321 21.3335 6.24983 21.1065 5.80418C20.9067 5.41217 20.588 5.09346 20.196 4.89373C19.7504 4.66666 19.167 4.66666 18.0002 4.66666H8.0002C6.83342 4.66666 6.25003 4.66666 5.80438 4.89373C5.41238 5.09346 5.09367 5.41217 4.89393 5.80418C4.66686 6.24983 4.66686 6.83321 4.66686 7.99999V18C4.66686 19.1668 4.66686 19.7502 4.89393 20.1958C5.09367 20.5878 5.41238 20.9065 5.80438 21.1063C6.25003 21.3333 6.83342 21.3333 8.0002 21.3333Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-minimizeIcon-wXmtQoL\",\"d\":\"M6.75 13L19.25 13\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./titleBarButton.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./titleBarButton.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, JSX, Ref } from 'preact';\nimport { memo } from 'preact/compat';\nimport classNames from 'classnames';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport styles from './titleBarButton.scss';\n\ninterface TitleBarButtonProps {\n  ariaLabel: string;\n  onClick?: (e: Event) => unknown;\n  href?: string;\n  className?: string;\n  children?: JSX.Element | JSX.Element[] | string;\n  disabled?: boolean;\n  buttonRef?: Ref<HTMLButtonElement>;\n}\n\nconst TitleBarButton = ({\n  ariaLabel,\n  onClick,\n  href,\n  className,\n  children,\n  disabled,\n  buttonRef,\n}: TitleBarButtonProps) => {\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (onClick && keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      onClick(e);\n    }\n  };\n  return href ? (\n    <a\n      type=\"button\"\n      tabIndex={0}\n      title={ariaLabel}\n      href={href}\n      target=\"_blank\"\n      rel=\"noreferrer noopener\"\n      className={classNames(styles.titleBarButton, className)}\n    >\n      {children}\n    </a>\n  ) : (\n    <button\n      ref={buttonRef}\n      type=\"button\"\n      tabIndex={0}\n      aria-label={ariaLabel}\n      className={classNames(styles.titleBarButton, className)}\n      onClick={onClick}\n      onKeyPress={handleKeyPress}\n      disabled={disabled}\n    >\n      {children}\n    </button>\n  );\n};\n\nTitleBarButton.defaultProps = {\n  variant: 'primary',\n  type: 'button',\n};\n\nexport default memo(TitleBarButton);\n","import TitleBarButton from './TitleBarButton';\n\nexport default TitleBarButton;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./modal.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./modal.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  closeModalAriaLabel: 'close modal',\n};\n","import Modal from './Modal';\n\nexport default Modal;\n","import { h, JSX, RefObject } from 'preact';\nimport { createPortal } from 'preact/compat';\nimport { useEffect, useRef } from 'preact/hooks';\nimport classNames from 'classnames';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport { FocusableElement, useFocusLock } from 'widget_main/globals/dom';\nimport { MODAL_ROOT_ID } from 'widget_main/globals/constants';\nimport { isEscKey } from 'widget_main/globals/keyboardEvents';\nimport { useTranslations } from 'i18n/hooks';\nimport TitleBarButton from '../../TitleBarButton';\nimport styles from './modal.scss';\nimport messages from './messages';\n\ninterface ModalProps {\n  show: boolean;\n  closeButton?: boolean;\n  onHide?: () => void;\n  children?: JSX.Element | JSX.Element[] | string;\n  className?: string;\n  bodyClassName?: string;\n  initialFocusRef?: RefObject<FocusableElement>;\n  ariaLabelledby?: string;\n  ariaLabel?: string;\n}\n\nconst Modal = ({\n  show,\n  closeButton,\n  onHide,\n  className,\n  bodyClassName,\n  initialFocusRef,\n  ariaLabelledby,\n  ariaLabel,\n  children,\n}: ModalProps) => {\n  const translations = useTranslations(messages);\n  const modalRoot = document.getElementById(MODAL_ROOT_ID);\n  const dialogRef = useRef<HTMLDivElement>(null);\n\n  const focusLockRef = useFocusLock();\n\n  const hideOnEscape = (e: KeyboardEvent) => {\n    if (isEscKey(e)) {\n      if (typeof onHide === 'function') onHide();\n    }\n  };\n\n  useEffect(() => {\n    if (show) {\n      if (initialFocusRef) {\n        initialFocusRef.current?.focus();\n      } else {\n        dialogRef.current?.focus();\n      }\n    }\n  }, [show]);\n\n  const renderCloseButton = () => {\n    if (!closeButton) {\n      return null;\n    }\n\n    return (\n      <TitleBarButton\n        ariaLabel={translations.closeModalAriaLabel}\n        onClick={onHide}\n        className={styles.closeButton}\n      >\n        <CloseIcon width={20} height={20} />\n      </TitleBarButton>\n    );\n  };\n\n  if (!show || !modalRoot) {\n    return null;\n  }\n  return createPortal(\n    // should be ok to ignore these warning because the container is only designed to capture any outside\n    // events, not to serve as an interactable element itself.\n    // eslint-disable-next-line jsx-a11y/no-static-element-interactions\n    <div\n      ref={focusLockRef}\n      onClick={onHide}\n      onKeyDown={hideOnEscape}\n      className={styles.container}\n    >\n      {/* eslint-disable-next-line jsx-a11y/click-events-have-key-events,jsx-a11y/no-noninteractive-element-interactions */}\n      <div\n        role=\"dialog\"\n        aria-label={ariaLabel}\n        aria-labelledby={ariaLabelledby}\n        onClick={(e) => {\n          // hack to prevent modal from closing due to click handler on parent\n          e.stopPropagation();\n        }}\n        className={classNames(styles.modal, className)}\n      >\n        {renderCloseButton()}\n        <div\n          // eslint-disable-next-line jsx-a11y/no-noninteractive-tabindex\n          tabIndex={-1}\n          ref={dialogRef}\n          className={classNames(styles.body, bodyClassName)}\n        >\n          {children}\n        </div>\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n\nexport default Modal;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./titleBarButtons.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./titleBarButtons.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  goBackAriaLabel: 'go back',\n  endChatAriaLabel: 'end chat',\n  minimizeChatAriaLabel: 'minimize chat widget',\n  openInNewTabAriaLabel: 'open article in new tab',\n  confirmEndChatAriaLabel: 'confirm end chat',\n  cancelEndChatAriaLabelLabel: 'cancel end chat',\n  endChatModalPrompt: 'Are you sure you want to end this chat?',\n  endChatModalButton: 'End Chat',\n  endChatModalCancelButton: 'Cancel',\n};\n","import { h, Fragment } from 'preact';\nimport { useContext, useRef, useState } from 'preact/hooks';\nimport classNames from 'classnames';\nimport {\n  WidgetActionsContext,\n  NavigationContext,\n  ConversationsContext,\n  SettingsContext,\n  KBContext,\n} from 'widget_main/store';\nimport {\n  KB_ARTICLE_PATH,\n  KB_DEFLECT_ARTICLE_PATH,\n  MESSAGE_THREAD_PATH,\n} from 'widget_main/globals/constants';\nimport ChevronLeftIcon from 'widget_main/globals/assets/chevronLeft.svg';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport OpenInNewIcon from 'widget_main/globals/assets/open_in_new.svg';\nimport MinimizeIcon from 'widget_main/globals/assets/minimizeIcon.svg';\nimport Modal from 'widget_main/components/ui/Modal';\nimport Button from 'widget_main/components/ui/Button';\nimport TitleBarButton from 'widget_main/components/TitleBarButton';\nimport { useTranslations } from 'i18n/hooks';\nimport { getKustomerCore, getKustomer } from 'widget_main/globals/helpers';\nimport styles from './titleBarButtons.scss';\n\nimport messages from './messages';\nimport { constructExternalArticleLink } from './helpers';\n\nconst kustomerCore = getKustomerCore();\n\ninterface TitleBarButtonsProps {\n  onGoBack?: () => void;\n}\n\nconst TitleBarButtons = ({ onGoBack }: TitleBarButtonsProps) => {\n  const widgetActions = useContext(WidgetActionsContext);\n  const navigation = useContext(NavigationContext);\n  const settings = useContext(SettingsContext);\n  const conversations = useContext(ConversationsContext);\n  const kb = useContext(KBContext);\n  const modalInitialFocusRef = useRef<HTMLButtonElement>(null);\n  const endChatButtonRef = useRef<HTMLButtonElement>(null);\n\n  const [showEndChatModal, toggleEndChatModal] = useState(false);\n\n  const translations = useTranslations(messages);\n\n  const goBack = () => {\n    if (onGoBack) {\n      onGoBack();\n      toggleEndChatModal(false);\n    }\n  };\n\n  const handleClickEndChat = () => toggleEndChatModal(true);\n\n  const closeEndChatModal = () => {\n    toggleEndChatModal(false);\n  };\n\n  const cancelEndChat = () => {\n    closeEndChatModal();\n    endChatButtonRef.current?.focus();\n  };\n\n  const confirmEndChat = () => {\n    if (navigation.currentConversationId) {\n      conversations.endConversation(navigation.currentConversationId);\n      kustomerCore.kustomerEventCount({\n        name: 'title_bar.confirm_end_chat.click',\n      });\n    }\n    closeEndChatModal();\n  };\n\n  const renderBackButton = () => {\n    if (onGoBack) {\n      return (\n        <TitleBarButton\n          ariaLabel={translations.goBackAriaLabel}\n          onClick={goBack}\n          className={classNames(styles.button, styles.backButton)}\n        >\n          <ChevronLeftIcon data-kt=\"backToHistoryIcon\" />\n        </TitleBarButton>\n      );\n    }\n\n    return null;\n  };\n\n  const renderEndChatButton = () => {\n    const { currentConversationId } = navigation;\n    if (\n      navigation.page !== MESSAGE_THREAD_PATH ||\n      !settings.closableChat ||\n      !currentConversationId ||\n      conversations?.data?.[currentConversationId]?.ended\n    ) {\n      return null;\n    }\n\n    return (\n      <TitleBarButton\n        ariaLabel={translations.endChatAriaLabel}\n        onClick={handleClickEndChat}\n        className={styles.button}\n        buttonRef={endChatButtonRef}\n      >\n        <CloseIcon width={18} height={18} data-kt=\"endChatIcon\" />\n      </TitleBarButton>\n    );\n  };\n\n  const renderOpenInNewTab = () => {\n    const isArticleView =\n      navigation.page === KB_ARTICLE_PATH ||\n      navigation.page === KB_DEFLECT_ARTICLE_PATH;\n    if (\n      !isArticleView ||\n      !kb.currentArticleId ||\n      !kb?.config.knowledgeBaseDomain ||\n      getKustomer()?.startParameters?.hideArticleOpenInNewTab\n    ) {\n      return null;\n    }\n    const articleExternalUrl = constructExternalArticleLink(kb);\n    return (\n      <TitleBarButton\n        ariaLabel={translations.openInNewTabAriaLabel}\n        href={articleExternalUrl}\n        className={styles.button}\n      >\n        <OpenInNewIcon width={18} height={18} />\n      </TitleBarButton>\n    );\n  };\n\n  const renderMinimizeButton = () => {\n    return (\n      <TitleBarButton\n        ariaLabel={translations.minimizeChatAriaLabel}\n        onClick={widgetActions.closeWidget}\n        className={styles.button}\n      >\n        <MinimizeIcon width={18} height={18} data-kt=\"minimizeChatIcon\" />\n      </TitleBarButton>\n    );\n  };\n\n  const renderEndChatModal = () => {\n    return (\n      <Modal\n        initialFocusRef={modalInitialFocusRef}\n        show={showEndChatModal}\n        closeButton\n        onHide={cancelEndChat}\n        ariaLabelledby=\"endChatModalPrompt\"\n      >\n        <div id=\"endChatModalPrompt\" className={styles.endChatQuestion}>\n          {translations.endChatModalPrompt}\n        </div>\n        <div className={styles.endChatModalButtons}>\n          <Button\n            buttonRef={modalInitialFocusRef}\n            ariaLabel={translations.confirmEndChatAriaLabel}\n            block\n            className={styles.modalButton}\n            variant=\"outlinePrimary\"\n            onClick={confirmEndChat}\n            data-kt=\"endChat\"\n          >\n            {translations.endChatModalButton}\n          </Button>\n          <Button\n            ariaLabel={translations.cancelEndChatAriaLabelLabel}\n            block\n            className={classNames(styles.modalButton, styles.cancelButton)}\n            variant=\"link\"\n            onClick={cancelEndChat}\n            data-kt=\"cancel\"\n          >\n            {translations.endChatModalCancelButton}\n          </Button>\n        </div>\n      </Modal>\n    );\n  };\n\n  return (\n    <Fragment>\n      {renderBackButton()}\n      <div class={styles.right}>\n        {renderOpenInNewTab()}\n        {renderEndChatButton()}\n        {renderMinimizeButton()}\n      </div>\n      {renderEndChatModal()}\n    </Fragment>\n  );\n};\n\nexport default TitleBarButtons;\n","import TitleBarButtons from './TitleBarButtons';\n\nexport default TitleBarButtons;\n","export const constructExternalArticleLink = (kb) => {\n  const article = kb.articles?.[kb.currentArticleId];\n  return `${kb?.config.knowledgeBaseDomain}${article?.lang}/${article?.slug}-${article?.hash}`;\n};\n","const newKustySVG = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n  <svg width=\"42\" height=\"42\" viewBox=\"0 0 42 42\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M21.1732 40.7646C3.61324 40.7646 0 32.8342 0 21.0521C0 9.26989 3.44675 1.23517 21.1732 1.23517C38.8997 1.23517 42 9.34321 42 21.1987C42 33.0542 38.7333 40.7646 21.1732 40.7646Z\" fill=\"#FBEC2A\"/>\n  <path d=\"M21.0212 30.0846C17.0086 30.0846 13.7456 26.7322 13.7456 22.6121V18.5189H15.536V22.6121C15.536 25.7453 17.9977 28.2943 21.0212 28.2943C24.0447 28.2943 26.5064 25.7453 26.5064 22.6121V18.5189H28.2967V22.6121C28.2967 26.7322 25.0338 30.0846 21.0212 30.0846Z\" fill=\"#292929\"/>\n  <path d=\"M18.7807 14.8779C18.4719 14.1036 17.7334 13.6045 16.9008 13.6045C16.0683 13.6045 15.332 14.1058 15.021 14.8779L13.4634 14.2535C14.0296 12.8391 15.379 11.9238 16.9008 11.9238C18.4227 11.9238 19.7721 12.8369 20.3383 14.2535L18.7807 14.8779Z\" fill=\"#292929\"/>\n  <path d=\"M26.9404 14.8779C26.6293 14.1036 25.893 13.6045 25.0605 13.6045C24.228 13.6045 23.4917 14.1058 23.1806 14.8779L21.6231 14.2535C22.1893 12.8391 23.5388 11.9238 25.0605 11.9238C26.5823 11.9238 27.9318 12.8369 28.498 14.2535L26.9404 14.8779Z\" fill=\"#292929\"/>\n  </svg>`;\n\nexport const kustyIcon = (color) => {\n  const svg = color\n    ? btoa(newKustySVG.replace(/#FBEC2A/, color))\n    : btoa(newKustySVG);\n\n  return `data:image/svg+xml;base64,${svg}`;\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./chatIcon.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./chatIcon.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { kustyIcon } from 'widget_main/globals/assets/kustyIcon';\nimport { SettingsContext } from 'widget_main/store';\nimport { Localizer } from 'preact-i18n';\nimport Text from 'widget_main/components/Text';\nimport { getChatIconSize } from 'widget_main/app/helpers';\nimport { ChatIconSize } from 'widget/widget_api/types';\nimport styles from './chatIcon.scss';\n\nimport messages from './messages';\n\ninterface ChatIconProps {\n  className?: string;\n  id?: string;\n  isEmbedIcon?: boolean;\n  size: ChatIconSize;\n}\n\nconst ChatIcon = ({ className, id, isEmbedIcon, size }: ChatIconProps) => {\n  const chatSettings = useContext(SettingsContext);\n\n  const embedIconUrl = chatSettings?.embedIconUrl;\n  const teamIconUrl = chatSettings?.teamIconUrl;\n\n  const iconUrl = isEmbedIcon ? embedIconUrl : teamIconUrl;\n\n  const getBackgroundSize = () => {\n    if (isEmbedIcon && !embedIconUrl) {\n      return 'contain';\n    }\n\n    if (iconUrl) {\n      return 'cover';\n    }\n\n    let bgSize = size.width;\n\n    if (!iconUrl) {\n      if (size.width >= 50) {\n        bgSize = size.width - 10;\n      } else if (size.width >= 40) {\n        bgSize = size.width - 10;\n      } else if (size.width >= 30) {\n        bgSize = size.width - 8;\n      } else {\n        bgSize = Math.max(size.width - 10, 10);\n      }\n    }\n\n    return `${bgSize}px`;\n  };\n\n  const ariaLabel = Text({\n    id: 'chatIconAriaLabel',\n    fields: {\n      teamName: chatSettings?.teamName,\n    },\n    defaultMessage: messages.chatIconAriaLabel,\n  });\n  return (\n    <Localizer>\n      <div\n        id={id}\n        role={'img'}\n        aria-label={ariaLabel}\n        class={classNames(styles.chatIcon, className)}\n        data-kt=\"chat-icon\"\n        style={{\n          width: `${size.width}px`,\n          height: `${size.height}px`,\n          backgroundSize: getBackgroundSize(),\n          backgroundImage: `url(${\n            iconUrl || kustyIcon(chatSettings?.embedIconColor)\n          })`,\n        }}\n      />\n    </Localizer>\n  );\n};\n\nChatIcon.defaultProps = {\n  size: getChatIconSize(),\n};\n\nexport default ChatIcon;\n","export default {\n  chatIconAriaLabel: '{{teamName}} live chat',\n};\n","import ChatIcon from './ChatIcon';\n\nexport default ChatIcon;\n","import { getMarked } from 'widget_main/vendors/hooks';\n\nexport const replaceLinks = (html) => {\n  return html.replace(/^<a /, '<a target=\"_blank\" rel=\"noreferrer noopener\" ');\n};\n\nexport const getHTMLFromMarkdown = (\n  markdown: string,\n  markedOptions?: marked.MarkedOptions,\n) => {\n  const marked = getMarked();\n\n  if (!marked) return '';\n\n  const options = markedOptions || {};\n\n  try {\n    const renderer = new marked.Renderer();\n    const linkRenderer = renderer.link;\n    renderer.link = (href, title, text) => {\n      const html = linkRenderer.call(renderer, href, title, text);\n      return replaceLinks(html);\n    };\n\n    const formattedMarkdown = markdown\n      .replace(/\\\\_/g, '_')\n      .replace(/\\\\-/g, '-');\n\n    const outputHTML = marked(formattedMarkdown, {\n      renderer,\n      ...options,\n    });\n\n    return outputHTML;\n  } catch (error) {\n    return markdown;\n  }\n};\n","export default {\n  mediaPreviewAltText: 'preview media',\n};\n","import { h } from 'preact';\nimport {\n  createPortal,\n  memo,\n  useEffect,\n  useCallback,\n  useRef,\n} from 'preact/compat';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport { useTranslations } from 'i18n/hooks';\n\nimport { useFocusLock } from 'widget_main/globals/dom';\nimport messages from './messages';\nimport { MediaContent } from '../types';\n\nconst modalStyles = {\n  position: 'fixed',\n  top: 0,\n  left: 0,\n  width: '100%',\n  height: '100%',\n  backgroundColor: 'rgba(0, 0, 0, 0.3)',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  zIndex: 2147483001,\n  border: '0 none',\n  padding: '0',\n  cursor: 'pointer',\n};\n\nconst closeButtonStyles = {\n  position: 'fixed',\n  top: '20px',\n  backgroundColor: 'transparent',\n  border: 0,\n  cursor: 'pointer',\n  left: 'initial',\n  right: '20px',\n  padding: '0',\n};\n\nconst imageStyles = {\n  maxWidth: '95%',\n  maxHeight: '90%',\n};\n\ninterface MediaPreviewModalProps {\n  src: string;\n  show: boolean;\n  onHide: () => void;\n  type: MediaContent;\n}\n\nconst MediaPreviewModal = ({\n  show,\n  onHide,\n  src,\n  type,\n}: MediaPreviewModalProps) => {\n  const parentBody = window.parent.document.getElementsByTagName('body')[0];\n  const translations = useTranslations(messages);\n\n  const containerRef = useRef<HTMLButtonElement>(null);\n\n  const handleCloseKeyDown = useCallback(\n    (e: KeyboardEvent) => {\n      if (\n        keyboardEventHelpers.isEnterKey(e) ||\n        keyboardEventHelpers.isEscKey(e)\n      ) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        onHide();\n      }\n    },\n    [onHide],\n  );\n  const focusLockRef = useFocusLock();\n\n  useEffect(() => {\n    if (show) {\n      containerRef.current?.focus();\n    }\n  }, [show]);\n\n  if (!show || !parentBody) {\n    return null;\n  }\n\n  const renderCloseButton = () => {\n    if (document.dir === 'rtl') {\n      closeButtonStyles.left = '20px';\n      closeButtonStyles.right = 'initial';\n    }\n\n    return (\n      <button type=\"button\" style={closeButtonStyles}>\n        <CloseIcon width={30} height={30} />\n      </button>\n    );\n  };\n\n  const onContainerClick = (e: Event) => {\n    const target = e?.target as HTMLElement;\n    const id = target?.id;\n\n    if (id === 'videoPreview') {\n      return;\n    }\n\n    onHide();\n  };\n\n  const renderPreview = () => {\n    if (type === 'image') {\n      return (\n        <img\n          style={imageStyles}\n          alt={translations.mediaPreviewAltText}\n          src={src}\n        />\n      );\n    }\n\n    return (\n      // eslint-disable-next-line jsx-a11y/media-has-caption\n      <video\n        id=\"videoPreview\"\n        autoPlay\n        playsInline\n        style={imageStyles}\n        aria-label={translations.mediaPreviewAltText}\n        controls\n        src={src}\n      />\n    );\n  };\n  return createPortal(\n    <div\n      ref={focusLockRef}\n      role=\"dialog\"\n      aria-label={translations.mediaPreviewAltText}\n      aria-modal=\"true\"\n      data-kt=\"media-preview-modal\"\n    >\n      <button\n        ref={containerRef}\n        onClick={onContainerClick}\n        onKeyDown={handleCloseKeyDown}\n        style={modalStyles}\n        type=\"button\"\n      >\n        {renderCloseButton()}\n        {renderPreview()}\n      </button>\n    </div>,\n    parentBody,\n  );\n};\n\nexport default memo(MediaPreviewModal);\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./markdown.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./markdown.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport { useEffect, useRef, useState } from 'preact/hooks';\nimport { getHTMLFromMarkdown } from 'widget_main/components/Markdown/helpers';\nimport MediaPreviewModal from 'widget_main/components/MediaWithPreview/MediaPreviewModal/MediaPreviewModal';\nimport { MediaContent } from 'widget_main/components/MediaWithPreview/types';\nimport styles from './markdown.scss';\n\ninterface MarkdownProps {\n  markdown: string;\n  options?: marked.MarkedOptions;\n  formatHtml?: (html: string) => string;\n}\n\ninterface MediaPreviewData {\n  src: string;\n  type: MediaContent;\n}\n\nconst Markdown = ({\n  markdown,\n  options,\n  formatHtml = (html) => html,\n}: MarkdownProps) => {\n  const markdownRef = useRef<HTMLDivElement>(null);\n  const html = getHTMLFromMarkdown(markdown, options);\n  const [mediaPreviewData, setMediaPreviewData] =\n    useState<MediaPreviewData | null>(null);\n\n  const closeMediaPreview = () => {\n    setMediaPreviewData(null);\n    const media = markdownRef.current?.querySelector('img, video') as\n      | HTMLImageElement\n      | HTMLVideoElement;\n    if (media) {\n      // force the image/video to be tabbable for focusing purposes\n      media.tabIndex = -1;\n      media.focus();\n    }\n  };\n\n  const openMediaPreviewOnImage = (e) => {\n    setMediaPreviewData({\n      src: (e.currentTarget as HTMLImageElement).src,\n      type: 'image',\n    });\n  };\n\n  useEffect(() => {\n    const markdownContainer = markdownRef.current;\n    const images = markdownContainer?.querySelectorAll('img');\n    images?.forEach((image) => {\n      image.addEventListener('click', openMediaPreviewOnImage);\n    });\n    return () => {\n      images?.forEach((image) => {\n        image.removeEventListener('click', openMediaPreviewOnImage);\n      });\n    };\n  }, [markdown]);\n\n  return (\n    <div ref={markdownRef}>\n      <div\n        className={styles.markdownBody}\n        // eslint-disable-next-line react/no-danger\n        dangerouslySetInnerHTML={{ __html: formatHtml(html) }}\n      />\n      {mediaPreviewData ? (\n        <MediaPreviewModal\n          show={true}\n          onHide={closeMediaPreview}\n          src={mediaPreviewData.src}\n          type={mediaPreviewData.type}\n        />\n      ) : null}\n    </div>\n  );\n};\n\nexport default Markdown;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./conversationsHeader.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./conversationsHeader.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import ConversationsHeader from './ConversationsHeader';\n\nexport default ConversationsHeader;\n","import { h, Fragment } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport ChatIcon from 'widget_main/components/ChatIcon';\nimport { SettingsContext, ChatAvailabilityContext } from 'widget_main/store';\nimport { getHTMLFromMarkdown } from 'widget_main/components/Markdown/helpers';\nimport Markdown from 'widget_main/components/Markdown/Markdown';\nimport styles from './conversationsHeader.scss';\n\nconst ConversationsHeader = () => {\n  const chatAvailability = useContext(ChatAvailabilityContext);\n  const chatSettings = useContext(SettingsContext);\n  const greeting = chatSettings?.greeting;\n\n  const renderSubText = () => {\n    if (chatAvailability === 'online') {\n      return (\n        <Fragment>\n          {greeting && (\n            <span class={styles.greeting}>\n              <Markdown\n                markdown={getHTMLFromMarkdown(greeting, { breaks: true })}\n              />\n            </span>\n          )}\n        </Fragment>\n      );\n    }\n\n    return (\n      <span className={styles.greeting}>\n        <Markdown\n          markdown={getHTMLFromMarkdown(chatSettings?.offhoursMessage, {\n            breaks: true,\n          })}\n        />\n      </span>\n    );\n  };\n\n  return (\n    <div class={styles.conversationsHeader}>\n      <div class={styles.content}>\n        <ChatIcon\n          className={styles.chatIconWrapper}\n          size={{ width: 50, height: 50 }}\n        />\n        <div className={styles.text}>\n          <h1 class={styles.teamName}>{chatSettings?.teamName}</h1>\n          {renderSubText()}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ConversationsHeader;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./avatar.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./avatar.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  agentAvatar: 'Agent Avatar',\n};\n","import { h } from 'preact';\nimport classNames from 'classnames';\nimport ChatIcon from 'widget_main/components/ChatIcon';\nimport { useTranslations } from 'i18n/hooks';\nimport { useState } from 'preact/hooks';\nimport styles from './avatar.scss';\n\nimport messages from './messages';\n\ninterface AvatarProps {\n  size?: number;\n  className?: string;\n  avatarUrl?: string;\n\n  userDisplayName?: string;\n}\n\nconst Avatar = ({\n  size,\n  className,\n  avatarUrl,\n  userDisplayName,\n}: AvatarProps) => {\n  const translations = useTranslations(messages);\n  const [imageFetchState, setImageFetchState] = useState('fetching');\n\n  const renderAvatarUrl = () => {\n    const formattedAvatarUrl = avatarUrl?.replace('d=blank', 'd=404'); // Gravatar will return an HTTP 404 (File Not Found) response\n\n    if (!avatarUrl && !userDisplayName) {\n      return (\n        <ChatIcon size={size ? { width: size, height: size } : undefined} />\n      );\n    }\n\n    if (imageFetchState === 'error' || !avatarUrl) {\n      return (\n        <ChatIcon size={size ? { width: size, height: size } : undefined} />\n      );\n    }\n\n    const imageAlt = userDisplayName\n      ? `${userDisplayName} ${translations.agentAvatar}`\n      : translations.agentAvatar;\n\n    return (\n      <img\n        class={classNames(styles.customImg, {\n          [styles.hideImg]: imageFetchState === 'fetching',\n        })}\n        src={formattedAvatarUrl}\n        alt={imageAlt}\n        onError={() => {\n          setImageFetchState('error');\n        }}\n        onLoad={() => {\n          setImageFetchState('success');\n        }}\n      />\n    );\n  };\n\n  return (\n    <div\n      style={{ width: `${size}px`, height: `${size}px` }}\n      class={classNames(styles.avatar, className)}\n      aria-hidden={true}\n    >\n      {renderAvatarUrl()}\n    </div>\n  );\n};\n\nAvatar.defaultProps = {\n  size: 40,\n};\nexport default Avatar;\n","import Avatar from './Avatar';\n\nexport default Avatar;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./messageThreadHeader.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./messageThreadHeader.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import MessageThreadHeader from './MessageThreadHeader';\n\nexport default MessageThreadHeader;\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport {\n  SettingsContext,\n  NavigationContext,\n  ConversationsContext,\n  ChatAvailabilityContext,\n  MessagesContext,\n} from 'widget_main/store';\nimport Avatar from 'widget_main/components/Avatar';\nimport {\n  getLastAgentMessageInConversation,\n  getMessageAgentInformation,\n} from 'widget_main/globals/helpers';\nimport Markdown from 'widget_main/components/Markdown/Markdown';\nimport { getHTMLFromMarkdown } from 'widget_main/components/Markdown/helpers';\nimport styles from './messageThreadHeader.scss';\n\nconst MessageThreadHeader = () => {\n  const chatAvailability = useContext(ChatAvailabilityContext);\n  const chatSettings = useContext(SettingsContext);\n  const messagesState = useContext(MessagesContext);\n  const navigation = useContext(NavigationContext);\n  const conversations = useContext(ConversationsContext);\n\n  const waitMessage = chatSettings?.waitMessage;\n\n  const { currentConversationId } = navigation;\n  const currentConversation = currentConversationId\n    ? conversations.data[currentConversationId]\n    : undefined;\n\n  const agentMessage = getLastAgentMessageInConversation(\n    currentConversation,\n    messagesState,\n  );\n  const lastMessageAgentData = getMessageAgentInformation(\n    agentMessage?.sentBy ?? currentConversation?.lastResponder,\n    chatSettings,\n    navigation.initAssistantPayload,\n  );\n\n  const renderWaitMessage = () => {\n    if (agentMessage && !agentMessage?.appGenerated) {\n      return null;\n    }\n\n    if (!waitMessage) {\n      return null;\n    }\n\n    return (\n      <Markdown markdown={getHTMLFromMarkdown(waitMessage, { breaks: true })} />\n    );\n  };\n\n  const agentDisplayName = lastMessageAgentData?.displayName?.replace?.(\n    /AI_/g,\n    '',\n  );\n\n  return (\n    <div>\n      <div class={styles.messageThreadHeader}>\n        <Avatar\n          className={styles.avatar}\n          size={45}\n          avatarUrl={lastMessageAgentData?.avatarUrl}\n          userDisplayName={agentDisplayName}\n        />\n        <div class={styles.info}>\n          <h4 class={styles.teamName}>{agentDisplayName}</h4>\n        </div>\n        <span class={styles.waitMessage}>\n          {chatAvailability === 'online'\n            ? renderWaitMessage()\n            : chatSettings?.offhoursMessage}\n        </span>\n      </div>\n    </div>\n  );\n};\n\nexport default MessageThreadHeader;\n","export default __webpack_public_path__ + \"conversationsEmpty.svg\";","export default __webpack_public_path__ + \"offline.svg\";","import { getAppLocale } from 'i18n/helpers';\n\nexport const MINUTE = 60000;\nconst HOUR = 60 * MINUTE;\nconst DAY = 24 * HOUR;\n\nexport const getTimeDifference = (date1: string, date2: string) => {\n  const date1InMs = new Date(date1).getTime();\n  const date2InMs = new Date(date2).getTime();\n\n  return Math.abs(date1InMs - date2InMs);\n};\n\nexport const getTimeAgo = (date: string) => {\n  let rtf;\n\n  const lang = getAppLocale();\n\n  if (!lang) return undefined;\n\n  try {\n    const formattedLang = lang.replace('_', '-');\n    rtf = new Intl.RelativeTimeFormat(formattedLang, { style: 'short' });\n  } catch (error) {\n    return undefined;\n  }\n\n  const messageDate = new Date(date).getTime();\n  const now = new Date().getTime();\n\n  const timeAgo = now - messageDate;\n\n  if (timeAgo >= DAY) {\n    const duration = Math.floor(timeAgo / DAY);\n    return rtf.format(-duration, 'day');\n  }\n\n  if (timeAgo >= HOUR) {\n    const duration = Math.floor(timeAgo / HOUR);\n    return rtf.format(-duration, 'hour');\n  }\n\n  if (timeAgo <= MINUTE) {\n    return 'Just now';\n  }\n\n  if (timeAgo > MINUTE) {\n    const duration = Math.floor(timeAgo / MINUTE);\n    return rtf.format(-duration, 'minute');\n  }\n\n  return timeAgo;\n};\n","export default {\n  timeAgoJustNow: 'Just now',\n};\n","import TimeAgo from './TimeAgo';\n\nexport default TimeAgo;\n","import { useTranslations } from 'i18n/hooks';\nimport { h } from 'preact';\nimport * as helpers from './helpers';\nimport messages from './messages';\n\ninterface TimeAgoProps {\n  className?: string;\n  timestamp?: string;\n}\n\nconst TimeAgo = ({ className, timestamp }: TimeAgoProps) => {\n  const translations = useTranslations(messages);\n\n  if (!timestamp) return null;\n\n  let timeAgo = helpers.getTimeAgo(timestamp);\n\n  if (timeAgo === 'Just now') {\n    timeAgo = translations.timeAgoJustNow;\n  }\n\n  return (\n    <div className={className} aria-hidden={true}>\n      {timeAgo}\n    </div>\n  );\n};\nexport default TimeAgo;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./unread.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./unread.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { SessionDetails } from 'core_main/sdk/get_assistant/types';\nimport { getMappedLanguage } from 'i18n/helpers';\n\nlet startTime;\nlet currentPage;\nlet previousPage;\n\nexport const updateCurrentPage = () => {\n  const parentHref = window.parent.location.href;\n\n  if (parentHref !== currentPage) {\n    previousPage = currentPage;\n    currentPage = parentHref;\n    startTime = Date.now();\n  }\n};\n\nexport const getCustomerSession = (): SessionDetails => {\n  startTime = startTime || Date.now();\n  previousPage = previousPage || window.parent.document.referrer;\n  currentPage = currentPage || window.parent.location.href;\n  const currentPageSeconds = Math.round((Date.now() - startTime) / 1000);\n  return {\n    currentPageSeconds,\n    currentPage,\n    previousPage,\n    language: getMappedLanguage(),\n    userAgent: window.parent.navigator.userAgent,\n  };\n};\n","import Unread from './Unread';\n\nexport default Unread;\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { UnreadCountsContext } from 'widget_main/store';\nimport styles from './unread.scss';\n\ninterface UnreadProps {\n  conversationId?: string;\n  className?: string;\n  withoutCount?: boolean;\n  limitCount?: boolean;\n}\n\nconst Unread = ({\n  className,\n  conversationId,\n  withoutCount,\n  limitCount,\n}: UnreadProps) => {\n  const unreadCounts = useContext(UnreadCountsContext);\n\n  const unreadCount = conversationId\n    ? unreadCounts.conversations[conversationId]\n    : unreadCounts?.total;\n\n  if (!unreadCount) return null;\n\n  let count = withoutCount ? '' : `${unreadCount}`;\n\n  if (limitCount && count.length) {\n    count = unreadCount > 9 ? '9+' : count;\n  }\n\n  return <div className={classNames(styles.unread, className)}>{count}</div>;\n};\n\nexport default Unread;\n","import {\n  getCustomerSession,\n  updateCurrentPage,\n} from 'widget_main/globals/session';\nimport { getKustomerCore, getKustomer } from 'widget_main/globals/helpers';\nimport { CustomerDetails } from 'core_main/sdk/get_assistant/types';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport { InitAssistantCallbackResponse } from 'core_main/sdk/init_assistant/types';\nimport { DeflectionArticle } from 'core_main/sdk/send_message/types';\n\nexport const findPageCondition = (condition) =>\n  !!condition.session_currentPage ||\n  !!condition.session_previousPage ||\n  !!condition.currentPageSeconds;\n\nexport const findPageCriteria = (rule) => {\n  const or = rule.criteria?.and?.find(findPageCondition);\n  const and = rule.criteria?.or?.find(findPageCondition);\n\n  return or || and;\n};\n\nexport const startUpdatePageInterval = (settings) => {\n  const { assistantRules } = settings;\n\n  if (!assistantRules?.length) return undefined;\n\n  const containsPageCriteria = assistantRules.find(findPageCriteria);\n\n  if (containsPageCriteria) {\n    return setInterval(() => {\n      updateCurrentPage();\n    }, 500);\n  }\n\n  return undefined;\n};\nexport const getDefaultAssistant = (): Promise<\n  Maybe<InitAssistantCallbackResponse>\n> => {\n  const settings = getKustomerCore().getChatSettings();\n  if (settings.activeAssistant)\n    return getKustomerCore().initAssistant({\n      assistant: settings.activeAssistant,\n      lang: getMappedLanguage(),\n      assistantOptions: getKustomer()?.startParameters?.assistantOptions,\n    });\n  return Promise.resolve(undefined);\n};\n\nexport const getActiveAssistant = (\n  options: {\n    customer?: CustomerDetails;\n    proactiveOnly?: boolean;\n    assistant?: string;\n    dialog?: string;\n  } = {},\n): Promise<InitAssistantCallbackResponse | false> => {\n  const activeAssistant = options.assistant\n    ? {\n        assistant: options.assistant,\n        dialog: options.dialog,\n      }\n    : getKustomerCore().getAssistant({\n        ...options,\n        session: getCustomerSession(),\n      });\n\n  if (!activeAssistant) return Promise.resolve(false);\n\n  if (activeAssistant.aiAgentTeamId) {\n    return getKustomerCore().initAssistant({\n      aiAgentTeamId: activeAssistant.aiAgentTeamId,\n    });\n  }\n\n  const assistantId = getKustomer()?.startParameters?.assistantId;\n  if (assistantId) {\n    // set assistant to `assistantId` from query params in preview page\n    activeAssistant.assistant = assistantId;\n  }\n\n  return getKustomerCore()\n    .initAssistant({\n      ...activeAssistant,\n      lang: getMappedLanguage(),\n      assistantOptions: getKustomer()?.startParameters?.assistantOptions,\n    })\n    .catch((e: Error) => {\n      if (e.message.match(/4[0-9][0-9]/g)) {\n        return Promise.reject(e);\n      }\n      return getDefaultAssistant();\n    });\n};\n\nexport const sendKbDeflectionClick = (\n  sessionId: string,\n  articles: DeflectionArticle[],\n) => {\n  // intentionally NOT returning the promise because if this fails, we can fail silently\n  getKustomerCore()\n    .sendKbDeflectionClick({ sessionId, articles })\n    .catch(() => {\n      console.error('Failed to send deflection click data');\n    });\n};\n\nexport const isAssistantPreview = () => {\n  return !!getKustomer()?.startParameters?.assistantOptions?.emulation;\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./newConversationButton.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./newConversationButton.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  newConversation: 'New Conversation',\n  leaveAMessage: 'Leave a Message',\n  newConversationButtonAriaLabel: 'create a conversation',\n  viewNewConversation: 'View New Conversation',\n};\n","import { h } from 'preact';\nimport classNames from 'classnames';\nimport { useContext } from 'preact/hooks';\nimport { MESSAGE_THREAD_PATH, OFFLINE } from 'widget_main/globals/constants';\nimport {\n  NavigationContext,\n  ChatAvailabilityContext,\n  ConnectionContext,\n} from 'widget_main/store';\nimport Button from 'widget_main/components/ui/Button';\nimport { useTranslations } from 'i18n/hooks';\nimport { getActiveAssistant } from 'widget_main/app/helpers/assistant';\nimport { getKustomerCore } from 'widget_main/globals/helpers';\nimport styles from './newConversationButton.scss';\n\nimport messages from './messages';\n\nconst kustomerCore = getKustomerCore();\n\ninterface NewConversationButtonProps {\n  className?: string;\n  navigateToConversationId?: string;\n}\n\nconst NewConversationButton = ({\n  className,\n  navigateToConversationId,\n}: NewConversationButtonProps) => {\n  const chatAvailability = useContext(ChatAvailabilityContext);\n  const navigation = useContext(NavigationContext);\n  const connection = useContext(ConnectionContext);\n\n  const translations = useTranslations(messages);\n\n  const handleClickCreate = () => {\n    kustomerCore.kustomerEventCount({\n      name: 'new_conversation_button.new_conversation.click',\n    });\n    getActiveAssistant()\n      .then((response) => {\n        if (response) {\n          navigation.updateInitAssistantPayload(response);\n        }\n        navigation.updateCurrentConversationId(undefined);\n        navigation.updatePage(MESSAGE_THREAD_PATH);\n      })\n      .catch(() => {\n        navigation.updateCurrentConversationId(undefined);\n        navigation.updatePage(MESSAGE_THREAD_PATH);\n      });\n  };\n\n  const handleNavigateToConversation = () => {\n    kustomerCore.kustomerEventCount({\n      name: 'new_conversation_button.navigate_to_conversation.click',\n    });\n    navigation.updateCurrentConversationId(navigateToConversationId);\n  };\n\n  const isOnline = chatAvailability === 'online';\n  let message = isOnline\n    ? translations.newConversation\n    : translations.leaveAMessage;\n\n  if (navigateToConversationId) {\n    message = translations.viewNewConversation;\n  }\n\n  return (\n    <Button\n      className={classNames(styles.newConversationButton, className)}\n      ariaLabel={message}\n      onClick={\n        navigateToConversationId\n          ? handleNavigateToConversation\n          : handleClickCreate\n      }\n      disabled={connection === OFFLINE}\n      data-kt=\"NewConversationButton\"\n    >\n      {message}\n    </Button>\n  );\n};\n\nexport default NewConversationButton;\n","import NewConversationButton from './NewConversationButton';\n\nexport default NewConversationButton;\n","import { h } from 'preact';\n\n/**\n * DecorativeImage is a component that renders an image with an\n * empty alt attribute and a role of presentation, to be in compliance\n * with accessibility standards for decorative images.\n * NOTE: all other passed in props are respected\n */\nconst DecorativeImage = (props) => {\n  // remove alt and role from props passed in\n  const { alt, role, ...restProps } = props;\n  // use these for alt and role, instead of the ones passed in\n  const decorativeImageAttributes = {\n    alt: '', // empty alt tag for decorative images\n    role: 'presentation', // screen readers also like presentation role\n  };\n  return <img alt={decorativeImageAttributes.alt} role={decorativeImageAttributes.role} {...restProps} />;\n};\n\nexport default DecorativeImage;\n","export default {\n  emptyTitle: 'No conversations yet',\n  emptySubtitle: 'Your existing conversations will be here.',\n  offHoursEmptyTitle: 'Please leave a message',\n  offHoursEmptySubtitle: 'We will get back to you as soon as we are online!',\n  ended: 'Ended',\n  previewAttachmentReceived: 'You received an attachment',\n  previewAttachmentSent: 'You sent an attachment',\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./conversations.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./conversations.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport {\n  useContext,\n  useState,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n} from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport {\n  getMessageAgentInformation,\n  getLastMessagePreview,\n  setKustomerLocalStorage,\n  getLastAgentMessageInConversation,\n} from 'widget_main/globals/helpers';\nimport {\n  NavigationContext,\n  ConversationsContext,\n  SettingsContext,\n  UnreadCountsContext,\n  ChatAvailabilityContext,\n  HideNewConversationButtonSettingsContext,\n  MessagesContext,\n} from 'widget_main/store';\nimport {\n  CONVERSATIONS_PATH,\n  MESSAGE_THREAD_PATH,\n  WIDGET_TYPE_CHAT_KB,\n} from 'widget_main/globals/constants';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\n\nimport ConversationsEmpty from 'widget_main/globals/assets/conversationsEmpty.svg';\nimport Offline from 'widget_main/globals/assets/offline.svg';\nimport Avatar from 'widget_main/components/Avatar';\nimport TimeAgo from 'widget_main/components/TimeAgo';\nimport Unread from 'widget_main/components/Unread';\nimport NewConversationButton from 'widget_main/components/NewConversationButton';\nimport Markdown from 'widget_main/components/Markdown/Markdown';\n\nimport { ConversationEntity } from 'widget_main/store/types';\n\nimport { useTranslations } from 'i18n/hooks';\nimport { sanitizeHtml } from 'widget_main/vendors/hooks';\nimport { getFilteredConversations } from 'widget_main/screens/Conversations/helpers';\nimport DecorativeImage from 'widget_main/components/Image/DecorativeImage';\nimport messages from './messages';\n\nimport styles from './conversations.scss';\nimport Loader from '../../components/ui/Loader';\n\nconst Conversations = () => {\n  const chatAvailability = useContext(ChatAvailabilityContext);\n  const hideNewConversationButtonSettings = useContext(\n    HideNewConversationButtonSettingsContext,\n  );\n  const navigation = useContext(NavigationContext);\n  const conversations = useContext(ConversationsContext);\n  const messagesState = useContext(MessagesContext);\n  const unreadCounts = useContext(UnreadCountsContext);\n  const chatSettings = useContext(SettingsContext);\n\n  const translations = useTranslations(messages);\n\n  const [, forceUpdate] = useState({});\n\n  useEffect(() => {\n    setKustomerLocalStorage('lastOpenPage', CONVERSATIONS_PATH);\n\n    const interval = setInterval(() => {\n      forceUpdate({});\n    }, 60000);\n    return () => clearInterval(interval);\n  }, []);\n  const [fetchingHistory, setFetchingHistory] = useState(false);\n  const previousScrollTop = useRef(0);\n  const CONVERSATION_LIST_ID = 'conversationList';\n  const conversationCount = Object.keys(conversations.data).length;\n  useLayoutEffect(() => {\n    // this hook will run only on first load to scroll to the last scroll location\n    if (conversationCount && navigation.conversationListScrollLocation) {\n      const conversationList = document.getElementById(\n        CONVERSATION_LIST_ID,\n      ) as HTMLElement;\n      conversationList.scrollTop = navigation.conversationListScrollLocation;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  useLayoutEffect(() => {\n    // this hook will make sure that the scroll position is retained when loading older conversations\n    if (conversationCount) {\n      const conversationList = document.getElementById(\n        CONVERSATION_LIST_ID,\n      ) as HTMLElement;\n      if (previousScrollTop.current) {\n        conversationList.scrollTop = previousScrollTop.current;\n        previousScrollTop.current = 0;\n      }\n    }\n  }, [conversationCount]);\n  useEffect(() => {\n    // this hook clears the loading ui when messages are received\n    if (conversationCount || !conversations.pages?.next)\n      setFetchingHistory(false);\n  }, [conversationCount, conversations.pages?.next]);\n  const handleClickConversation = (e, id) => {\n    e.preventDefault();\n    e.stopPropagation();\n    navigation.updateCurrentConversationId(id);\n    navigation.updatePage(MESSAGE_THREAD_PATH);\n  };\n\n  const handleKeyPress = (e, id) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      handleClickConversation(e, id);\n    }\n  };\n\n  const getSortedConversations = () => {\n    const filteredConversations = getFilteredConversations(\n      Object.values(conversations.data),\n      chatSettings.noHistory,\n      Object.keys(unreadCounts.conversations),\n    );\n\n    return filteredConversations.sort((a, b) => {\n      const timestamp1 = a.lastMessageAt\n        ? new Date(a.lastMessageAt).getTime()\n        : 0;\n\n      const timestamp2 = b.lastMessageAt\n        ? new Date(b.lastMessageAt).getTime()\n        : 0;\n\n      if (timestamp1 > timestamp2) {\n        return -1;\n      }\n      return 1;\n    });\n  };\n\n  const renderEmpty = () => {\n    if (chatAvailability === 'online') {\n      return (\n        <div className={styles.empty} data-kt=\"emptyConversationList\">\n          <DecorativeImage\n            src={ConversationsEmpty}\n            className={styles.conversationsEmpty}\n          />\n          <h2 className={styles.emptyTitle}>{translations.emptyTitle}</h2>\n          <p className={styles.emptySubtitle}>{translations.emptySubtitle}</p>\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.empty}>\n        {chatSettings?.offhoursImageUrl ? (\n          <DecorativeImage\n            className={styles.offlineCustomImage}\n            src={chatSettings?.offhoursImageUrl}\n          />\n        ) : (\n          <DecorativeImage src={Offline} />\n        )}\n        <h2 className={styles.emptyTitle}>{translations.offHoursEmptyTitle}</h2>\n        <p className={styles.emptySubtitle}>\n          {translations.offHoursEmptySubtitle}\n        </p>\n      </div>\n    );\n  };\n\n  const renderPreviewText = (previewText?) => {\n    if (!previewText) {\n      return null;\n    }\n\n    return (\n      <Markdown\n        markdown={previewText}\n        formatHtml={(html) =>\n          sanitizeHtml(\n            html.replace(/<img.*>/g, translations.previewAttachmentReceived),\n            {\n              ALLOWED_TAGS: ['#text'],\n            },\n          )\n        }\n      />\n    );\n  };\n\n  const renderConversationItem = (conversation: ConversationEntity) => {\n    const { conversationId, lastMessageAt, ended } = conversation;\n\n    const lastMessagePreview = getLastMessagePreview(conversation);\n\n    const lastAgentMessage = getLastAgentMessageInConversation(\n      conversation,\n      messagesState,\n    );\n\n    const lastMessageAgentData = getMessageAgentInformation(\n      lastAgentMessage?.sentBy ?? conversation.lastResponder,\n      chatSettings,\n    );\n\n    const agentDisplayName = lastMessageAgentData?.displayName?.replace?.(\n      /AI_/g,\n      '',\n    );\n\n    return (\n      <div\n        role=\"button\"\n        tabIndex={0}\n        key={conversationId}\n        class={classNames(styles.conversation, {\n          [styles.unreadConversation]:\n            !!unreadCounts.conversations[conversationId],\n          [styles.endedConversation]: ended,\n        })}\n        onKeyPress={(e) => handleKeyPress(e, conversationId)}\n        onClick={(e) => handleClickConversation(e, conversationId)}\n      >\n        <Avatar\n          className={styles.avatar}\n          size={40}\n          avatarUrl={lastMessageAgentData.avatarUrl}\n          userDisplayName={agentDisplayName}\n        />\n        <div\n          class={styles.conversationDetails}\n          data-kt=\"conversationRowDetails\"\n        >\n          <div class={styles.conversationHeader}>\n            <div class={styles.agentName}>{agentDisplayName}</div>\n            {ended && (\n              <div className={styles.timestamp}>{translations.ended}</div>\n            )}\n            {!ended && lastMessageAt && (\n              <TimeAgo className={styles.timestamp} timestamp={lastMessageAt} />\n            )}\n          </div>\n          <div class={styles.conversationBody}>\n            <div class={styles.preview}>\n              {renderPreviewText(lastMessagePreview)}\n            </div>\n            <Unread\n              className={styles.unreadProp}\n              conversationId={conversationId}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderGetPreviousConversationsLoader = () => {\n    return (\n      <div\n        className={classNames(styles.loaderWrapper, {\n          [styles.showLoader]: fetchingHistory && !!conversations.pages?.next,\n        })}\n      >\n        <Loader className={styles.loader} />\n      </div>\n    );\n  };\n  const renderConversationsList = () => {\n    const conversationsList = getSortedConversations();\n\n    return (\n      <div class={styles.conversationList}>\n        {conversationsList.map(renderConversationItem)}\n        {conversationsList.length === 0 && renderEmpty()}\n        {renderGetPreviousConversationsLoader()}\n      </div>\n    );\n  };\n\n  const renderNewConversationButton = () => {\n    const openConversationFound = Object.values(conversations.data).find(\n      (conversation) => !conversation.ended,\n    );\n\n    if (\n      hideNewConversationButtonSettings.onChatHistory ||\n      (chatSettings.singleSessionChat && openConversationFound)\n    ) {\n      return null;\n    }\n\n    return (\n      <NewConversationButton\n        data-kt=\"NewConversationButton\"\n        className={classNames(styles.createConversationButton, {\n          [styles.createConversationButtonWithNavigation]:\n            chatSettings.widgetType === WIDGET_TYPE_CHAT_KB,\n        })}\n      />\n    );\n  };\n  const handleScrollConversationList = (e) => {\n    const DISTANCE_TO_BOTTOM_TO_LOAD_MORE = 10;\n    const element = e.target;\n    navigation.updateConversationListScrollLocation(element.scrollTop);\n    const isScrolledToBottom =\n      element.scrollHeight -\n        element.scrollTop -\n        DISTANCE_TO_BOTTOM_TO_LOAD_MORE <=\n      element.clientHeight;\n    if (\n      isScrolledToBottom &&\n      conversationCount &&\n      conversations.pages?.next &&\n      !fetchingHistory\n    ) {\n      setFetchingHistory(true);\n      previousScrollTop.current = element.scrollTop;\n      conversations.fetchNextPageOfHistory();\n    }\n  };\n  return (\n    <div\n      class={styles.container}\n      onScroll={handleScrollConversationList}\n      id={CONVERSATION_LIST_ID}\n    >\n      {renderConversationsList()}\n      {renderNewConversationButton()}\n    </div>\n  );\n};\n\nexport default Conversations;\n","import Conversations from './Conversations';\n\nexport default Conversations;\n","import { ConversationEntity } from 'widget_main/store/types';\n\nexport const getFilteredConversations = (\n  conversationsList: ConversationEntity[],\n  noHistory: boolean,\n  unreadConversationIds: string[] = [],\n) => {\n  // Filter out conversations that have been merged into other conversations\n  const filteredConversations = conversationsList.filter(\n    (conversation) => !conversation.movedToConversationId,\n  );\n\n  if (noHistory) {\n    return filteredConversations.filter(\n      (conversation) =>\n        !conversation.ended ||\n        unreadConversationIds.some((c) => c === conversation.conversationId),\n    );\n  }\n  return filteredConversations;\n};\n","import { getKustomer } from 'widget_main/globals/helpers';\n\nclass _DisableZoomMetaElement {\n  readonly META_VIEWPORT_ID: string;\n\n  readonly getParentDocument: () => Document;\n\n  readonly getParentHead: () => HTMLHeadElement | null;\n\n  readonly getMetaViewport: () => HTMLElement | null;\n\n  constructor() {\n    this.META_VIEWPORT_ID = 'kustomer-viewport';\n\n    this.getParentDocument = () => window?.parent?.document;\n    this.getParentHead = () =>\n      this.getParentDocument()?.getElementsByTagName('head')?.[0];\n    this.getMetaViewport = () =>\n      this.getParentDocument()?.getElementById(this.META_VIEWPORT_ID);\n  }\n\n  buildMetaTag(): HTMLElement {\n    const metaViewPortEl = this.getParentDocument().createElement('meta');\n    metaViewPortEl.id = this.META_VIEWPORT_ID;\n    metaViewPortEl.name = 'viewport';\n    metaViewPortEl.content =\n      'width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0';\n    return metaViewPortEl;\n  }\n\n  add(): void {\n    const hasMetaViewport = this.getMetaViewport();\n    if (hasMetaViewport) return;\n\n    const metaViewPortEl = this.buildMetaTag();\n    const head = this.getParentHead();\n    head?.appendChild(metaViewPortEl);\n  }\n\n  remove(): void {\n    const metaViewportEl = this.getMetaViewport();\n    if (!metaViewportEl) return;\n\n    const head = this.getParentHead();\n    head?.removeChild(metaViewportEl);\n  }\n}\n\nexport const DisableZoomMetaElement = new _DisableZoomMetaElement();\n\n// Usage of allowZoom param \\\\\nconst getIsZoomAllowed = () => getKustomer()?.startParameters?.allowZoom;\n\nexport const maybeAddDisableZoomMetaTag = () => {\n  const isZoomAllowed = getIsZoomAllowed();\n  if (isZoomAllowed) return;\n\n  DisableZoomMetaElement.add();\n};\n\nexport const maybeRemoveDisableZoomMetaTag = () => {\n  const isZoomAllowed = getIsZoomAllowed();\n  if (isZoomAllowed) return;\n\n  DisableZoomMetaElement.remove();\n};\n","import sizings from 'widget_main/styles/sizings.scss';\n\nimport {\n  maybeAddDisableZoomMetaTag,\n  maybeRemoveDisableZoomMetaTag,\n} from 'helpers/viewport_meta_tag';\n\nimport { getChatIconPosition, getChatIconSize } from 'widget_main/app/helpers';\nimport { ChatIconPosition, ChatIconSize } from 'widget/widget_api/types';\nimport { IframeSizeOverrides } from './types';\n\nconst CHAT_ICON_PADDING = 20;\nconst WIDGET_OPEN_ANIMATION =\n  'width 200ms ease 0s, height 200ms ease 0s, max-height 200ms ease 0s, transform 300ms cubic-bezier(0, 1.2, 1, 1) 0s, opacity 83ms ease-out 0s';\n\nclass _KustomerApiIFrameElement {\n  readonly IFRAME_ID: string;\n\n  readonly getParentDocument: () => Document;\n\n  readonly getIframe: () => HTMLIFrameElement;\n\n  constructor() {\n    this.IFRAME_ID = 'kustomer-ui-sdk-iframe';\n    this.getParentDocument = () => window?.parent?.document;\n    this.getIframe = () =>\n      this.getParentDocument().getElementById(\n        this.IFRAME_ID,\n      ) as HTMLIFrameElement;\n  }\n\n  setIframeSizeFullScreen(position: ChatIconPosition) {\n    const selfIframe = this.getIframe();\n    maybeAddDisableZoomMetaTag();\n    this.addKustomerMobileActiveClass();\n    selfIframe.style.transition = WIDGET_OPEN_ANIMATION;\n    selfIframe.style.width = '100%';\n    selfIframe.style.height = '100%';\n    selfIframe.style.maxHeight = '100%';\n    selfIframe.style.maxWidth = '100%';\n    selfIframe.style.minWidth = '';\n    selfIframe.style.minHeight = '';\n    selfIframe.style.bottom = '0';\n    selfIframe.style.display = 'block';\n    if (position.alignment === 'right') {\n      selfIframe.style.right = '0';\n    } else {\n      selfIframe.style.left = '0';\n    }\n    return selfIframe;\n  }\n\n  setIframeSize(overrides: IframeSizeOverrides, position: ChatIconPosition) {\n    const selfIframe = this.getIframe();\n    maybeRemoveDisableZoomMetaTag();\n    this.removeKustomerMobileActiveClass();\n    selfIframe.style.transition =\n      overrides?.transition || WIDGET_OPEN_ANIMATION;\n    selfIframe.style.width = overrides?.frameWidth;\n    selfIframe.style.height = overrides?.frameHeight;\n    selfIframe.style.minHeight = overrides.frameMinHeight;\n    selfIframe.style.maxHeight =\n      overrides.frameMaxHeight || sizings.widgetFrameMaxHeight;\n    selfIframe.style.minWidth = overrides.frameMinWidth || '';\n    selfIframe.style.maxWidth = sizings.widgetMaxWidth;\n    selfIframe.style.bottom = `${position.verticalPadding}px`;\n    selfIframe.style.right = `${position.horizontalPadding}px`;\n    selfIframe.style.display = overrides.display || 'block';\n    if (position.alignment === 'right') {\n      selfIframe.style.right = `${position.horizontalPadding}px`;\n      selfIframe.style.left = '';\n    } else {\n      selfIframe.style.left = `${position.horizontalPadding}px`;\n      selfIframe.style.right = '';\n    }\n    return selfIframe;\n  }\n\n  addKustomerMobileActiveClass() {\n    const parentDocument = this.getParentDocument();\n    if (parentDocument) {\n      // delay adding the mobile active class to ensure that the sizing animation has finished (250ms)\n      setTimeout(() => {\n        parentDocument.documentElement.classList?.add('kustomer-mobile-active');\n      }, 300);\n    }\n  }\n\n  removeKustomerMobileActiveClass() {\n    const parentDocument = this.getParentDocument();\n    if (parentDocument) {\n      parentDocument.documentElement.classList?.remove(\n        'kustomer-mobile-active',\n      );\n    }\n  }\n}\n\nexport const iFrameElement = new _KustomerApiIFrameElement();\n\nexport const getChatIconFrameSize = (): ChatIconSize => {\n  const iconSize = getChatIconSize();\n  return {\n    width: iconSize.width + CHAT_ICON_PADDING,\n    height: iconSize.height + CHAT_ICON_PADDING,\n  };\n};\n\nexport const setIframeSize = (overrides: IframeSizeOverrides) => {\n  const position = getChatIconPosition();\n  return iFrameElement.setIframeSize(overrides, position);\n};\n\nexport const setIframeSizeDefaultWidget = () => {\n  return setIframeSize({\n    frameHeight: sizings.widgetFrameHeight,\n    frameWidth: sizings.widgetFrameWidth,\n    frameMinHeight: `${getChatIconFrameSize().height}px`,\n  });\n};\n\nexport const setIframeSizeWithExpandedUi = () => {\n  return setIframeSize({\n    frameWidth: `45%`,\n    frameHeight: '98%',\n    frameMinHeight: '400px',\n    frameMaxHeight: '98%',\n    frameMinWidth: '400px',\n  });\n};\n\nexport const setIframeSizeFullScreen = () => {\n  const position = getChatIconPosition();\n  return iFrameElement.setIframeSizeFullScreen(position);\n};\n\nexport const setIframeSizeCustom = (overrides) => {\n  return setIframeSize({\n    frameHeight: overrides.frameHeight,\n    frameWidth: overrides.frameWidth,\n    frameMinHeight: `${getChatIconFrameSize().height}px`,\n  });\n};\n\nexport const setIframeSizeHidden = () => {\n  return setIframeSize({\n    frameHeight: '0',\n    frameWidth: '0',\n    frameMinHeight: '0',\n    display: 'none',\n  });\n};\n\nexport const setIframeSizeChatIcon = (isChatIconHidden?: boolean) => {\n  if (isChatIconHidden) {\n    return setIframeSizeHidden();\n  }\n  return setIframeSize({\n    frameHeight: `${getChatIconFrameSize().height}px`,\n    frameMinHeight: `${getChatIconFrameSize().height}px`,\n    frameWidth: `${getChatIconFrameSize().width}px`,\n  });\n};\n\nexport const focusOnIframe = () => {\n  iFrameElement.getIframe().focus();\n};\n\nexport const focusOnWindowContainingIframe = () => {\n  iFrameElement.getIframe().contentWindow?.parent.focus();\n};\n\nexport const isWidgetInFocus = () => {\n  return Boolean(\n    document.hasFocus() ||\n      iFrameElement.getIframe().contentWindow?.document.hasFocus(),\n  );\n};\n\nexport const getParentWindowTitle = () => {\n  const { contentWindow } = iFrameElement.getIframe();\n  return contentWindow?.parent.document.title;\n};\n\n// only exporting for testing purposes\nexport const generateNotificationRegex = (text: string) => {\n  const strippedNumbers = text.replaceAll(/\\(\\d+\\) /g, '');\n  return new RegExp(`\\\\(\\\\d+\\\\)+ ${strippedNumbers}`, 'gi');\n};\n\nexport const appendChatNotificationToParentTitle = (\n  notificationText: string,\n) => {\n  const { contentWindow } = iFrameElement.getIframe();\n  if (contentWindow) {\n    const currentTitle = getParentWindowTitle();\n    const regex = generateNotificationRegex(notificationText);\n    const titleContainsChatNotification =\n      currentTitle && regex.test(currentTitle);\n    if (titleContainsChatNotification) {\n      // replace the current notification in the title\n      contentWindow.parent.document.title = currentTitle.replaceAll(\n        regex,\n        notificationText,\n      );\n    } else {\n      // prepend the notification to the title\n      contentWindow.parent.document.title = `${notificationText} ${currentTitle}`;\n    }\n  }\n};\n\nexport const clearChatNotificationFromParentTitle = (\n  translatedString: string,\n) => {\n  const { contentWindow } = iFrameElement.getIframe();\n  const currentTitle = getParentWindowTitle();\n  const regex = generateNotificationRegex(translatedString);\n  // clear the notification in the title\n  if (contentWindow && currentTitle) {\n    contentWindow.parent.document.title = currentTitle.replaceAll(regex, '');\n  }\n};\n","import { useCallback, useEffect, useState } from 'preact/hooks';\nimport { RefObject } from 'preact';\nimport { isWidgetInFocus } from 'helpers/kustomer_api_iframe';\n\nexport const useTouchMove = (element) => {\n  const handleTouchMove = useCallback(\n    (event) => {\n      const isScrollable =\n        element?.scrollWidth > element?.clientWidth ||\n        element?.scrollHeight > element?.clientHeight;\n\n      if (!isScrollable) {\n        event.preventDefault();\n      }\n    },\n    [element],\n  );\n\n  useEffect(() => {\n    element?.addEventListener('touchmove', handleTouchMove);\n\n    return () => {\n      element?.removeEventListener('touchmove', handleTouchMove);\n    };\n  }, [element, handleTouchMove]);\n};\n\nexport const usePageVisibility = () => {\n  const [pageIsVisible, setPageIsVisible] = useState(isWidgetInFocus());\n\n  const setPageVisibility = () => setPageIsVisible(isWidgetInFocus());\n\n  useEffect(() => {\n    window.addEventListener('focus', setPageVisibility, false);\n    window.addEventListener('blur', () => setPageIsVisible(false), false);\n\n    return () => {\n      window.removeEventListener('focus', setPageVisibility, false);\n      window.removeEventListener('blur', () => setPageIsVisible(false), false);\n    };\n  }, []);\n  return pageIsVisible;\n};\n\nexport const useIntersectionObserver = (\n  elementRef: RefObject<Element>,\n  {\n    threshold = 0,\n    root = null,\n    rootMargin = '0px 0px 0px 0px',\n  }: IntersectionObserverInit = {},\n) => {\n  const [state, setState] = useState<IntersectionObserverEntry | undefined>();\n  useEffect(() => {\n    const io = new IntersectionObserver(\n      (entries) => {\n        setState(entries[0]);\n      },\n      { root, rootMargin, threshold },\n    );\n    if (elementRef?.current) {\n      io.observe(elementRef.current);\n    }\n    return () => io.disconnect();\n  }, [elementRef?.current, root, rootMargin, threshold]);\n  return state;\n};\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"d\":\"M9 6L15 12L9 18\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","export const CHAT_MESSAGE_THREAD_ID = 'chatMessageThread';\nexport const DISTANCE_TO_BOTTOM_FOR_LOCK = 50;\nexport const DISTANCE_TO_TOP_TO_LOAD_MORE = 10;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./scrollToCurrent.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./scrollToCurrent.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  scrollToBottom: 'Scroll to bottom of message thread',\n};\n","import classNames from 'classnames';\nimport { h } from 'preact';\n\nimport ChevronRight from 'widget_main/globals/assets/chevronRight.svg';\nimport { useTranslations } from 'i18n/hooks';\nimport globalMessages from 'widget_main/globals/messages';\nimport Text from 'widget_main/components/Text';\nimport { CHAT_MESSAGE_THREAD_ID } from '../constants';\nimport styles from './scrollToCurrent.scss';\nimport messages from './messages';\n\ninterface ScrollToCurrentProps {\n  showNewMessagesText: boolean;\n  showScrollToCurrent: boolean;\n}\n\nexport const ScrollToCurrent = ({\n  showNewMessagesText,\n  showScrollToCurrent,\n}: ScrollToCurrentProps) => {\n  const translations = useTranslations(messages);\n  const scrollViewToBottom = () => {\n    const chatMessageThread = document.getElementById(CHAT_MESSAGE_THREAD_ID);\n    if (chatMessageThread) {\n      chatMessageThread.scrollTo({\n        top: chatMessageThread.scrollHeight - 1,\n        behavior: 'smooth',\n      });\n    }\n  };\n  return (\n    <div\n      className={classNames(styles.scrollToCurrentContainer, {\n        [styles.scrollToContainerFadeIn]: showScrollToCurrent,\n        [styles.scrollToContainerFadeOut]: !showScrollToCurrent,\n      })}\n    >\n      <button\n        type=\"button\"\n        className={classNames(styles.scrollToCurrent, {\n          [styles.hasNewMessages]: showNewMessagesText,\n        })}\n        onClick={scrollViewToBottom}\n        aria-label={translations.scrollToBottom}\n      >\n        <ChevronRight className={styles.chevronDown} />\n        {showNewMessagesText && (\n          <Text id=\"newMessages\" defaultMessage={globalMessages.newMessages} />\n        )}\n      </button>\n    </div>\n  );\n};\n","import { ScrollToCurrent } from './ScrollToCurrent';\n\nexport default ScrollToCurrent;\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n\\t\", h('path', {\"fill\":\"currentColor\",\"d\":\"M14,2L20,8V20A2,2 0 0,1 18,22H6A2,2 0 0,1 4,20V4A2,2 0 0,1 6,2H14M18,20V9H13V4H6V20H18M10.92,12.31C10.68,11.54 10.15,9.08 11.55,9.04C12.95,9 12.03,12.16 12.03,12.16C12.42,13.65 14.05,14.72 14.05,14.72C14.55,14.57 17.4,14.24 17,15.72C16.57,17.2 13.5,15.81 13.5,15.81C11.55,15.95 10.09,16.47 10.09,16.47C8.96,18.58 7.64,19.5 7.1,18.61C6.43,17.5 9.23,16.07 9.23,16.07C10.68,13.72 10.9,12.35 10.92,12.31M11.57,13.15C11.17,14.45 10.37,15.84 10.37,15.84C11.22,15.5 13.08,15.11 13.08,15.11C11.94,14.11 11.59,13.16 11.57,13.15M14.71,15.32C14.71,15.32 16.46,15.97 16.5,15.71C16.57,15.44 15.17,15.2 14.71,15.32M9.05,16.81C8.28,17.11 7.54,18.39 7.72,18.39C7.9,18.4 8.63,17.79 9.05,16.81M11.57,11.26C11.57,11.21 12,9.58 11.57,9.53C11.27,9.5 11.56,11.22 11.57,11.26Z\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"height\":\"24\",\"width\":\"24\"}, rest), [h('path', {\"d\":\"M0 0h24v24H0V0z\",\"fill\":\"none\"}, []), h('path', {\"fill\":\"currentColor\",\"d\":\"M14 2H6a2 2 0 00-2 2v16c0 1.1.9 2 2 2h12a2 2 0 002-2V8l-6-6zm4 18H6V4h8v4h4v12zm-6-3a2 2 0 01-2-2V9.5c0-.3.2-.5.5-.5s.5.2.5.5V15h2V9.5a2.5 2.5 0 00-5 0V15a4 4 0 108 0v-4h-2v4a2 2 0 01-2 2z\"}, [])]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"16\",\"height\":\"16\",\"viewBox\":\"0 0 16 16\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-botSparkle-1RQZw78\",\"d\":\"M12.6667 2V4.66667M11.3333 3.33333H14M12.6667 11.3333V14M11.3333 12.6667H14M6.66667 3.33333L5.68667 5.81814C5.5614 6.13578 5.49876 6.2946 5.40285 6.42852C5.31783 6.54723 5.2139 6.65116 5.09519 6.73618C4.96127 6.83209 4.80245 6.89473 4.48481 7.02001L2 8L4.48481 8.97999C4.80245 9.10527 4.96127 9.16791 5.09519 9.26382C5.2139 9.34883 5.31783 9.45277 5.40285 9.57148C5.49876 9.7054 5.5614 9.86422 5.68667 10.1819L6.66667 12.6667L7.64666 10.1819C7.77194 9.86422 7.83457 9.7054 7.93049 9.57148C8.0155 9.45277 8.11944 9.34883 8.23814 9.26382C8.37207 9.16791 8.53088 9.10527 8.84852 8.97999L11.3333 8L8.84852 7.02001C8.53089 6.89473 8.37207 6.83209 8.23814 6.73618C8.11944 6.65116 8.0155 6.54723 7.93049 6.42852C7.83457 6.2946 7.77194 6.13578 7.64666 5.81814L6.66667 3.33333Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"1.33333\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./chatBubble.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./chatBubble.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  messageSendFailure: 'Failed to send. Press to retry.',\n  messageBot: 'Bot',\n  processingAnswer: 'Processing Answer',\n  aiAnswer: 'Generated by an AI bot',\n  fromAiAutomation: 'Generated by AI',\n};\n","import { ComponentChild, h } from 'preact';\nimport classNames from 'classnames';\nimport Avatar from 'widget_main/components/Avatar';\nimport TimeAgo from 'widget_main/components/TimeAgo';\nimport BotSparkle from 'widget_main/globals/assets/botSparkle.svg';\nimport { useTranslations } from 'i18n/hooks';\nimport styles from './chatBubble.scss';\nimport messages from './messages';\n\ninterface ChatBubbleProps {\n  avatarUrl?: string;\n  children?: ComponentChild;\n  className?: string;\n  innerClassName?: string;\n  isOutbound?: boolean;\n  showAvatar?: boolean;\n  showBotIdentifier?: boolean;\n  showAIIdentifier?: boolean;\n  showAIProcessingAnswer?: boolean;\n  showOptimisticError?: boolean;\n  showTimestamp?: boolean;\n  timestamp?: string;\n  userDisplayName?: string;\n}\n\nconst ChatBubble = ({\n  avatarUrl,\n  children,\n  className,\n  innerClassName,\n  isOutbound,\n  showAvatar,\n  showBotIdentifier,\n  showAIIdentifier,\n  showOptimisticError,\n  showTimestamp,\n  timestamp,\n  userDisplayName,\n  showAIProcessingAnswer,\n}: ChatBubbleProps) => {\n  const translations = useTranslations(messages);\n\n  const renderTimestamp = () => {\n    return <TimeAgo className={styles.timestamp} timestamp={timestamp} />;\n  };\n\n  const renderAITypingMessage = () => {\n    if (!showAIProcessingAnswer) return null;\n    return <div>{translations.processingAnswer}</div>;\n  };\n\n  const renderOptimisticError = () => {\n    return (\n      <div className={styles.optimisticError}>\n        {translations.messageSendFailure}\n      </div>\n    );\n  };\n\n  const isFromAiAutomation = () => {\n    return userDisplayName?.includes('AI_');\n  };\n\n  const renderSeparator = () => {\n    const useGenericSeparator = showTimestamp && showBotIdentifier;\n    const useAISeparator = showAIIdentifier || showAIProcessingAnswer;\n\n    if (isFromAiAutomation()) {\n      return (\n        <div className={styles.separator}>\n          <BotSparkle />\n        </div>\n      );\n    }\n\n    if (!useGenericSeparator && !useAISeparator) return null;\n\n    return (\n      <div className={styles.separator}>\n        {useAISeparator ? <BotSparkle /> : '•'}\n      </div>\n    );\n  };\n\n  const renderIdentifier = () => {\n    if (isFromAiAutomation()) {\n      return (\n        <div className={styles.identifier}>{translations.fromAiAutomation}</div>\n      );\n    }\n\n    if (!showBotIdentifier && !showAIIdentifier) return null;\n    return (\n      <div className={styles.identifier}>\n        {showAIIdentifier ? translations.aiAnswer : translations.messageBot}\n      </div>\n    );\n  };\n\n  const renderMessageMeta = () => {\n    if (\n      !showTimestamp &&\n      !showBotIdentifier &&\n      !showAIIdentifier &&\n      !showAIProcessingAnswer &&\n      !isFromAiAutomation()\n    ) {\n      return null;\n    }\n    return (\n      <div className={styles.messageMeta}>\n        {showTimestamp && renderTimestamp()}\n        {renderSeparator()}\n        {renderIdentifier()}\n        {renderAITypingMessage()}\n      </div>\n    );\n  };\n\n  const renderInboundBubble = () => {\n    return (\n      <div className={classNames(styles.inbound, className)}>\n        <div className={styles.avatarAndBubble}>\n          {showAvatar && (\n            <Avatar\n              className={styles.avatarWrapper}\n              size={30}\n              avatarUrl={avatarUrl}\n              userDisplayName={userDisplayName}\n            />\n          )}\n          <div\n            className={classNames(\n              styles.chatBubble,\n              {\n                [styles.showAvatar]: showAvatar,\n              },\n              innerClassName,\n            )}\n            data-kt=\"inboundMessageBubbleText\"\n          >\n            {children}\n          </div>\n        </div>\n        {renderMessageMeta()}\n      </div>\n    );\n  };\n\n  const renderOutboundBubble = () => {\n    return (\n      <div className={classNames(styles.outbound, className)}>\n        <div\n          className={classNames(styles.chatBubble, innerClassName)}\n          data-kt=\"outboundMessageBubbleText\"\n        >\n          {children}\n        </div>\n        {renderMessageMeta()}\n        {showOptimisticError && renderOptimisticError()}\n      </div>\n    );\n  };\n\n  return isOutbound ? renderOutboundBubble() : renderInboundBubble();\n};\nexport default ChatBubble;\n","import ChatBubble from './ChatBubble';\n\nexport default ChatBubble;\n","import MediaPreviewModal from './MediaPreviewModal';\n\nexport default MediaPreviewModal;\n","export default {\n  attachmentPreviewLabel: 'sent attachment preview',\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./mediaWithPreview.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./mediaWithPreview.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, Fragment } from 'preact';\nimport { useRef, useState } from 'preact/hooks';\nimport { memo } from 'preact/compat';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport { useTranslations } from 'i18n/hooks';\nimport MediaPreviewModal from './MediaPreviewModal';\nimport messages from './messages';\n\nimport styles from './mediaWithPreview.scss';\nimport { MediaContent } from './types';\n\ninterface MediaWithPreviewProps {\n  className?: string;\n  src: string;\n  type: MediaContent;\n}\n\nconst MediaWithPreview = ({ className, src, type }: MediaWithPreviewProps) => {\n  const [showPreviewModal, togglePreviewModal] = useState(false);\n  const translations = useTranslations(messages);\n  const mediaContainerRef = useRef<HTMLButtonElement>(null);\n\n  const openPreview = () => {\n    togglePreviewModal(true);\n  };\n\n  const closePreview = () => {\n    mediaContainerRef.current?.focus();\n    togglePreviewModal(false);\n  };\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n      openPreview();\n    }\n  };\n\n  const renderVideoPoster = () => {\n    if (type !== 'video') return null;\n\n    return (\n      <video className={styles.videoPoster} src={`${src}#t=0.001`} muted />\n    );\n  };\n\n  return (\n    <Fragment>\n      <button\n        ref={mediaContainerRef}\n        className={className}\n        onClick={openPreview}\n        onKeyPress={handleKeyPress}\n        style={\n          type === 'image' ? { backgroundImage: `url(${src})` } : undefined\n        }\n        aria-label={translations.attachmentPreviewLabel}\n      >\n        {renderVideoPoster()}\n      </button>\n      <MediaPreviewModal\n        show={showPreviewModal}\n        src={src}\n        onHide={closePreview}\n        type={type}\n      />\n    </Fragment>\n  );\n};\n\nexport default memo(MediaWithPreview);\n","import MediaWithPreview from './MediaWithPreview';\n\nexport default MediaWithPreview;\n","\n      import API from \"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./satisfactionMessageScale.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./satisfactionMessageScale.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export const SCALE_MAP = {\n  5: [1, 2, 3, 4, 5],\n  3: [1, 3, 5],\n  2: [1, 5],\n};\n","export default {\n  satisfactionRatingOption: 'Satisfaction rating {{option}}',\n  highestSatisfactionRatingOption: 'Highest satisfaction rating {{option}}',\n  lowestSatisfactionRatingOption: 'Lowest satisfaction rating {{option}}',\n  satisfactionRatingOptionDisabled: 'Satisfaction rating {{option}} Disabled',\n  highestSatisfactionRatingOptionDisabled:\n    'Highest satisfaction rating {{option}} Disabled',\n  lowestSatisfactionRatingOptionDisabled:\n    'Lowest satisfaction rating {{option}} Disabled',\n};\n","import SatisfactionMessageScale from './SatisfactionMessageScale';\n\nexport default SatisfactionMessageScale;\n","import { h, Fragment } from 'preact';\nimport { SatisfactionFormScale } from 'core_main/api/satisfaction/types';\nimport { isEnterKey } from 'widget_main/globals/keyboardEvents';\nimport Text from 'widget_main/components/Text';\nimport { Localizer } from 'preact-i18n';\nimport styles from './satisfactionMessageScale.scss';\nimport { SCALE_MAP } from './constants';\nimport messages from './messages';\n\ninterface SatisfactionMessageScaleProps {\n  scale?: SatisfactionFormScale;\n  rating?: number;\n  onClick: (number) => void;\n  disabled?: boolean;\n}\n\nconst SatisfactionMessageScale = ({\n  scale,\n  rating,\n  onClick,\n  disabled,\n}: SatisfactionMessageScaleProps) => {\n  const options = scale?.options;\n  const labelLow = scale?.labelLow;\n  const labelHigh = scale?.labelHigh;\n  const type = scale?.type;\n\n  const disabledString = disabled ? 'Disabled' : '';\n  const scaleOptionsAriaLabels = {\n    satisfactionRatingOption: `satisfactionRatingOption${disabledString}`,\n    highestSatisfactionRatingOption: `highestSatisfactionRatingOption${disabledString}`,\n    lowestSatisfactionRatingOption: `lowestSatisfactionRatingOption${disabledString}`,\n  };\n\n  const handleSetRatingKeyPress = (e, rating) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n      onClick(rating);\n    }\n  };\n\n  return (\n    <Fragment>\n      <div className={styles.optionContainer}>\n        {options &&\n          SCALE_MAP[options].map((option, optionIndex) => {\n            const style = rating === option ? 'color' : 'grey';\n            const imgUrl = `https://cdn.kustomerapp.com/satisfaction/${type}_${option}_${style}.svg`;\n            const isLow = optionIndex === 0;\n            const isHigh = optionIndex === SCALE_MAP[options].length - 1;\n            const isSet = option === rating;\n\n            let ariaLabel = Text({\n              id: scaleOptionsAriaLabels.satisfactionRatingOption,\n              fields: {\n                option,\n              },\n              defaultMessage:\n                messages[scaleOptionsAriaLabels.satisfactionRatingOption],\n            });\n\n            if (isHigh) {\n              ariaLabel = Text({\n                id: scaleOptionsAriaLabels.highestSatisfactionRatingOption,\n                fields: {\n                  option,\n                },\n                defaultMessage:\n                  messages[\n                    scaleOptionsAriaLabels.highestSatisfactionRatingOption\n                  ],\n              });\n            } else if (isLow) {\n              ariaLabel = Text({\n                id: scaleOptionsAriaLabels.lowestSatisfactionRatingOption,\n                fields: {\n                  option,\n                },\n                defaultMessage:\n                  messages[\n                    scaleOptionsAriaLabels.lowestSatisfactionRatingOption\n                  ],\n              });\n            }\n\n            return (\n              <Localizer key={option}>\n                <div\n                  className={styles.ratingOptionContainer}\n                  tabIndex={0}\n                  role=\"button\"\n                  onKeyPress={\n                    !isSet\n                      ? (e) => handleSetRatingKeyPress(e, option)\n                      : undefined\n                  }\n                  onClick={!isSet ? () => onClick(option) : undefined}\n                  style={{ backgroundImage: `url(${imgUrl})` }}\n                  aria-label={ariaLabel}\n                />\n              </Localizer>\n            );\n          })}\n      </div>\n      <div className={styles.labels}>\n        <div className={styles.container}>\n          <p className={styles.label}>{labelLow}</p>\n        </div>\n        <div className={styles.container}>\n          <p className={styles.label}>{labelHigh}</p>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default SatisfactionMessageScale;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./textArea.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./textArea.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, RefObject } from 'preact';\nimport { forwardRef } from 'preact/compat';\n\nimport classNames from 'classnames';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport { useTouchMove } from 'widget_main/globals/hooks';\nimport styles from './textArea.scss';\n\ninterface TextAreaProps {\n  ariaLabel: string;\n  onChange: (e: Event) => unknown;\n  onClick?: (e: Event) => unknown;\n  autoFocus?: boolean;\n  maxLength?: number;\n  id?: string;\n  rows?: number;\n  value?: string;\n  disabled?: boolean;\n  onEnter?: (e: KeyboardEvent) => unknown;\n  className?: string;\n  placeholder?: string;\n}\n\nconst TextArea = forwardRef(\n  (\n    {\n      ariaLabel,\n      onChange,\n      onClick,\n      autoFocus = true,\n      onEnter,\n      id,\n      className,\n      placeholder,\n      value,\n      disabled,\n      maxLength = 10240,\n      rows,\n    }: TextAreaProps,\n    ref?: RefObject<HTMLTextAreaElement>,\n  ) => {\n    useTouchMove(ref?.current);\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (keyboardEventHelpers.isEnterKey(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        if (onEnter) {\n          onEnter(e);\n        }\n      }\n    };\n\n    return (\n      <textarea\n        id={id}\n        ref={ref}\n        tabIndex={0}\n        aria-label={ariaLabel}\n        class={classNames(styles.textArea, className)}\n        placeholder={placeholder}\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus={autoFocus}\n        rows={rows}\n        onChange={onChange}\n        onClick={onClick}\n        onKeyPress={handleKeyPress}\n        value={value}\n        disabled={disabled}\n        maxLength={maxLength}\n      />\n    );\n  },\n);\n\nTextArea.displayName = 'TextArea';\n\nexport default TextArea;\n","import TextArea from './TextArea';\n\nexport default TextArea;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./checkbox.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./checkbox.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, JSX } from 'preact';\nimport { memo } from 'preact/compat';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport styles from './checkbox.scss';\n\ninterface CheckboxProps {\n  name: string;\n  ariaLabel?: string | JSX.Element;\n  onClick: (checked: boolean, value?: string) => unknown;\n  checked?: boolean;\n  value?: string;\n  id?: string;\n  label?: string | JSX.Element;\n  className?: string;\n  disabled?: boolean;\n}\n\nconst Checkbox = ({\n  id,\n  name,\n  ariaLabel,\n  onClick,\n  checked,\n  value,\n  label,\n  className,\n  disabled,\n}: CheckboxProps) => {\n  const handleClick = (e) => {\n    e.stopPropagation();\n    onClick(!checked, value);\n  };\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      handleClick(e);\n    }\n  };\n\n  return (\n    <div\n      role=\"checkbox\"\n      tabIndex={0}\n      className={styles.container}\n      onClick={handleClick}\n      onKeyPress={handleKeyPress}\n      aria-checked={checked}\n    >\n      <input\n        type=\"checkbox\"\n        id={id || name}\n        name={name}\n        aria-label={ariaLabel || name}\n        class={className}\n        checked={checked}\n        disabled={disabled}\n        onClick={handleClick}\n      />\n      <label className={styles.label}>{label}</label>\n    </div>\n  );\n};\n\nexport default memo(Checkbox);\n","import Checkbox from './Checkbox';\n\nexport default Checkbox;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./radio.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./radio.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, JSX } from 'preact';\nimport { memo } from 'preact/compat';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport styles from './radio.scss';\n\ninterface RadioProps {\n  name: string;\n  ariaLabel?: string | JSX.Element;\n  onClick: () => unknown;\n  checked?: boolean;\n  id?: string;\n  label?: string | JSX.Element;\n  className?: string;\n  disabled?: boolean;\n}\n\nconst Radio = ({\n  id,\n  name,\n  ariaLabel,\n  onClick,\n  checked,\n  label,\n  className,\n  disabled,\n}: RadioProps) => {\n  const handleClick = (e) => {\n    e.stopPropagation();\n    onClick();\n  };\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      onClick();\n    }\n  };\n\n  return (\n    <div\n      role=\"radio\"\n      tabIndex={0}\n      className={styles.container}\n      onClick={handleClick}\n      onKeyPress={handleKeyPress}\n      aria-checked={checked}\n    >\n      <input\n        type=\"radio\"\n        id={id || name}\n        name={name}\n        aria-label={ariaLabel || name}\n        class={className}\n        checked={checked}\n        disabled={disabled}\n        onClick={handleClick}\n      />\n      <label class={styles.label}>{label}</label>\n    </div>\n  );\n};\n\nexport default memo(Radio);\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"25\",\"height\":\"25\",\"viewBox\":\"0 0 25 25\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"d\":\"M8.5 13.3206L10.9615 15.9873L16.5 9.9873M21.5 12.9873C21.5 17.9579 17.4706 21.9873 12.5 21.9873C7.52944 21.9873 3.5 17.9579 3.5 12.9873C3.5 8.01674 7.52944 3.9873 12.5 3.9873C17.4706 3.9873 21.5 8.01674 21.5 12.9873Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n      import API from \"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./satisfactionMessageModal.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./satisfactionMessageModal.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import {\n  SatisfactionCallbackResponse,\n  SatisfactionFormAnswer,\n} from 'core_main/api/satisfaction/types';\n\nexport const getInitialAnswersFromSatisfaction = (\n  satisfaction: SatisfactionCallbackResponse,\n) => {\n  if (satisfaction.response?.answers?.length) {\n    return satisfaction.response?.answers.map((answer) => ({\n      ...answer,\n      selections: answer.selections?.slice(),\n      selectionsRaw: answer.selectionsRaw?.slice(),\n    }));\n  }\n\n  const questions = satisfaction.form?.questions || [];\n\n  return questions.map((question) => {\n    return {\n      id: question.id,\n      prompt: question.prompt,\n      required: question.isRequired,\n      displayType: question.displayType,\n      answer: '',\n      answerRaw: '',\n      selections: [] as string[],\n      selectionsRaw: [] as string[],\n    };\n  }) as SatisfactionFormAnswer[];\n};\n","import { h, Component } from 'preact';\nimport produce, { Draft } from 'immer';\nimport globalMessages from 'widget_main/globals/messages';\nimport Modal from 'widget_main/components/ui/Modal';\nimport TextArea from 'widget_main/components/ui/TextArea';\nimport Checkbox from 'widget_main/components/ui/Checkbox';\nimport Radio from 'widget_main/components/ui/Radio/Radio';\nimport Button from 'widget_main/components/ui/Button';\nimport Text from 'widget_main/components/Text';\nimport CheckCircleIcon from 'widget_main/globals/assets/checkCircle.svg';\n\nimport {\n  SatisfactionCallbackResponse,\n  SatisfactionFormAnswer,\n} from 'core_main/api/satisfaction/types';\nimport { SubmitSatisfactionFormParameters } from 'core_main/sdk/submit_satisfaction_form/types';\nimport styles from './satisfactionMessageModal.scss';\nimport { MAX_ANSWER_LENGTH } from './constants';\nimport * as helpers from './helpers';\nimport messages from './messages';\n\ninterface SatisfactionMessageModalProps {\n  show: boolean;\n  onSubmit: (options: Partial<SubmitSatisfactionFormParameters>) => void;\n  onHide: () => void;\n  satisfaction: SatisfactionCallbackResponse;\n}\n\ninterface SatisfactionMessageModalState {\n  showSuccess: boolean;\n  answers: SatisfactionFormAnswer[];\n}\n\nclass SatisfactionMessageModal extends Component<\n  SatisfactionMessageModalProps,\n  SatisfactionMessageModalState\n> {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      showSuccess: false,\n      answers: helpers.getInitialAnswersFromSatisfaction(props.satisfaction),\n    };\n  }\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.satisfaction !== this.props.satisfaction) {\n      // eslint-disable-next-line react/no-did-update-set-state\n      this.setState(\n        produce((draftState: Draft<SatisfactionMessageModalState>) => {\n          draftState.answers = helpers.getInitialAnswersFromSatisfaction(\n            this.props.satisfaction,\n          );\n        }),\n      );\n    }\n  }\n\n  isSubmitDisabled() {\n    const { answers } = this.state;\n\n    const unAnswered = answers\n      .filter((answer) => answer.required)\n      .find((answer) => {\n        return !answer.answer && !answer.selections?.length;\n      });\n\n    return !!unAnswered;\n  }\n\n  toggleSuccess = (bool) => {\n    this.setState({\n      showSuccess: bool,\n    });\n  };\n\n  handleChangeTextAnswer = (idx) => (e) => {\n    this.setState(\n      produce((draftState: Draft<SatisfactionMessageModalState>) => {\n        draftState.answers[idx].answer = e.target.value;\n      }),\n    );\n  };\n\n  handleChangeRadioAnswer = (idx, selection, selectionRaw) => {\n    this.setState(\n      produce((draftState: Draft<SatisfactionMessageModalState>) => {\n        draftState.answers[idx].answer = selection;\n        draftState.answers[idx].answerRaw = selectionRaw;\n      }),\n    );\n  };\n\n  handleChangeCheckboxAnswer = (idx, checked, value, valueRaw) => {\n    this.setState(\n      produce((draftState: Draft<SatisfactionMessageModalState>) => {\n        const { selections, selectionsRaw } = draftState.answers[idx];\n        if (checked) {\n          selections?.push(value);\n          selectionsRaw?.push(valueRaw);\n        } else {\n          draftState.answers[idx].selections = selections?.filter(\n            (selection) => selection !== value,\n          );\n          draftState.answers[idx].selectionsRaw = selectionsRaw?.filter(\n            (selection) => selection !== valueRaw,\n          );\n        }\n      }),\n    );\n  };\n\n  handleSubmit = () => {\n    const { satisfaction, onSubmit } = this.props;\n    const { answers } = this.state;\n\n    onSubmit({\n      rating: satisfaction.response?.rating,\n      answers,\n    });\n    this.toggleSuccess(true);\n  };\n\n  renderRequired = () => {\n    return <sup className={styles.requiredTag}>*</sup>;\n  };\n\n  renderSuccess() {\n    const { onHide } = this.props;\n    return (\n      <div className={styles.successScreen}>\n        <CheckCircleIcon class={styles.checkCircleIcon} />\n        <p>\n          <Text\n            id=\"satisfactionMessageModalFeedback\"\n            defaultMessage={messages.satisfactionMessageModalFeedback}\n          />\n        </p>\n        <Button className={styles.submitButton} onClick={onHide}>\n          <Text id=\"done\" defaultMessage={globalMessages.done} />\n        </Button>\n      </div>\n    );\n  }\n\n  renderForm() {\n    const { satisfaction } = this.props;\n    const { answers } = this.state;\n\n    const disableForm = satisfaction?.lockedAt\n      ? new Date().getTime() >= new Date(satisfaction.lockedAt).getTime()\n      : false;\n\n    return (\n      <form className={styles.followupQuestionsContainer}>\n        {satisfaction.form?.questions?.map((question, idx) => {\n          return (\n            <div key={question.id} className={styles.questionContainer}>\n              <p className={styles.questionLabel}>\n                {question.prompt}\n                {question.isRequired && this.renderRequired()}\n              </p>\n              {question.displayType === 'radio' && (\n                <div>\n                  {question.enumeration.map((opt, i) => {\n                    const selectionRaw = question.enumerationRaw\n                      ? question.enumerationRaw[i]\n                      : question.enumeration[i];\n                    return (\n                      <Radio\n                        disabled={disableForm}\n                        name={question.prompt}\n                        id={opt + i}\n                        ariaLabel={opt}\n                        label={opt}\n                        key={opt + i}\n                        checked={answers?.[idx]?.answer === opt}\n                        onClick={() => {\n                          return this.handleChangeRadioAnswer(\n                            idx,\n                            opt,\n                            selectionRaw,\n                          );\n                        }}\n                      />\n                    );\n                  })}\n                </div>\n              )}\n              {question.displayType === 'checkbox' && (\n                <div>\n                  {question.enumeration.map((opt, i) => {\n                    const selectionRaw = question.enumerationRaw\n                      ? question.enumerationRaw[i]\n                      : question.enumeration[i];\n                    return (\n                      <Checkbox\n                        disabled={disableForm}\n                        name={opt}\n                        label={opt}\n                        key={opt}\n                        checked={answers?.[idx]?.selections?.includes(opt)}\n                        value={opt}\n                        onClick={(checked) => {\n                          return this.handleChangeCheckboxAnswer(\n                            idx,\n                            checked,\n                            opt,\n                            selectionRaw,\n                          );\n                        }}\n                      />\n                    );\n                  })}\n                </div>\n              )}\n              {question.displayType === 'text' && (\n                <TextArea\n                  disabled={disableForm}\n                  className={styles.textArea}\n                  ariaLabel={`Type ${question.prompt}`}\n                  onChange={(e) => {\n                    return this.handleChangeTextAnswer(idx)(e);\n                  }}\n                  value={answers?.[idx]?.answer}\n                  maxLength={MAX_ANSWER_LENGTH}\n                />\n              )}\n            </div>\n          );\n        })}\n\n        {!disableForm && (\n          <Button\n            className={styles.submitButton}\n            disabled={this.isSubmitDisabled()}\n            onClick={this.handleSubmit}\n          >\n            <Text\n              id=\"submitSatisfactionSubmitButton\"\n              defaultMessage={messages.submitSatisfactionSubmitButton}\n            />\n          </Button>\n        )}\n      </form>\n    );\n  }\n\n  render() {\n    const { show, onHide } = this.props;\n    const { showSuccess } = this.state;\n    return (\n      <Modal\n        className={styles.modal}\n        bodyClassName={styles.modalBody}\n        show={show}\n        onHide={onHide}\n        ariaLabel={messages.satisfactionModalAriaLabel}\n        closeButton\n      >\n        {showSuccess ? this.renderSuccess() : this.renderForm()}\n      </Modal>\n    );\n  }\n}\n\nexport default SatisfactionMessageModal;\n","export default {\n  satisfactionModalAriaLabel: 'Satisfaction Form Modal',\n  satisfactionMessageModalFeedback: 'Thanks for your feedback!',\n  submitSatisfactionSubmitButton: 'Submit',\n};\n","export const MAX_ANSWER_LENGTH = 1024;\n","import SatisfactionMessageModal from './SatisfactionMessageModal';\n\nexport default SatisfactionMessageModal;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./satisfactionMessage.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./satisfactionMessage.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  changeFeedbackButtonAriaLabel: 'Change feedback button',\n  changeFeedbackButton: 'Change Feedback',\n  viewFeedback: 'View Feedback',\n};\n","import { h } from 'preact';\nimport { SatisfactionCallbackResponse } from 'core_main/api/satisfaction/types';\nimport { useState, useContext } from 'preact/hooks';\nimport { getKustomerCore } from 'widget_main/globals/helpers';\n\nimport Button from 'widget_main/components/ui/Button';\nimport SatisfactionMessageScale from 'widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageScale';\nimport SatisfactionMessageModal from 'widget_main/screens/MessageThread/SatisfactionMessage/SatisfactionMessageModal';\nimport { ConversationsContext } from 'widget_main/store';\nimport { useTranslations } from 'i18n/hooks';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport { SubmitSatisfactionFormParameters } from 'core_main/sdk/submit_satisfaction_form/types';\nimport styles from './satisfactionMessage.scss';\nimport messages from './messages';\n\nconst kustomerCore = getKustomerCore();\ninterface SatisfactionMessageProps {\n  satisfaction: SatisfactionCallbackResponse;\n}\n\nconst SatisfactionMessage = ({ satisfaction }: SatisfactionMessageProps) => {\n  const conversations = useContext(ConversationsContext);\n\n  const translations = useTranslations(messages);\n\n  const { form, response, lockedAt } = satisfaction;\n\n  const disableFeedback = lockedAt\n    ? new Date().getTime() >= new Date(lockedAt).getTime()\n    : false;\n\n  const ratingPrompt = form?.ratingPrompt;\n  const questions = form?.questions || [];\n  const introduction = form?.introduction;\n\n  const rating = response?.rating;\n\n  const [showModal, setShowModal] = useState(false);\n\n  const openModal = () => {\n    setShowModal(true);\n  };\n\n  const closeModal = () => {\n    setShowModal(false);\n  };\n\n  const submit = (\n    options: Partial<SubmitSatisfactionFormParameters>,\n    callback?: (response: SatisfactionCallbackResponse) => void,\n  ) => {\n    kustomerCore.submitSatisfactionForm(\n      {\n        satisfactionId: satisfaction.satisfactionId,\n        submittedAt: new Date().toISOString(),\n        lang: getMappedLanguage(),\n        ...options,\n      },\n      (response) => {\n        if (satisfaction?.conversationId) {\n          conversations.updateConversation(satisfaction.conversationId, {\n            satisfaction: response,\n          });\n\n          if (typeof callback === 'function') callback(response);\n        }\n      },\n    );\n  };\n\n  const submitRating = (rating) => {\n    if (disableFeedback) {\n      return;\n    }\n    submit({ rating }, (response) => {\n      if (response.form?.questions?.length) {\n        openModal();\n      }\n    });\n  };\n\n  const renderFeedbackButton = () => {\n    if (!rating || !questions?.length) return null;\n\n    let feedbackButtonText = translations.changeFeedbackButton;\n    if (disableFeedback) {\n      feedbackButtonText = translations.viewFeedback;\n    }\n\n    return (\n      <Button\n        variant=\"link\"\n        block\n        className={styles.feedbackButton}\n        ariaLabel={translations.changeFeedbackButtonAriaLabel}\n        onClick={openModal}\n      >\n        <div className={styles.changeFeedback}>{feedbackButtonText}</div>\n      </Button>\n    );\n  };\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.satisfactionContainer}>\n        <p className={styles.introduction}>{introduction}</p>\n        <p className={styles.ratingPrompt}>{ratingPrompt}</p>\n        <SatisfactionMessageScale\n          rating={satisfaction.response?.rating}\n          scale={satisfaction.form?.scale}\n          onClick={submitRating}\n          disabled={disableFeedback}\n        />\n      </div>\n      {renderFeedbackButton()}\n      {showModal && (\n        <SatisfactionMessageModal\n          show={showModal}\n          onSubmit={submit}\n          onHide={closeModal}\n          satisfaction={satisfaction}\n        />\n      )}\n    </div>\n  );\n};\n\nSatisfactionMessage.defaultProps = {\n  satisfaction: undefined,\n};\nexport default SatisfactionMessage;\n","import SatisfactionMessage from './SatisfactionMessage';\n\nexport default SatisfactionMessage;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./chatMessage.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./chatMessage.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n    \", h('path', {\"fill\":\"currentColor\",\"d\":\"M13,9H18.5L13,3.5V9M6,2H14L20,8V20A2,2 0 0,1 18,22H6C4.89,22 4,21.1 4,20V4C4,2.89 4.89,2 6,2M15,18V16H6V18H15M18,14V12H6V14H18Z\"}, []), \"\\n\"]);\n};\n\n        ","export default {\n  kbInlineRelatedArticle: 'Related article:',\n  kbInlineRelatedArticles: 'Related articles:',\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./templateMessage.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./templateMessage.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, Fragment } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { useTranslations } from 'i18n/hooks';\nimport FileDocument from 'widget_main/globals/assets/fileDocument.svg';\nimport ChevronRight from 'widget_main/globals/assets/chevronRight.svg';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport { KB_DEFLECT_ARTICLE_PATH } from 'widget_main/globals/constants';\nimport {\n  NavigationContext,\n  KBContext,\n  MessagesContext,\n  SettingsContext,\n} from 'widget_main/store';\nimport { ArticleCallbackResponse } from 'core_main/sdk/get_articles/types';\nimport {\n  getKustomerCore,\n  getMessageAgentInformation,\n  truncate,\n} from 'widget_main/globals/helpers';\nimport Markdown from 'widget_main/components/Markdown/Markdown';\nimport { DeflectionArticle } from 'core_main/sdk/send_message/types';\nimport { sendKbDeflectionClick } from 'widget_main/app/helpers/assistant';\nimport { Message } from '../types';\nimport ChatBubble from '../ChatBubble';\n\nimport defaultMessages from './messages';\nimport styles from './templateMessage.scss';\n\nconst kustomerCore = getKustomerCore();\n\ninterface TemplateMessageProps {\n  showAvatar?: boolean;\n  showBotIdentifier?: boolean;\n  showAIIdentifier?: boolean;\n  showTimestamp?: boolean;\n  message?: Message;\n  chatBubbleInnerClassName?: string;\n  truncateLength?: number;\n}\n\nconst TemplateMessage = ({\n  message,\n  showAvatar,\n  showBotIdentifier,\n  showAIIdentifier,\n  showTimestamp,\n  chatBubbleInnerClassName,\n  truncateLength,\n}: TemplateMessageProps) => {\n  const navigation = useContext(NavigationContext);\n  const messages = useContext(MessagesContext);\n  const settings = useContext(SettingsContext);\n  const kb = useContext(KBContext);\n\n  const translations = useTranslations(defaultMessages);\n\n  const navigateToArticleView = (articleId: string) => {\n    messages.markArticleVisited(message?.messageId, articleId);\n    kb.updateCurrentArticleId(articleId);\n    navigation.updatePage(KB_DEFLECT_ARTICLE_PATH);\n  };\n\n  const handleClickArticle = (article: ArticleCallbackResponse) => {\n    const { articleId, knowledgeBaseId } = article;\n\n    const deflectionArticles =\n      message?.meta?.articles?.map((a) => {\n        const deflectionObject: DeflectionArticle = {\n          id: a.articleId,\n          version: a.version,\n          visited: a.articleId === articleId ? 1 : 0,\n          lang: a.lang,\n          title: a.title,\n          url: a.kbUrl || '',\n        };\n        return deflectionObject;\n      }) || [];\n\n    if (deflectionArticles.length === 0) return;\n\n    sendKbDeflectionClick(message?.conversationId || '', deflectionArticles);\n\n    if (kb.articles?.[articleId]) {\n      navigateToArticleView(articleId);\n      return;\n    }\n\n    kustomerCore.getArticleById(\n      {\n        articleId,\n        // if we're fetching an article for the first time on click, fetch the article with the ARTICLE'S\n        //  language, not the user's language, which is important if the user is using chat in another\n        //  language but the org's KB doesn't support that language\n        lang: article.lang,\n        knowledgeBaseId,\n      },\n      (response) => {\n        const articleToAppend = response;\n\n        if (articleToAppend) {\n          // when a deflection article does not live on the default knowledgeBase domain (due to CA setup searching a different brand),\n          //    we need to make sure the kbUrl is set after the article is fetched (this value is not returned from the API when looking\n          //    up an article)\n          //    Jira: https://kustomer.atlassian.net/browse/KDEV-54978\n          if (\n            article.kbUrl &&\n            article.kbUrl !== kb.config?.knowledgeBaseDomain\n          ) {\n            articleToAppend.kbUrl = article.kbUrl;\n          }\n\n          kb.updateArticles([articleToAppend]);\n          navigateToArticleView(articleId);\n        }\n      },\n    );\n  };\n\n  const handleKeyPress = (\n    e: KeyboardEvent,\n    article: ArticleCallbackResponse,\n  ) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      handleClickArticle(article);\n    }\n  };\n\n  const renderMarkdown = (markdown?: string) => {\n    if (!markdown) {\n      return null;\n    }\n\n    const truncated = truncateLength\n      ? truncate(markdown, truncateLength)\n      : markdown;\n\n    return <Markdown markdown={truncated} options={{ breaks: true }} />;\n  };\n\n  const renderInlineDeflectionArticles = () => {\n    const articles = message?.meta?.articles;\n    if (!articles?.length) {\n      return null;\n    }\n\n    return (\n      <div class={styles.kbInlineArticleHolder}>\n        <div class={styles.related}>\n          {articles.length > 1\n            ? translations.kbInlineRelatedArticles\n            : translations.kbInlineRelatedArticle}\n        </div>\n        {articles.map((article) => (\n          <div\n            key={article.articleId}\n            class={styles.button}\n            role=\"button\"\n            tabIndex={0}\n            onKeyPress={(e) => handleKeyPress(e, article)}\n            onClick={() => handleClickArticle(article)}\n          >\n            <div class={styles.icon}>\n              <FileDocument width={14} height={14} />\n            </div>\n            <div class={styles.details}>{article.title}</div>\n          </div>\n        ))}\n      </div>\n    );\n  };\n\n  const renderStandardMessage = () => {\n    const agentData = getMessageAgentInformation(\n      message?.sentBy,\n      settings,\n      navigation.initAssistantPayload,\n    );\n    return (\n      <ChatBubble\n        avatarUrl={agentData.avatarUrl}\n        className={classNames({\n          [styles.isLastInStreak]: showAvatar,\n        })}\n        innerClassName={classNames(chatBubbleInnerClassName)}\n        showAvatar={showAvatar}\n        showBotIdentifier={showBotIdentifier}\n        showAIIdentifier={showAIIdentifier}\n        showTimestamp={showTimestamp}\n        timestamp={message?.createdAt}\n        userDisplayName={agentData.displayName}\n      >\n        {renderMarkdown(message?.meta?.template?.body)}\n        {renderInlineDeflectionArticles()}\n      </ChatBubble>\n    );\n  };\n\n  const renderDeflectionMessage = () => {\n    const agentData = getMessageAgentInformation(\n      message?.sentBy,\n      settings,\n      navigation.initAssistantPayload,\n    );\n    return (\n      <Fragment>\n        <ChatBubble innerClassName={classNames(chatBubbleInnerClassName)}>\n          {renderMarkdown(message?.body)}\n        </ChatBubble>\n        <ChatBubble\n          innerClassName={classNames(\n            styles.kbArticlesChatBubble,\n            chatBubbleInnerClassName,\n          )}\n        >\n          {message?.meta?.articles?.map((article, index) => {\n            return (\n              <div\n                key={article.articleId}\n                className={styles.kbArticle}\n                role=\"button\"\n                tabIndex={0}\n                onKeyPress={(e) => handleKeyPress(e, article)}\n                onClick={() => handleClickArticle(article)}\n                data-kt={`deflectionArticle${index}`}\n              >\n                <div className={styles.articleIcon}>\n                  <FileDocument width={14} height={14} />\n                </div>\n                <div className={styles.articleDetails}>\n                  <div className={styles.articleTitle} data-kt=\"kbArticleTitle\">\n                    {article.title}\n                  </div>\n                </div>\n                <ChevronRight className={styles.chevronRight} />\n              </div>\n            );\n          })}\n        </ChatBubble>\n        <ChatBubble\n          className={classNames({\n            [styles.isLastInStreak]: showAvatar,\n          })}\n          innerClassName={classNames(chatBubbleInnerClassName)}\n          showAvatar={showAvatar}\n          showBotIdentifier={showBotIdentifier}\n          avatarUrl={agentData.avatarUrl}\n          showTimestamp={showTimestamp}\n          userDisplayName={agentData.displayName}\n          timestamp={message?.createdAt}\n        >\n          {renderMarkdown(message?.meta?.template?.followupText)}\n        </ChatBubble>\n      </Fragment>\n    );\n  };\n\n  const templateType = message?.meta?.template?.templateType;\n\n  switch (templateType) {\n    case 'deflection':\n      return renderDeflectionMessage();\n    case 'text':\n    case 'quick_replies':\n    case 'mll':\n    case 'answer_button_feedback':\n    default:\n      return renderStandardMessage();\n  }\n};\nexport default TemplateMessage;\n","import TemplateMessage from './TemplateMessage';\n\nexport default TemplateMessage;\n","import { h, Fragment } from 'preact';\nimport classNames from 'classnames';\nimport { MessageAttachmentCallbackResponse } from 'core_main/sdk/send_message/types';\nimport PdfIcon from 'widget_main/globals/assets/pdfFile.svg';\nimport FilePresentIcon from 'widget_main/globals/assets/filePresent.svg';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport globalMessages from 'widget_main/globals/messages';\n\nimport ChatBubble from 'widget_main/components/ChatMessage/ChatBubble';\nimport MediaWithPreview from 'widget_main/components/MediaWithPreview';\nimport { OptimisticMessage } from 'widget_main/store/types';\nimport { MediaContent } from 'widget_main/components/MediaWithPreview/types';\nimport Markdown from 'widget_main/components/Markdown/Markdown';\nimport { useContext } from 'preact/hooks';\nimport { NavigationContext, SettingsContext } from 'widget_main/store';\nimport { getMessageAgentInformation } from 'widget_main/globals/helpers';\nimport Text from 'widget_main/components/Text';\nimport { ChatMessageProps } from './types';\n\nimport SatisfactionMessage from '../../screens/MessageThread/SatisfactionMessage';\nimport styles from './chatMessage.scss';\nimport TemplateMessage from './TemplateMessage';\n\nimport messages from './messages';\n\nconst ChatMessage = ({\n  chatBubbleInnerClassName,\n  handleRetrySend,\n  message,\n  satisfaction,\n  showAvatar,\n  showBotIdentifier,\n  showAIIdentifier,\n  showNewMessageDivider,\n  showTimestamp,\n  userTyping,\n}: ChatMessageProps) => {\n  const chatSettings = useContext(SettingsContext);\n  const navigation = useContext(NavigationContext);\n  const handleClick = () => {\n    if (handleRetrySend) {\n      handleRetrySend(message as OptimisticMessage);\n    }\n  };\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      handleClick();\n    }\n  };\n\n  const renderMediaPreview = (\n    attachment: MessageAttachmentCallbackResponse,\n    type: MediaContent,\n  ) => {\n    if (attachment.url) {\n      return (\n        <MediaWithPreview\n          className={styles.mediaPreview}\n          src={attachment.url}\n          type={type}\n        />\n      );\n    }\n    return null;\n  };\n\n  const renderFilePreview = (attachment: MessageAttachmentCallbackResponse) => {\n    const { contentType } = attachment;\n    const isPDF = contentType?.includes('pdf');\n    const isEnabled = message?.createdAt && !message?.showError;\n    const icon = isPDF ? (\n      <PdfIcon class={styles.pdfIcon} />\n    ) : (\n      <FilePresentIcon className={styles.pdfIcon} />\n    );\n\n    return (\n      <div class={styles.filePreview}>\n        {icon}\n        <a\n          href={attachment.url}\n          target=\"_blank\"\n          rel=\"noreferrer noopener\"\n          onClick={(e) => !isEnabled && e.preventDefault()}\n        >\n          {attachment.name}\n        </a>\n      </div>\n    );\n  };\n\n  const renderMarkdownBody = () => {\n    if (!message?.body) {\n      return null;\n    }\n\n    return <Markdown markdown={message.body} options={{ breaks: true }} />;\n  };\n\n  const renderPlainBody = () => {\n    return <div>{message?.body}</div>;\n  };\n\n  const renderAttachment = (attachment: MessageAttachmentCallbackResponse) => {\n    const contentType = attachment?.contentType;\n    const isImage = contentType.includes('image');\n    const isVideo = contentType.includes('video');\n\n    if (isImage) {\n      return renderMediaPreview(attachment, 'image');\n    }\n\n    if (isVideo) {\n      return renderMediaPreview(attachment, 'video');\n    }\n\n    return renderFilePreview(attachment);\n  };\n\n  const renderAttachments = () => {\n    const attachments = message?.attachments;\n\n    if (!attachments?.length) {\n      return null;\n    }\n\n    return (\n      <div>\n        {attachments.map((attachment) => {\n          return (\n            <div\n              key={attachment.attachmentId}\n              className={classNames(styles.attachment, {\n                [styles.attachmentWithoutMessage]: !message?.body,\n              })}\n            >\n              {renderAttachment(attachment)}\n            </div>\n          );\n        })}\n      </div>\n    );\n  };\n\n  const renderInbound = () => {\n    const agentData = getMessageAgentInformation(\n      message?.sentBy,\n      chatSettings,\n      navigation.initAssistantPayload,\n    );\n    return (\n      <ChatBubble\n        className={classNames({\n          [styles.isLastInStreak]: showAvatar,\n        })}\n        innerClassName={classNames(chatBubbleInnerClassName)}\n        showAvatar={showAvatar}\n        avatarUrl={agentData.avatarUrl}\n        userDisplayName={agentData.displayName}\n        showTimestamp={showTimestamp}\n        timestamp={message?.createdAt}\n      >\n        <Fragment>\n          <span className={styles.visuallyHidden}>\n            <Text\n              id=\"inboundAriaDefinitionText\"\n              defaultMessage={messages.inboundAriaDefinitionText}\n              fields={{\n                name: agentData.displayName || '',\n              }}\n            />\n          </span>\n          {renderMarkdownBody()}\n          {renderAttachments()}\n        </Fragment>\n      </ChatBubble>\n    );\n  };\n\n  const renderInboundTypingIndicator = () => {\n    const agentData = getMessageAgentInformation(\n      message?.sentBy,\n      chatSettings,\n      navigation.initAssistantPayload,\n    );\n    return (\n      <ChatBubble\n        innerClassName={classNames(chatBubbleInnerClassName)}\n        showAvatar={showAvatar}\n        avatarUrl={userTyping?.avatarUrl}\n        showAIProcessingAnswer={userTyping?.isAIGeneratingAnswer}\n      >\n        <div\n          className={classNames(styles.typingIndicator, {\n            [styles.aiAssistantTypingIndicator]:\n              userTyping?.isAIGeneratingAnswer,\n          })}\n        >\n          <span className={styles.visuallyHidden}>\n            <Text\n              id=\"inboundChatIndicator\"\n              defaultMessage={messages.inboundChatIndicator}\n              fields={{\n                name: agentData.displayName || '',\n              }}\n            />\n          </span>\n          <div />\n          <div />\n          <div />\n        </div>\n      </ChatBubble>\n    );\n  };\n\n  const renderSatisfactionMessage = () => {\n    return (\n      <ChatBubble\n        avatarUrl={chatSettings.teamIconUrl}\n        userDisplayName={chatSettings.teamName}\n        showAvatar\n        innerClassName={classNames(\n          styles.satisfactionBubble,\n          chatBubbleInnerClassName,\n        )}\n      >\n        <SatisfactionMessage satisfaction={satisfaction} />\n      </ChatBubble>\n    );\n  };\n\n  const renderOutbound = () => {\n    const chatBubble = (\n      <ChatBubble\n        isOutbound\n        className={classNames({\n          [styles.isLastInStreak]: showTimestamp,\n        })}\n        innerClassName={classNames(chatBubbleInnerClassName)}\n        showTimestamp={showTimestamp}\n        timestamp={message?.createdAt}\n        showOptimisticError={message?.showError}\n      >\n        <Fragment>\n          <span className={styles.visuallyHidden}>\n            <Text\n              id=\"outboundAriaDefinitionText\"\n              defaultMessage={messages.outboundAriaDefinitionText}\n            />\n          </span>\n          {renderPlainBody()}\n          {renderAttachments()}\n        </Fragment>\n      </ChatBubble>\n    );\n\n    if (handleRetrySend && message?.showError) {\n      return (\n        <div\n          role=\"button\"\n          tabIndex={0}\n          onClick={handleClick}\n          onKeyPress={handleKeyPress}\n          className={styles.retryMessage}\n        >\n          {chatBubble}\n        </div>\n      );\n    }\n\n    return chatBubble;\n  };\n\n  const renderMessage = () => {\n    if (userTyping) {\n      return renderInboundTypingIndicator();\n    }\n\n    if (satisfaction) {\n      return renderSatisfactionMessage();\n    }\n\n    if (message?.meta?.template) {\n      return (\n        <TemplateMessage\n          showAvatar={showAvatar}\n          showAIIdentifier={showAIIdentifier}\n          showBotIdentifier={showBotIdentifier}\n          showTimestamp={showTimestamp}\n          message={message}\n          chatBubbleInnerClassName={chatBubbleInnerClassName}\n        />\n      );\n    }\n\n    return message?.sentBy?.type === 'user'\n      ? renderInbound()\n      : renderOutbound();\n  };\n\n  const renderNewMessageDivider = () => {\n    if (showNewMessageDivider) {\n      return (\n        <div className={styles.newMessageDivider}>\n          <div className={styles.newMessageDividerLine} />\n          <div className={styles.newMessageDividerText}>\n            <Text\n              id=\"newMessages\"\n              defaultMessage={globalMessages.newMessages}\n            />\n          </div>\n          <div className={styles.newMessageDividerLine} />\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <div>\n      {renderNewMessageDivider()}\n      {renderMessage()}\n    </div>\n  );\n};\nexport default ChatMessage;\n\nChatMessage.defaultProps = {\n  showAvatar: false,\n  showTimestamp: false,\n};\n","export default {\n  inboundChatIndicator: '{{name}} is typing',\n  inboundAriaDefinitionText: 'from {{name}}:',\n  outboundAriaDefinitionText: 'from me:',\n};\n","import ChatMessage from './ChatMessage';\n\nexport default ChatMessage;\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"xmlns\":\"http://www.w3.org/2000/svg\",\"version\":\"1.1\",\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n   \", h('path', {\"fill\":\"currentColor\",\"d\":\"M4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6M20 4V16H8V4H20M20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2M12 14.5V5.5L18 10L12 14.5Z\"}, []), \"\\n\"]);\n};\n\n        ","export const getFileSizeInKB = (bytes: number) => {\n  return `${Math.ceil(bytes / 1000)} KB`;\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./attachmentPreviews.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./attachmentPreviews.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  attachmentPreviewsAriaLabel: 'Remove Attachment',\n};\n","import AttachmentPreviews from './AttachmentPreviews';\n\nexport default AttachmentPreviews;\n","import { h } from 'preact';\nimport Button from 'widget_main/components/ui/Button';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport PdfIcon from 'widget_main/globals/assets/pdfFile.svg';\nimport VideoIcon from 'widget_main/globals/assets/playBoxMultiple.svg';\nimport FilePresentIcon from 'widget_main/globals/assets/filePresent.svg';\nimport { useTranslations } from 'i18n/hooks';\nimport { Attachment } from 'core_main/sdk/send_message/types';\nimport * as helpers from './helpers';\n\nimport styles from './attachmentPreviews.scss';\nimport messages from './messages';\n\ninterface AttachmentPreviewsProps {\n  attachments: Attachment[];\n  removeAttachment: (attachment: Attachment) => void;\n}\n\nconst AttachmentPreviews = ({\n  attachments,\n  removeAttachment,\n}: AttachmentPreviewsProps) => {\n  const translations = useTranslations(messages);\n\n  const renderCloseButton = (attachment) => {\n    return (\n      <Button\n        variant=\"secondary\"\n        className={styles.removeAttachmentButton}\n        ariaLabel={translations.attachmentPreviewsAriaLabel}\n        onClick={() => removeAttachment(attachment)}\n      >\n        <CloseIcon class={styles.closeIcon} />\n      </Button>\n    );\n  };\n\n  const renderImagePreview = (attachment: Attachment) => {\n    return (\n      <div\n        role=\"img\"\n        className={styles.imagePreview}\n        style={{\n          backgroundImage: `url(${attachment.url})`,\n        }}\n      />\n    );\n  };\n\n  const renderFilePreview = (attachment: Attachment) => {\n    const contentType = attachment?.file?.type;\n    const isVideo = contentType?.includes('video');\n    const isPDF = contentType?.includes('pdf');\n\n    let icon = <FilePresentIcon className={styles.pdfIcon} />;\n\n    if (isVideo) {\n      icon = <VideoIcon class={styles.pdfIcon} width={32} height={32} />;\n    } else if (isPDF) {\n      icon = <PdfIcon class={styles.pdfIcon} width={32} height={32} />;\n    }\n\n    return (\n      <div class={styles.file}>\n        {icon}\n        <div class={styles.pdfDetails}>\n          <div class={styles.fileName}>{attachment.file.name}</div>\n          <div class={styles.fileSize}>\n            {helpers.getFileSizeInKB(attachment.file.size)}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.attachments}>\n      {attachments.map((attachment, index) => {\n        return (\n          <div class={styles.attachment} key={index}>\n            {renderCloseButton(attachment)}\n            {attachment.file.type.includes('image')\n              ? renderImagePreview(attachment)\n              : renderFilePreview(attachment)}\n          </div>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default AttachmentPreviews;\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"26\",\"height\":\"26\",\"viewBox\":\"0 0 26 26\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-paperClip-wXmtQoL\",\"d\":\"M18.2083 6.67739V17.1667C18.2083 20.0432 15.8765 22.3751 13 22.3751C10.1235 22.3751 7.79167 20.0432 7.79167 17.1667V7.09728C7.79167 5.17963 9.34624 3.62506 11.2639 3.62506C13.1815 3.62506 14.7361 5.17963 14.7361 7.09728V17.1506C14.7361 18.1094 13.9588 18.8867 13 18.8867C12.0412 18.8867 11.2639 18.1094 11.2639 17.1506V7.27089\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","export const ALLOWED_MIME_TYPES = [\n  'application/pdf',\n  'application/msword',\n  'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n  'application/vnd.ms-excel',\n  'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n  'application/zip',\n  'text/plain',\n  'text/html',\n  'video/mpeg',\n  'video/mp4',\n  'image/png',\n  'image/jpeg',\n  'image/jpeg',\n  // the options below may get removed depending on PM feedback\n  'audio/mpeg',\n  'video/mpeg',\n  'image/gif',\n  'video/webm',\n  'image/webp',\n];\n\nexport const MAX_FILE_SIZE = 5000000; // 5mb\nexport const MAX_TOTAL_SIZE = 9000000;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./attachmentButton.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./attachmentButton.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  fileSizeError: 'Please upload a file smaller than 5MB',\n  fileTypeError: 'File type not supported',\n  totalFileSizeError: 'Please upload less than 9MB in total',\n  attachmentButtonAriaLabel: 'Add Attachment',\n};\n","import AttachmentButton from './AttachmentButton';\n\nexport default AttachmentButton;\n","import { h } from 'preact';\nimport { useRef } from 'preact/hooks';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport AttachmentIcon from 'widget_main/globals/assets/paperClip.svg';\nimport { useTranslations } from 'i18n/hooks';\nimport { Attachment } from 'core_main/sdk/send_message/types';\nimport { ALLOWED_MIME_TYPES, MAX_FILE_SIZE, MAX_TOTAL_SIZE } from './constants';\nimport styles from './attachmentButton.scss';\n\nimport messages from './messages';\n\ninterface AttachmentButtonProps {\n  disabled?: boolean;\n  showError: (errorMessage?: string) => void;\n  attachments: Attachment[];\n  addAttachment: (file: File) => void;\n}\n\nconst AttachmentButton = ({\n  disabled,\n  showError,\n  attachments,\n  addAttachment,\n}: AttachmentButtonProps) => {\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const translations = useTranslations(messages);\n\n  const getCurrentTotalSize = () => {\n    let total = 0;\n\n    attachments.forEach((attachment) => {\n      if (attachment.file.size) {\n        total += attachment.file.size;\n      }\n    });\n\n    return total;\n  };\n\n  const handleFileChange = (e) => {\n    const file = e.target.files?.[0];\n    const fileSize = file?.size || MAX_FILE_SIZE;\n    if (!file) {\n      return;\n    }\n\n    if (!ALLOWED_MIME_TYPES.includes(file.type)) {\n      showError(translations.fileTypeError);\n      return;\n    }\n\n    if (fileSize >= MAX_FILE_SIZE) {\n      showError(translations.fileSizeError);\n      return;\n    }\n\n    if (getCurrentTotalSize() + fileSize >= MAX_TOTAL_SIZE) {\n      showError(translations.totalFileSizeError);\n      return;\n    }\n\n    showError(undefined);\n\n    addAttachment(file);\n\n    // reset value so that we can choose the same file again\n    e.target.value = '';\n  };\n\n  const handlePromptForFileSelect = (e: MouseEvent | KeyboardEvent) => {\n    if (!fileInputRef?.current?.click) {\n      return;\n    }\n\n    e.preventDefault();\n    e.stopPropagation();\n\n    fileInputRef.current.click();\n  };\n\n  const handleKeypressForFileSelect = (e: KeyboardEvent) => {\n    if (!keyboardEventHelpers.isEnterKey(e)) {\n      return;\n    }\n\n    handlePromptForFileSelect(e);\n  };\n\n  return (\n    <label htmlFor=\"fileUpload\">\n      <div\n        aria-label={translations.attachmentButtonAriaLabel}\n        role=\"button\"\n        class={styles.attachmentButton}\n        tabIndex={0}\n        onClick={handlePromptForFileSelect}\n        onKeyPress={handleKeypressForFileSelect}\n      >\n        <AttachmentIcon class={styles.attachmentIcon} />\n      </div>\n      <input\n        class={styles.fileInput}\n        disabled={disabled}\n        data-kt=\"fileUpload\"\n        id=\"fileUpload\"\n        ref={fileInputRef}\n        type=\"file\"\n        onChange={handleFileChange}\n      />\n    </label>\n  );\n};\n\nexport default AttachmentButton;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./messageThreadInput.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./messageThreadInput.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","function assertNonEmptyString (str) {\n  if (typeof str !== 'string' || !str) {\n    throw new Error('expected a non-empty string, got: ' + str)\n  }\n}\n\nfunction assertNumber (number) {\n  if (typeof number !== 'number') {\n    throw new Error('expected a number, got: ' + number)\n  }\n}\n\nconst DB_VERSION_CURRENT = 1;\nconst DB_VERSION_INITIAL = 1;\nconst STORE_EMOJI = 'emoji';\nconst STORE_KEYVALUE = 'keyvalue';\nconst STORE_FAVORITES = 'favorites';\nconst FIELD_TOKENS = 'tokens';\nconst INDEX_TOKENS = 'tokens';\nconst FIELD_UNICODE = 'unicode';\nconst INDEX_COUNT = 'count';\nconst FIELD_GROUP = 'group';\nconst FIELD_ORDER = 'order';\nconst INDEX_GROUP_AND_ORDER = 'group-order';\nconst KEY_ETAG = 'eTag';\nconst KEY_URL = 'url';\nconst KEY_PREFERRED_SKINTONE = 'skinTone';\nconst MODE_READONLY = 'readonly';\nconst MODE_READWRITE = 'readwrite';\nconst INDEX_SKIN_UNICODE = 'skinUnicodes';\nconst FIELD_SKIN_UNICODE = 'skinUnicodes';\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\nfunction uniqEmoji (emojis) {\n  return uniqBy(emojis, _ => _.unicode)\n}\n\nfunction initialMigration (db) {\n  function createObjectStore (name, keyPath, indexes) {\n    const store = keyPath\n      ? db.createObjectStore(name, { keyPath })\n      : db.createObjectStore(name);\n    if (indexes) {\n      for (const [indexName, [keyPath, multiEntry]] of Object.entries(indexes)) {\n        store.createIndex(indexName, keyPath, { multiEntry });\n      }\n    }\n    return store\n  }\n\n  createObjectStore(STORE_KEYVALUE);\n  createObjectStore(STORE_EMOJI, /* keyPath */ FIELD_UNICODE, {\n    [INDEX_TOKENS]: [FIELD_TOKENS, /* multiEntry */ true],\n    [INDEX_GROUP_AND_ORDER]: [[FIELD_GROUP, FIELD_ORDER]],\n    [INDEX_SKIN_UNICODE]: [FIELD_SKIN_UNICODE, /* multiEntry */ true]\n  });\n  createObjectStore(STORE_FAVORITES, undefined, {\n    [INDEX_COUNT]: ['']\n  });\n}\n\nconst openReqs = {};\nconst databaseCache = {};\nconst onCloseListeners = {};\n\nfunction handleOpenOrDeleteReq (resolve, reject, req) {\n  // These things are almost impossible to test with fakeIndexedDB sadly\n  /* istanbul ignore next */\n  req.onerror = () => reject(req.error);\n  /* istanbul ignore next */\n  req.onblocked = () => reject(new Error('IDB blocked'));\n  req.onsuccess = () => resolve(req.result);\n}\n\nasync function createDatabase (dbName) {\n  const db = await new Promise((resolve, reject) => {\n    const req = indexedDB.open(dbName, DB_VERSION_CURRENT);\n    openReqs[dbName] = req;\n    req.onupgradeneeded = e => {\n      // Technically there is only one version, so we don't need this `if` check\n      // But if an old version of the JS is in another browser tab\n      // and it gets upgraded in the future and we have a new DB version, well...\n      // better safe than sorry.\n      /* istanbul ignore else */\n      if (e.oldVersion < DB_VERSION_INITIAL) {\n        initialMigration(req.result);\n      }\n    };\n    handleOpenOrDeleteReq(resolve, reject, req);\n  });\n  // Handle abnormal closes, e.g. \"delete database\" in chrome dev tools.\n  // No need for removeEventListener, because once the DB can no longer\n  // fire \"close\" events, it will auto-GC.\n  // Unfortunately cannot test in fakeIndexedDB: https://github.com/dumbmatter/fakeIndexedDB/issues/50\n  /* istanbul ignore next */\n  db.onclose = () => closeDatabase(dbName);\n  return db\n}\n\nfunction openDatabase (dbName) {\n  if (!databaseCache[dbName]) {\n    databaseCache[dbName] = createDatabase(dbName);\n  }\n  return databaseCache[dbName]\n}\n\nfunction dbPromise (db, storeName, readOnlyOrReadWrite, cb) {\n  return new Promise((resolve, reject) => {\n    // Use relaxed durability because neither the emoji data nor the favorites/preferred skin tone\n    // are really irreplaceable data. IndexedDB is just a cache in this case.\n    const txn = db.transaction(storeName, readOnlyOrReadWrite, { durability: 'relaxed' });\n    const store = typeof storeName === 'string'\n      ? txn.objectStore(storeName)\n      : storeName.map(name => txn.objectStore(name));\n    let res;\n    cb(store, txn, (result) => {\n      res = result;\n    });\n\n    txn.oncomplete = () => resolve(res);\n    /* istanbul ignore next */\n    txn.onerror = () => reject(txn.error);\n  })\n}\n\nfunction closeDatabase (dbName) {\n  // close any open requests\n  const req = openReqs[dbName];\n  const db = req && req.result;\n  if (db) {\n    db.close();\n    const listeners = onCloseListeners[dbName];\n    /* istanbul ignore else */\n    if (listeners) {\n      for (const listener of listeners) {\n        listener();\n      }\n    }\n  }\n  delete openReqs[dbName];\n  delete databaseCache[dbName];\n  delete onCloseListeners[dbName];\n}\n\nfunction deleteDatabase (dbName) {\n  return new Promise((resolve, reject) => {\n    // close any open requests\n    closeDatabase(dbName);\n    const req = indexedDB.deleteDatabase(dbName);\n    handleOpenOrDeleteReq(resolve, reject, req);\n  })\n}\n\n// The \"close\" event occurs during an abnormal shutdown, e.g. a user clearing their browser data.\n// However, it doesn't occur with the normal \"close\" event, so we handle that separately.\n// https://www.w3.org/TR/IndexedDB/#close-a-database-connection\nfunction addOnCloseListener (dbName, listener) {\n  let listeners = onCloseListeners[dbName];\n  if (!listeners) {\n    listeners = onCloseListeners[dbName] = [];\n  }\n  listeners.push(listener);\n}\n\n// list of emoticons that don't match a simple \\W+ regex\n// extracted using:\n// require('emoji-picker-element-data/en/emojibase/data.json').map(_ => _.emoticon).filter(Boolean).filter(_ => !/^\\W+$/.test(_))\nconst irregularEmoticons = new Set([\n  ':D', 'XD', \":'D\", 'O:)',\n  ':X', ':P', ';P', 'XP',\n  ':L', ':Z', ':j', '8D',\n  'XO', '8)', ':B', ':O',\n  ':S', \":'o\", 'Dx', 'X(',\n  'D:', ':C', '>0)', ':3',\n  '</3', '<3', '\\\\M/', ':E',\n  '8#'\n]);\n\nfunction extractTokens (str) {\n  return str\n    .split(/[\\s_]+/)\n    .map(word => {\n      if (!word.match(/\\w/) || irregularEmoticons.has(word)) {\n        // for pure emoticons like :) or :-), just leave them as-is\n        return word.toLowerCase()\n      }\n\n      return word\n        .replace(/[)(:,]/g, '')\n        .replace(/’/g, \"'\")\n        .toLowerCase()\n    }).filter(Boolean)\n}\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\n\n// This is an extra step in addition to extractTokens(). The difference here is that we expect\n// the input to have already been run through extractTokens(). This is useful for cases like\n// emoticons, where we don't want to do any tokenization (because it makes no sense to split up\n// \">:)\" by the colon) but we do want to lowercase it to have consistent search results, so that\n// the user can type ':P' or ':p' and still get the same result.\nfunction normalizeTokens (str) {\n  return str\n    .filter(Boolean)\n    .map(_ => _.toLowerCase())\n    .filter(_ => _.length >= MIN_SEARCH_TEXT_LENGTH)\n}\n\n// Transform emoji data for storage in IDB\nfunction transformEmojiData (emojiData) {\n  const res = emojiData.map(({ annotation, emoticon, group, order, shortcodes, skins, tags, emoji, version }) => {\n    const tokens = [...new Set(\n      normalizeTokens([\n        ...(shortcodes || []).map(extractTokens).flat(),\n        ...tags.map(extractTokens).flat(),\n        ...extractTokens(annotation),\n        emoticon\n      ])\n    )].sort();\n    const res = {\n      annotation,\n      group,\n      order,\n      tags,\n      tokens,\n      unicode: emoji,\n      version\n    };\n    if (emoticon) {\n      res.emoticon = emoticon;\n    }\n    if (shortcodes) {\n      res.shortcodes = shortcodes;\n    }\n    if (skins) {\n      res.skinTones = [];\n      res.skinUnicodes = [];\n      res.skinVersions = [];\n      for (const { tone, emoji, version } of skins) {\n        res.skinTones.push(tone);\n        res.skinUnicodes.push(emoji);\n        res.skinVersions.push(version);\n      }\n    }\n    return res\n  });\n  return res\n}\n\n// helper functions that help compress the code better\n\nfunction callStore (store, method, key, cb) {\n  store[method](key).onsuccess = e => (cb && cb(e.target.result));\n}\n\nfunction getIDB (store, key, cb) {\n  callStore(store, 'get', key, cb);\n}\n\nfunction getAllIDB (store, key, cb) {\n  callStore(store, 'getAll', key, cb);\n}\n\nfunction commit (txn) {\n  /* istanbul ignore else */\n  if (txn.commit) {\n    txn.commit();\n  }\n}\n\n// like lodash's minBy\nfunction minBy (array, func) {\n  let minItem = array[0];\n  for (let i = 1; i < array.length; i++) {\n    const item = array[i];\n    if (func(minItem) > func(item)) {\n      minItem = item;\n    }\n  }\n  return minItem\n}\n\n// return an array of results representing all items that are found in each one of the arrays\n\nfunction findCommonMembers (arrays, uniqByFunc) {\n  const shortestArray = minBy(arrays, _ => _.length);\n  const results = [];\n  for (const item of shortestArray) {\n    // if this item is included in every array in the intermediate results, add it to the final results\n    if (!arrays.some(array => array.findIndex(_ => uniqByFunc(_) === uniqByFunc(item)) === -1)) {\n      results.push(item);\n    }\n  }\n  return results\n}\n\nasync function isEmpty (db) {\n  return !(await get(db, STORE_KEYVALUE, KEY_URL))\n}\n\nasync function hasData (db, url, eTag) {\n  const [oldETag, oldUrl] = await Promise.all([KEY_ETAG, KEY_URL]\n    .map(key => get(db, STORE_KEYVALUE, key)));\n  return (oldETag === eTag && oldUrl === url)\n}\n\nasync function doFullDatabaseScanForSingleResult (db, predicate) {\n  // This batching algorithm is just a perf improvement over a basic\n  // cursor. The BATCH_SIZE is an estimate of what would give the best\n  // perf for doing a full DB scan (worst case).\n  //\n  // Mini-benchmark for determining the best batch size:\n  //\n  // PERF=1 yarn build:rollup && yarn test:adhoc\n  //\n  // (async () => {\n  //   performance.mark('start')\n  //   await $('emoji-picker').database.getEmojiByShortcode('doesnotexist')\n  //   performance.measure('total', 'start')\n  //   console.log(performance.getEntriesByName('total').slice(-1)[0].duration)\n  // })()\n  const BATCH_SIZE = 50; // Typically around 150ms for 6x slowdown in Chrome for above benchmark\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    let lastKey;\n\n    const processNextBatch = () => {\n      emojiStore.getAll(lastKey && IDBKeyRange.lowerBound(lastKey, true), BATCH_SIZE).onsuccess = e => {\n        const results = e.target.result;\n        for (const result of results) {\n          lastKey = result.unicode;\n          if (predicate(result)) {\n            return cb(result)\n          }\n        }\n        if (results.length < BATCH_SIZE) {\n          return cb()\n        }\n        processNextBatch();\n      };\n    };\n    processNextBatch();\n  })\n}\n\nasync function loadData (db, emojiData, url, eTag) {\n  try {\n    const transformedData = transformEmojiData(emojiData);\n    await dbPromise(db, [STORE_EMOJI, STORE_KEYVALUE], MODE_READWRITE, ([emojiStore, metaStore], txn) => {\n      let oldETag;\n      let oldUrl;\n      let todo = 0;\n\n      function checkFetched () {\n        if (++todo === 2) { // 2 requests made\n          onFetched();\n        }\n      }\n\n      function onFetched () {\n        if (oldETag === eTag && oldUrl === url) {\n          // check again within the transaction to guard against concurrency, e.g. multiple browser tabs\n          return\n        }\n        // delete old data\n        emojiStore.clear();\n        // insert new data\n        for (const data of transformedData) {\n          emojiStore.put(data);\n        }\n        metaStore.put(eTag, KEY_ETAG);\n        metaStore.put(url, KEY_URL);\n        commit(txn);\n      }\n\n      getIDB(metaStore, KEY_ETAG, result => {\n        oldETag = result;\n        checkFetched();\n      });\n\n      getIDB(metaStore, KEY_URL, result => {\n        oldUrl = result;\n        checkFetched();\n      });\n    });\n  } finally {\n  }\n}\n\nasync function getEmojiByGroup (db, group) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    const range = IDBKeyRange.bound([group, 0], [group + 1, 0], false, true);\n    getAllIDB(emojiStore.index(INDEX_GROUP_AND_ORDER), range, cb);\n  })\n}\n\nasync function getEmojiBySearchQuery (db, query) {\n  const tokens = normalizeTokens(extractTokens(query));\n\n  if (!tokens.length) {\n    return []\n  }\n\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => {\n    // get all results that contain all tokens (i.e. an AND query)\n    const intermediateResults = [];\n\n    const checkDone = () => {\n      if (intermediateResults.length === tokens.length) {\n        onDone();\n      }\n    };\n\n    const onDone = () => {\n      const results = findCommonMembers(intermediateResults, _ => _.unicode);\n      cb(results.sort((a, b) => a.order < b.order ? -1 : 1));\n    };\n\n    for (let i = 0; i < tokens.length; i++) {\n      const token = tokens[i];\n      const range = i === tokens.length - 1\n        ? IDBKeyRange.bound(token, token + '\\uffff', false, true) // treat last token as a prefix search\n        : IDBKeyRange.only(token); // treat all other tokens as an exact match\n      getAllIDB(emojiStore.index(INDEX_TOKENS), range, result => {\n        intermediateResults.push(result);\n        checkDone();\n      });\n    }\n  })\n}\n\n// This could have been implemented as an IDB index on shortcodes, but it seemed wasteful to do that\n// when we can already query by tokens and this will give us what we're looking for 99.9% of the time\nasync function getEmojiByShortcode (db, shortcode) {\n  const emojis = await getEmojiBySearchQuery(db, shortcode);\n\n  // In very rare cases (e.g. the shortcode \"v\" as in \"v for victory\"), we cannot search because\n  // there are no usable tokens (too short in this case). In that case, we have to do an inefficient\n  // full-database scan, which I believe is an acceptable tradeoff for not having to have an extra\n  // index on shortcodes.\n\n  if (!emojis.length) {\n    const predicate = _ => ((_.shortcodes || []).includes(shortcode.toLowerCase()));\n    return (await doFullDatabaseScanForSingleResult(db, predicate)) || null\n  }\n\n  return emojis.filter(_ => {\n    const lowerShortcodes = (_.shortcodes || []).map(_ => _.toLowerCase());\n    return lowerShortcodes.includes(shortcode.toLowerCase())\n  })[0] || null\n}\n\nasync function getEmojiByUnicode (db, unicode) {\n  return dbPromise(db, STORE_EMOJI, MODE_READONLY, (emojiStore, txn, cb) => (\n    getIDB(emojiStore, unicode, result => {\n      if (result) {\n        return cb(result)\n      }\n      getIDB(emojiStore.index(INDEX_SKIN_UNICODE), unicode, result => cb(result || null));\n    })\n  ))\n}\n\nfunction get (db, storeName, key) {\n  return dbPromise(db, storeName, MODE_READONLY, (store, txn, cb) => (\n    getIDB(store, key, cb)\n  ))\n}\n\nfunction set (db, storeName, key, value) {\n  return dbPromise(db, storeName, MODE_READWRITE, (store, txn) => {\n    store.put(value, key);\n    commit(txn);\n  })\n}\n\nfunction incrementFavoriteEmojiCount (db, unicode) {\n  return dbPromise(db, STORE_FAVORITES, MODE_READWRITE, (store, txn) => (\n    getIDB(store, unicode, result => {\n      store.put((result || 0) + 1, unicode);\n      commit(txn);\n    })\n  ))\n}\n\nfunction getTopFavoriteEmoji (db, customEmojiIndex, limit) {\n  if (limit === 0) {\n    return []\n  }\n  return dbPromise(db, [STORE_FAVORITES, STORE_EMOJI], MODE_READONLY, ([favoritesStore, emojiStore], txn, cb) => {\n    const results = [];\n    favoritesStore.index(INDEX_COUNT).openCursor(undefined, 'prev').onsuccess = e => {\n      const cursor = e.target.result;\n      if (!cursor) { // no more results\n        return cb(results)\n      }\n\n      function addResult (result) {\n        results.push(result);\n        if (results.length === limit) {\n          return cb(results) // done, reached the limit\n        }\n        cursor.continue();\n      }\n\n      const unicodeOrName = cursor.primaryKey;\n      const custom = customEmojiIndex.byName(unicodeOrName);\n      if (custom) {\n        return addResult(custom)\n      }\n      // This could be done in parallel (i.e. make the cursor and the get()s parallelized),\n      // but my testing suggests it's not actually faster.\n      getIDB(emojiStore, unicodeOrName, emoji => {\n        if (emoji) {\n          return addResult(emoji)\n        }\n        // emoji not found somehow, ignore (may happen if custom emoji change)\n        cursor.continue();\n      });\n    };\n  })\n}\n\n// trie data structure for prefix searches\n// loosely based on https://github.com/nolanlawson/substring-trie\n\nconst CODA_MARKER = ''; // marks the end of the string\n\nfunction trie (arr, itemToTokens) {\n  const map = new Map();\n  for (const item of arr) {\n    const tokens = itemToTokens(item);\n    for (const token of tokens) {\n      let currentMap = map;\n      for (let i = 0; i < token.length; i++) {\n        const char = token.charAt(i);\n        let nextMap = currentMap.get(char);\n        if (!nextMap) {\n          nextMap = new Map();\n          currentMap.set(char, nextMap);\n        }\n        currentMap = nextMap;\n      }\n      let valuesAtCoda = currentMap.get(CODA_MARKER);\n      if (!valuesAtCoda) {\n        valuesAtCoda = [];\n        currentMap.set(CODA_MARKER, valuesAtCoda);\n      }\n      valuesAtCoda.push(item);\n    }\n  }\n\n  const search = (query, exact) => {\n    let currentMap = map;\n    for (let i = 0; i < query.length; i++) {\n      const char = query.charAt(i);\n      const nextMap = currentMap.get(char);\n      if (nextMap) {\n        currentMap = nextMap;\n      } else {\n        return []\n      }\n    }\n\n    if (exact) {\n      const results = currentMap.get(CODA_MARKER);\n      return results || []\n    }\n\n    const results = [];\n    // traverse\n    const queue = [currentMap];\n    while (queue.length) {\n      const currentMap = queue.shift();\n      const entriesSortedByKey = [...currentMap.entries()].sort((a, b) => a[0] < b[0] ? -1 : 1);\n      for (const [key, value] of entriesSortedByKey) {\n        if (key === CODA_MARKER) { // CODA_MARKER always comes first; it's the empty string\n          results.push(...value);\n        } else {\n          queue.push(value);\n        }\n      }\n    }\n    return results\n  };\n\n  return search\n}\n\nconst requiredKeys$1 = [\n  'name',\n  'url'\n];\n\nfunction assertCustomEmojis (customEmojis) {\n  const isArray = customEmojis && Array.isArray(customEmojis);\n  const firstItemIsFaulty = isArray &&\n    customEmojis.length &&\n    (!customEmojis[0] || requiredKeys$1.some(key => !(key in customEmojis[0])));\n  if (!isArray || firstItemIsFaulty) {\n    throw new Error('Custom emojis are in the wrong format')\n  }\n}\n\nfunction customEmojiIndex (customEmojis) {\n  assertCustomEmojis(customEmojis);\n\n  const sortByName = (a, b) => a.name.toLowerCase() < b.name.toLowerCase() ? -1 : 1;\n\n  //\n  // all()\n  //\n  const all = customEmojis.sort(sortByName);\n\n  //\n  // search()\n  //\n  const emojiToTokens = emoji => (\n    [...new Set((emoji.shortcodes || []).map(shortcode => extractTokens(shortcode)).flat())]\n  );\n  const searchTrie = trie(customEmojis, emojiToTokens);\n  const searchByExactMatch = _ => searchTrie(_, true);\n  const searchByPrefix = _ => searchTrie(_, false);\n\n  // Search by query for custom emoji. Similar to how we do this in IDB, the last token\n  // is treated as a prefix search, but every other one is treated as an exact match.\n  // Then we AND the results together\n  const search = query => {\n    const tokens = extractTokens(query);\n    const intermediateResults = tokens.map((token, i) => (\n      (i < tokens.length - 1 ? searchByExactMatch : searchByPrefix)(token)\n    ));\n    return findCommonMembers(intermediateResults, _ => _.name).sort(sortByName)\n  };\n\n  //\n  // byShortcode, byName\n  //\n  const shortcodeToEmoji = new Map();\n  const nameToEmoji = new Map();\n  for (const customEmoji of customEmojis) {\n    nameToEmoji.set(customEmoji.name.toLowerCase(), customEmoji);\n    for (const shortcode of (customEmoji.shortcodes || [])) {\n      shortcodeToEmoji.set(shortcode.toLowerCase(), customEmoji);\n    }\n  }\n\n  const byShortcode = shortcode => shortcodeToEmoji.get(shortcode.toLowerCase());\n  const byName = name => nameToEmoji.get(name.toLowerCase());\n\n  return {\n    all,\n    search,\n    byShortcode,\n    byName\n  }\n}\n\n// remove some internal implementation details, i.e. the \"tokens\" array on the emoji object\n// essentially, convert the emoji from the version stored in IDB to the version used in-memory\nfunction cleanEmoji (emoji) {\n  if (!emoji) {\n    return emoji\n  }\n  delete emoji.tokens;\n  if (emoji.skinTones) {\n    const len = emoji.skinTones.length;\n    emoji.skins = Array(len);\n    for (let i = 0; i < len; i++) {\n      emoji.skins[i] = {\n        tone: emoji.skinTones[i],\n        unicode: emoji.skinUnicodes[i],\n        version: emoji.skinVersions[i]\n      };\n    }\n    delete emoji.skinTones;\n    delete emoji.skinUnicodes;\n    delete emoji.skinVersions;\n  }\n  return emoji\n}\n\nfunction warnETag (eTag) {\n  if (!eTag) {\n    console.warn('emoji-picker-element is more efficient if the dataSource server exposes an ETag header.');\n  }\n}\n\nconst requiredKeys = [\n  'annotation',\n  'emoji',\n  'group',\n  'order',\n  'tags',\n  'version'\n];\n\nfunction assertEmojiData (emojiData) {\n  if (!emojiData ||\n    !Array.isArray(emojiData) ||\n    !emojiData[0] ||\n    (typeof emojiData[0] !== 'object') ||\n    requiredKeys.some(key => (!(key in emojiData[0])))) {\n    throw new Error('Emoji data is in the wrong format')\n  }\n}\n\nfunction assertStatus (response, dataSource) {\n  if (Math.floor(response.status / 100) !== 2) {\n    throw new Error('Failed to fetch: ' + dataSource + ':  ' + response.status)\n  }\n}\n\nasync function getETag (dataSource) {\n  const response = await fetch(dataSource, { method: 'HEAD' });\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  return eTag\n}\n\nasync function getETagAndData (dataSource) {\n  const response = await fetch(dataSource);\n  assertStatus(response, dataSource);\n  const eTag = response.headers.get('etag');\n  warnETag(eTag);\n  const emojiData = await response.json();\n  assertEmojiData(emojiData);\n  return [eTag, emojiData]\n}\n\n// TODO: including these in blob-util.ts causes typedoc to generate docs for them,\n/**\n * Convert an `ArrayBuffer` to a binary string.\n *\n * Example:\n *\n * ```js\n * var myString = blobUtil.arrayBufferToBinaryString(arrayBuff)\n * ```\n *\n * @param buffer - array buffer\n * @returns binary string\n */\nfunction arrayBufferToBinaryString(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    var length = bytes.byteLength;\n    var i = -1;\n    while (++i < length) {\n        binary += String.fromCharCode(bytes[i]);\n    }\n    return binary;\n}\n/**\n * Convert a binary string to an `ArrayBuffer`.\n *\n * ```js\n * var myBuffer = blobUtil.binaryStringToArrayBuffer(binaryString)\n * ```\n *\n * @param binary - binary string\n * @returns array buffer\n */\nfunction binaryStringToArrayBuffer(binary) {\n    var length = binary.length;\n    var buf = new ArrayBuffer(length);\n    var arr = new Uint8Array(buf);\n    var i = -1;\n    while (++i < length) {\n        arr[i] = binary.charCodeAt(i);\n    }\n    return buf;\n}\n\n// generate a checksum based on the stringified JSON\nasync function jsonChecksum (object) {\n  const inString = JSON.stringify(object);\n  const inBuffer = binaryStringToArrayBuffer(inString);\n  // this does not need to be cryptographically secure, SHA-1 is fine\n  const outBuffer = await crypto.subtle.digest('SHA-1', inBuffer);\n  const outBinString = arrayBufferToBinaryString(outBuffer);\n  const res = btoa(outBinString);\n  return res\n}\n\nasync function checkForUpdates (db, dataSource) {\n  // just do a simple HEAD request first to see if the eTags match\n  let emojiData;\n  let eTag = await getETag(dataSource);\n  if (!eTag) { // work around lack of ETag/Access-Control-Expose-Headers\n    const eTagAndData = await getETagAndData(dataSource);\n    eTag = eTagAndData[0];\n    emojiData = eTagAndData[1];\n    if (!eTag) {\n      eTag = await jsonChecksum(emojiData);\n    }\n  }\n  if (await hasData(db, dataSource, eTag)) ; else {\n    if (!emojiData) {\n      const eTagAndData = await getETagAndData(dataSource);\n      emojiData = eTagAndData[1];\n    }\n    await loadData(db, emojiData, dataSource, eTag);\n  }\n}\n\nasync function loadDataForFirstTime (db, dataSource) {\n  let [eTag, emojiData] = await getETagAndData(dataSource);\n  if (!eTag) {\n    // Handle lack of support for ETag or Access-Control-Expose-Headers\n    // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Access-Control-Expose-Headers#Browser_compatibility\n    eTag = await jsonChecksum(emojiData);\n  }\n\n  await loadData(db, emojiData, dataSource, eTag);\n}\n\nclass Database {\n  constructor ({ dataSource = DEFAULT_DATA_SOURCE, locale = DEFAULT_LOCALE, customEmoji = [] } = {}) {\n    this.dataSource = dataSource;\n    this.locale = locale;\n    this._dbName = `emoji-picker-element-${this.locale}`;\n    this._db = undefined;\n    this._lazyUpdate = undefined;\n    this._custom = customEmojiIndex(customEmoji);\n\n    this._clear = this._clear.bind(this);\n    this._ready = this._init();\n  }\n\n  async _init () {\n    const db = this._db = await openDatabase(this._dbName);\n\n    addOnCloseListener(this._dbName, this._clear);\n    const dataSource = this.dataSource;\n    const empty = await isEmpty(db);\n\n    if (empty) {\n      await loadDataForFirstTime(db, dataSource);\n    } else { // offline-first - do an update asynchronously\n      this._lazyUpdate = checkForUpdates(db, dataSource);\n    }\n  }\n\n  async ready () {\n    const checkReady = async () => {\n      if (!this._ready) {\n        this._ready = this._init();\n      }\n      return this._ready\n    };\n    await checkReady();\n    // There's a possibility of a race condition where the element gets added, removed, and then added again\n    // with a particular timing, which would set the _db to undefined.\n    // We *could* do a while loop here, but that seems excessive and could lead to an infinite loop.\n    if (!this._db) {\n      await checkReady();\n    }\n  }\n\n  async getEmojiByGroup (group) {\n    assertNumber(group);\n    await this.ready();\n    return uniqEmoji(await getEmojiByGroup(this._db, group)).map(cleanEmoji)\n  }\n\n  async getEmojiBySearchQuery (query) {\n    assertNonEmptyString(query);\n    await this.ready();\n    const customs = this._custom.search(query);\n    const natives = uniqEmoji(await getEmojiBySearchQuery(this._db, query)).map(cleanEmoji);\n    return [\n      ...customs,\n      ...natives\n    ]\n  }\n\n  async getEmojiByShortcode (shortcode) {\n    assertNonEmptyString(shortcode);\n    await this.ready();\n    const custom = this._custom.byShortcode(shortcode);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByShortcode(this._db, shortcode))\n  }\n\n  async getEmojiByUnicodeOrName (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    const custom = this._custom.byName(unicodeOrName);\n    if (custom) {\n      return custom\n    }\n    return cleanEmoji(await getEmojiByUnicode(this._db, unicodeOrName))\n  }\n\n  async getPreferredSkinTone () {\n    await this.ready();\n    return (await get(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE)) || 0\n  }\n\n  async setPreferredSkinTone (skinTone) {\n    assertNumber(skinTone);\n    await this.ready();\n    return set(this._db, STORE_KEYVALUE, KEY_PREFERRED_SKINTONE, skinTone)\n  }\n\n  async incrementFavoriteEmojiCount (unicodeOrName) {\n    assertNonEmptyString(unicodeOrName);\n    await this.ready();\n    return incrementFavoriteEmojiCount(this._db, unicodeOrName)\n  }\n\n  async getTopFavoriteEmoji (limit) {\n    assertNumber(limit);\n    await this.ready();\n    return (await getTopFavoriteEmoji(this._db, this._custom, limit)).map(cleanEmoji)\n  }\n\n  set customEmoji (customEmojis) {\n    this._custom = customEmojiIndex(customEmojis);\n  }\n\n  get customEmoji () {\n    return this._custom.all\n  }\n\n  async _shutdown () {\n    await this.ready(); // reopen if we've already been closed/deleted\n    try {\n      await this._lazyUpdate; // allow any lazy updates to process before closing/deleting\n    } catch (err) { /* ignore network errors (offline-first) */ }\n  }\n\n  // clear references to IDB, e.g. during a close event\n  _clear () {\n    // We don't need to call removeEventListener or remove the manual \"close\" listeners.\n    // The memory leak tests prove this is unnecessary. It's because:\n    // 1) IDBDatabases that can no longer fire \"close\" automatically have listeners GCed\n    // 2) we clear the manual close listeners in databaseLifecycle.js.\n    this._db = this._ready = this._lazyUpdate = undefined;\n  }\n\n  async close () {\n    await this._shutdown();\n    await closeDatabase(this._dbName);\n  }\n\n  async delete () {\n    await this._shutdown();\n    await deleteDatabase(this._dbName);\n  }\n}\n\nexport { Database as default };\n","import Database from './database.js';\n\nfunction noop() { }\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_style(node, key, value, important) {\n    if (value === null) {\n        node.style.removeProperty(key);\n    }\n    else {\n        node.style.setProperty(key, value, important ? 'important' : '');\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\n\nconst dirty_components = [];\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\n// flush() calls callbacks in this order:\n// 1. All beforeUpdate callbacks, in order: parents before children\n// 2. All bind:this callbacks, in reverse order: children before parents.\n// 3. All afterUpdate callbacks, in order: parents before children. EXCEPT\n//    for afterUpdates called during the initial onMount, which are called in\n//    reverse order: children before parents.\n// Since callbacks might update component values, which could trigger another\n// call to flush(), the following steps guard against this:\n// 1. During beforeUpdate, any updated components will be added to the\n//    dirty_components array and will cause a reentrant call to flush(). Because\n//    the flush index is kept outside the function, the reentrant call will pick\n//    up where the earlier call left off and go through all dirty components. The\n//    current_component value is saved and restored so that the reentrant call will\n//    not interfere with the \"parent\" flush() call.\n// 2. bind:this callbacks cannot trigger new flush() calls.\n// 3. During afterUpdate, any updated components will NOT have their afterUpdate\n//    callback called a second time; the seen_callbacks set, outside the flush()\n//    function, guarantees this behavior.\nconst seen_callbacks = new Set();\nlet flushidx = 0; // Do *not* move this inside the flush() function\nfunction flush() {\n    const saved_component = current_component;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        while (flushidx < dirty_components.length) {\n            const component = dirty_components[flushidx];\n            flushidx++;\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        flushidx = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    seen_callbacks.clear();\n    set_current_component(saved_component);\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\nconst outroing = new Set();\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(options.context || (parent_component ? parent_component.$$.context : [])),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        flush();\n    }\n    set_current_component(parent_component);\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\n// via https://unpkg.com/browse/emojibase-data@6.0.0/meta/groups.json\nconst allGroups = [\n  [-1, '✨', 'custom'],\n  [0, '😀', 'smileys-emotion'],\n  [1, '👋', 'people-body'],\n  [3, '🐱', 'animals-nature'],\n  [4, '🍎', 'food-drink'],\n  [5, '🏠️', 'travel-places'],\n  [6, '⚽', 'activities'],\n  [7, '📝', 'objects'],\n  [8, '⛔️', 'symbols'],\n  [9, '🏁', 'flags']\n].map(([id, emoji, name]) => ({ id, emoji, name }));\n\nconst groups = allGroups.slice(1);\nconst customGroup = allGroups[0];\n\nconst MIN_SEARCH_TEXT_LENGTH = 2;\nconst NUM_SKIN_TONES = 6;\n\n/* istanbul ignore next */\nconst rIC = typeof requestIdleCallback === 'function' ? requestIdleCallback : setTimeout;\n\n// check for ZWJ (zero width joiner) character\nfunction hasZwj (emoji) {\n  return emoji.unicode.includes('\\u200d')\n}\n\n// Find one good representative emoji from each version to test by checking its color.\n// Ideally it should have color in the center. For some inspiration, see:\n// https://about.gitlab.com/blog/2018/05/30/journey-in-native-unicode-emoji/\n//\n// Note that for certain versions (12.1, 13.1), there is no point in testing them explicitly, because\n// all the emoji from this version are compound-emoji from previous versions. So they would pass a color\n// test, even in browsers that display them as double emoji. (E.g. \"face in clouds\" might render as\n// \"face without mouth\" plus \"fog\".) These emoji can only be filtered using the width test,\n// which happens in checkZwjSupport.js.\nconst versionsAndTestEmoji = {\n  '🫠': 14,\n  '🥲': 13.1, // smiling face with tear, technically from v13 but see note above\n  '🥻': 12.1, // sari, technically from v12 but see note above\n  '🥰': 11,\n  '🤩': 5,\n  '👱‍♀️': 4,\n  '🤣': 3,\n  '👁️‍🗨️': 2,\n  '😀': 1,\n  '😐️': 0.7,\n  '😃': 0.6\n};\n\nconst TIMEOUT_BEFORE_LOADING_MESSAGE = 1000; // 1 second\nconst DEFAULT_SKIN_TONE_EMOJI = '🖐️';\nconst DEFAULT_NUM_COLUMNS = 8;\n\n// Based on https://fivethirtyeight.com/features/the-100-most-used-emojis/ and\n// https://blog.emojipedia.org/facebook-reveals-most-and-least-used-emojis/ with\n// a bit of my own curation. (E.g. avoid the \"OK\" gesture because of connotations:\n// https://emojipedia.org/ok-hand/)\nconst MOST_COMMONLY_USED_EMOJI = [\n  '😊',\n  '😒',\n  '♥️',\n  '👍️',\n  '😍',\n  '😂',\n  '😭',\n  '☺️',\n  '😔',\n  '😩',\n  '😏',\n  '💕',\n  '🙌',\n  '😘'\n];\n\nconst FONT_FAMILY = '\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",' +\n  '\"Twemoji Mozilla\",\"Noto Color Emoji\",\"EmojiOne Color\",\"Android Emoji\",sans-serif';\n\n/* istanbul ignore next */\nconst DEFAULT_CATEGORY_SORTING = (a, b) => a < b ? -1 : a > b ? 1 : 0;\n\n// Test if an emoji is supported by rendering it to canvas and checking that the color is not black\n\nconst getTextFeature = (text, color) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = canvas.height = 1;\n\n  const ctx = canvas.getContext('2d');\n  ctx.textBaseline = 'top';\n  ctx.font = `100px ${FONT_FAMILY}`;\n  ctx.fillStyle = color;\n  ctx.scale(0.01, 0.01);\n  ctx.fillText(text, 0, 0);\n\n  return ctx.getImageData(0, 0, 1, 1).data\n};\n\nconst compareFeatures = (feature1, feature2) => {\n  const feature1Str = [...feature1].join(',');\n  const feature2Str = [...feature2].join(',');\n  // This is RGBA, so for 0,0,0, we are checking that the first RGB is not all zeroes.\n  // Most of the time when unsupported this is 0,0,0,0, but on Chrome on Mac it is\n  // 0,0,0,61 - there is a transparency here.\n  return feature1Str === feature2Str && !feature1Str.startsWith('0,0,0,')\n};\n\nfunction testColorEmojiSupported (text) {\n  // Render white and black and then compare them to each other and ensure they're the same\n  // color, and neither one is black. This shows that the emoji was rendered in color.\n  const feature1 = getTextFeature(text, '#000');\n  const feature2 = getTextFeature(text, '#fff');\n  return feature1 && feature2 && compareFeatures(feature1, feature2)\n}\n\n// rather than check every emoji ever, which would be expensive, just check some representatives from the\n\nfunction determineEmojiSupportLevel () {\n  const entries = Object.entries(versionsAndTestEmoji);\n  try {\n    // start with latest emoji and work backwards\n    for (const [emoji, version] of entries) {\n      if (testColorEmojiSupported(emoji)) {\n        return version\n      }\n    }\n  } catch (e) { // canvas error\n  } finally {\n  }\n  // In case of an error, be generous and just assume all emoji are supported (e.g. for canvas errors\n  // due to anti-fingerprinting add-ons). Better to show some gray boxes than nothing at all.\n  return entries[0][1] // first one in the list is the most recent version\n}\n\n// Check which emojis we know for sure aren't supported, based on Unicode version level\nconst emojiSupportLevelPromise = new Promise(resolve => (\n  rIC(() => (\n    resolve(determineEmojiSupportLevel()) // delay so ideally this can run while IDB is first populating\n  ))\n));\n// determine which emojis containing ZWJ (zero width joiner) characters\n// are supported (rendered as one glyph) rather than unsupported (rendered as two or more glyphs)\nconst supportedZwjEmojis = new Map();\n\nconst VARIATION_SELECTOR = '\\ufe0f';\nconst SKINTONE_MODIFIER = '\\ud83c';\nconst ZWJ = '\\u200d';\nconst LIGHT_SKIN_TONE = 0x1F3FB;\nconst LIGHT_SKIN_TONE_MODIFIER = 0xdffb;\n\n// TODO: this is a naive implementation, we can improve it later\n// It's only used for the skintone picker, so as long as people don't customize with\n// really exotic emoji then it should work fine\nfunction applySkinTone (str, skinTone) {\n  if (skinTone === 0) {\n    return str\n  }\n  const zwjIndex = str.indexOf(ZWJ);\n  if (zwjIndex !== -1) {\n    return str.substring(0, zwjIndex) +\n      String.fromCodePoint(LIGHT_SKIN_TONE + skinTone - 1) +\n      str.substring(zwjIndex)\n  }\n  if (str.endsWith(VARIATION_SELECTOR)) {\n    str = str.substring(0, str.length - 1);\n  }\n  return str + SKINTONE_MODIFIER + String.fromCodePoint(LIGHT_SKIN_TONE_MODIFIER + skinTone - 1)\n}\n\nfunction halt (event) {\n  event.preventDefault();\n  event.stopPropagation();\n}\n\n// Implementation left/right or up/down navigation, circling back when you\n// reach the start/end of the list\nfunction incrementOrDecrement (decrement, val, arr) {\n  val += (decrement ? -1 : 1);\n  if (val < 0) {\n    val = arr.length - 1;\n  } else if (val >= arr.length) {\n    val = 0;\n  }\n  return val\n}\n\n// like lodash's uniqBy but much smaller\nfunction uniqBy (arr, func) {\n  const set = new Set();\n  const res = [];\n  for (const item of arr) {\n    const key = func(item);\n    if (!set.has(key)) {\n      set.add(key);\n      res.push(item);\n    }\n  }\n  return res\n}\n\n// We don't need all the data on every emoji, and there are specific things we need\n// for the UI, so build a \"view model\" from the emoji object we got from the database\n\nfunction summarizeEmojisForUI (emojis, emojiSupportLevel) {\n  const toSimpleSkinsMap = skins => {\n    const res = {};\n    for (const skin of skins) {\n      // ignore arrays like [1, 2] with multiple skin tones\n      // also ignore variants that are in an unsupported emoji version\n      // (these do exist - variants from a different version than their base emoji)\n      if (typeof skin.tone === 'number' && skin.version <= emojiSupportLevel) {\n        res[skin.tone] = skin.unicode;\n      }\n    }\n    return res\n  };\n\n  return emojis.map(({ unicode, skins, shortcodes, url, name, category }) => ({\n    unicode,\n    name,\n    shortcodes,\n    url,\n    category,\n    id: unicode || name,\n    skins: skins && toSimpleSkinsMap(skins),\n    title: (shortcodes || []).join(', ')\n  }))\n}\n\n// import rAF from one place so that the bundle size is a bit smaller\nconst rAF = requestAnimationFrame;\n\n// Svelte action to calculate the width of an element and auto-update\n\nlet resizeObserverSupported = typeof ResizeObserver === 'function';\n\nfunction calculateWidth (node, onUpdate) {\n  let resizeObserver;\n  if (resizeObserverSupported) {\n    resizeObserver = new ResizeObserver(entries => (\n      onUpdate(entries[0].contentRect.width)\n    ));\n    resizeObserver.observe(node);\n  } else { // just set the width once, don't bother trying to track it\n    rAF(() => (\n      onUpdate(node.getBoundingClientRect().width)\n    ));\n  }\n\n  // cleanup function (called on destroy)\n  return {\n    destroy () {\n      if (resizeObserver) {\n        resizeObserver.disconnect();\n      }\n    }\n  }\n}\n\n// get the width of the text inside of a DOM node, via https://stackoverflow.com/a/59525891/680742\nfunction calculateTextWidth (node) {\n  /* istanbul ignore else */\n  {\n    const range = document.createRange();\n    range.selectNode(node.firstChild);\n    return range.getBoundingClientRect().width\n  }\n}\n\nlet baselineEmojiWidth;\n\nfunction checkZwjSupport (zwjEmojisToCheck, baselineEmoji, emojiToDomNode) {\n  for (const emoji of zwjEmojisToCheck) {\n    const domNode = emojiToDomNode(emoji);\n    const emojiWidth = calculateTextWidth(domNode);\n    if (typeof baselineEmojiWidth === 'undefined') { // calculate the baseline emoji width only once\n      baselineEmojiWidth = calculateTextWidth(baselineEmoji);\n    }\n    // On Windows, some supported emoji are ~50% bigger than the baseline emoji, but what we really want to guard\n    // against are the ones that are 2x the size, because those are truly broken (person with red hair = person with\n    // floating red wig, black cat = cat with black square, polar bear = bear with snowflake, etc.)\n    // So here we set the threshold at 1.8 times the size of the baseline emoji.\n    const supported = emojiWidth / 1.8 < baselineEmojiWidth;\n    supportedZwjEmojis.set(emoji.unicode, supported);\n  }\n}\n\n// Measure after style/layout are complete\n\nconst requestPostAnimationFrame = callback => {\n  rAF(() => {\n    setTimeout(callback);\n  });\n};\n\n// like lodash's uniq\n\nfunction uniq (arr) {\n  return uniqBy(arr, _ => _)\n}\n\n/* src/picker/components/Picker/Picker.svelte generated by Svelte v3.46.4 */\n\nconst { Map: Map_1 } = globals;\n\nfunction get_each_context(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[63] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_1(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[66] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_2(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[63] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\nfunction get_each_context_3(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[69] = list[i];\n\treturn child_ctx;\n}\n\nfunction get_each_context_4(ctx, list, i) {\n\tconst child_ctx = ctx.slice();\n\tchild_ctx[72] = list[i];\n\tchild_ctx[65] = i;\n\treturn child_ctx;\n}\n\n// (44:38) {#each skinTones as skinTone, i (skinTone)}\nfunction create_each_block_4(key_1, ctx) {\n\tlet div;\n\tlet t_value = /*skinTone*/ ctx[72] + \"\";\n\tlet t;\n\tlet div_id_value;\n\tlet div_class_value;\n\tlet div_aria_selected_value;\n\tlet div_title_value;\n\tlet div_aria_label_value;\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tdiv = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tattr(div, \"id\", div_id_value = \"skintone-\" + /*i*/ ctx[65]);\n\n\t\t\tattr(div, \"class\", div_class_value = \"emoji hide-focus \" + (/*i*/ ctx[65] === /*activeSkinTone*/ ctx[20]\n\t\t\t? 'active'\n\t\t\t: ''));\n\n\t\t\tattr(div, \"aria-selected\", div_aria_selected_value = /*i*/ ctx[65] === /*activeSkinTone*/ ctx[20]);\n\t\t\tattr(div, \"role\", \"option\");\n\t\t\tattr(div, \"title\", div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]]);\n\t\t\tattr(div, \"tabindex\", \"-1\");\n\t\t\tattr(div, \"aria-label\", div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]]);\n\t\t\tthis.first = div;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div, anchor);\n\t\t\tappend(div, t);\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tif (dirty[0] & /*skinTones*/ 512 && t_value !== (t_value = /*skinTone*/ ctx[72] + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*skinTones*/ 512 && div_id_value !== (div_id_value = \"skintone-\" + /*i*/ ctx[65])) {\n\t\t\t\tattr(div, \"id\", div_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 1049088 && div_class_value !== (div_class_value = \"emoji hide-focus \" + (/*i*/ ctx[65] === /*activeSkinTone*/ ctx[20]\n\t\t\t? 'active'\n\t\t\t: ''))) {\n\t\t\t\tattr(div, \"class\", div_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone*/ 1049088 && div_aria_selected_value !== (div_aria_selected_value = /*i*/ ctx[65] === /*activeSkinTone*/ ctx[20])) {\n\t\t\t\tattr(div, \"aria-selected\", div_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 513 && div_title_value !== (div_title_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]])) {\n\t\t\t\tattr(div, \"title\", div_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, skinTones*/ 513 && div_aria_label_value !== (div_aria_label_value = /*i18n*/ ctx[0].skinTones[/*i*/ ctx[65]])) {\n\t\t\t\tattr(div, \"aria-label\", div_aria_label_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div);\n\t\t}\n\t};\n}\n\n// (54:33) {#each groups as group (group.id)}\nfunction create_each_block_3(key_1, ctx) {\n\tlet button;\n\tlet div;\n\tlet t_value = /*group*/ ctx[69].emoji + \"\";\n\tlet t;\n\tlet button_aria_controls_value;\n\tlet button_aria_label_value;\n\tlet button_aria_selected_value;\n\tlet button_title_value;\n\tlet mounted;\n\tlet dispose;\n\n\tfunction click_handler() {\n\t\treturn /*click_handler*/ ctx[49](/*group*/ ctx[69]);\n\t}\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tdiv = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tattr(div, \"class\", \"nav-emoji emoji\");\n\t\t\tattr(button, \"role\", \"tab\");\n\t\t\tattr(button, \"class\", \"nav-button\");\n\t\t\tattr(button, \"aria-controls\", button_aria_controls_value = \"tab-\" + /*group*/ ctx[69].id);\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name]);\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = !/*searchMode*/ ctx[4] && /*currentGroup*/ ctx[13].id === /*group*/ ctx[69].id);\n\t\t\tattr(button, \"title\", button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name]);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tappend(button, div);\n\t\t\tappend(div, t);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = listen(button, \"click\", click_handler);\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\t\t\tif (dirty[0] & /*groups*/ 4096 && t_value !== (t_value = /*group*/ ctx[69].emoji + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*groups*/ 4096 && button_aria_controls_value !== (button_aria_controls_value = \"tab-\" + /*group*/ ctx[69].id)) {\n\t\t\t\tattr(button, \"aria-controls\", button_aria_controls_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4097 && button_aria_label_value !== (button_aria_label_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name])) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentGroup, groups*/ 12304 && button_aria_selected_value !== (button_aria_selected_value = !/*searchMode*/ ctx[4] && /*currentGroup*/ ctx[13].id === /*group*/ ctx[69].id)) {\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n, groups*/ 4097 && button_title_value !== (button_title_value = /*i18n*/ ctx[0].categories[/*group*/ ctx[69].name])) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tmounted = false;\n\t\t\tdispose();\n\t\t}\n\t};\n}\n\n// (94:100) {:else}\nfunction create_else_block_1(ctx) {\n\tlet img;\n\tlet img_src_value;\n\n\treturn {\n\t\tc() {\n\t\t\timg = element(\"img\");\n\t\t\tattr(img, \"class\", \"custom-emoji\");\n\t\t\tif (!src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) attr(img, \"src\", img_src_value);\n\t\t\tattr(img, \"alt\", \"\");\n\t\t\tattr(img, \"loading\", \"lazy\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, img, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && !src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) {\n\t\t\t\tattr(img, \"src\", img_src_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(img);\n\t\t}\n\t};\n}\n\n// (94:40) {#if emoji.unicode}\nfunction create_if_block_1(ctx) {\n\tlet t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\";\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(t_value);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 33024 && t_value !== (t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\")) set_data(t, t_value);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(t);\n\t\t}\n\t};\n}\n\n// (89:53) {#each emojiWithCategory.emojis as emoji, i (emoji.id)}\nfunction create_each_block_2(key_1, ctx) {\n\tlet button;\n\tlet button_role_value;\n\tlet button_aria_selected_value;\n\tlet button_aria_label_value;\n\tlet button_title_value;\n\tlet button_class_value;\n\tlet button_id_value;\n\n\tfunction select_block_type(ctx, dirty) {\n\t\tif (/*emoji*/ ctx[63].unicode) return create_if_block_1;\n\t\treturn create_else_block_1;\n\t}\n\n\tlet current_block_type = select_block_type(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"role\", button_role_value = /*searchMode*/ ctx[4] ? 'option' : 'menuitem');\n\n\t\t\tattr(button, \"aria-selected\", button_aria_selected_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i*/ ctx[65] == /*activeSearchItem*/ ctx[5]\n\t\t\t: '');\n\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]));\n\t\t\tattr(button, \"title\", button_title_value = /*emoji*/ ctx[63].title);\n\n\t\t\tattr(button, \"class\", button_class_value = \"emoji \" + (/*searchMode*/ ctx[4] && /*i*/ ctx[65] === /*activeSearchItem*/ ctx[5]\n\t\t\t? 'active'\n\t\t\t: ''));\n\n\t\t\tattr(button, \"id\", button_id_value = \"emo-\" + /*emoji*/ ctx[63].id);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (current_block_type === (current_block_type = select_block_type(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && button_role_value !== (button_role_value = /*searchMode*/ ctx[4] ? 'option' : 'menuitem')) {\n\t\t\t\tattr(button, \"role\", button_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 32816 && button_aria_selected_value !== (button_aria_selected_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i*/ ctx[65] == /*activeSearchItem*/ ctx[5]\n\t\t\t: '')) {\n\t\t\t\tattr(button, \"aria-selected\", button_aria_selected_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories, currentSkinTone*/ 33024 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]))) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && button_title_value !== (button_title_value = /*emoji*/ ctx[63].title)) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem*/ 32816 && button_class_value !== (button_class_value = \"emoji \" + (/*searchMode*/ ctx[4] && /*i*/ ctx[65] === /*activeSearchItem*/ ctx[5]\n\t\t\t? 'active'\n\t\t\t: ''))) {\n\t\t\t\tattr(button, \"class\", button_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && button_id_value !== (button_id_value = \"emo-\" + /*emoji*/ ctx[63].id)) {\n\t\t\t\tattr(button, \"id\", button_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\n// (70:36) {#each currentEmojisWithCategories as emojiWithCategory, i (emojiWithCategory.category)}\nfunction create_each_block_1(key_1, ctx) {\n\tlet div0;\n\n\tlet t_value = (/*searchMode*/ ctx[4]\n\t? /*i18n*/ ctx[0].searchResultsLabel\n\t: /*emojiWithCategory*/ ctx[66].category\n\t\t? /*emojiWithCategory*/ ctx[66].category\n\t\t: /*currentEmojisWithCategories*/ ctx[15].length > 1\n\t\t\t? /*i18n*/ ctx[0].categories.custom\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]) + \"\";\n\n\tlet t;\n\tlet div0_id_value;\n\tlet div0_class_value;\n\tlet div1;\n\tlet each_blocks = [];\n\tlet each_1_lookup = new Map_1();\n\tlet div1_role_value;\n\tlet div1_aria_labelledby_value;\n\tlet div1_id_value;\n\tlet each_value_2 = /*emojiWithCategory*/ ctx[66].emojis;\n\tconst get_key = ctx => /*emoji*/ ctx[63].id;\n\n\tfor (let i = 0; i < each_value_2.length; i += 1) {\n\t\tlet child_ctx = get_each_context_2(ctx, each_value_2, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach_1_lookup.set(key, each_blocks[i] = create_each_block_2(key, child_ctx));\n\t}\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tdiv0 = element(\"div\");\n\t\t\tt = text(t_value);\n\t\t\tdiv1 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tattr(div0, \"id\", div0_id_value = \"menu-label-\" + /*i*/ ctx[65]);\n\n\t\t\tattr(div0, \"class\", div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[15].length === 1 && /*currentEmojisWithCategories*/ ctx[15][0].category === ''\n\t\t\t? 'gone'\n\t\t\t: ''));\n\n\t\t\tattr(div0, \"aria-hidden\", \"true\");\n\t\t\tattr(div1, \"class\", \"emoji-menu\");\n\t\t\tattr(div1, \"role\", div1_role_value = /*searchMode*/ ctx[4] ? 'listbox' : 'menu');\n\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[65]);\n\t\t\tattr(div1, \"id\", div1_id_value = /*searchMode*/ ctx[4] ? 'search-results' : '');\n\t\t\tthis.first = div0;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, div0, anchor);\n\t\t\tappend(div0, t);\n\t\t\tinsert(target, div1, anchor);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].m(div1, null);\n\t\t\t}\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentEmojisWithCategories, currentGroup*/ 40977 && t_value !== (t_value = (/*searchMode*/ ctx[4]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*emojiWithCategory*/ ctx[66].category\n\t\t\t\t? /*emojiWithCategory*/ ctx[66].category\n\t\t\t\t: /*currentEmojisWithCategories*/ ctx[15].length > 1\n\t\t\t\t\t? /*i18n*/ ctx[0].categories.custom\n\t\t\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]) + \"\")) set_data(t, t_value);\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div0_id_value !== (div0_id_value = \"menu-label-\" + /*i*/ ctx[65])) {\n\t\t\t\tattr(div0, \"id\", div0_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div0_class_value !== (div0_class_value = \"category \" + (/*currentEmojisWithCategories*/ ctx[15].length === 1 && /*currentEmojisWithCategories*/ ctx[15][0].category === ''\n\t\t\t? 'gone'\n\t\t\t: ''))) {\n\t\t\t\tattr(div0, \"class\", div0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, unicodeWithSkin*/ 402686256) {\n\t\t\t\teach_value_2 = /*emojiWithCategory*/ ctx[66].emojis;\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key, 1, ctx, each_value_2, each_1_lookup, div1, destroy_block, create_each_block_2, null, get_each_context_2);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div1_role_value !== (div1_role_value = /*searchMode*/ ctx[4] ? 'listbox' : 'menu')) {\n\t\t\t\tattr(div1, \"role\", div1_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentEmojisWithCategories*/ 32768 && div1_aria_labelledby_value !== (div1_aria_labelledby_value = \"menu-label-\" + /*i*/ ctx[65])) {\n\t\t\t\tattr(div1, \"aria-labelledby\", div1_aria_labelledby_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div1_id_value !== (div1_id_value = /*searchMode*/ ctx[4] ? 'search-results' : '')) {\n\t\t\t\tattr(div1, \"id\", div1_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(div0);\n\t\t\tif (detaching) detach(div1);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\t\t}\n\t};\n}\n\n// (103:94) {:else}\nfunction create_else_block(ctx) {\n\tlet img;\n\tlet img_src_value;\n\n\treturn {\n\t\tc() {\n\t\t\timg = element(\"img\");\n\t\t\tattr(img, \"class\", \"custom-emoji\");\n\t\t\tif (!src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) attr(img, \"src\", img_src_value);\n\t\t\tattr(img, \"alt\", \"\");\n\t\t\tattr(img, \"loading\", \"lazy\");\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, img, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && !src_url_equal(img.src, img_src_value = /*emoji*/ ctx[63].url)) {\n\t\t\t\tattr(img, \"src\", img_src_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(img);\n\t\t}\n\t};\n}\n\n// (103:34) {#if emoji.unicode}\nfunction create_if_block(ctx) {\n\tlet t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\";\n\tlet t;\n\n\treturn {\n\t\tc() {\n\t\t\tt = text(t_value);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, t, anchor);\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1280 && t_value !== (t_value = /*unicodeWithSkin*/ ctx[27](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]) + \"\")) set_data(t, t_value);\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(t);\n\t\t}\n\t};\n}\n\n// (99:102) {#each currentFavorites as emoji, i (emoji.id)}\nfunction create_each_block(key_1, ctx) {\n\tlet button;\n\tlet button_aria_label_value;\n\tlet button_title_value;\n\tlet button_id_value;\n\n\tfunction select_block_type_1(ctx, dirty) {\n\t\tif (/*emoji*/ ctx[63].unicode) return create_if_block;\n\t\treturn create_else_block;\n\t}\n\n\tlet current_block_type = select_block_type_1(ctx);\n\tlet if_block = current_block_type(ctx);\n\n\treturn {\n\t\tkey: key_1,\n\t\tfirst: null,\n\t\tc() {\n\t\t\tbutton = element(\"button\");\n\t\t\tif_block.c();\n\t\t\tattr(button, \"role\", \"menuitem\");\n\t\t\tattr(button, \"aria-label\", button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]));\n\t\t\tattr(button, \"title\", button_title_value = /*emoji*/ ctx[63].title);\n\t\t\tattr(button, \"class\", \"emoji\");\n\t\t\tattr(button, \"id\", button_id_value = \"fav-\" + /*emoji*/ ctx[63].id);\n\t\t\tthis.first = button;\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, button, anchor);\n\t\t\tif_block.m(button, null);\n\t\t},\n\t\tp(new_ctx, dirty) {\n\t\t\tctx = new_ctx;\n\n\t\t\tif (current_block_type === (current_block_type = select_block_type_1(ctx)) && if_block) {\n\t\t\t\tif_block.p(ctx, dirty);\n\t\t\t} else {\n\t\t\t\tif_block.d(1);\n\t\t\t\tif_block = current_block_type(ctx);\n\n\t\t\t\tif (if_block) {\n\t\t\t\t\tif_block.c();\n\t\t\t\t\tif_block.m(button, null);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites, currentSkinTone*/ 1280 && button_aria_label_value !== (button_aria_label_value = /*labelWithSkin*/ ctx[28](/*emoji*/ ctx[63], /*currentSkinTone*/ ctx[8]))) {\n\t\t\t\tattr(button, \"aria-label\", button_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && button_title_value !== (button_title_value = /*emoji*/ ctx[63].title)) {\n\t\t\t\tattr(button, \"title\", button_title_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*currentFavorites*/ 1024 && button_id_value !== (button_id_value = \"fav-\" + /*emoji*/ ctx[63].id)) {\n\t\t\t\tattr(button, \"id\", button_id_value);\n\t\t\t}\n\t\t},\n\t\td(detaching) {\n\t\t\tif (detaching) detach(button);\n\t\t\tif_block.d();\n\t\t}\n\t};\n}\n\nfunction create_fragment(ctx) {\n\tlet section;\n\tlet div0;\n\tlet div4;\n\tlet div1;\n\tlet input;\n\tlet input_placeholder_value;\n\tlet input_aria_expanded_value;\n\tlet input_aria_activedescendant_value;\n\tlet label;\n\tlet t0_value = /*i18n*/ ctx[0].searchLabel + \"\";\n\tlet t0;\n\tlet span0;\n\tlet t1_value = /*i18n*/ ctx[0].searchDescription + \"\";\n\tlet t1;\n\tlet div2;\n\tlet button0;\n\tlet t2;\n\tlet button0_class_value;\n\tlet div2_class_value;\n\tlet span1;\n\tlet t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\";\n\tlet t3;\n\tlet div3;\n\tlet each_blocks_3 = [];\n\tlet each0_lookup = new Map_1();\n\tlet div3_class_value;\n\tlet div3_aria_label_value;\n\tlet div3_aria_activedescendant_value;\n\tlet div3_aria_hidden_value;\n\tlet div5;\n\tlet each_blocks_2 = [];\n\tlet each1_lookup = new Map_1();\n\tlet div5_aria_label_value;\n\tlet div7;\n\tlet div6;\n\tlet div8;\n\tlet t4;\n\tlet div8_class_value;\n\tlet div10;\n\tlet div9;\n\tlet each_blocks_1 = [];\n\tlet each2_lookup = new Map_1();\n\tlet div10_class_value;\n\tlet div10_role_value;\n\tlet div10_aria_label_value;\n\tlet div10_id_value;\n\tlet div11;\n\tlet each_blocks = [];\n\tlet each3_lookup = new Map_1();\n\tlet div11_class_value;\n\tlet div11_aria_label_value;\n\tlet button1;\n\tlet section_aria_label_value;\n\tlet mounted;\n\tlet dispose;\n\tlet each_value_4 = /*skinTones*/ ctx[9];\n\tconst get_key = ctx => /*skinTone*/ ctx[72];\n\n\tfor (let i = 0; i < each_value_4.length; i += 1) {\n\t\tlet child_ctx = get_each_context_4(ctx, each_value_4, i);\n\t\tlet key = get_key(child_ctx);\n\t\teach0_lookup.set(key, each_blocks_3[i] = create_each_block_4(key, child_ctx));\n\t}\n\n\tlet each_value_3 = /*groups*/ ctx[12];\n\tconst get_key_1 = ctx => /*group*/ ctx[69].id;\n\n\tfor (let i = 0; i < each_value_3.length; i += 1) {\n\t\tlet child_ctx = get_each_context_3(ctx, each_value_3, i);\n\t\tlet key = get_key_1(child_ctx);\n\t\teach1_lookup.set(key, each_blocks_2[i] = create_each_block_3(key, child_ctx));\n\t}\n\n\tlet each_value_1 = /*currentEmojisWithCategories*/ ctx[15];\n\tconst get_key_2 = ctx => /*emojiWithCategory*/ ctx[66].category;\n\n\tfor (let i = 0; i < each_value_1.length; i += 1) {\n\t\tlet child_ctx = get_each_context_1(ctx, each_value_1, i);\n\t\tlet key = get_key_2(child_ctx);\n\t\teach2_lookup.set(key, each_blocks_1[i] = create_each_block_1(key, child_ctx));\n\t}\n\n\tlet each_value = /*currentFavorites*/ ctx[10];\n\tconst get_key_3 = ctx => /*emoji*/ ctx[63].id;\n\n\tfor (let i = 0; i < each_value.length; i += 1) {\n\t\tlet child_ctx = get_each_context(ctx, each_value, i);\n\t\tlet key = get_key_3(child_ctx);\n\t\teach3_lookup.set(key, each_blocks[i] = create_each_block(key, child_ctx));\n\t}\n\n\treturn {\n\t\tc() {\n\t\t\tsection = element(\"section\");\n\t\t\tdiv0 = element(\"div\");\n\t\t\tdiv4 = element(\"div\");\n\t\t\tdiv1 = element(\"div\");\n\t\t\tinput = element(\"input\");\n\t\t\tlabel = element(\"label\");\n\t\t\tt0 = text(t0_value);\n\t\t\tspan0 = element(\"span\");\n\t\t\tt1 = text(t1_value);\n\t\t\tdiv2 = element(\"div\");\n\t\t\tbutton0 = element(\"button\");\n\t\t\tt2 = text(/*skinToneButtonText*/ ctx[21]);\n\t\t\tspan1 = element(\"span\");\n\t\t\tt3 = text(t3_value);\n\t\t\tdiv3 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].c();\n\t\t\t}\n\n\t\t\tdiv5 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].c();\n\t\t\t}\n\n\t\t\tdiv7 = element(\"div\");\n\t\t\tdiv6 = element(\"div\");\n\t\t\tdiv8 = element(\"div\");\n\t\t\tt4 = text(/*message*/ ctx[18]);\n\t\t\tdiv10 = element(\"div\");\n\t\t\tdiv9 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].c();\n\t\t\t}\n\n\t\t\tdiv11 = element(\"div\");\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].c();\n\t\t\t}\n\n\t\t\tbutton1 = element(\"button\");\n\t\t\tbutton1.textContent = \"😀\";\n\t\t\tattr(div0, \"class\", \"pad-top\");\n\t\t\tattr(input, \"id\", \"search\");\n\t\t\tattr(input, \"class\", \"search\");\n\t\t\tattr(input, \"type\", \"search\");\n\t\t\tattr(input, \"role\", \"combobox\");\n\t\t\tattr(input, \"enterkeyhint\", \"search\");\n\t\t\tattr(input, \"placeholder\", input_placeholder_value = /*i18n*/ ctx[0].searchLabel);\n\t\t\tattr(input, \"autocapitalize\", \"none\");\n\t\t\tattr(input, \"autocomplete\", \"off\");\n\t\t\tattr(input, \"spellcheck\", \"true\");\n\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value = !!(/*searchMode*/ ctx[4] && /*currentEmojis*/ ctx[1].length));\n\t\t\tattr(input, \"aria-controls\", \"search-results\");\n\t\t\tattr(input, \"aria-owns\", \"search-results\");\n\t\t\tattr(input, \"aria-describedby\", \"search-description\");\n\t\t\tattr(input, \"aria-autocomplete\", \"list\");\n\n\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[26]\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[26]}`\n\t\t\t: '');\n\n\t\t\tattr(label, \"class\", \"sr-only\");\n\t\t\tattr(label, \"for\", \"search\");\n\t\t\tattr(span0, \"id\", \"search-description\");\n\t\t\tattr(span0, \"class\", \"sr-only\");\n\t\t\tattr(div1, \"class\", \"search-wrapper\");\n\t\t\tattr(button0, \"id\", \"skintone-button\");\n\t\t\tattr(button0, \"class\", button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[6] ? 'hide-focus' : ''));\n\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\tattr(button0, \"aria-describedby\", \"skintone-description\");\n\t\t\tattr(button0, \"aria-haspopup\", \"listbox\");\n\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[6]);\n\t\t\tattr(button0, \"aria-controls\", \"skintone-list\");\n\n\t\t\tattr(div2, \"class\", div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[19]\n\t\t\t? 'expanded'\n\t\t\t: ''));\n\n\t\t\tattr(span1, \"id\", \"skintone-description\");\n\t\t\tattr(span1, \"class\", \"sr-only\");\n\t\t\tattr(div3, \"id\", \"skintone-list\");\n\n\t\t\tattr(div3, \"class\", div3_class_value = \"skintone-list \" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t? ''\n\t\t\t: 'hidden no-animate'));\n\n\t\t\tset_style(div3, \"transform\", \"translateY(\" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t? 0\n\t\t\t: 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\n\n\t\t\tattr(div3, \"role\", \"listbox\");\n\t\t\tattr(div3, \"aria-label\", div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel);\n\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[20]);\n\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[6]);\n\t\t\tattr(div4, \"class\", \"search-row\");\n\t\t\tattr(div5, \"class\", \"nav\");\n\t\t\tattr(div5, \"role\", \"tablist\");\n\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[12].length + \", 1fr)\");\n\t\t\tattr(div5, \"aria-label\", div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel);\n\t\t\tattr(div6, \"class\", \"indicator\");\n\t\t\tset_style(div6, \"transform\", \"translateX(\" + (/*isRtl*/ ctx[24] ? -1 : 1) * /*currentGroupIndex*/ ctx[11] * 100 + \"%)\");\n\t\t\tattr(div7, \"class\", \"indicator-wrapper\");\n\t\t\tattr(div8, \"class\", div8_class_value = \"message \" + (/*message*/ ctx[18] ? '' : 'gone'));\n\t\t\tattr(div8, \"role\", \"alert\");\n\t\t\tattr(div8, \"aria-live\", \"polite\");\n\n\t\t\tattr(div10, \"class\", div10_class_value = \"tabpanel \" + (!/*databaseLoaded*/ ctx[14] || /*message*/ ctx[18]\n\t\t\t? 'gone'\n\t\t\t: ''));\n\n\t\t\tattr(div10, \"role\", div10_role_value = /*searchMode*/ ctx[4] ? 'region' : 'tabpanel');\n\n\t\t\tattr(div10, \"aria-label\", div10_aria_label_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name]);\n\n\t\t\tattr(div10, \"id\", div10_id_value = /*searchMode*/ ctx[4]\n\t\t\t? ''\n\t\t\t: `tab-${/*currentGroup*/ ctx[13].id}`);\n\n\t\t\tattr(div10, \"tabindex\", \"0\");\n\t\t\tattr(div11, \"class\", div11_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[18] ? 'gone' : ''));\n\t\t\tattr(div11, \"role\", \"menu\");\n\t\t\tattr(div11, \"aria-label\", div11_aria_label_value = /*i18n*/ ctx[0].favoritesLabel);\n\t\t\tset_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ ctx[25] + \"px\");\n\t\t\tattr(button1, \"aria-hidden\", \"true\");\n\t\t\tattr(button1, \"tabindex\", \"-1\");\n\t\t\tattr(button1, \"class\", \"abs-pos hidden emoji\");\n\t\t\tattr(section, \"class\", \"picker\");\n\t\t\tattr(section, \"aria-label\", section_aria_label_value = /*i18n*/ ctx[0].regionLabel);\n\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[22]);\n\t\t},\n\t\tm(target, anchor) {\n\t\t\tinsert(target, section, anchor);\n\t\t\tappend(section, div0);\n\t\t\tappend(section, div4);\n\t\t\tappend(div4, div1);\n\t\t\tappend(div1, input);\n\t\t\tset_input_value(input, /*rawSearchText*/ ctx[2]);\n\t\t\tappend(div1, label);\n\t\t\tappend(label, t0);\n\t\t\tappend(div1, span0);\n\t\t\tappend(span0, t1);\n\t\t\tappend(div4, div2);\n\t\t\tappend(div2, button0);\n\t\t\tappend(button0, t2);\n\t\t\tappend(div4, span1);\n\t\t\tappend(span1, t3);\n\t\t\tappend(div4, div3);\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].m(div3, null);\n\t\t\t}\n\n\t\t\t/*div3_binding*/ ctx[48](div3);\n\t\t\tappend(section, div5);\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].m(div5, null);\n\t\t\t}\n\n\t\t\tappend(section, div7);\n\t\t\tappend(div7, div6);\n\t\t\tappend(section, div8);\n\t\t\tappend(div8, t4);\n\t\t\tappend(section, div10);\n\t\t\tappend(div10, div9);\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].m(div9, null);\n\t\t\t}\n\n\t\t\t/*div10_binding*/ ctx[50](div10);\n\t\t\tappend(section, div11);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].m(div11, null);\n\t\t\t}\n\n\t\t\tappend(section, button1);\n\t\t\t/*button1_binding*/ ctx[51](button1);\n\t\t\t/*section_binding*/ ctx[52](section);\n\n\t\t\tif (!mounted) {\n\t\t\t\tdispose = [\n\t\t\t\t\tlisten(input, \"input\", /*input_input_handler*/ ctx[47]),\n\t\t\t\t\tlisten(input, \"keydown\", /*onSearchKeydown*/ ctx[30]),\n\t\t\t\t\tlisten(button0, \"click\", /*onClickSkinToneButton*/ ctx[35]),\n\t\t\t\t\tlisten(div3, \"focusout\", /*onSkinToneOptionsFocusOut*/ ctx[38]),\n\t\t\t\t\tlisten(div3, \"click\", /*onSkinToneOptionsClick*/ ctx[34]),\n\t\t\t\t\tlisten(div3, \"keydown\", /*onSkinToneOptionsKeydown*/ ctx[36]),\n\t\t\t\t\tlisten(div3, \"keyup\", /*onSkinToneOptionsKeyup*/ ctx[37]),\n\t\t\t\t\tlisten(div5, \"keydown\", /*onNavKeydown*/ ctx[32]),\n\t\t\t\t\taction_destroyer(/*calculateEmojiGridStyle*/ ctx[29].call(null, div9)),\n\t\t\t\t\tlisten(div10, \"click\", /*onEmojiClick*/ ctx[33]),\n\t\t\t\t\tlisten(div11, \"click\", /*onEmojiClick*/ ctx[33])\n\t\t\t\t];\n\n\t\t\t\tmounted = true;\n\t\t\t}\n\t\t},\n\t\tp(ctx, dirty) {\n\t\t\tif (dirty[0] & /*i18n*/ 1 && input_placeholder_value !== (input_placeholder_value = /*i18n*/ ctx[0].searchLabel)) {\n\t\t\t\tattr(input, \"placeholder\", input_placeholder_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojis*/ 18 && input_aria_expanded_value !== (input_aria_expanded_value = !!(/*searchMode*/ ctx[4] && /*currentEmojis*/ ctx[1].length))) {\n\t\t\t\tattr(input, \"aria-expanded\", input_aria_expanded_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*activeSearchItemId*/ 67108864 && input_aria_activedescendant_value !== (input_aria_activedescendant_value = /*activeSearchItemId*/ ctx[26]\n\t\t\t? `emo-${/*activeSearchItemId*/ ctx[26]}`\n\t\t\t: '')) {\n\t\t\t\tattr(input, \"aria-activedescendant\", input_aria_activedescendant_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*rawSearchText*/ 4) {\n\t\t\t\tset_input_value(input, /*rawSearchText*/ ctx[2]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t0_value !== (t0_value = /*i18n*/ ctx[0].searchLabel + \"\")) set_data(t0, t0_value);\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t1_value !== (t1_value = /*i18n*/ ctx[0].searchDescription + \"\")) set_data(t1, t1_value);\n\t\t\tif (dirty[0] & /*skinToneButtonText*/ 2097152) set_data(t2, /*skinToneButtonText*/ ctx[21]);\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && button0_class_value !== (button0_class_value = \"emoji \" + (/*skinTonePickerExpanded*/ ctx[6] ? 'hide-focus' : ''))) {\n\t\t\t\tattr(button0, \"class\", button0_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 8388608) {\n\t\t\t\tattr(button0, \"aria-label\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinToneButtonLabel*/ 8388608) {\n\t\t\t\tattr(button0, \"title\", /*skinToneButtonLabel*/ ctx[23]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64) {\n\t\t\t\tattr(button0, \"aria-expanded\", /*skinTonePickerExpanded*/ ctx[6]);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpandedAfterAnimation*/ 524288 && div2_class_value !== (div2_class_value = \"skintone-button-wrapper \" + (/*skinTonePickerExpandedAfterAnimation*/ ctx[19]\n\t\t\t? 'expanded'\n\t\t\t: ''))) {\n\t\t\t\tattr(div2, \"class\", div2_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && t3_value !== (t3_value = /*i18n*/ ctx[0].skinToneDescription + \"\")) set_data(t3, t3_value);\n\n\t\t\tif (dirty[0] & /*skinTones, activeSkinTone, i18n*/ 1049089) {\n\t\t\t\teach_value_4 = /*skinTones*/ ctx[9];\n\t\t\t\teach_blocks_3 = update_keyed_each(each_blocks_3, dirty, get_key, 1, ctx, each_value_4, each0_lookup, div3, destroy_block, create_each_block_4, null, get_each_context_4);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && div3_class_value !== (div3_class_value = \"skintone-list \" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t? ''\n\t\t\t: 'hidden no-animate'))) {\n\t\t\t\tattr(div3, \"class\", div3_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64) {\n\t\t\t\tset_style(div3, \"transform\", \"translateY(\" + (/*skinTonePickerExpanded*/ ctx[6]\n\t\t\t\t? 0\n\t\t\t\t: 'calc(-1 * var(--num-skintones) * var(--total-emoji-size))') + \")\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div3_aria_label_value !== (div3_aria_label_value = /*i18n*/ ctx[0].skinTonesLabel)) {\n\t\t\t\tattr(div3, \"aria-label\", div3_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*activeSkinTone*/ 1048576 && div3_aria_activedescendant_value !== (div3_aria_activedescendant_value = \"skintone-\" + /*activeSkinTone*/ ctx[20])) {\n\t\t\t\tattr(div3, \"aria-activedescendant\", div3_aria_activedescendant_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*skinTonePickerExpanded*/ 64 && div3_aria_hidden_value !== (div3_aria_hidden_value = !/*skinTonePickerExpanded*/ ctx[6])) {\n\t\t\t\tattr(div3, \"aria-hidden\", div3_aria_hidden_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*groups, i18n, searchMode, currentGroup*/ 12305 | dirty[1] & /*onNavClick*/ 1) {\n\t\t\t\teach_value_3 = /*groups*/ ctx[12];\n\t\t\t\teach_blocks_2 = update_keyed_each(each_blocks_2, dirty, get_key_1, 1, ctx, each_value_3, each1_lookup, div5, destroy_block, create_each_block_3, null, get_each_context_3);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*groups*/ 4096) {\n\t\t\t\tset_style(div5, \"grid-template-columns\", \"repeat(\" + /*groups*/ ctx[12].length + \", 1fr)\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div5_aria_label_value !== (div5_aria_label_value = /*i18n*/ ctx[0].categoriesLabel)) {\n\t\t\t\tattr(div5, \"aria-label\", div5_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*isRtl, currentGroupIndex*/ 16779264) {\n\t\t\t\tset_style(div6, \"transform\", \"translateX(\" + (/*isRtl*/ ctx[24] ? -1 : 1) * /*currentGroupIndex*/ ctx[11] * 100 + \"%)\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*message*/ 262144) set_data(t4, /*message*/ ctx[18]);\n\n\t\t\tif (dirty[0] & /*message*/ 262144 && div8_class_value !== (div8_class_value = \"message \" + (/*message*/ ctx[18] ? '' : 'gone'))) {\n\t\t\t\tattr(div8, \"class\", div8_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentEmojisWithCategories, activeSearchItem, labelWithSkin, currentSkinTone, unicodeWithSkin, i18n, currentGroup*/ 402694449) {\n\t\t\t\teach_value_1 = /*currentEmojisWithCategories*/ ctx[15];\n\t\t\t\teach_blocks_1 = update_keyed_each(each_blocks_1, dirty, get_key_2, 1, ctx, each_value_1, each2_lookup, div9, destroy_block, create_each_block_1, null, get_each_context_1);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*databaseLoaded, message*/ 278528 && div10_class_value !== (div10_class_value = \"tabpanel \" + (!/*databaseLoaded*/ ctx[14] || /*message*/ ctx[18]\n\t\t\t? 'gone'\n\t\t\t: ''))) {\n\t\t\t\tattr(div10, \"class\", div10_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode*/ 16 && div10_role_value !== (div10_role_value = /*searchMode*/ ctx[4] ? 'region' : 'tabpanel')) {\n\t\t\t\tattr(div10, \"role\", div10_role_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, i18n, currentGroup*/ 8209 && div10_aria_label_value !== (div10_aria_label_value = /*searchMode*/ ctx[4]\n\t\t\t? /*i18n*/ ctx[0].searchResultsLabel\n\t\t\t: /*i18n*/ ctx[0].categories[/*currentGroup*/ ctx[13].name])) {\n\t\t\t\tattr(div10, \"aria-label\", div10_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*searchMode, currentGroup*/ 8208 && div10_id_value !== (div10_id_value = /*searchMode*/ ctx[4]\n\t\t\t? ''\n\t\t\t: `tab-${/*currentGroup*/ ctx[13].id}`)) {\n\t\t\t\tattr(div10, \"id\", div10_id_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*labelWithSkin, currentFavorites, currentSkinTone, unicodeWithSkin*/ 402654464) {\n\t\t\t\teach_value = /*currentFavorites*/ ctx[10];\n\t\t\t\teach_blocks = update_keyed_each(each_blocks, dirty, get_key_3, 1, ctx, each_value, each3_lookup, div11, destroy_block, create_each_block, null, get_each_context);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*message*/ 262144 && div11_class_value !== (div11_class_value = \"favorites emoji-menu \" + (/*message*/ ctx[18] ? 'gone' : ''))) {\n\t\t\t\tattr(div11, \"class\", div11_class_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && div11_aria_label_value !== (div11_aria_label_value = /*i18n*/ ctx[0].favoritesLabel)) {\n\t\t\t\tattr(div11, \"aria-label\", div11_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*scrollbarWidth*/ 33554432) {\n\t\t\t\tset_style(div11, \"padding-inline-end\", /*scrollbarWidth*/ ctx[25] + \"px\");\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*i18n*/ 1 && section_aria_label_value !== (section_aria_label_value = /*i18n*/ ctx[0].regionLabel)) {\n\t\t\t\tattr(section, \"aria-label\", section_aria_label_value);\n\t\t\t}\n\n\t\t\tif (dirty[0] & /*pickerStyle*/ 4194304) {\n\t\t\t\tattr(section, \"style\", /*pickerStyle*/ ctx[22]);\n\t\t\t}\n\t\t},\n\t\ti: noop,\n\t\to: noop,\n\t\td(detaching) {\n\t\t\tif (detaching) detach(section);\n\n\t\t\tfor (let i = 0; i < each_blocks_3.length; i += 1) {\n\t\t\t\teach_blocks_3[i].d();\n\t\t\t}\n\n\t\t\t/*div3_binding*/ ctx[48](null);\n\n\t\t\tfor (let i = 0; i < each_blocks_2.length; i += 1) {\n\t\t\t\teach_blocks_2[i].d();\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < each_blocks_1.length; i += 1) {\n\t\t\t\teach_blocks_1[i].d();\n\t\t\t}\n\n\t\t\t/*div10_binding*/ ctx[50](null);\n\n\t\t\tfor (let i = 0; i < each_blocks.length; i += 1) {\n\t\t\t\teach_blocks[i].d();\n\t\t\t}\n\n\t\t\t/*button1_binding*/ ctx[51](null);\n\t\t\t/*section_binding*/ ctx[52](null);\n\t\t\tmounted = false;\n\t\t\trun_all(dispose);\n\t\t}\n\t};\n}\n\nfunction instance($$self, $$props, $$invalidate) {\n\tlet { skinToneEmoji } = $$props;\n\tlet { i18n } = $$props;\n\tlet { database } = $$props;\n\tlet { customEmoji } = $$props;\n\tlet { customCategorySorting } = $$props;\n\n\t// private\n\tlet initialLoad = true;\n\n\tlet currentEmojis = [];\n\tlet currentEmojisWithCategories = []; // eslint-disable-line no-unused-vars\n\tlet rawSearchText = '';\n\tlet searchText = '';\n\tlet rootElement;\n\tlet baselineEmoji;\n\tlet tabpanelElement;\n\tlet searchMode = false; // eslint-disable-line no-unused-vars\n\tlet activeSearchItem = -1;\n\tlet message; // eslint-disable-line no-unused-vars\n\tlet skinTonePickerExpanded = false;\n\tlet skinTonePickerExpandedAfterAnimation = false; // eslint-disable-line no-unused-vars\n\tlet skinToneDropdown;\n\tlet currentSkinTone = 0;\n\tlet activeSkinTone = 0;\n\tlet skinToneButtonText; // eslint-disable-line no-unused-vars\n\tlet pickerStyle; // eslint-disable-line no-unused-vars\n\tlet skinToneButtonLabel = ''; // eslint-disable-line no-unused-vars\n\tlet skinTones = [];\n\tlet currentFavorites = []; // eslint-disable-line no-unused-vars\n\tlet defaultFavoriteEmojis;\n\tlet numColumns = DEFAULT_NUM_COLUMNS;\n\tlet isRtl = false;\n\tlet scrollbarWidth = 0; // eslint-disable-line no-unused-vars\n\tlet currentGroupIndex = 0;\n\tlet groups$1 = groups;\n\tlet currentGroup;\n\tlet databaseLoaded = false; // eslint-disable-line no-unused-vars\n\tlet activeSearchItemId; // eslint-disable-line no-unused-vars\n\n\t//\n\t// Utils/helpers\n\t//\n\tconst focus = id => {\n\t\trootElement.getRootNode().getElementById(id).focus();\n\t};\n\n\t// fire a custom event that crosses the shadow boundary\n\tconst fireEvent = (name, detail) => {\n\t\trootElement.dispatchEvent(new CustomEvent(name, { detail, bubbles: true, composed: true }));\n\t};\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst unicodeWithSkin = (emoji, currentSkinTone) => currentSkinTone && emoji.skins && emoji.skins[currentSkinTone] || emoji.unicode;\n\n\t// eslint-disable-next-line no-unused-vars\n\tconst labelWithSkin = (emoji, currentSkinTone) => uniq([\n\t\temoji.name || unicodeWithSkin(emoji, currentSkinTone),\n\t\t...emoji.shortcodes || []\n\t]).join(', ');\n\n\t// Detect a skintone option button\n\tconst isSkinToneOption = element => (/^skintone-/).test(element.id);\n\n\t//\n\t// Determine the emoji support level (in requestIdleCallback)\n\t//\n\temojiSupportLevelPromise.then(level => {\n\t\t// Can't actually test emoji support in Jest/JSDom, emoji never render in color in Cairo\n\t\t/* istanbul ignore next */\n\t\tif (!level) {\n\t\t\t$$invalidate(18, message = i18n.emojiUnsupportedMessage);\n\t\t}\n\t});\n\n\t//\n\t// Calculate the width of the emoji grid. This serves two purposes:\n\t// 1) Re-calculate the --num-columns var because it may have changed\n\t// 2) Re-calculate the scrollbar width because it may have changed\n\t//   (i.e. because the number of items changed)\n\t// 3) Re-calculate whether we're in RTL mode or not.\n\t//\n\t// The benefit of doing this in one place is to align with rAF/ResizeObserver\n\t// and do all the calculations in one go. RTL vs LTR is not strictly width-related,\n\t// but since we're already reading the style here, and since it's already aligned with\n\t// the rAF loop, this is the most appropriate place to do it perf-wise.\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction calculateEmojiGridStyle(node) {\n\t\treturn calculateWidth(node, width => {\n\t\t\t/* istanbul ignore next */\n\t\t\tif (\"production\" !== 'test') {\n\t\t\t\t// jsdom throws errors for this kind of fancy stuff\n\t\t\t\t// read all the style/layout calculations we need to make\n\t\t\t\tconst style = getComputedStyle(rootElement);\n\n\t\t\t\tconst newNumColumns = parseInt(style.getPropertyValue('--num-columns'), 10);\n\t\t\t\tconst newIsRtl = style.getPropertyValue('direction') === 'rtl';\n\t\t\t\tconst parentWidth = node.parentElement.getBoundingClientRect().width;\n\t\t\t\tconst newScrollbarWidth = parentWidth - width;\n\n\t\t\t\t// write to Svelte variables\n\t\t\t\t$$invalidate(46, numColumns = newNumColumns);\n\n\t\t\t\t$$invalidate(25, scrollbarWidth = newScrollbarWidth); // eslint-disable-line no-unused-vars\n\t\t\t\t$$invalidate(24, isRtl = newIsRtl); // eslint-disable-line no-unused-vars\n\t\t\t}\n\t\t});\n\t}\n\n\tfunction checkZwjSupportAndUpdate(zwjEmojisToCheck) {\n\t\tconst rootNode = rootElement.getRootNode();\n\t\tconst emojiToDomNode = emoji => rootNode.getElementById(`emo-${emoji.id}`);\n\t\tcheckZwjSupport(zwjEmojisToCheck, baselineEmoji, emojiToDomNode);\n\n\t\t// force update\n\t\t$$invalidate(1, currentEmojis = currentEmojis); // eslint-disable-line no-self-assign\n\t}\n\n\tfunction isZwjSupported(emoji) {\n\t\treturn !emoji.unicode || !hasZwj(emoji) || supportedZwjEmojis.get(emoji.unicode);\n\t}\n\n\tasync function filterEmojisByVersion(emojis) {\n\t\tconst emojiSupportLevel = await emojiSupportLevelPromise;\n\n\t\t// !version corresponds to custom emoji\n\t\treturn emojis.filter(({ version }) => !version || version <= emojiSupportLevel);\n\t}\n\n\tasync function summarizeEmojis(emojis) {\n\t\treturn summarizeEmojisForUI(emojis, await emojiSupportLevelPromise);\n\t}\n\n\tasync function getEmojisByGroup(group) {\n\n\t\tif (typeof group === 'undefined') {\n\t\t\treturn [];\n\t\t}\n\n\t\t// -1 is custom emoji\n\t\tconst emoji = group === -1\n\t\t? customEmoji\n\t\t: await database.getEmojiByGroup(group);\n\n\t\treturn summarizeEmojis(await filterEmojisByVersion(emoji));\n\t}\n\n\tasync function getEmojisBySearchQuery(query) {\n\t\treturn summarizeEmojis(await filterEmojisByVersion(await database.getEmojiBySearchQuery(query)));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSearchKeydown(event) {\n\t\tif (!searchMode || !currentEmojis.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst goToNextOrPrevious = previous => {\n\t\t\thalt(event);\n\t\t\t$$invalidate(5, activeSearchItem = incrementOrDecrement(previous, activeSearchItem, currentEmojis));\n\t\t};\n\n\t\tswitch (event.key) {\n\t\t\tcase 'ArrowDown':\n\t\t\t\treturn goToNextOrPrevious(false);\n\t\t\tcase 'ArrowUp':\n\t\t\t\treturn goToNextOrPrevious(true);\n\t\t\tcase 'Enter':\n\t\t\t\tif (activeSearchItem !== -1) {\n\t\t\t\t\thalt(event);\n\t\t\t\t\treturn clickEmoji(currentEmojis[activeSearchItem].id);\n\t\t\t\t} else if (currentEmojis.length) {\n\t\t\t\t\t$$invalidate(5, activeSearchItem = 0);\n\t\t\t\t}\n\t\t}\n\t}\n\n\t//\n\t// Handle user input on nav\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onNavClick(group) {\n\t\t$$invalidate(2, rawSearchText = '');\n\t\t$$invalidate(44, searchText = '');\n\t\t$$invalidate(5, activeSearchItem = -1);\n\t\t$$invalidate(11, currentGroupIndex = groups$1.findIndex(_ => _.id === group.id));\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onNavKeydown(event) {\n\t\tconst { target, key } = event;\n\n\t\tconst doFocus = el => {\n\t\t\tif (el) {\n\t\t\t\thalt(event);\n\t\t\t\tel.focus();\n\t\t\t}\n\t\t};\n\n\t\tswitch (key) {\n\t\t\tcase 'ArrowLeft':\n\t\t\t\treturn doFocus(target.previousSibling);\n\t\t\tcase 'ArrowRight':\n\t\t\t\treturn doFocus(target.nextSibling);\n\t\t\tcase 'Home':\n\t\t\t\treturn doFocus(target.parentElement.firstChild);\n\t\t\tcase 'End':\n\t\t\t\treturn doFocus(target.parentElement.lastChild);\n\t\t}\n\t}\n\n\t//\n\t// Handle user input on an emoji\n\t//\n\tasync function clickEmoji(unicodeOrName) {\n\t\tconst emoji = await database.getEmojiByUnicodeOrName(unicodeOrName);\n\t\tconst emojiSummary = [...currentEmojis, ...currentFavorites].find(_ => _.id === unicodeOrName);\n\t\tconst skinTonedUnicode = emojiSummary.unicode && unicodeWithSkin(emojiSummary, currentSkinTone);\n\t\tawait database.incrementFavoriteEmojiCount(unicodeOrName);\n\n\t\tfireEvent('emoji-click', {\n\t\t\temoji,\n\t\t\tskinTone: currentSkinTone,\n\t\t\t...skinTonedUnicode && { unicode: skinTonedUnicode },\n\t\t\t...emojiSummary.name && { name: emojiSummary.name }\n\t\t});\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onEmojiClick(event) {\n\t\tconst { target } = event;\n\n\t\tif (!target.classList.contains('emoji')) {\n\t\t\treturn;\n\t\t}\n\n\t\thalt(event);\n\t\tconst id = target.id.substring(4); // replace 'emo-' or 'fav-' prefix\n\n\t\t/* no await */\n\t\tclickEmoji(id);\n\t}\n\n\t//\n\t// Handle user input on the skintone picker\n\t//\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onSkinToneOptionsClick(event) {\n\t\tconst { target } = event;\n\n\t\tif (!isSkinToneOption(target)) {\n\t\t\treturn;\n\t\t}\n\n\t\thalt(event);\n\t\tconst skinTone = parseInt(target.id.slice(9), 10); // remove 'skintone-' prefix\n\t\t$$invalidate(8, currentSkinTone = skinTone);\n\t\t$$invalidate(6, skinTonePickerExpanded = false);\n\t\tfocus('skintone-button');\n\t\tfireEvent('skin-tone-change', { skinTone });\n\n\t\t/* no await */\n\t\tdatabase.setPreferredSkinTone(skinTone);\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onClickSkinToneButton(event) {\n\t\t$$invalidate(6, skinTonePickerExpanded = !skinTonePickerExpanded);\n\t\t$$invalidate(20, activeSkinTone = currentSkinTone);\n\n\t\tif (skinTonePickerExpanded) {\n\t\t\thalt(event);\n\t\t\trAF(() => focus(`skintone-${activeSkinTone}`));\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSkinToneOptionsKeydown(event) {\n\t\tif (!skinTonePickerExpanded) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst changeActiveSkinTone = async nextSkinTone => {\n\t\t\thalt(event);\n\t\t\t$$invalidate(20, activeSkinTone = nextSkinTone);\n\t\t\tawait tick();\n\t\t\tfocus(`skintone-${activeSkinTone}`);\n\t\t};\n\n\t\tswitch (event.key) {\n\t\t\tcase 'ArrowUp':\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(true, activeSkinTone, skinTones));\n\t\t\tcase 'ArrowDown':\n\t\t\t\treturn changeActiveSkinTone(incrementOrDecrement(false, activeSkinTone, skinTones));\n\t\t\tcase 'Home':\n\t\t\t\treturn changeActiveSkinTone(0);\n\t\t\tcase 'End':\n\t\t\t\treturn changeActiveSkinTone(skinTones.length - 1);\n\t\t\tcase 'Enter':\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n\t\t\t\treturn onSkinToneOptionsClick(event);\n\t\t\tcase 'Escape':\n\t\t\t\thalt(event);\n\t\t\t\t$$invalidate(6, skinTonePickerExpanded = false);\n\t\t\t\treturn focus('skintone-button');\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tfunction onSkinToneOptionsKeyup(event) {\n\t\tif (!skinTonePickerExpanded) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (event.key) {\n\t\t\tcase ' ':\n\t\t\t\t// enter on keydown, space on keyup. this is just how browsers work for buttons\n\t\t\t\t// https://lists.w3.org/Archives/Public/w3c-wai-ig/2019JanMar/0086.html\n\t\t\t\treturn onSkinToneOptionsClick(event);\n\t\t}\n\t}\n\n\t// eslint-disable-next-line no-unused-vars\n\tasync function onSkinToneOptionsFocusOut(event) {\n\t\t// On blur outside of the skintone options, collapse the skintone picker.\n\t\t// Except if focus is just moving to another skintone option, e.g. pressing up/down to change focus\n\t\tconst { relatedTarget } = event;\n\n\t\tif (!relatedTarget || !isSkinToneOption(relatedTarget)) {\n\t\t\t$$invalidate(6, skinTonePickerExpanded = false);\n\t\t}\n\t}\n\n\tfunction input_input_handler() {\n\t\trawSearchText = this.value;\n\t\t$$invalidate(2, rawSearchText);\n\t}\n\n\tfunction div3_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tskinToneDropdown = $$value;\n\t\t\t$$invalidate(7, skinToneDropdown);\n\t\t});\n\t}\n\n\tconst click_handler = group => onNavClick(group);\n\n\tfunction div10_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\ttabpanelElement = $$value;\n\t\t\t$$invalidate(3, tabpanelElement);\n\t\t});\n\t}\n\n\tfunction button1_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\tbaselineEmoji = $$value;\n\t\t\t$$invalidate(17, baselineEmoji);\n\t\t});\n\t}\n\n\tfunction section_binding($$value) {\n\t\tbinding_callbacks[$$value ? 'unshift' : 'push'](() => {\n\t\t\trootElement = $$value;\n\t\t\t$$invalidate(16, rootElement);\n\t\t});\n\t}\n\n\t$$self.$$set = $$props => {\n\t\tif ('skinToneEmoji' in $$props) $$invalidate(40, skinToneEmoji = $$props.skinToneEmoji);\n\t\tif ('i18n' in $$props) $$invalidate(0, i18n = $$props.i18n);\n\t\tif ('database' in $$props) $$invalidate(39, database = $$props.database);\n\t\tif ('customEmoji' in $$props) $$invalidate(41, customEmoji = $$props.customEmoji);\n\t\tif ('customCategorySorting' in $$props) $$invalidate(42, customCategorySorting = $$props.customCategorySorting);\n\t};\n\n\t$$self.$$.update = () => {\n\t\tif ($$self.$$.dirty[1] & /*customEmoji, database*/ 1280) {\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t//\n\t\t\t// Set or update the customEmoji\n\t\t\t//\n\t\t\t{\n\t\t\t\tif (customEmoji && database) {\n\t\t\t\t\t$$invalidate(39, database.customEmoji = customEmoji, database);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*i18n*/ 1 | $$self.$$.dirty[1] & /*database*/ 256) {\n\t\t\t//\n\t\t\t// Set or update the database object\n\t\t\t//\n\t\t\t{\n\t\t\t\t// show a Loading message if it takes a long time, or show an error if there's a network/IDB error\n\t\t\t\tasync function handleDatabaseLoading() {\n\t\t\t\t\tlet showingLoadingMessage = false;\n\n\t\t\t\t\tconst timeoutHandle = setTimeout(\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\tshowingLoadingMessage = true;\n\t\t\t\t\t\t\t$$invalidate(18, message = i18n.loadingMessage);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tTIMEOUT_BEFORE_LOADING_MESSAGE\n\t\t\t\t\t);\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tawait database.ready();\n\t\t\t\t\t\t$$invalidate(14, databaseLoaded = true); // eslint-disable-line no-unused-vars\n\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t$$invalidate(18, message = i18n.networkErrorMessage);\n\t\t\t\t\t} finally {\n\t\t\t\t\t\tclearTimeout(timeoutHandle);\n\n\t\t\t\t\t\tif (showingLoadingMessage) {\n\t\t\t\t\t\t\t// Seems safer than checking the i18n string, which may change\n\t\t\t\t\t\t\tshowingLoadingMessage = false;\n\n\t\t\t\t\t\t\t$$invalidate(18, message = ''); // eslint-disable-line no-unused-vars\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (database) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\thandleDatabaseLoading();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups*/ 4096 | $$self.$$.dirty[1] & /*customEmoji*/ 1024) {\n\t\t\t{\n\t\t\t\tif (customEmoji && customEmoji.length) {\n\t\t\t\t\t$$invalidate(12, groups$1 = [customGroup, ...groups]);\n\t\t\t\t} else if (groups$1 !== groups) {\n\t\t\t\t\t$$invalidate(12, groups$1 = groups);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*rawSearchText*/ 4) {\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t//\n\t\t\t// Handle user input on the search input\n\t\t\t//\n\t\t\t{\n\t\t\t\trIC(() => {\n\t\t\t\t\t$$invalidate(44, searchText = (rawSearchText || '').trim()); // defer to avoid input delays, plus we can trim here\n\t\t\t\t\t$$invalidate(5, activeSearchItem = -1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups, currentGroupIndex*/ 6144) {\n\t\t\t//\n\t\t\t// Update the current group based on the currentGroupIndex\n\t\t\t//\n\t\t\t$$invalidate(13, currentGroup = groups$1[currentGroupIndex]);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded, currentGroup*/ 24576 | $$self.$$.dirty[1] & /*searchText*/ 8192) {\n\t\t\t//\n\t\t\t// Set or update the currentEmojis. Check for invalid ZWJ renderings\n\t\t\t// (i.e. double emoji).\n\t\t\t//\n\t\t\t{\n\t\t\t\tasync function updateEmojis() {\n\n\t\t\t\t\tif (!databaseLoaded) {\n\t\t\t\t\t\t$$invalidate(1, currentEmojis = []);\n\t\t\t\t\t\t$$invalidate(4, searchMode = false);\n\t\t\t\t\t} else if (searchText.length >= MIN_SEARCH_TEXT_LENGTH) {\n\t\t\t\t\t\tconst currentSearchText = searchText;\n\t\t\t\t\t\tconst newEmojis = await getEmojisBySearchQuery(currentSearchText);\n\n\t\t\t\t\t\tif (currentSearchText === searchText) {\n\t\t\t\t\t\t\t// if the situation changes asynchronously, do not update\n\t\t\t\t\t\t\t$$invalidate(1, currentEmojis = newEmojis);\n\n\t\t\t\t\t\t\t$$invalidate(4, searchMode = true);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (currentGroup) {\n\t\t\t\t\t\tconst currentGroupId = currentGroup.id;\n\t\t\t\t\t\tconst newEmojis = await getEmojisByGroup(currentGroupId);\n\n\t\t\t\t\t\tif (currentGroupId === currentGroup.id) {\n\t\t\t\t\t\t\t// if the situation changes asynchronously, do not update\n\t\t\t\t\t\t\t$$invalidate(1, currentEmojis = newEmojis);\n\n\t\t\t\t\t\t\t$$invalidate(4, searchMode = false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* no await */\n\t\t\t\tupdateEmojis();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*groups, searchMode*/ 4112) {\n\t\t\t//\n\t\t\t// Global styles for the entire picker\n\t\t\t//\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\t$$invalidate(22, pickerStyle = `\n  --font-family: ${FONT_FAMILY};\n  --num-groups: ${groups$1.length}; \n  --indicator-opacity: ${searchMode ? 0 : 1}; \n  --num-skintones: ${NUM_SKIN_TONES};`);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database*/ 256) {\n\t\t\t//\n\t\t\t// Set or update the preferred skin tone\n\t\t\t//\n\t\t\t{\n\t\t\t\tasync function updatePreferredSkinTone() {\n\t\t\t\t\tif (databaseLoaded) {\n\t\t\t\t\t\t$$invalidate(8, currentSkinTone = await database.getPreferredSkinTone());\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t/* no await */\n\t\t\t\tupdatePreferredSkinTone();\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[1] & /*skinToneEmoji*/ 512) {\n\t\t\t$$invalidate(9, skinTones = Array(NUM_SKIN_TONES).fill().map((_, i) => applySkinTone(skinToneEmoji, i)));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*skinTones, currentSkinTone*/ 768) {\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\t$$invalidate(21, skinToneButtonText = skinTones[currentSkinTone]);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*i18n, currentSkinTone*/ 257) {\n\t\t\t$$invalidate(23, skinToneButtonLabel = i18n.skinToneLabel.replace('{skinTone}', i18n.skinTones[currentSkinTone]));\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database*/ 256) {\n\t\t\t/* eslint-enable no-unused-vars */\n\t\t\t//\n\t\t\t// Set or update the favorites emojis\n\t\t\t//\n\t\t\t{\n\t\t\t\tasync function updateDefaultFavoriteEmojis() {\n\t\t\t\t\t$$invalidate(45, defaultFavoriteEmojis = (await Promise.all(MOST_COMMONLY_USED_EMOJI.map(unicode => database.getEmojiByUnicodeOrName(unicode)))).filter(Boolean)); // filter because in Jest tests we don't have all the emoji in the DB\n\t\t\t\t}\n\n\t\t\t\tif (databaseLoaded) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\tupdateDefaultFavoriteEmojis();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*databaseLoaded*/ 16384 | $$self.$$.dirty[1] & /*database, numColumns, defaultFavoriteEmojis*/ 49408) {\n\t\t\t{\n\t\t\t\tasync function updateFavorites() {\n\t\t\t\t\tconst dbFavorites = await database.getTopFavoriteEmoji(numColumns);\n\t\t\t\t\tconst favorites = await summarizeEmojis(uniqBy([...dbFavorites, ...defaultFavoriteEmojis], _ => _.unicode || _.name).slice(0, numColumns));\n\t\t\t\t\t$$invalidate(10, currentFavorites = favorites);\n\t\t\t\t}\n\n\t\t\t\tif (databaseLoaded && defaultFavoriteEmojis) {\n\t\t\t\t\t/* no await */\n\t\t\t\t\tupdateFavorites();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, tabpanelElement*/ 10) {\n\t\t\t// Some emojis have their ligatures rendered as two or more consecutive emojis\n\t\t\t// We want to treat these the same as unsupported emojis, so we compare their\n\t\t\t// widths against the baseline widths and remove them as necessary\n\t\t\t{\n\t\t\t\tconst zwjEmojisToCheck = currentEmojis.filter(emoji => emoji.unicode).filter(emoji => hasZwj(emoji) && !supportedZwjEmojis.has(emoji.unicode)); // filter custom emoji\n\n\t\t\t\tif (zwjEmojisToCheck.length) {\n\t\t\t\t\t// render now, check their length later\n\t\t\t\t\trAF(() => checkZwjSupportAndUpdate(zwjEmojisToCheck));\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(1, currentEmojis = currentEmojis.filter(isZwjSupported));\n\n\t\t\t\t\trAF(() => {\n\t\t\t\t\t\t// Avoid Svelte doing an invalidation on the \"setter\" here.\n\t\t\t\t\t\t// At best the invalidation is useless, at worst it can cause infinite loops:\n\t\t\t\t\t\t// https://github.com/nolanlawson/emoji-picker-element/pull/180\n\t\t\t\t\t\t// https://github.com/sveltejs/svelte/issues/6521\n\t\t\t\t\t\t// Also note tabpanelElement can be null if the element is disconnected\n\t\t\t\t\t\t// immediately after connected, hence `|| {}`\n\t\t\t\t\t\t(tabpanelElement || {}).scrollTop = 0; // reset scroll top to 0 when emojis change\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*currentEmojis, currentFavorites*/ 1026 | $$self.$$.dirty[1] & /*initialLoad*/ 4096) {\n\t\t\t{\n\t\t\t\t// consider initialLoad to be complete when the first tabpanel and favorites are rendered\n\t\t\t\t/* istanbul ignore next */\n\t\t\t\tif (\"production\" !== 'production' || false) {\n\t\t\t\t\tif (currentEmojis.length && currentFavorites.length && initialLoad) {\n\t\t\t\t\t\t$$invalidate(43, initialLoad = false);\n\t\t\t\t\t\trequestPostAnimationFrame(() => (void 0));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*searchMode, currentEmojis*/ 18 | $$self.$$.dirty[1] & /*customCategorySorting*/ 2048) {\n\t\t\t//\n\t\t\t// Derive currentEmojisWithCategories from currentEmojis. This is always done even if there\n\t\t\t// are no categories, because it's just easier to code the HTML this way.\n\t\t\t//\n\t\t\t{\n\t\t\t\tfunction calculateCurrentEmojisWithCategories() {\n\t\t\t\t\tif (searchMode) {\n\t\t\t\t\t\treturn [{ category: '', emojis: currentEmojis }];\n\t\t\t\t\t}\n\n\t\t\t\t\tconst categoriesToEmoji = new Map();\n\n\t\t\t\t\tfor (const emoji of currentEmojis) {\n\t\t\t\t\t\tconst category = emoji.category || '';\n\t\t\t\t\t\tlet emojis = categoriesToEmoji.get(category);\n\n\t\t\t\t\t\tif (!emojis) {\n\t\t\t\t\t\t\temojis = [];\n\t\t\t\t\t\t\tcategoriesToEmoji.set(category, emojis);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\temojis.push(emoji);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [...categoriesToEmoji.entries()].map(([category, emojis]) => ({ category, emojis })).sort((a, b) => customCategorySorting(a.category, b.category));\n\t\t\t\t}\n\n\t\t\t\t// eslint-disable-next-line no-unused-vars\n\t\t\t\t$$invalidate(15, currentEmojisWithCategories = calculateCurrentEmojisWithCategories());\n\t\t\t}\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*activeSearchItem, currentEmojis*/ 34) {\n\t\t\t//\n\t\t\t// Handle active search item (i.e. pressing up or down while searching)\n\t\t\t//\n\t\t\t/* eslint-disable no-unused-vars */\n\t\t\t$$invalidate(26, activeSearchItemId = activeSearchItem !== -1 && currentEmojis[activeSearchItem].id);\n\t\t}\n\n\t\tif ($$self.$$.dirty[0] & /*skinTonePickerExpanded, skinToneDropdown*/ 192) {\n\t\t\t// To make the animation nicer, change the z-index of the skintone picker button\n\t\t\t// *after* the animation has played. This makes it appear that the picker box\n\t\t\t// is expanding \"below\" the button\n\t\t\t{\n\t\t\t\tif (skinTonePickerExpanded) {\n\t\t\t\t\tskinToneDropdown.addEventListener(\n\t\t\t\t\t\t'transitionend',\n\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t$$invalidate(19, skinTonePickerExpandedAfterAnimation = true); // eslint-disable-line no-unused-vars\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ once: true }\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t$$invalidate(19, skinTonePickerExpandedAfterAnimation = false); // eslint-disable-line no-unused-vars\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\treturn [\n\t\ti18n,\n\t\tcurrentEmojis,\n\t\trawSearchText,\n\t\ttabpanelElement,\n\t\tsearchMode,\n\t\tactiveSearchItem,\n\t\tskinTonePickerExpanded,\n\t\tskinToneDropdown,\n\t\tcurrentSkinTone,\n\t\tskinTones,\n\t\tcurrentFavorites,\n\t\tcurrentGroupIndex,\n\t\tgroups$1,\n\t\tcurrentGroup,\n\t\tdatabaseLoaded,\n\t\tcurrentEmojisWithCategories,\n\t\trootElement,\n\t\tbaselineEmoji,\n\t\tmessage,\n\t\tskinTonePickerExpandedAfterAnimation,\n\t\tactiveSkinTone,\n\t\tskinToneButtonText,\n\t\tpickerStyle,\n\t\tskinToneButtonLabel,\n\t\tisRtl,\n\t\tscrollbarWidth,\n\t\tactiveSearchItemId,\n\t\tunicodeWithSkin,\n\t\tlabelWithSkin,\n\t\tcalculateEmojiGridStyle,\n\t\tonSearchKeydown,\n\t\tonNavClick,\n\t\tonNavKeydown,\n\t\tonEmojiClick,\n\t\tonSkinToneOptionsClick,\n\t\tonClickSkinToneButton,\n\t\tonSkinToneOptionsKeydown,\n\t\tonSkinToneOptionsKeyup,\n\t\tonSkinToneOptionsFocusOut,\n\t\tdatabase,\n\t\tskinToneEmoji,\n\t\tcustomEmoji,\n\t\tcustomCategorySorting,\n\t\tinitialLoad,\n\t\tsearchText,\n\t\tdefaultFavoriteEmojis,\n\t\tnumColumns,\n\t\tinput_input_handler,\n\t\tdiv3_binding,\n\t\tclick_handler,\n\t\tdiv10_binding,\n\t\tbutton1_binding,\n\t\tsection_binding\n\t];\n}\n\nclass Picker extends SvelteComponent {\n\tconstructor(options) {\n\t\tsuper();\n\n\t\tinit(\n\t\t\tthis,\n\t\t\toptions,\n\t\t\tinstance,\n\t\t\tcreate_fragment,\n\t\t\tsafe_not_equal,\n\t\t\t{\n\t\t\t\tskinToneEmoji: 40,\n\t\t\t\ti18n: 0,\n\t\t\t\tdatabase: 39,\n\t\t\t\tcustomEmoji: 41,\n\t\t\t\tcustomCategorySorting: 42\n\t\t\t},\n\t\t\tnull,\n\t\t\t[-1, -1, -1]\n\t\t);\n\t}\n}\n\nconst DEFAULT_DATA_SOURCE = 'https://cdn.jsdelivr.net/npm/emoji-picker-element-data@^1/en/emojibase/data.json';\nconst DEFAULT_LOCALE = 'en';\n\nvar enI18n = {\n  categoriesLabel: 'Categories',\n  emojiUnsupportedMessage: 'Your browser does not support color emoji.',\n  favoritesLabel: 'Favorites',\n  loadingMessage: 'Loading…',\n  networkErrorMessage: 'Could not load emoji.',\n  regionLabel: 'Emoji picker',\n  searchDescription: 'When search results are available, press up or down to select and enter to choose.',\n  searchLabel: 'Search',\n  searchResultsLabel: 'Search results',\n  skinToneDescription: 'When expanded, press up or down to select and enter to choose.',\n  skinToneLabel: 'Choose a skin tone (currently {skinTone})',\n  skinTonesLabel: 'Skin tones',\n  skinTones: [\n    'Default',\n    'Light',\n    'Medium-Light',\n    'Medium',\n    'Medium-Dark',\n    'Dark'\n  ],\n  categories: {\n    custom: 'Custom',\n    'smileys-emotion': 'Smileys and emoticons',\n    'people-body': 'People and body',\n    'animals-nature': 'Animals and nature',\n    'food-drink': 'Food and drink',\n    'travel-places': 'Travel and places',\n    activities: 'Activities',\n    objects: 'Objects',\n    symbols: 'Symbols',\n    flags: 'Flags'\n  }\n};\n\nconst PROPS = [\n  'customEmoji',\n  'customCategorySorting',\n  'database',\n  'dataSource',\n  'i18n',\n  'locale',\n  'skinToneEmoji'\n];\n\nclass PickerElement extends HTMLElement {\n  constructor (props) {\n    super();\n    this.attachShadow({ mode: 'open' });\n    const style = document.createElement('style');\n    style.textContent = \":host{--emoji-size:1.375rem;--emoji-padding:0.5rem;--category-emoji-size:var(--emoji-size);--category-emoji-padding:var(--emoji-padding);--indicator-height:3px;--input-border-radius:0.5rem;--input-border-size:1px;--input-font-size:1rem;--input-line-height:1.5;--input-padding:0.25rem;--num-columns:8;--outline-size:2px;--border-size:1px;--skintone-border-radius:1rem;--category-font-size:1rem;display:flex;width:min-content;height:400px}:host,:host(.light){--background:#fff;--border-color:#e0e0e0;--indicator-color:#385ac1;--input-border-color:#999;--input-font-color:#111;--input-placeholder-color:#999;--outline-color:#999;--category-font-color:#111;--button-active-background:#e6e6e6;--button-hover-background:#d9d9d9}:host(.dark){--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}@media (prefers-color-scheme:dark){:host{--background:#222;--border-color:#444;--indicator-color:#5373ec;--input-border-color:#ccc;--input-font-color:#efefef;--input-placeholder-color:#ccc;--outline-color:#fff;--category-font-color:#efefef;--button-active-background:#555555;--button-hover-background:#484848}}:host([hidden]){display:none}button{margin:0;padding:0;border:0;background:0 0;box-shadow:none;-webkit-tap-highlight-color:transparent}button::-moz-focus-inner{border:0}input{padding:0;margin:0;line-height:1.15;font-family:inherit}input[type=search]{-webkit-appearance:none}:focus{outline:var(--outline-color) solid var(--outline-size);outline-offset:calc(-1*var(--outline-size))}:host([data-js-focus-visible]) :focus:not([data-focus-visible-added]){outline:0}:focus:not(:focus-visible){outline:0}.hide-focus{outline:0}*{box-sizing:border-box}.picker{contain:content;display:flex;flex-direction:column;background:var(--background);border:var(--border-size) solid var(--border-color);width:100%;height:100%;overflow:hidden;--total-emoji-size:calc(var(--emoji-size) + (2 * var(--emoji-padding)));--total-category-emoji-size:calc(var(--category-emoji-size) + (2 * var(--category-emoji-padding)))}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);border:0}.hidden{opacity:0;pointer-events:none}.abs-pos{position:absolute;left:0;top:0}.gone{display:none!important}.skintone-button-wrapper,.skintone-list{background:var(--background);z-index:3}.skintone-button-wrapper.expanded{z-index:1}.skintone-list{position:absolute;inset-inline-end:0;top:0;z-index:2;overflow:visible;border-bottom:var(--border-size) solid var(--border-color);border-radius:0 0 var(--skintone-border-radius) var(--skintone-border-radius);will-change:transform;transition:transform .2s ease-in-out;transform-origin:center 0}@media (prefers-reduced-motion:reduce){.skintone-list{transition-duration:.001s}}@supports not (inset-inline-end:0){.skintone-list{right:0}}.skintone-list.no-animate{transition:none}.tabpanel{overflow-y:auto;-webkit-overflow-scrolling:touch;will-change:transform;min-height:0;flex:1;contain:content}.emoji-menu{display:grid;grid-template-columns:repeat(var(--num-columns),var(--total-emoji-size));justify-content:space-around;align-items:flex-start;width:100%}.category{padding:var(--emoji-padding);font-size:var(--category-font-size);color:var(--category-font-color)}.custom-emoji,.emoji,button.emoji{height:var(--total-emoji-size);width:var(--total-emoji-size)}.emoji,button.emoji{font-size:var(--emoji-size);display:flex;align-items:center;justify-content:center;border-radius:100%;line-height:1;overflow:hidden;font-family:var(--font-family);cursor:pointer}@media (hover:hover) and (pointer:fine){.emoji:hover,button.emoji:hover{background:var(--button-hover-background)}}.emoji.active,.emoji:active,button.emoji.active,button.emoji:active{background:var(--button-active-background)}.custom-emoji{padding:var(--emoji-padding);object-fit:contain;pointer-events:none;background-repeat:no-repeat;background-position:center center;background-size:var(--emoji-size) var(--emoji-size)}.nav,.nav-button{align-items:center}.nav{display:grid;justify-content:space-between;contain:content}.nav-button{display:flex;justify-content:center}.nav-emoji{font-size:var(--category-emoji-size);width:var(--total-category-emoji-size);height:var(--total-category-emoji-size)}.indicator-wrapper{display:flex;border-bottom:1px solid var(--border-color)}.indicator{width:calc(100%/var(--num-groups));height:var(--indicator-height);opacity:var(--indicator-opacity);background-color:var(--indicator-color);will-change:transform,opacity;transition:opacity .1s linear,transform .25s ease-in-out}@media (prefers-reduced-motion:reduce){.indicator{will-change:opacity;transition:opacity .1s linear}}.pad-top,input.search{background:var(--background);width:100%}.pad-top{height:var(--emoji-padding);z-index:3}.search-row{display:flex;align-items:center;position:relative;padding-inline-start:var(--emoji-padding);padding-bottom:var(--emoji-padding)}.search-wrapper{flex:1;min-width:0}input.search{padding:var(--input-padding);border-radius:var(--input-border-radius);border:var(--input-border-size) solid var(--input-border-color);color:var(--input-font-color);font-size:var(--input-font-size);line-height:var(--input-line-height)}input.search::placeholder{color:var(--input-placeholder-color)}.favorites{display:flex;flex-direction:row;border-top:var(--border-size) solid var(--border-color);contain:content}.message{padding:var(--emoji-padding)}\";\n    this.shadowRoot.appendChild(style);\n    this._ctx = {\n      // Set defaults\n      locale: DEFAULT_LOCALE,\n      dataSource: DEFAULT_DATA_SOURCE,\n      skinToneEmoji: DEFAULT_SKIN_TONE_EMOJI,\n      customCategorySorting: DEFAULT_CATEGORY_SORTING,\n      customEmoji: null,\n      i18n: enI18n,\n      ...props\n    };\n    // Handle properties set before the element was upgraded\n    for (const prop of PROPS) {\n      if (prop !== 'database' && Object.prototype.hasOwnProperty.call(this, prop)) {\n        this._ctx[prop] = this[prop];\n        delete this[prop];\n      }\n    }\n    this._dbFlush(); // wait for a flush before creating the db, in case the user calls e.g. a setter or setAttribute\n  }\n\n  connectedCallback () {\n    this._cmp = new Picker({\n      target: this.shadowRoot,\n      props: this._ctx\n    });\n  }\n\n  disconnectedCallback () {\n    this._cmp.$destroy();\n    this._cmp = undefined;\n\n    const { database } = this._ctx;\n    if (database) {\n      database.close()\n        // only happens if the database failed to load in the first place, so we don't care)\n        .catch(err => console.error(err));\n    }\n  }\n\n  static get observedAttributes () {\n    return ['locale', 'data-source', 'skin-tone-emoji'] // complex objects aren't supported, also use kebab-case\n  }\n\n  attributeChangedCallback (attrName, oldValue, newValue) {\n    // convert from kebab-case to camelcase\n    // see https://github.com/sveltejs/svelte/issues/3852#issuecomment-665037015\n    this._set(\n      attrName.replace(/-([a-z])/g, (_, up) => up.toUpperCase()),\n      newValue\n    );\n  }\n\n  _set (prop, newValue) {\n    this._ctx[prop] = newValue;\n    if (this._cmp) {\n      this._cmp.$set({ [prop]: newValue });\n    }\n    if (['locale', 'dataSource'].includes(prop)) {\n      this._dbFlush();\n    }\n  }\n\n  _dbCreate () {\n    const { locale, dataSource, database } = this._ctx;\n    // only create a new database if we really need to\n    if (!database || database.locale !== locale || database.dataSource !== dataSource) {\n      this._set('database', new Database({ locale, dataSource }));\n    }\n  }\n\n  // Update the Database in one microtask if the locale/dataSource change. We do one microtask\n  // so we don't create two Databases if e.g. both the locale and the dataSource change\n  _dbFlush () {\n    Promise.resolve().then(() => (\n      this._dbCreate()\n    ));\n  }\n}\n\nconst definitions = {};\n\nfor (const prop of PROPS) {\n  definitions[prop] = {\n    get () {\n      if (prop === 'database') {\n        // in rare cases, the microtask may not be flushed yet, so we need to instantiate the DB\n        // now if the user is asking for it\n        this._dbCreate();\n      }\n      return this._ctx[prop]\n    },\n    set (val) {\n      if (prop === 'database') {\n        throw new Error('database is read-only')\n      }\n      this._set(prop, val);\n    }\n  };\n}\n\nObject.defineProperties(PickerElement.prototype, definitions);\n\n/* istanbul ignore else */\nif (!customElements.get('emoji-picker')) { // if already defined, do nothing (e.g. same script imported twice)\n  customElements.define('emoji-picker', PickerElement);\n}\n\nexport { PickerElement as default };\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"26\",\"height\":\"26\",\"viewBox\":\"0 0 26 26\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-emoticon-happy-outline-1RQZw78\",\"d\":\"M9.25 14.8751C9.25 14.8751 10.6562 16.7501 13 16.7501C15.3438 16.7501 16.75 14.8751 16.75 14.8751M15.8125 10.1876H15.8219M10.1875 10.1876H10.1969M22.375 13.0001C22.375 18.1777 18.1777 22.3751 13 22.3751C7.82233 22.3751 3.625 18.1777 3.625 13.0001C3.625 7.82239 7.82233 3.62506 13 3.62506C18.1777 3.62506 22.375 7.82239 22.375 13.0001ZM16.2812 10.1876C16.2812 10.4464 16.0714 10.6563 15.8125 10.6563C15.5536 10.6563 15.3438 10.4464 15.3438 10.1876C15.3438 9.92868 15.5536 9.71881 15.8125 9.71881C16.0714 9.71881 16.2812 9.92868 16.2812 10.1876ZM10.6562 10.1876C10.6562 10.4464 10.4464 10.6563 10.1875 10.6563C9.92862 10.6563 9.71875 10.4464 9.71875 10.1876C9.71875 9.92868 9.92862 9.71881 10.1875 9.71881C10.4464 9.71881 10.6562 9.92868 10.6562 10.1876Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","export default {\n  emojiPickerButtonAriaLabel: 'Choose an emoji',\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./EmojiPicker.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./EmojiPicker.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, Fragment } from 'preact';\nimport { useCallback, useEffect, useRef, useState } from 'preact/hooks';\nimport 'emoji-picker-element';\nimport EmoticonIcon from 'widget_main/globals/assets/emoticon-happy-outline.svg';\nimport { isEscKey } from 'widget_main/globals/keyboardEvents';\nimport { useTranslations } from 'i18n/hooks';\nimport messages from './messages';\nimport styles from './EmojiPicker.scss';\n\nexport default function EmojiButton({\n  onEmoji,\n  onClose = () => undefined,\n}: {\n  onEmoji: (emoji: string) => void;\n  onClose?: () => void;\n}) {\n  const translations = useTranslations(messages);\n\n  const [showPicker, setShowPicker] = useState(false);\n\n  const emojiPickerRef = useRef<HTMLElement>(null);\n  const buttonRef = useRef<HTMLButtonElement>(null);\n  const contentRef = useRef<HTMLDivElement>(null);\n\n  const closePicker = useCallback(() => {\n    setShowPicker(false);\n    onClose();\n  }, [onClose]);\n\n  const togglePicker = useCallback(() => {\n    setShowPicker(!showPicker);\n  }, [showPicker]);\n\n  const onKeyPress = useCallback((e) => {\n    if (isEscKey(e)) {\n      closePicker();\n    }\n  }, []);\n\n  const onEmojiSelect = useCallback(\n    (e) => {\n      onEmoji(e.detail.unicode);\n      setShowPicker(false);\n    },\n    [onEmoji],\n  );\n\n  useEffect(() => {\n    if (!showPicker) {\n      return () => undefined;\n    }\n\n    emojiPickerRef?.current?.shadowRoot?.getElementById('search')?.focus();\n\n    // if the user clicks out of the picker, close the picker\n    // exception is if clicks on button, cuz the button itself has a handler to reopen, so we go in circles\n    function handleClickOutside(event) {\n      if (\n        contentRef.current &&\n        !contentRef.current.contains(event.target) &&\n        buttonRef.current &&\n        !buttonRef.current.contains(event.target)\n      ) {\n        closePicker();\n      }\n    }\n    document.addEventListener('keydown', onKeyPress);\n    document.addEventListener('mousedown', handleClickOutside);\n    return () => {\n      document.removeEventListener('keydown', onKeyPress);\n      document.removeEventListener('mousedown', handleClickOutside);\n    };\n  }, [showPicker]);\n\n  useEffect(() => {\n    const currentRef = emojiPickerRef.current;\n\n    if (!showPicker || !currentRef) {\n      return undefined;\n    }\n\n    // custom styles injected into the shadow dom of the picker\n    const style = document.createElement('style');\n    style.textContent = `.picker { border: none; }`;\n    currentRef?.shadowRoot?.appendChild(style);\n\n    // listen for emoji click event. remove this listener\n    currentRef?.addEventListener('emoji-click', onEmojiSelect);\n\n    return () => {\n      currentRef?.shadowRoot?.removeChild(style);\n      currentRef?.removeEventListener('emoji-click', onEmojiSelect);\n    };\n  }, [showPicker, onEmojiSelect]);\n\n  return (\n    <Fragment>\n      <button\n        className={styles.emojiIconButton}\n        ref={buttonRef}\n        onClick={togglePicker}\n        aria-label={translations.emojiPickerButtonAriaLabel}\n      >\n        <EmoticonIcon />\n      </button>\n      {showPicker ? (\n        <div ref={contentRef} className={styles.tooltip}>\n          {/* eslint-disable-next-line @typescript-eslint/ban-ts-comment */}\n          {/* @ts-ignore */}\n          <emoji-picker ref={emojiPickerRef} />\n        </div>\n      ) : null}\n    </Fragment>\n  );\n}\n","import { h } from 'preact';\nimport {\n  useRef,\n  useState,\n  useEffect,\n  useLayoutEffect,\n  useCallback,\n  useMemo,\n} from 'preact/hooks';\nimport debounce from 'lodash.debounce';\nimport produce from 'immer';\nimport classNames from 'classnames';\nimport SendIcon from 'widget_main/globals/assets/send.svg';\nimport Button from 'widget_main/components/ui/Button';\nimport TextArea from 'widget_main/components/ui/TextArea';\nimport Text from 'widget_main/components/Text';\nimport { Localizer } from 'preact-i18n';\nimport { getKustomerCore } from 'widget_main/globals/helpers';\nimport { Attachment } from 'core_main/sdk/send_message/types';\nimport { MessageThreadInputProps, MessageThreadInputState } from './types';\nimport AttachmentPreviews from './AttachmentPreviews';\nimport AttachmentButton from './AttachmentButton';\nimport styles from './messageThreadInput.scss';\nimport messages from './messages';\nimport EmojiPicker from './EmojiPicker/EmojiPicker';\n\nconst TEXT_AREA_ID = 'messageThreadInputTextArea';\n\nconst kustomerCore = getKustomerCore();\n\nfunction MessageThreadInput({\n  isInputHidden,\n  isSendDisabled,\n  className,\n  chatAvailability,\n  conversationId,\n  draft,\n  autoFocus,\n  onClick,\n  onSubmit,\n  showAttachmentButton,\n}: MessageThreadInputProps) {\n  const [body, setBody] = useState('');\n  const [attachments, setAttachments] = useState<\n    MessageThreadInputState['attachments']\n  >([]);\n  const [errorMessage, setErrorMessage] = useState<string | undefined>(\n    undefined,\n  );\n  const [pendingCallback, setPendingCallback] = useState<(() => void) | null>(\n    null,\n  );\n  const [pendingCursorPosition, setPendingCursorPosition] = useState<\n    number | null\n  >(null);\n\n  const textAreaRef = useRef<HTMLTextAreaElement>(null);\n\n  const focusOnTextArea = (cursorLocation?: number) => {\n    const element =\n      textAreaRef.current || document.getElementById(TEXT_AREA_ID);\n\n    if (element && autoFocus !== false) {\n      element.focus?.();\n      if (cursorLocation !== undefined) {\n        setPendingCursorPosition(cursorLocation);\n      }\n    }\n  };\n\n  // focus when input becomes visible\n  useEffect(() => {\n    if (isInputHidden === false) {\n      focusOnTextArea();\n    }\n  }, [isInputHidden]);\n\n  // Handle pending callbacks and cursor positioning after resize\n  useLayoutEffect(() => {\n    if (pendingCallback) {\n      pendingCallback();\n      setPendingCallback(null);\n    }\n\n    if (pendingCursorPosition !== null && textAreaRef.current) {\n      textAreaRef.current.selectionStart = pendingCursorPosition;\n      textAreaRef.current.selectionEnd = pendingCursorPosition;\n      setPendingCursorPosition(null);\n    }\n  }, [pendingCallback, pendingCursorPosition]);\n\n  // on unmount, revoke object urls\n  useEffect(() => {\n    return () => {\n      attachments.forEach((attachment) => {\n        if (attachment.url) URL.revokeObjectURL(attachment.url);\n      });\n    };\n  }, []);\n\n  const showError = (errorMessage: string | undefined) => {\n    setErrorMessage(errorMessage);\n  };\n\n  const addAttachment = (file: File) => {\n    const previewUrl = URL.createObjectURL(file);\n    setAttachments((prevAttachments) =>\n      produce(prevAttachments, (draftState) => {\n        draftState.push({ file, url: previewUrl });\n      }),\n    );\n  };\n\n  const removeAttachment = useCallback((removedAttachment: Attachment) => {\n    if (removedAttachment.url) URL.revokeObjectURL(removedAttachment.url);\n    setAttachments((prevAttachments) =>\n      produce(prevAttachments, (draftState) => {\n        return draftState.filter(\n          (attachment) => attachment.file !== removedAttachment.file,\n        );\n      }),\n    );\n  }, []);\n\n  const debouncedUserTyping = useMemo(\n    () =>\n      debounce(\n        () => {\n          if (!conversationId) return;\n          kustomerCore?.sendTypingActivity({ conversationId, typing: true });\n        },\n        1000,\n        {\n          leading: true,\n          maxWait: 2500,\n        },\n      ),\n    [conversationId],\n  );\n\n  const debouncedUserStoppedTyping = useMemo(\n    () =>\n      debounce(() => {\n        if (!conversationId) return;\n        kustomerCore?.sendTypingActivity({ conversationId, typing: false });\n      }, 5000),\n    [conversationId],\n  );\n\n  const resizeTextarea = () => {\n    // We are manipulating the dom directly here, which is frowned upon, but I couldn't get it working any other way.\n    // If the person reading this in the future (even my future self) has a better way to do this, then by all means I\n    // won't be insulted if you change this code.\n    if (textAreaRef.current?.style) {\n      // If body is empty, reset the styles\n      if (!body) {\n        textAreaRef.current.style.height = '';\n        textAreaRef.current.style.overflow = '';\n        return;\n      }\n      // We need to set it to 0 first in order to properly measure the scrollHeight, otherwise when a user DELETES text\n      // the textarea will not shrink.\n      textAreaRef.current.style.height = '0px';\n      textAreaRef.current.style.height = `${textAreaRef.current?.scrollHeight}px`;\n      textAreaRef.current.style.overflow = 'auto';\n    }\n  };\n\n  // Handle textarea resizing after body changes\n  useLayoutEffect(() => {\n    resizeTextarea();\n  }, [body]);\n\n  const handleChange = (e: any, cb?: () => void) => {\n    const newBody = e.target.value;\n\n    if (conversationId) {\n      debouncedUserTyping();\n      debouncedUserStoppedTyping();\n    }\n\n    setBody(newBody);\n\n    if (cb) {\n      setPendingCallback(cb);\n    }\n  };\n\n  const handleSubmit = () => {\n    if (isSendDisabled) return;\n\n    if (body || attachments.length) {\n      onSubmit({\n        body,\n        attachments,\n      });\n\n      setBody('');\n      setAttachments([]);\n      setErrorMessage(undefined);\n    }\n  };\n\n  const handleEmoji = (emoji: string) => {\n    const textAreaElement = textAreaRef.current;\n    const selectionStart = textAreaElement?.selectionStart ?? 0;\n    const selectionEnd = textAreaElement?.selectionEnd ?? 0;\n    const currentInputValue = body;\n    // insert emoji at place of cursor\n    const newValue =\n      currentInputValue.slice(0, selectionStart) +\n      emoji +\n      currentInputValue.slice(selectionEnd);\n    handleChange({ target: { value: newValue } }, () => {\n      focusOnTextArea(selectionStart + emoji.length); // emojis can have different char lengths 🤯\n    });\n  };\n\n  const renderAttachmentsButton = () => {\n    return showAttachmentButton ? (\n      <div>\n        <AttachmentButton\n          addAttachment={addAttachment}\n          attachments={attachments}\n          showError={showError}\n        />\n      </div>\n    ) : null;\n  };\n\n  const renderAttachmentsPreview = () => {\n    if (!attachments.length) {\n      return null;\n    }\n\n    return (\n      <AttachmentPreviews\n        attachments={attachments}\n        removeAttachment={removeAttachment}\n      />\n    );\n  };\n\n  // Handle draft message using useEffect\n  useEffect(() => {\n    if (draft?.message) {\n      setBody(draft.message || '');\n      if (typeof draft?.callback === 'function') {\n        draft.callback();\n      }\n    }\n  }, [draft]);\n\n  const placeholder = (chatAvailability === 'offline'\n    ? Text({\n        id: 'messageThreadInputLeaveAMessage',\n        defaultMessage: messages.messageThreadInputLeaveAMessage,\n      })\n    : Text({\n        id: 'messageThreadInputSendAMessage',\n        defaultMessage: messages.messageThreadInputSendAMessage,\n      })) as unknown as string;\n\n  return (\n    <div\n      class={classNames(\n        styles.messageInput,\n        {\n          [styles.hasError]: !!errorMessage,\n          [styles.isInputHidden]: isInputHidden,\n        },\n        className,\n      )}\n    >\n      {renderAttachmentsPreview()}\n      <div className={styles.lowerSection}>\n        {renderAttachmentsButton()}\n        <div>\n          <EmojiPicker onEmoji={handleEmoji} onClose={focusOnTextArea} />\n        </div>\n        <Localizer>\n          <TextArea\n            ref={textAreaRef}\n            id={TEXT_AREA_ID}\n            className={styles.textArea}\n            ariaLabel={placeholder}\n            placeholder={errorMessage || placeholder}\n            onChange={handleChange}\n            onClick={onClick}\n            // eslint-disable-next-line jsx-a11y/no-autofocus\n            autoFocus={autoFocus}\n            onEnter={handleSubmit}\n            value={body}\n          />\n        </Localizer>\n        <div>\n          <Localizer>\n            <Button\n              variant=\"primary\"\n              className={styles.submitButton}\n              ariaLabel={Text({\n                id: 'submitButtonAriaLabel',\n                defaultMessage: messages.submitButtonAriaLabel,\n              })}\n              onClick={handleSubmit}\n              disabled={(!body && !attachments.length) || isSendDisabled}\n            >\n              <SendIcon className={styles.sendIcon} />\n            </Button>\n          </Localizer>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default MessageThreadInput;\n","export default {\n  messageThreadInputSendAMessage: 'Send a message',\n  messageThreadInputLeaveAMessage: 'Leave a message',\n  submitButtonAriaLabel: 'Submit',\n};\n","import MessageThreadInput from './MessageThreadInput';\n\nexport default MessageThreadInput;\n","export const ACTIONABLE_TEMPLATE_TYPES = [\n  'quick_replies',\n  'answer_button_feedback',\n  'deflection',\n  'mll',\n  'list',\n];\n\nexport const IN_THREAD_TEMPLATE_ACTIONS = ['list', 'answer_button_feedback'];\n","\n      import API from \"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./mllModal.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./mllModal.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport { useState } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { useTranslations } from 'i18n/hooks';\nimport ChevronRight from 'widget_main/globals/assets/chevronRight.svg';\nimport ChevronLeft from 'widget_main/globals/assets/chevronLeft.svg';\nimport Modal from 'widget_main/components/ui/Modal';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport TitleBarButton from 'widget_main/components/TitleBarButton';\nimport { MLLChild } from 'core_main/api/messages/types';\nimport styles from './mllModal.scss';\nimport { buildPath } from './helpers';\n\ninterface MLLModalProps {\n  show: boolean;\n  onHide: () => void;\n  selectedMLLChild: MLLChild;\n  onSubmitMLLReply: (mllChild: MLLChild, mllPath: string) => void;\n  disabled?: boolean;\n}\n\nconst MLLModal = ({\n  show,\n  onHide,\n  selectedMLLChild,\n  onSubmitMLLReply,\n  disabled,\n}: MLLModalProps) => {\n  const translations = useTranslations({}, ['goBack']);\n\n  const [currentMLL, setCurrentMLL] = useState<MLLChild | null>(\n    selectedMLLChild,\n  );\n  const [prevMLLs, updatePrevMLLs] = useState<MLLChild[]>([] as MLLChild[]);\n\n  const handleClickOption = (mllChild) => {\n    const mllPath = buildPath(mllChild, currentMLL, prevMLLs);\n\n    if (disabled) return undefined;\n\n    if (!mllChild.children) {\n      return onSubmitMLLReply(mllChild, mllPath);\n    }\n\n    updatePrevMLLs(prevMLLs.concat(currentMLL as MLLChild));\n\n    return setCurrentMLL(mllChild);\n  };\n\n  const handleKeyPress = (e: KeyboardEvent, mllChild) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      handleClickOption(mllChild);\n    }\n  };\n\n  const handleGoBack = () => {\n    const prevMLL = prevMLLs[prevMLLs.length - 1];\n\n    setCurrentMLL(prevMLL);\n\n    const newPrevMLLs = prevMLLs.slice();\n    newPrevMLLs.pop();\n\n    updatePrevMLLs(newPrevMLLs);\n  };\n\n  const renderBackButton = () => {\n    if (!prevMLLs.length) {\n      return null;\n    }\n    return (\n      <TitleBarButton\n        className={styles.headerBackButton}\n        ariaLabel={translations.goBack}\n        onClick={handleGoBack}\n      >\n        <ChevronLeft />\n      </TitleBarButton>\n    );\n  };\n\n  return (\n    <Modal\n      show={show}\n      closeButton\n      onHide={onHide}\n      className={styles.modal}\n      bodyClassName={styles.modalBody}\n    >\n      <div className={styles.header}>\n        {renderBackButton()}\n        {currentMLL?.displayName} ({currentMLL?.children?.length})\n      </div>\n      <div className={styles.mllOptions}>\n        {currentMLL?.children?.map((mllChild) => {\n          return (\n            <div\n              key={mllChild.displayName}\n              tabIndex={0}\n              role=\"button\"\n              onKeyPress={(e) => handleKeyPress(e, mllChild)}\n              onClick={() => handleClickOption(mllChild)}\n              className={classNames(styles.mllOption, {\n                [styles.disabled]: disabled,\n              })}\n            >\n              <div className={styles.label}>{mllChild.displayName}</div>\n              {mllChild.children && (\n                <ChevronRight className={styles.mllChevron} />\n              )}\n            </div>\n          );\n        })}\n      </div>\n    </Modal>\n  );\n};\n\nexport default MLLModal;\n","import MLLModal from './MLLModal';\n\nexport default MLLModal;\n","import { MLLChild } from 'core_main/api/messages/types';\n\nexport const buildPath = (\n  branch: MLLChild,\n  currentBranch: MLLChild | null,\n  previousBranches: MLLChild[],\n) => {\n  const prevIds = previousBranches.map((prevBranch) => {\n    return prevBranch.id;\n  });\n\n  let fullPath;\n\n  if (currentBranch?.id) {\n    fullPath = [...prevIds, currentBranch.id, branch.id];\n  } else {\n    fullPath = [...prevIds, branch.id];\n  }\n\n  const mllPath = fullPath.join('.');\n\n  return mllPath;\n};\n","export default __webpack_public_path__ + \"imagePlaceholder.svg\";","import { InitialMessage } from 'core_main/api/assistant/types';\nimport { MLLChild } from 'core_main/api/messages/types';\nimport { MessageCallbackResponse } from 'core_main/sdk/send_message/types';\nimport { OptimisticMessage } from 'widget_main/store/types';\nimport { ACTIONABLE_TEMPLATE_TYPES } from './constants';\n\ntype Message = MessageCallbackResponse | InitialMessage;\n\nexport const flattenMLLTree = (tree) => {\n  let results = [] as MLLChild[];\n\n  tree.children.forEach((mllChild: MLLChild) => {\n    if (mllChild.children) {\n      results = results.concat(flattenMLLTree(mllChild));\n    } else {\n      results.push(mllChild);\n    }\n  });\n\n  return results;\n};\n\nexport const getLastMessageWithTemplateAction = (messages?: Message[]) => {\n  if (messages && messages.length) {\n    const lastMessage = messages?.[messages.length - 1];\n\n    const templateType = lastMessage?.meta?.template?.templateType;\n\n    if (templateType && ACTIONABLE_TEMPLATE_TYPES.includes(templateType)) {\n      return lastMessage;\n    }\n  }\n  return undefined;\n};\n\nexport const formatListTemplateBody = (titleText, detailsText) => {\n  return `${titleText} - ${detailsText}`;\n};\n\nexport const isMatchingReply = (customerMessage, agentMessage) => {\n  const messageActions = agentMessage?.meta?.template?.actions;\n  const { body } = customerMessage;\n\n  if (messageActions && 'tree' in messageActions) {\n    const flattened = flattenMLLTree(messageActions.tree);\n\n    const matchingAction = flattened.find((mllChild) => {\n      return mllChild.displayName === body;\n    });\n\n    return !!matchingAction;\n  }\n\n  const matchingAction = messageActions?.find((action) => {\n    const { detailsText, titleText } = action;\n\n    return (\n      action.displayText === body ||\n      formatListTemplateBody(titleText, detailsText) === body\n    );\n  });\n\n  return !!matchingAction;\n};\n\nexport const getLastTemplateActionReply = (\n  templateActionMessage: Message,\n  conversationMessages?: MessageCallbackResponse[] | null,\n) => {\n  const lastTemplateReplyMessage = conversationMessages\n    ?.slice()\n    .reverse()\n    .filter((message) => message?.sentBy?.type === 'customer')\n    .filter((message) => {\n      const rawDate =\n        'createdAt' in templateActionMessage\n          ? templateActionMessage.createdAt\n          : templateActionMessage.importedAt;\n\n      const messageTemplateDate = new Date(rawDate);\n      const replyDate = new Date(message.createdAt);\n\n      return replyDate > messageTemplateDate;\n    })\n    .find((message) => {\n      return isMatchingReply(message, templateActionMessage);\n    });\n\n  return lastTemplateReplyMessage;\n};\n\nexport const getLastTemplateActionOptimisticReply = (\n  templateActionMessage: Message,\n  optimisticMessages?: OptimisticMessage[] | null,\n) => {\n  const lastTemplateReplyMessage = optimisticMessages?.find(\n    (optimisticMessage) => {\n      return isMatchingReply(optimisticMessage, templateActionMessage);\n    },\n  );\n\n  return lastTemplateReplyMessage;\n};\n","\n      import API from \"!../../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./listAction.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../../node_modules/sass-loader/dist/cjs.js!./listAction.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  listImageUrlAltText: 'List Image',\n};\n","import { h } from 'preact';\nimport { useState } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { useTranslations } from 'i18n/hooks';\nimport { truncate } from 'widget_main/globals/helpers';\nimport ImagePlaceholder from 'widget_main/globals/assets/imagePlaceholder.svg';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport { formatListTemplateBody } from '../helpers';\n\nimport styles from './listAction.scss';\n\nimport messages from './messages';\n\ninterface ListActionProps {\n  detailsText?: string;\n  titleText?: string;\n  imageUrl?: string;\n  value: string;\n  onClick: (body: string, value: string) => void;\n}\n\nconst ListAction = ({\n  detailsText,\n  titleText,\n  imageUrl,\n  onClick,\n  value,\n}: ListActionProps) => {\n  const [imageError, setImageError] = useState(false);\n  const translations = useTranslations(messages);\n\n  const handleImageError = () => {\n    setImageError(true);\n  };\n\n  const handleSubmit = () => {\n    const body = formatListTemplateBody(titleText, detailsText);\n    onClick(body, value);\n  };\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      handleSubmit();\n    }\n  };\n\n  const image = (\n    <img\n      src={imageError ? ImagePlaceholder : imageUrl}\n      alt={translations.listImageUrlAltText}\n      onError={handleImageError}\n    />\n  );\n\n  const truncatedTitle = truncate(titleText, imageUrl ? 30 : 75);\n\n  const truncatedDetails = truncate(detailsText, imageUrl ? 50 : 75);\n\n  return (\n    <div\n      className={classNames(styles.listItemContainer)}\n      onClick={handleSubmit}\n      role=\"button\"\n      tabIndex={0}\n      onKeyPress={handleKeyPress}\n    >\n      <div class={styles.listItem}>\n        <div>{imageUrl ? image : null}</div>\n        <div className={styles.infoContainer}>\n          <span>{truncatedTitle}</span>\n          <span className={styles.detailsText}>{truncatedDetails}</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ListAction;\n","import ListAction from './ListAction';\n\nexport default ListAction;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./templateActions.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./templateActions.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, Fragment } from 'preact';\nimport { useContext, useState } from 'preact/hooks';\nimport classNames from 'classnames';\nimport {\n  NavigationContext,\n  ConversationsContext,\n  MessagesContext,\n  SettingsContext,\n} from 'widget_main/store';\nimport ChevronRight from 'widget_main/globals/assets/chevronRight.svg';\nimport Button from 'widget_main/components/ui/Button';\n\nimport ChatBubble from 'widget_main/components/ChatMessage/ChatBubble';\nimport { MessageOptions } from 'widget_main/components/MessageThreadInput/types';\nimport { MessageCallbackResponse } from 'core_main/sdk/send_message/types';\nimport { getMessageAgentInformation } from 'widget_main/globals/helpers';\nimport { InitialMessage } from 'core_main/api/assistant/types';\n\nimport {\n  ListTemplateAction,\n  MessageAnswerFeedbackAction,\n  MessageTemplateAction,\n  MLLChild,\n  MLLTemplateAction,\n  TemplateType,\n} from 'core_main/api/messages/types';\nimport { IN_THREAD_TEMPLATE_ACTIONS } from './constants';\n\nimport MLLModal from './MLLModal';\nimport ListAction from './ListAction';\nimport * as helpers from './helpers';\nimport styles from './templateActions.scss';\n\ninterface TemplateActionsProps {\n  onSubmit: (options: MessageOptions) => void;\n\n  disabled?: boolean;\n\n  supportedTypes: TemplateType[];\n\n  initialMessages?: InitialMessage[];\n\n  className?: string;\n}\n\nconst TemplateActions = ({\n  onSubmit,\n  disabled,\n  supportedTypes,\n  initialMessages,\n  className,\n}: TemplateActionsProps) => {\n  const chatSettings = useContext(SettingsContext);\n  const navigation = useContext(NavigationContext);\n  const conversations = useContext(ConversationsContext);\n  const messages = useContext(MessagesContext);\n\n  const { currentConversationId } = navigation;\n\n  const [showMLLModal, toggleMLLModal] = useState(false);\n  const [selectedMLLChild, setMLLChild] = useState<MLLChild | null>(null);\n\n  const closeMLLModal = () => {\n    toggleMLLModal(false);\n    setMLLChild(null);\n  };\n\n  const getCurrentConversation = () => {\n    if (currentConversationId) {\n      return conversations?.data?.[currentConversationId];\n    }\n\n    return undefined;\n  };\n\n  const getConversationMessages = () => {\n    const currentConversation = getCurrentConversation();\n    if (!currentConversation) {\n      return null;\n    }\n\n    const messageIds = currentConversation.messages;\n\n    const conversationMessages = messageIds?.map(\n      (messageId) => messages.messageData[messageId],\n    );\n\n    return conversationMessages;\n  };\n\n  const handleClickQuickReply = (action: MessageTemplateAction) => {\n    onSubmit({\n      body: action.displayText,\n      payload: action.value,\n    });\n  };\n\n  const handleClickDeflectionReply = (\n    action,\n    deflectionTemplateMessage: MessageCallbackResponse,\n  ) => {\n    onSubmit({\n      body: action.displayText,\n      payload: action.value,\n      lastDeflection: {\n        articles: deflectionTemplateMessage.meta?.articles?.map((article) => {\n          return {\n            id: article.articleId,\n            version: article.version,\n            visited: article.visited ? 1 : 0,\n            lang: article.lang,\n            title: article.title,\n            url: `${article.kbUrl}/${article.lang}/${article.slug}-${article.hash}`,\n          };\n        }),\n      },\n    });\n  };\n  const handleClickListReply = (body, value) => {\n    onSubmit({\n      body,\n      payload: value,\n    });\n  };\n\n  const handleClickMLLReply = (mllChild: MLLChild, mllPath?: string) => {\n    if (!mllChild.children) {\n      onSubmit({\n        body: mllChild.displayName,\n        payload: mllPath,\n      });\n\n      toggleMLLModal(false);\n      return setMLLChild(null);\n    }\n\n    setMLLChild(mllChild);\n    return toggleMLLModal(true);\n  };\n\n  const renderMLLModal = () => {\n    if (!selectedMLLChild) {\n      return null;\n    }\n\n    return (\n      <MLLModal\n        disabled={disabled}\n        show={showMLLModal}\n        onHide={closeMLLModal}\n        selectedMLLChild={selectedMLLChild}\n        onSubmitMLLReply={handleClickMLLReply}\n      />\n    );\n  };\n\n  const renderActions = (\n    lastMessageWithTemplateAction: MessageCallbackResponse | InitialMessage,\n  ) => {\n    const template = lastMessageWithTemplateAction.meta?.template;\n\n    const actions = template?.actions;\n    const templateType = template?.templateType;\n\n    switch (templateType) {\n      case 'quick_replies':\n        return (actions as MessageTemplateAction[])?.map((action) => {\n          return (\n            <Button\n              disabled={disabled}\n              className={styles.quickReplyButton}\n              ariaLabel={action.value}\n              key={action.value}\n              variant=\"outlinePrimary\"\n              onClick={() => handleClickQuickReply(action)}\n              data-kt=\"quickReplyButton\"\n            >\n              {action.displayText}\n            </Button>\n          );\n        });\n      case 'list':\n        return (actions as ListTemplateAction[])?.map((action) => {\n          return (\n            <ListAction\n              detailsText={action.detailsText}\n              titleText={action.titleText}\n              key={action.value}\n              imageUrl={action.imageUrl}\n              value={action?.value}\n              onClick={handleClickListReply}\n            />\n          );\n        });\n      case 'deflection':\n        return (actions as MessageTemplateAction[])?.map((action) => {\n          return (\n            <Button\n              disabled={disabled}\n              className={styles.quickReplyButton}\n              ariaLabel={action.value}\n              key={action.value}\n              variant=\"outlinePrimary\"\n              onClick={() =>\n                handleClickDeflectionReply(\n                  action,\n                  lastMessageWithTemplateAction as MessageCallbackResponse,\n                )\n              }\n              data-kt=\"quickReplyButton\"\n            >\n              {action.displayText}\n            </Button>\n          );\n        });\n      case 'mll':\n        return (actions as MLLTemplateAction)?.tree?.children?.map(\n          (mllChild) => {\n            return (\n              <Button\n                disabled={disabled}\n                className={classNames(styles.mllButton, {\n                  [styles.mllButtonWithChevron]: !!mllChild.children,\n                })}\n                ariaLabel={mllChild.displayName}\n                key={mllChild.id}\n                variant=\"outlinePrimary\"\n                onClick={() => handleClickMLLReply(mllChild, mllChild.id)}\n              >\n                <Fragment>\n                  <div className={styles.mllText}>{mllChild.displayName}</div>\n                  {mllChild.children && (\n                    <ChevronRight height={12} viewBox=\"0 6 24 12\" />\n                  )}\n                </Fragment>\n              </Button>\n            );\n          },\n        );\n      case 'answer_button_feedback': {\n        const agentData = getMessageAgentInformation(\n          (\n            lastMessageWithTemplateAction as\n              | MessageCallbackResponse\n              | { sentBy: undefined }\n          )?.sentBy,\n          chatSettings,\n          navigation.initAssistantPayload,\n        );\n        return (\n          <Fragment>\n            <ChatBubble\n              avatarUrl={agentData.avatarUrl}\n              userDisplayName={agentData.displayName}\n              showAvatar\n            >\n              {template?.followupText}\n            </ChatBubble>\n            <div className={styles.answerFeedbackContainer}>\n              {(actions as MessageAnswerFeedbackAction[]).map((action) => {\n                const isText = action.valueType === 'text';\n                return (\n                  <Button\n                    variant=\"outlinePrimary\"\n                    ariaLabel={!isText ? action.value : undefined}\n                    className={classNames({\n                      [styles.quickReplyButton]: isText,\n                      [styles.emojiReplyButton]: !isText,\n                    })}\n                    key={action.value}\n                    onClick={() =>\n                      handleClickQuickReply(action as MessageTemplateAction)\n                    }\n                  >\n                    {action.displayText}\n                  </Button>\n                );\n              })}\n            </div>\n          </Fragment>\n        );\n      }\n      default:\n        return null;\n    }\n  };\n  const conversationMessages = getConversationMessages();\n  const lastMessageWithTemplateAction = conversationMessages?.length\n    ? helpers.getLastMessageWithTemplateAction(conversationMessages)\n    : helpers.getLastMessageWithTemplateAction(initialMessages);\n\n  if (lastMessageWithTemplateAction) {\n    const templateActionReplyMessage =\n      helpers.getLastTemplateActionOptimisticReply(\n        lastMessageWithTemplateAction,\n        getCurrentConversation()?.optimisticMessages,\n      ) ||\n      helpers.getLastTemplateActionReply(\n        lastMessageWithTemplateAction,\n        conversationMessages,\n      );\n\n    const template = lastMessageWithTemplateAction.meta?.template;\n\n    const templateType = template?.templateType;\n\n    if (templateType && !supportedTypes.includes(templateType)) return null;\n\n    if (!templateActionReplyMessage) {\n      return templateType === 'answer_button_feedback' ? (\n        <div className={classNames(styles.inThread)}>\n          {renderActions(lastMessageWithTemplateAction)}\n        </div>\n      ) : (\n        <div\n          className={classNames(\n            styles.templateActions,\n            {\n              [styles.inThread]:\n                templateType &&\n                IN_THREAD_TEMPLATE_ACTIONS.includes(templateType),\n            },\n            className,\n          )}\n        >\n          {renderActions(lastMessageWithTemplateAction)}\n          {renderMLLModal()}\n        </div>\n      );\n    }\n  }\n\n  return null;\n};\n\nexport default TemplateActions;\n","import { OptimisticMessage } from 'widget_main/store/types';\nimport {\n  Attachment,\n  MessageCallbackResponse,\n  SendMessageParameters,\n} from 'core_main/sdk/send_message/types';\nimport {\n  DISTANCE_TO_BOTTOM_FOR_LOCK,\n  DISTANCE_TO_TOP_TO_LOAD_MORE,\n} from './constants';\n\nexport const createOptimisticMessage = (\n  sendMessagePayload: SendMessageParameters,\n): OptimisticMessage => {\n  const {\n    body,\n    payload,\n    attachments,\n    lastDeflection,\n    isInAssistantMode,\n    initAssistantPayload,\n    lang,\n  } = sendMessagePayload;\n  return {\n    messageId: String(Date.now()),\n    body,\n    payload,\n    attachments: attachments?.map((attachment: Attachment) => ({\n      attachmentId: String(Date.now()),\n      file: attachment.file,\n      url: attachment.url,\n      name: attachment.file.name,\n      contentLength: attachment.file.size,\n      contentType: attachment.file.type,\n    })),\n    lastDeflection,\n    isInAssistantMode,\n    initAssistantPayload,\n    lang,\n    sentBy: {\n      type: 'customer',\n    },\n  };\n};\nexport const isLastMessageFromCustomer = (\n  messages: MessageCallbackResponse[] | null,\n) => {\n  const lastMessageConvo = messages?.[messages.length - 1];\n\n  return lastMessageConvo?.sentBy?.type === 'customer';\n};\n\nexport const getMessageIdsToMarkAsRead = (\n  conversationId: string,\n  messages: Record<string, MessageCallbackResponse>,\n): string[] => {\n  if (!conversationId || !messages) return [];\n  const messageIds = Object.keys(messages);\n\n  return messageIds.filter((messageId) => {\n    const message = messages[messageId];\n    const isConversationMessage = message.conversationId === conversationId;\n    const isSentByAgent = message.direction === 'out';\n    return isConversationMessage && isSentByAgent;\n  });\n};\n\nexport const isScrolledToBottom = (element: {\n  scrollTop: number;\n  scrollHeight: number;\n  clientHeight: number;\n}) => {\n  return (\n    element.scrollHeight - element.scrollTop - DISTANCE_TO_BOTTOM_FOR_LOCK <=\n    element.clientHeight\n  );\n};\n\nexport const isScrolledToTop = (element: { scrollTop: number }) => {\n  return element.scrollTop <= DISTANCE_TO_TOP_TO_LOAD_MORE;\n};\n\n/// The time in ms to wait before ending the typing timeout\nexport const END_TYPING_TIMEOUT_MS = 10000; // 10 seconds\n\n/// The timeout to end the typing indicator\nlet endTypingTimeout;\n\n/// Clears the end typing indicator interval\nexport const clearEndTypingTimeout = () => {\n  if (endTypingTimeout) {\n    clearTimeout(endTypingTimeout);\n    endTypingTimeout = undefined;\n  }\n};\n\n/**\n * Starts the end typing interval\n * @param endTypingCallback The callback to call when the typing interval ends\n */\nexport const startEndTypingTimeout = (endTypingCallback: () => void) => {\n  clearEndTypingTimeout();\n  endTypingTimeout = setTimeout(() => {\n    endTypingCallback(); // Call the provided callback\n    clearEndTypingTimeout();\n  }, END_TYPING_TIMEOUT_MS);\n};\n","import TemplateActions from './TemplateActions';\n\nexport default TemplateActions;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./messageThread.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./messageThread.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  chatEndedLabel: 'Chat has ended',\n  chatDeletedLabel: 'Sorry, this chat no longer exists.',\n  chatConversationHasMoved: 'Conversation has moved',\n};\n","import { h, Fragment } from 'preact';\nimport classNames from 'classnames';\nimport {\n  useContext,\n  useState,\n  useEffect,\n  useCallback,\n  useLayoutEffect,\n  useRef,\n} from 'preact/hooks';\nimport {\n  NavigationContext,\n  ConversationsContext,\n  MessagesContext,\n  HideNewConversationButtonSettingsContext,\n  SettingsContext,\n  ConnectionContext,\n  ChatAvailabilityContext,\n} from 'widget_main/store';\n\nimport {\n  getKustomerCore,\n  setKustomerLocalStorage,\n  runKustomerListenersForEvent,\n  getKustomer,\n} from 'widget_main/globals/helpers';\nimport NewConversationButton from 'widget_main/components/NewConversationButton';\n\nimport * as helpers from 'widget_main/components/TimeAgo/helpers';\nimport { useTranslations } from 'i18n/hooks';\nimport {\n  UserTypingResponse,\n  UserAttributesWithTypingOptions,\n} from 'core_main/pubnub/types';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport {\n  MESSAGE_THREAD_PATH,\n  OFFLINE,\n  kustomerWidgetEventTypes,\n} from 'widget_main/globals/constants';\nimport { OptimisticMessage } from 'widget_main/store/types';\nimport { PublicCallback } from 'globals/types';\nimport {\n  useIntersectionObserver,\n  usePageVisibility,\n  useTouchMove,\n} from 'widget_main/globals/hooks';\nimport { TemplateType } from 'core_main/api/messages/types';\nimport { isIntersectionObserverUnmounted } from 'widget_main/globals/dom';\nimport ScrollToCurrent from './ScrollToCurrent';\nimport ChatMessage from '../../components/ChatMessage';\nimport MessageThreadInput from '../../components/MessageThreadInput';\nimport TemplateActions from './TemplateActions';\nimport { CHAT_MESSAGE_THREAD_ID } from './constants';\nimport {\n  createOptimisticMessage,\n  isLastMessageFromCustomer,\n  getMessageIdsToMarkAsRead,\n  startEndTypingTimeout,\n  clearEndTypingTimeout,\n} from './helpers';\nimport * as templateActionHelpers from './TemplateActions/helpers';\nimport styles from './messageThread.scss';\nimport { MessageOptions } from '../../components/MessageThreadInput/types';\n\nimport defaultMessages from './messages';\nimport Loader from '../../components/ui/Loader';\n\nconst kustomerCore = getKustomerCore();\n\ninterface MessageThreadProps {\n  isMobile: boolean;\n}\n\nconst MessageThread = ({ isMobile }: MessageThreadProps) => {\n  const chatSettings = useContext(SettingsContext);\n  const navigation = useContext(NavigationContext);\n  const threadRef = useRef<HTMLDivElement>(null);\n\n  useTouchMove(threadRef?.current);\n\n  const hideNewConversationButtonSettings = useContext(\n    HideNewConversationButtonSettingsContext,\n  );\n\n  const chatAvailability = useContext(ChatAvailabilityContext);\n  const conversations = useContext(ConversationsContext);\n  const messages = useContext(MessagesContext);\n\n  const { handoff, draft } = messages;\n  const handoffCallback = handoff?.callback;\n\n  const connection = useContext(ConnectionContext);\n\n  const translations = useTranslations(defaultMessages);\n\n  const { currentConversationId, initAssistantPayload } = navigation;\n\n  const getCurrentConversation = useCallback(() => {\n    if (currentConversationId) {\n      return conversations?.data?.[currentConversationId];\n    }\n\n    return undefined;\n  }, [conversations, currentConversationId]);\n\n  let satisfaction;\n\n  if (getCurrentConversation()) {\n    satisfaction = getCurrentConversation()?.satisfaction;\n  }\n\n  const conversation = getCurrentConversation();\n\n  const getConversationMessages = useCallback(() => {\n    if (!currentConversationId || !conversation) return null;\n\n    return conversation.messages.map((id) => messages.messageData[id]);\n  }, [currentConversationId, conversation, messages.messageData]);\n\n  const [userTyping, setUserTyping] = useState<\n    UserAttributesWithTypingOptions | undefined\n  >(undefined);\n\n  const [isCreatingConversation, setIsCreatingConversation] = useState(false);\n\n  const [forceUpdateState, forceUpdate] = useState<Maybe<unknown>>();\n  const [fetchingHistory, setFetchingHistory] = useState(false);\n  const [isAtBottomOfThread, setIsAtBottomOfThread] = useState(true);\n  const [showScrollToCurrent, setShowScrollToCurrent] = useState(false);\n  const [showNewMessagesText, setShowNewMessagesText] = useState(false);\n  const [messageCount, setMessageCount] = useState({\n    messageTotal: 0,\n    newMessages: 0, // not currently used, but future proofing in case it is needed\n  });\n  const [showNewMessageDividerIndex, setShowNewMessageDividerIndex] =\n    useState(-1);\n  const [isThreadRendered, setIsThreadRendered] = useState<boolean>(false);\n\n  const topOfChatRef = useRef<HTMLDivElement>(null);\n  const bottomOfChatRef = useRef<HTMLDivElement>(null);\n\n  const handleOnline = useCallback(() => {\n    if (currentConversationId) {\n      conversations\n        .fetchMessageHistory(currentConversationId, conversations.data)\n        .catch(forceUpdate);\n    }\n  }, [currentConversationId]);\n\n  useEffect(() => {\n    window.addEventListener('online', handleOnline);\n    return () => {\n      window.removeEventListener('online', handleOnline);\n    };\n  }, []);\n\n  const bottomRefIntersection = useIntersectionObserver(bottomOfChatRef, {\n    rootMargin: '36px',\n    root: threadRef?.current,\n  });\n  useEffect(() => {\n    // when sending messages, the rerender of the message thread causes useIntersectionObserver to return an unmounted\n    //   intersection observer which creates a false negative when checking if we are at the bottom of the thread\n    if (\n      bottomRefIntersection &&\n      !isIntersectionObserverUnmounted(bottomRefIntersection)\n    ) {\n      const isIntersecting = Boolean(bottomRefIntersection?.isIntersecting);\n      setIsAtBottomOfThread(isIntersecting);\n    }\n  }, [bottomRefIntersection]);\n\n  const fetchingInitialMessages =\n    !conversation?.messages.length && fetchingHistory;\n\n  const getInitialMessages = useCallback(() => {\n    const currentConversation = getCurrentConversation();\n\n    const conversationInitialMessages = currentConversation?.initialMessages;\n\n    const assistantInitialMessages = initAssistantPayload?.initialMessages;\n\n    if (!currentConversationId && assistantInitialMessages) {\n      return assistantInitialMessages;\n    }\n\n    if (currentConversationId && conversationInitialMessages) {\n      return conversationInitialMessages;\n    }\n\n    return undefined;\n  }, [initAssistantPayload, currentConversationId, getCurrentConversation]);\n\n  const sendMessage = useCallback(\n    (\n      sendMessageParams,\n      currentOptimisticMessage?: OptimisticMessage,\n      callback?: PublicCallback,\n    ) => {\n      const messageParamsConversationId = sendMessageParams.conversationId;\n      let optimisticMessage = currentOptimisticMessage;\n\n      if (optimisticMessage) {\n        conversations.toggleOptimisticMessageError(\n          messageParamsConversationId,\n          optimisticMessage.messageId,\n          false,\n        );\n      }\n\n      if (!currentOptimisticMessage) {\n        optimisticMessage = createOptimisticMessage(sendMessageParams);\n\n        conversations.addOptimisticMessage(\n          messageParamsConversationId,\n          optimisticMessage,\n        );\n      }\n\n      return kustomerCore.sendMessage(sendMessageParams, (response, error) => {\n        if (optimisticMessage) {\n          if (error) {\n            conversations.toggleOptimisticMessageError(\n              messageParamsConversationId,\n              optimisticMessage.messageId,\n              true,\n            );\n          } else {\n            conversations.removeOptimisticMessage(\n              messageParamsConversationId,\n              optimisticMessage.messageId,\n            );\n          }\n        }\n\n        if (typeof callback === 'function') callback(response, error);\n\n        return messages.receiveMessage(response, error);\n      });\n    },\n    [conversations, messages],\n  );\n\n  const runHandoffCallback = useCallback(\n    (response?, error?) => {\n      const isFunction = typeof handoffCallback === 'function';\n\n      if (!handoffCallback || !isFunction) return;\n\n      handoffCallback(response, error);\n    },\n    [handoffCallback],\n  );\n\n  const handleSubmit = useCallback(\n    (messageOptions: MessageOptions) => {\n      const initialMessages = getInitialMessages();\n      const assistantOptions = getKustomer()?.startParameters?.assistantOptions;\n\n      const messagePayload = {\n        ...messageOptions,\n        lang: getMappedLanguage(),\n      };\n\n      if (!navigation.currentConversationId) {\n        setIsCreatingConversation(true);\n\n        const title = messageOptions.body?.substring(0, 256);\n\n        const assistantId =\n          messages?.handoff?.assistantId || initAssistantPayload?.assistant;\n\n        return kustomerCore.createConversation(\n          {\n            title,\n            assistant: assistantId,\n            brand: chatSettings.brandId,\n            lang: getMappedLanguage(),\n            custom: messageOptions?.custom,\n          },\n          (response, error) => {\n            kustomerCore.sendPresenceActivity({ presence: 'online' });\n\n            if (error) {\n              runHandoffCallback(response, error);\n              setIsCreatingConversation(false);\n              conversations.refreshConversations();\n              // put an error in state to trigger the ErrorBoundary (async errors aren't caught)\n              forceUpdate(new Error(error));\n              return;\n            }\n\n            const { conversationId, isInAssistantMode } = response;\n\n            conversations.addConversation(response, initialMessages);\n\n            navigation.updateCurrentConversationId(conversationId);\n\n            const sendMessageParams = {\n              ...messagePayload,\n              conversationId,\n              isInAssistantMode,\n              initAssistantPayload,\n              assistantOptions,\n            };\n\n            sendMessage(sendMessageParams, undefined, (_, error) => {\n              if (error) {\n                conversations.refreshConversations();\n                // put an error in state to trigger the ErrorBoundary (async errors aren't caught)\n                forceUpdate(new Error(error));\n              }\n              setIsCreatingConversation(false);\n              runKustomerListenersForEvent(\n                kustomerWidgetEventTypes.onConversationCreate,\n                response,\n                error,\n              );\n              runHandoffCallback(response, error);\n            });\n          },\n        );\n      }\n\n      const { currentConversationId } = navigation;\n\n      const sendMessageParams = {\n        ...messagePayload,\n        conversationId: currentConversationId,\n        isInAssistantMode: getCurrentConversation()?.isInAssistantMode,\n        assistantOptions,\n      };\n\n      return sendMessage(sendMessageParams);\n    },\n    [\n      getInitialMessages,\n      navigation,\n      getCurrentConversation,\n      sendMessage,\n      messages?.handoff?.assistantId,\n      initAssistantPayload,\n      chatSettings.brandId,\n      conversations,\n      runHandoffCallback,\n    ],\n  );\n\n  useEffect(() => {\n    setKustomerLocalStorage('lastOpenPage', MESSAGE_THREAD_PATH);\n    const interval = setInterval(() => {\n      forceUpdate({});\n    }, 60000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const previousConversationMessageCount = useRef(0);\n\n  useLayoutEffect(() => {\n    const chatMessageThread = document.querySelector(CHAT_MESSAGE_THREAD_ID);\n    const conversationMessages = getConversationMessages();\n    // this hook runs on message changes and scrolls to the bottom of the latest message if the end-customer has not scrolled up\n    if (conversation?.messages.length && !fetchingHistory) {\n      if (chatMessageThread && isAtBottomOfThread) {\n        chatMessageThread.scrollTop = chatMessageThread.scrollHeight;\n      }\n    }\n\n    // if messages are loaded and the end user has scrolled up\n    setShowScrollToCurrent(\n      Boolean(chatMessageThread?.scrollTop !== 0 && !isAtBottomOfThread),\n    );\n\n    // if we receive a new message, set the new message text that appears if the customer is scrolled up in the thread to true\n    if (\n      !fetchingHistory &&\n      !isAtBottomOfThread &&\n      conversationMessages?.length &&\n      conversationMessages?.length > messageCount.messageTotal\n    ) {\n      if (\n        messageCount.messageTotal > 0 &&\n        conversationMessages[conversationMessages.length - 1].direction ===\n          'out'\n      ) {\n        setMessageCount({\n          messageTotal: conversationMessages.length,\n          newMessages: messageCount.newMessages + 1,\n        });\n        setShowNewMessagesText(true);\n        setShowNewMessageDividerIndex(\n          conversationMessages.length - (messageCount.newMessages + 1),\n        );\n      }\n    } else {\n      // if user has reached the bottom, we can assume they've seen all new messages\n      //  so reset the message counter & new message text (but not the new message divider)\n      // the timeout is to ensure the New Messages text does not disappear before\n      //  the isAtBottomOfThread css animation finishes\n      setTimeout(() => {\n        setMessageCount({\n          messageTotal: conversationMessages?.length || 0,\n          newMessages: 0,\n        });\n        setShowNewMessagesText(false);\n      }, 250);\n    }\n\n    if (\n      !isThreadRendered &&\n      conversationMessages?.some((m) => m.direction === 'out')\n    ) {\n      setIsThreadRendered(true);\n    }\n\n    // when showing the new message divider, we only want to clear the divider when a new message is sent or received\n    //  and the end user is at the bottom of the thread\n    if (\n      isAtBottomOfThread &&\n      conversationMessages &&\n      conversationMessages.length > 0 &&\n      conversationMessages.length === previousConversationMessageCount.current\n    ) {\n      setShowNewMessageDividerIndex(-1);\n    }\n    previousConversationMessageCount.current =\n      (conversationMessages?.length || 0) + 1;\n  }, [conversation?.messages, isAtBottomOfThread, connection, fetchingHistory]);\n\n  useEffect(() => {\n    setIsThreadRendered(false);\n  }, [conversation?.conversationId]);\n\n  useEffect(() => {\n    // this hook loads messages on initial load\n    if (currentConversationId) {\n      setFetchingHistory(true);\n      conversations\n        .fetchMessageHistory(currentConversationId, conversations.data)\n        .catch(forceUpdate);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    // this hook clears the loading ui when messages are received\n    if (conversation?.messages?.length || conversation?.hasAllMessages)\n      setFetchingHistory(false);\n  }, [conversation?.hasAllMessages, conversation?.messages]);\n\n  useEffect(() => {\n    if (\n      messages.handoff?.message &&\n      !currentConversationId &&\n      !isCreatingConversation\n    ) {\n      handleSubmit({\n        body: messages.handoff?.message,\n        payload: messages.handoff?.payload,\n        custom: messages.handoff?.custom,\n      });\n      return;\n    }\n\n    if (!messages.handoff?.message) {\n      runHandoffCallback();\n    }\n  }, [\n    runHandoffCallback,\n    messages.handoff,\n    handleSubmit,\n    currentConversationId,\n    isCreatingConversation,\n  ]);\n  const pageIsVisible = usePageVisibility();\n  useEffect(() => {\n    if (navigation.currentConversationId && pageIsVisible) {\n      setKustomerLocalStorage(\n        'lastOpenConversationId',\n        navigation.currentConversationId,\n      );\n\n      return kustomerCore.markRead({\n        conversationId: navigation.currentConversationId,\n        messageIds: getMessageIdsToMarkAsRead(\n          navigation.currentConversationId,\n          messages.messageData,\n        ),\n      });\n    }\n\n    return undefined;\n  }, [\n    navigation.currentConversationId,\n    messages.messageData,\n    satisfaction,\n    pageIsVisible,\n  ]);\n\n  useEffect(() => {\n    if (!navigation.currentConversationId) return;\n\n    const handleAgentTypingActivity = (response: UserTypingResponse) => {\n      const { user, typing, conversationId, typingOpts } = response;\n\n      if (conversationId !== navigation.currentConversationId) return;\n\n      if (typing) {\n        setUserTyping({ ...user, ...typingOpts });\n        startEndTypingTimeout(() => {\n          setUserTyping(undefined); // Clear typing indicator when endTypingInterval is reached\n        });\n        return;\n      }\n\n      setUserTyping(undefined);\n    };\n\n    kustomerCore.addListener(\n      'onAgentTypingActivity',\n      handleAgentTypingActivity,\n    );\n\n    // eslint-disable-next-line consistent-return\n    return () => {\n      kustomerCore.removeListener(\n        'onAgentTypingActivity',\n        handleAgentTypingActivity,\n      );\n      clearEndTypingTimeout();\n    };\n  }, [navigation.currentConversationId]);\n\n  if (forceUpdateState instanceof Error) {\n    // this forces the ErrorBoundary to display the error put in state by an async process\n    throw forceUpdateState;\n  }\n  const isInputHidden = () => {\n    const convo = getCurrentConversation();\n    const conversationMessages = getConversationMessages();\n    const initialMessages = getInitialMessages();\n\n    if (\n      convo?.isInAssistantMode &&\n      (isLastMessageFromCustomer(conversationMessages) ||\n        convo?.optimisticMessages?.length)\n    ) {\n      return true;\n    }\n\n    const lastMessageWithTemplateAction = conversationMessages?.length\n      ? templateActionHelpers.getLastMessageWithTemplateAction(\n          conversationMessages,\n        )\n      : templateActionHelpers.getLastMessageWithTemplateAction(initialMessages);\n\n    if (lastMessageWithTemplateAction) {\n      if (\n        lastMessageWithTemplateAction?.meta?.template?.meta?.lockInput === false\n      ) {\n        return false;\n      }\n      const templateActionReplyMessage =\n        templateActionHelpers.getLastTemplateActionOptimisticReply(\n          lastMessageWithTemplateAction,\n          getCurrentConversation()?.optimisticMessages,\n        ) ||\n        templateActionHelpers.getLastTemplateActionReply(\n          lastMessageWithTemplateAction,\n          conversationMessages,\n        );\n\n      if (!templateActionReplyMessage) {\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  const handleRetrySend = (optimisticMessage) => {\n    const conversation = getCurrentConversation();\n\n    if (!conversation) {\n      return null;\n    }\n    const { conversationId, isInAssistantMode } = conversation;\n    const { attachments, initAssistantPayload } = optimisticMessage;\n\n    const sendMessagePayload = {\n      ...optimisticMessage,\n      conversationId,\n      messageId: undefined,\n      attachments: attachments?.map((attachment) => {\n        return {\n          file: attachment.file,\n        };\n      }),\n      initAssistantPayload: isInAssistantMode\n        ? initAssistantPayload\n        : undefined,\n      assistantOptions: getKustomer()?.startParameters?.assistantOptions,\n    };\n\n    return sendMessage(sendMessagePayload, optimisticMessage);\n  };\n\n  const renderOptimisticMessages = () => {\n    const { currentConversationId } = navigation;\n\n    const conversation = getCurrentConversation();\n\n    if (!currentConversationId || conversation?.ended) {\n      return null;\n    }\n\n    const { optimisticMessages } = conversations.data[currentConversationId];\n\n    return (\n      <Fragment>\n        {optimisticMessages.map((message) => {\n          return (\n            <ChatMessage\n              key={message.messageId}\n              message={message}\n              handleRetrySend={handleRetrySend}\n            />\n          );\n        })}\n      </Fragment>\n    );\n  };\n\n  const renderAssistantInitialMessages = () => {\n    const conversationMessages = getConversationMessages();\n    const initialMessages = getInitialMessages();\n    if (!initialMessages?.length) return null;\n\n    return initialMessages?.map((initialMessage, index) => {\n      const isLastMessage = initialMessages.length - 1 === index;\n\n      const message = {\n        ...initialMessage,\n        createdAt: initialMessage.importedAt,\n        sentBy: {\n          type: 'user',\n          avatarUrl: initAssistantPayload?.attributes?.avatarUrl,\n          displayName: initAssistantPayload?.attributes?.publicName,\n        },\n      };\n\n      const conversationHasMessages =\n        Array.isArray(conversationMessages) && conversationMessages?.length > 0;\n\n      const showTimestamp = !conversationHasMessages && isLastMessage;\n\n      if (showTimestamp && !initialMessage?.importedAt) {\n        message.createdAt = new Date().toISOString();\n      }\n\n      return (\n        <ChatMessage\n          key={message.createdAt}\n          message={message}\n          showTimestamp={showTimestamp}\n          showAvatar={isLastMessage}\n          showBotIdentifier={chatSettings.showBotIdentifier}\n        />\n      );\n    });\n  };\n\n  const renderThread = () => {\n    const conversationMessages = getConversationMessages();\n    const initialMessages = getInitialMessages();\n\n    if (!conversationMessages) return null;\n\n    let messagesToRender = conversationMessages;\n\n    if (initialMessages?.length) {\n      const initialMessageTemplateIds = initialMessages?.map(\n        (initialMessage) => {\n          return initialMessage?.meta?.template?.id;\n        },\n      );\n\n      messagesToRender = messagesToRender?.filter((message) => {\n        return (\n          !message?.meta?.template?.id ||\n          !initialMessageTemplateIds?.includes(message?.meta?.template?.id)\n        );\n      });\n    }\n\n    return (\n      <Fragment>\n        {messagesToRender?.length ? <div ref={topOfChatRef} /> : null}\n        {messagesToRender?.map((currentMessage, index) => {\n          const nextMessage = messagesToRender[index + 1];\n\n          const isLastInStreak =\n            !nextMessage ||\n            currentMessage.sentBy.type !== nextMessage.sentBy.type;\n\n          const showTimestamp =\n            !nextMessage ||\n            helpers.getTimeDifference(\n              currentMessage.createdAt,\n              nextMessage.createdAt,\n            ) >\n              10 * helpers.MINUTE;\n\n          const showAIIdentifier =\n            currentMessage?.meta?.template?.meta?.isAiResponse === true;\n\n          return (\n            <ChatMessage\n              key={currentMessage.messageId}\n              message={currentMessage}\n              showAvatar={isLastInStreak || showTimestamp}\n              showTimestamp={showTimestamp}\n              showBotIdentifier={chatSettings.showBotIdentifier}\n              showAIIdentifier={showAIIdentifier}\n              showNewMessageDivider={showNewMessageDividerIndex === index}\n            />\n          );\n        })}\n        {renderOptimisticMessages()}\n      </Fragment>\n    );\n  };\n\n  const renderGetPreviousMessagesLoader = () => {\n    return (\n      <div\n        className={classNames(styles.loaderWrapper, {\n          [styles.showLoader]: fetchingHistory,\n        })}\n      >\n        <Loader className={styles.loader} />\n      </div>\n    );\n  };\n\n  const renderDivider = (message: string) => {\n    return (\n      <div className={styles.chatDividerContainer}>\n        <div className={styles.chatDividerLine} />\n        <div className={styles.chatDividerLabel}>{message}</div>\n        <div className={styles.chatDividerLine} />\n      </div>\n    );\n  };\n\n  const renderChatEndedDivider = () => {\n    const currentConversation = getCurrentConversation();\n\n    if (!currentConversation?.ended || fetchingInitialMessages) return null;\n\n    if (currentConversation.deleted) {\n      return renderDivider(translations.chatDeletedLabel);\n    }\n\n    return renderDivider(translations.chatEndedLabel);\n  };\n\n  const renderChatMovedDivider = () => {\n    const conversation = getCurrentConversation();\n\n    if (!conversation?.movedToConversationId || fetchingInitialMessages)\n      return null;\n\n    return renderDivider(translations.chatConversationHasMoved);\n  };\n\n  const renderTemplateActions = (supportedTypes: TemplateType[]) => {\n    const currentConversation = getCurrentConversation();\n\n    if (currentConversation?.ended || fetchingInitialMessages) return null;\n\n    return (\n      <TemplateActions\n        onSubmit={handleSubmit}\n        disabled={connection === OFFLINE || isCreatingConversation}\n        supportedTypes={supportedTypes}\n        initialMessages={initAssistantPayload?.initialMessages}\n      />\n    );\n  };\n\n  const renderFooter = () => {\n    const currentConversation = getCurrentConversation();\n\n    if (currentConversation?.ended) {\n      const openConversationFound = Object.values(conversations.data).find(\n        (conversation) => !conversation.ended,\n      );\n\n      if (\n        hideNewConversationButtonSettings.onConversationEnd ||\n        (chatSettings.singleSessionChat && openConversationFound)\n      ) {\n        return null;\n      }\n\n      return (\n        <div className={styles.createConversationContainer}>\n          <NewConversationButton className={styles.createConversationButton} />\n        </div>\n      );\n    }\n\n    if (currentConversation?.movedToConversationId) {\n      return (\n        <div className={styles.createConversationContainer}>\n          <NewConversationButton\n            navigateToConversationId={currentConversation.movedToConversationId}\n            className={styles.createConversationButton}\n          />\n        </div>\n      );\n    }\n\n    return (\n      <div className={styles.inputContainer}>\n        <MessageThreadInput\n          onSubmit={handleSubmit}\n          conversationId={currentConversationId}\n          isInputHidden={isInputHidden()}\n          chatAvailability={chatAvailability}\n          showAttachmentButton={!chatSettings.disableAttachments}\n          isSendDisabled={isCreatingConversation || connection === OFFLINE}\n          draft={draft}\n        />\n      </div>\n    );\n  };\n\n  const renderTypingIndicator = () => {\n    if (!userTyping) return null;\n\n    return <ChatMessage userTyping={userTyping} showAvatar={true} />;\n  };\n\n  const renderSatisfaction = () => {\n    const conversationMessages = getConversationMessages();\n\n    if (!conversationMessages) return null;\n\n    const lastMessage = conversationMessages[conversationMessages.length - 1];\n    const satisfactionTimetoken = satisfaction?.timetoken;\n\n    if (\n      satisfactionTimetoken &&\n      lastMessage?.createdAt &&\n      lastMessage?.createdAt < satisfactionTimetoken\n    ) {\n      return <ChatMessage satisfaction={satisfaction} />;\n    }\n\n    return null;\n  };\n\n  return (\n    <div\n      class={classNames(styles.messageThread, {\n        [styles.messageThreadMobile]: isMobile,\n      })}\n    >\n      <div\n        aria-live=\"polite\"\n        class={classNames(styles.chatMessages, {\n          [styles.loading]: fetchingHistory,\n        })}\n        id={CHAT_MESSAGE_THREAD_ID}\n        ref={threadRef}\n      >\n        {/* this empty div is important for \"pin to bottom\" functionality. see comment in css */}\n        <div>\n          {renderGetPreviousMessagesLoader()}\n          {renderAssistantInitialMessages()}\n          {renderThread()}\n          {renderTypingIndicator()}\n          {renderChatEndedDivider()}\n          {renderChatMovedDivider()}\n          {renderSatisfaction()}\n          {renderTemplateActions([\n            'list',\n            'answer_button_feedback',\n            'quick_replies',\n            'deflection',\n            'mll',\n          ])}\n          <ScrollToCurrent\n            showScrollToCurrent={showScrollToCurrent}\n            showNewMessagesText={showNewMessagesText}\n          />\n          <div ref={bottomOfChatRef} />\n        </div>\n      </div>\n      {renderFooter()}\n    </div>\n  );\n};\n\nexport default MessageThread;\n","import MessageThread from './MessageThread';\n\nexport default MessageThread;\n","export default __webpack_public_path__ + \"articlesEmpty.svg\";","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"24\",\"height\":\"24\",\"viewBox\":\"0 0 24 24\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-folder-1RQZw78\",\"d\":\"M3 8.2C3 7.07989 3 6.51984 3.21799 6.09202C3.40973 5.71569 3.71569 5.40973 4.09202 5.21799C4.51984 5 5.0799 5 6.2 5H9.67452C10.1637 5 10.4083 5 10.6385 5.05526C10.8425 5.10425 11.0376 5.18506 11.2166 5.29472C11.4184 5.4184 11.5914 5.59135 11.9373 5.93726L12.0627 6.06274C12.4086 6.40865 12.5816 6.5816 12.7834 6.70528C12.9624 6.81494 13.1575 6.89575 13.3615 6.94474C13.5917 7 13.8363 7 14.3255 7H17.8C18.9201 7 19.4802 7 19.908 7.21799C20.2843 7.40973 20.5903 7.71569 20.782 8.09202C21 8.51984 21 9.0799 21 10.2V15.8C21 16.9201 21 17.4802 20.782 17.908C20.5903 18.2843 20.2843 18.5903 19.908 18.782C19.4802 19 18.9201 19 17.8 19H6.2C5.07989 19 4.51984 19 4.09202 18.782C3.71569 18.5903 3.40973 18.2843 3.21799 17.908C3 17.4802 3 16.9201 3 15.8V8.2Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"2\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"viewBox\":\"0 0 24 24\"}, rest), [\"\\n    \", h('path', {\"fill\":\"currentColor\",\"d\":\"M6,2A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2H6M6,4H13V9H18V20H6V4M8,12V14H16V12H8M8,16V18H13V16H8Z\"}, []), \"\\n\"]);\n};\n\n        ","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./kbSearchListItem.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./kbSearchListItem.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport classNames from 'classnames';\n\nimport FolderIcon from 'widget_main/globals/assets/folder.svg';\nimport FileDocumentOutlineIcon from 'widget_main/globals/assets/fileDocumentOutline.svg';\nimport ChevronRightIcon from 'widget_main/globals/assets/chevronRight.svg';\nimport { isEnterKey } from 'widget_main/globals/keyboardEvents';\n\nimport { CategoryCallbackResponse } from 'core_main/sdk/get_categories/types';\nimport { ArticleCallbackResponse } from 'core_main/sdk/get_articles/types';\nimport { sanitizeHtml } from 'widget_main/vendors/hooks';\nimport styles from './kbSearchListItem.scss';\nimport { KBSearchListItemType } from '../types';\n\ninterface KBSearchListItemProps {\n  listItem: CategoryCallbackResponse | ArticleCallbackResponse;\n  onClick: (type: KBSearchListItemType, itemId: string) => void;\n  isLast?: boolean;\n}\n\nexport const isCategory = (\n  item?: CategoryCallbackResponse | ArticleCallbackResponse,\n): item is CategoryCallbackResponse => {\n  return 'categoryId' in (item as CategoryCallbackResponse);\n};\n\nconst KBSearchListItem = ({\n  listItem,\n  onClick,\n  isLast,\n}: KBSearchListItemProps) => {\n  const isListItemCategory = isCategory(listItem);\n  const type = isListItemCategory ? 'category' : 'article';\n\n  let id;\n\n  if (isCategory(listItem)) {\n    id = listItem.categoryId;\n  } else {\n    id = listItem.articleId;\n  }\n\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      onClick(type, id);\n    }\n  };\n\n  const handleClick = () => {\n    onClick(type, id);\n  };\n\n  const renderIcon = () => {\n    if (isListItemCategory) return <FolderIcon className={styles.itemIcon} />;\n\n    return <FileDocumentOutlineIcon className={styles.itemIcon} />;\n  };\n\n  const showDescription = Boolean(\n    listItem.description && listItem.description.length > 0,\n  );\n\n  return (\n    <div\n      className={classNames(styles.itemContainer, {\n        [styles.isLast]: isLast,\n      })}\n    >\n      <div\n        className={classNames(styles.container, {\n          [styles.isLast]: isLast,\n        })}\n        onKeyPress={handleKeyPress}\n        tabIndex={0}\n        role=\"button\"\n        aria-label={listItem.title}\n        onClick={handleClick}\n      >\n        <div className={styles.details}>\n          {renderIcon()}\n          <div className={styles.information}>\n            <div className={styles.title} data-kt=\"kbSearchItemTitle\">\n              {listItem.title}\n            </div>\n            {showDescription && (\n              <div\n                className={styles.description}\n                // eslint-disable-next-line react/no-danger\n                dangerouslySetInnerHTML={{\n                  __html: sanitizeHtml(listItem.description, {\n                    ALLOWED_TAGS: ['#text'],\n                  }),\n                }}\n              />\n            )}\n          </div>\n        </div>\n        <ChevronRightIcon className={styles.chevronIcon} />\n      </div>\n    </div>\n  );\n};\n\nexport default KBSearchListItem;\n","import KBSearchListItem from './KbSearchListItem';\n\nexport default KBSearchListItem;\n","import {\n  CategoryCallbackResponse,\n  GetCategoriesCallbackResponse,\n} from 'core_main/sdk/get_categories/types';\nimport { CategoryState, KBState } from 'widget_main/store/types';\n\nexport const createCategoryTree = (\n  categories: GetCategoriesCallbackResponse['categories'],\n) => {\n  return Object.entries(categories).reduce(\n    (acc, val) => {\n      const key = val[0];\n      const value = val[1] as CategoryCallbackResponse;\n\n      const sorted = value.childCategories.reduce((children, val) => {\n        if (categories[val]) children.push(acc[val]);\n        return children;\n      }, [] as CategoryState[]);\n\n      acc[key].sortedChildCategories = sorted;\n\n      return acc;\n    },\n    { ...categories } as KBState['categories'],\n  );\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./kbSearchList.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./kbSearchList.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  kbSearchListEmptyState: '0 articles found',\n  articlesEmptyAltText: 'Articles empty',\n  kbSearchListMaxArticles: '{{number}}+ results',\n  kbFeaturedArticles: 'Featured Articles',\n  kbCategories: 'Categories',\n};\n","import { Fragment, h } from 'preact';\nimport {\n  useContext,\n  useEffect,\n  useLayoutEffect,\n  useRef,\n  useState,\n} from 'preact/hooks';\nimport classNames from 'classnames';\nimport {\n  getKustomerCore,\n  setKustomerLocalStorage,\n} from 'widget_main/globals/helpers';\nimport { handleError } from 'globals/errors';\n\nimport {\n  KBContext,\n  NavigationContext,\n  SettingsContext,\n} from 'widget_main/store';\nimport { CategoryCallbackResponse } from 'core_main/sdk/get_categories/types';\nimport Loader from 'widget_main/components/ui/Loader';\nimport { KB_ARTICLE_PATH, KB_SEARCH_PATH } from 'widget_main/globals/constants';\nimport ArticlesEmpty from 'widget_main/globals/assets/articlesEmpty.svg';\nimport { ArticleCallbackResponse } from 'core_main/sdk/get_articles/types';\n\nimport { useTranslations } from 'i18n/hooks';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport Text from 'widget_main/components/Text';\nimport KBSearchListItem from './KBSearchListItem';\n\nimport { createCategoryTree } from './helpers';\nimport styles from './kbSearchList.scss';\nimport { ARTICLE_TYPE, MAX_ARTICLE_SEARCH_SIZE } from './constants';\nimport { KBSearchListItemType } from './types';\n\nimport messages from './messages';\n\nconst kustomerCore = getKustomerCore();\n\nconst KBSearchList = () => {\n  const kb = useContext(KBContext);\n  const navigation = useContext(NavigationContext);\n  const chatSettings = useContext(SettingsContext);\n  const [loading, updateLoading] = useState(false);\n  const [langSupported, updateLangSupported] = useState(true);\n  const translations = useTranslations(messages);\n  const listContainer = useRef<HTMLDivElement>(null);\n\n  const lang = getMappedLanguage();\n\n  const { categories, rootCategory, currentCategoryId, articleSearchResults } =\n    kb;\n\n  const { knowledgeBaseId } = chatSettings;\n\n  useEffect(() => {\n    setKustomerLocalStorage('lastOpenPage', KB_SEARCH_PATH);\n  }, []);\n\n  useEffect(() => {\n    if (!Object.keys(categories).length) {\n      updateLoading(true);\n      if (knowledgeBaseId) {\n        kustomerCore.getFeaturedArticles(\n          { knowledgeBaseId, lang },\n          (res, err) => {\n            if (err) {\n              handleError(err, { message: 'Error fetching featured articles' });\n              return;\n            }\n            if (res && res.articles.length > 0) {\n              kb.updateFeaturedArticles(res.articles);\n            }\n          },\n        );\n      }\n      kustomerCore.getCategories({ lang, knowledgeBaseId }, (res, err) => {\n        const langNotFound =\n          err?.title === 'Not Found' && err?.source === 'lang';\n\n        if (langNotFound) {\n          updateLangSupported(false);\n          updateLoading(false);\n          return;\n        }\n\n        if (res) {\n          const tree = createCategoryTree(res.categories);\n          kb.updateCategories(tree, res.rootCategory);\n          kb.updateCurrentCategoryId(res.rootCategory.categoryId);\n          updateLoading(false);\n        }\n      });\n    }\n  }, [categories, kb, lang, knowledgeBaseId]);\n\n  useLayoutEffect(() => {\n    const currentList = listContainer?.current;\n    if (currentList && currentList?.scrollTop) {\n      currentList.scrollTop = 0;\n    }\n  }, [currentCategoryId]);\n\n  const renderEmptyState = () => {\n    return (\n      <div className={styles.empty}>\n        <img\n          alt={translations.articlesEmptyAltText}\n          className={styles.articlesEmpty}\n          src={ArticlesEmpty}\n        />\n        <p className={styles.emptyMessage}>\n          {translations.kbSearchListEmptyState}\n        </p>\n      </div>\n    );\n  };\n\n  if (!langSupported) {\n    return <div className={classNames(styles.list)}>{renderEmptyState()}</div>;\n  }\n\n  if (!currentCategoryId || loading || kb.articleSearchFetching) {\n    return (\n      <div className={classNames(styles.list, styles.listLoading)}>\n        <Loader className={styles.loader} />\n      </div>\n    );\n  }\n\n  const category = categories?.[currentCategoryId];\n  const sortedChildCategories = category?.sortedChildCategories;\n  const articles = category?.articles;\n\n  let tree: (ArticleCallbackResponse | CategoryCallbackResponse)[] =\n    articleSearchResults || [\n      ...(articles || []),\n      ...(sortedChildCategories || []),\n    ];\n\n  const overMaxResults =\n    articleSearchResults &&\n    articleSearchResults.length > MAX_ARTICLE_SEARCH_SIZE;\n  // long term, it probably makes sense that the API should be sending back a flag\n  //  to us that more than MAX_ARTICLE_SEARCH_SIZE number of articles were found,\n  //  but for now we are doing the parsing\n  // Also, we (currently) only want this to affect search results, so only check on the\n  //  `articleSearchResults` object before we trim & mark as over max\n  if (overMaxResults) tree = tree.slice(0, MAX_ARTICLE_SEARCH_SIZE);\n\n  const handleListItemClick = (type: KBSearchListItemType, id: string) => {\n    if (type === ARTICLE_TYPE) {\n      kb.updateCurrentArticleId(id);\n      navigation.updatePage(KB_ARTICLE_PATH);\n      return;\n    }\n\n    const categoryArticles = categories[id].articles;\n\n    if (categories && !categoryArticles) {\n      kustomerCore.getArticles(\n        { categoryId: id, lang, knowledgeBaseId },\n        (res, err) => {\n          const updatedArticles = err ? [] : res.articles;\n\n          kb.updateArticles(updatedArticles);\n\n          kb.updateCategories(\n            {\n              ...categories,\n              [id]: { ...categories[id], articles: updatedArticles },\n            },\n            rootCategory,\n          );\n\n          kb.updateCurrentCategoryId(id);\n        },\n      );\n\n      return;\n    }\n\n    kb.updateCurrentCategoryId(id);\n  };\n\n  const renderHeaderContent = (title?: string, description?: string) => {\n    return (\n      <div className={styles.headerContainer}>\n        <p className={styles.headerTitle}>{title}</p>\n        {description && (\n          <p className={styles.headerDescription}>{description}</p>\n        )}\n      </div>\n    );\n  };\n\n  const renderHeader = () => {\n    if (currentCategoryId !== rootCategory?.categoryId) {\n      if (category) {\n        return renderHeaderContent(category.title, category.description);\n      }\n    } else if (kb.featuredArticles?.length && !articleSearchResults) {\n      return renderHeaderContent(translations.kbCategories);\n    }\n    return null;\n  };\n\n  const renderOverMaxLabel = () => {\n    return (\n      <div className={styles.maxResultsLabel}>\n        <Text\n          fields={{ number: MAX_ARTICLE_SEARCH_SIZE }}\n          id=\"kbSearchListMaxArticles\"\n          defaultMessage={translations.kbSearchListMaxArticles}\n        />\n      </div>\n    );\n  };\n\n  const renderFeaturedArticles = () => {\n    if (\n      currentCategoryId === rootCategory?.categoryId &&\n      kb.featuredArticles?.length &&\n      !articleSearchResults\n    ) {\n      return (\n        <Fragment>\n          {renderHeaderContent(translations.kbFeaturedArticles)}\n          {kb.featuredArticles?.map((article) => {\n            return (\n              <KBSearchListItem\n                listItem={article}\n                key={article.title}\n                onClick={handleListItemClick}\n              />\n            );\n          })}\n        </Fragment>\n      );\n    }\n\n    return null;\n  };\n\n  return (\n    <div\n      ref={listContainer}\n      id=\"kbSearchList\"\n      className={classNames(styles.list)}\n    >\n      {renderFeaturedArticles()}\n      {renderHeader()}\n      {tree?.map((item, index) => {\n        const isLast = !tree[index + 1];\n        return (\n          <KBSearchListItem\n            listItem={item}\n            key={item.title}\n            onClick={handleListItemClick}\n            isLast={isLast}\n          />\n        );\n      })}\n      {tree?.length === 0 && renderEmptyState()}\n      {overMaxResults && renderOverMaxLabel()}\n    </div>\n  );\n};\n\nexport default KBSearchList;\n","import KBSearchList from './KBSearchList';\n\nexport default KBSearchList;\n","export const ARTICLE_TYPE = 'article';\nexport const CATEGORY_TYPE = 'category';\nexport const MAX_ARTICLE_SEARCH_SIZE = 100;\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"61\",\"height\":\"18\",\"viewBox\":\"0 0 61 18\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"d\":\"M2.13956 13.7488H1.10522V3.74567H2.13956V9.97889H2.15317L5.06563 6.87589H6.44021L3.84076 9.58421L6.67157 13.7488H5.41948L3.13306 10.3327L2.13956 11.3671V13.7488Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M17.6125 14.021C15.8976 14.021 14.4822 13.1363 14.3597 11.6665L15.3805 11.4623C15.4621 12.415 16.3876 13.0819 17.6125 13.0819C18.6876 13.0819 19.5178 12.5783 19.5178 11.8706C19.5178 11.3399 19.0142 11.0132 17.8574 10.7819L16.7687 10.5641C15.3396 10.2647 14.7272 9.69308 14.7272 8.68597C14.7408 7.48832 15.8024 6.60369 17.2722 6.60369C18.7148 6.60369 19.79 7.37944 20.0486 8.49543L19.0551 8.76763C18.9598 8.04632 18.2385 7.51554 17.2586 7.51554C16.3876 7.51554 15.7479 8.04632 15.7343 8.63153C15.7343 9.13509 16.1426 9.42089 17.0953 9.62504L18.2113 9.84279C19.8308 10.183 20.5249 10.7546 20.5249 11.7754C20.5249 13.0683 19.2728 14.021 17.6125 14.021Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M24.2081 14.021C22.9152 14.021 22.0442 13.1499 22.0442 11.8978V7.73329H20.5335V6.87589H22.0442V4.83444L23.0785 4.58946V6.87589H26.1543V7.73329H23.0785V11.789C23.0785 12.5647 23.5549 13.1227 24.3034 13.1227C24.9975 13.1227 25.6371 12.6192 25.7732 11.7345L26.617 12.0884C26.4265 13.286 25.3786 14.021 24.2081 14.021Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M30.7431 14.021C28.5383 14.021 27.0821 12.5511 27.0821 10.3191C27.0821 8.07353 28.5383 6.60369 30.7431 6.60369C32.9615 6.60369 34.4177 8.07353 34.4177 10.3191C34.4177 12.5511 32.9615 14.021 30.7431 14.021ZM30.7431 13.0819C32.3354 13.0819 33.3698 11.9931 33.3698 10.3191C33.3698 8.64514 32.3354 7.55637 30.7431 7.55637C29.1508 7.55637 28.1164 8.64514 28.1164 10.3191C28.1164 11.9931 29.1508 13.0819 30.7431 13.0819Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M36.5358 13.7488H35.5015V6.87589H36.3997L36.5086 7.883H36.5222C36.9305 7.08003 37.8287 6.60369 38.9311 6.60369C40.0199 6.60369 40.7548 7.10725 41.1087 7.99188H41.1223C41.7347 7.02559 42.6874 6.60369 43.7081 6.60369C45.2052 6.60369 46.0898 7.55637 46.0898 9.17592V13.7488H45.0419V9.24396C45.0419 8.18241 44.4294 7.55637 43.3951 7.55637C42.0886 7.55637 41.3128 8.53626 41.3128 9.92445V13.7488H40.2785V9.24396C40.2785 8.18241 39.666 7.55637 38.6181 7.55637C37.3116 7.55637 36.5358 8.53626 36.5358 9.92445V13.7488Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M50.9082 14.021C48.7171 14.021 47.1112 12.4286 47.1112 10.2375C47.1112 8.12797 48.581 6.60369 50.6224 6.60369C52.6367 6.60369 53.9568 8.12797 53.984 10.2511C53.984 10.3736 53.984 10.5233 53.9704 10.6594H48.1863C48.336 12.0884 49.4384 13.0819 50.9219 13.0819C51.997 13.0819 52.9089 12.5239 53.2899 11.7754L54.1882 12.1428C53.7391 13.2452 52.4461 14.021 50.9082 14.021ZM48.1999 9.74752H52.8817C52.7456 8.34573 51.8609 7.55637 50.6088 7.55637C49.3295 7.55637 48.3905 8.441 48.1999 9.74752Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M58.1788 6.59008C59.3492 6.59008 60.1522 7.36583 60.2883 8.74041L59.39 9.03982C59.2812 8.07353 58.7776 7.55637 58.0291 7.55637C56.9267 7.55637 56.2326 8.46821 56.2326 9.96528V13.7488H55.1983V6.87589H56.0829L56.1782 7.95105H56.1918C56.5728 7.12086 57.3078 6.59008 58.1788 6.59008Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('g', {\"clip-path\":\"url(#svg-kustomer-footer-logo-8-RE-mz)\"}, [\"\\n\", h('path', {\"d\":\"M12.3492 10.7966C12.3492 11.9901 11.5317 12.7947 10.3111 12.7947C9.09056 12.7947 8.25874 11.9901 8.25874 10.7966V9.29449H7.23969V10.7966C7.23969 12.5403 8.48742 13.7209 10.284 13.7209C12.0805 13.7209 13.3826 12.5403 13.3826 10.7966V9.29449H12.3492V10.7966Z\",\"fill\":\"currentColor\"}, []), \"\\n\", h('path', {\"d\":\"M10.8442 7.65844C11.2678 6.89725 12.5893 6.89665 12.9867 7.65844\",\"stroke\":\"currentColor\",\"stroke-width\":\"0.768841\",\"stroke-miterlimit\":\"10\"}, []), \"\\n\", h('path', {\"d\":\"M9.69922 7.65844C9.27561 6.89725 7.95411 6.89665 7.55678 7.65844\",\"stroke\":\"currentColor\",\"stroke-width\":\"0.768841\",\"stroke-miterlimit\":\"10\"}, []), \"\\n\"]), \"\\n\", h('defs', {}, [\"\\n\", h('clipPath', {\"id\":\"svg-kustomer-footer-logo-8-RE-mz\"}, [\"\\n\", h('rect', {\"width\":\"6.20007\",\"height\":\"7.18339\",\"fill\":\"white\",\"transform\":\"translate(7.1825 6.53748)\"}, []), \"\\n\"]), \"\\n\"]), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"17\",\"height\":\"16\",\"viewBox\":\"0 0 17 16\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-messageProcessing-1RQZw78\",\"d\":\"M13.1835 12.0001C13.4391 11.5 13.5833 10.9335 13.5833 10.3334C13.5833 8.30835 11.9417 6.66673 9.91667 6.66673C7.89162 6.66673 6.25 8.30835 6.25 10.3334C6.25 12.3584 7.89162 14.0001 9.91667 14.0001L14.25 14.0001C14.25 14.0001 13.5833 13.3334 13.1929 12.0195M12.8166 8.00006C12.8822 7.67695 12.9167 7.34253 12.9167 7.00006C12.9167 4.23864 10.6781 2.00006 7.91667 2.00006C5.15524 2.00006 2.91667 4.23864 2.91667 7.00006C2.91667 7.58445 3.01692 8.14543 3.20118 8.66673C3.91732 10.6745 2.25 12.0001 2.25 12.0001H6.58333\",\"stroke\":\"currentColor\",\"stroke-width\":\"1.33333\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"width\":\"17\",\"height\":\"16\",\"viewBox\":\"0 0 17 16\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-bookOpenPageVariant-1RQZw78\",\"d\":\"M8.75 6.93338V13.3334M8.75 6.93338C8.75 5.43991 8.75 4.69317 8.45935 4.12274C8.20369 3.62098 7.79574 3.21303 7.29397 2.95737C6.72354 2.66672 5.97681 2.66672 4.48333 2.66672H3.81667C3.4433 2.66672 3.25661 2.66672 3.11401 2.73938C2.98856 2.8033 2.88658 2.90528 2.82266 3.03072C2.75 3.17333 2.75 3.36002 2.75 3.73338V10.9334C2.75 11.3068 2.75 11.4934 2.82266 11.636C2.88658 11.7615 2.98856 11.8635 3.11401 11.9274C3.25661 12.0001 3.4433 12.0001 3.81667 12.0001H5.78112C6.14124 12.0001 6.32131 12.0001 6.49542 12.0311C6.64997 12.0586 6.80073 12.1043 6.9446 12.1671C7.10669 12.2378 7.25651 12.3377 7.55616 12.5375L8.75 13.3334M8.75 6.93338C8.75 5.43991 8.75 4.69317 9.04065 4.12274C9.29631 3.62098 9.70426 3.21303 10.206 2.95737C10.7765 2.66672 11.5232 2.66672 13.0167 2.66672H13.6833C14.0567 2.66672 14.2434 2.66672 14.386 2.73938C14.5114 2.8033 14.6134 2.90528 14.6773 3.03072C14.75 3.17333 14.75 3.36002 14.75 3.73338V10.9334C14.75 11.3068 14.75 11.4934 14.6773 11.636C14.6134 11.7615 14.5114 11.8635 14.386 11.9274C14.2434 12.0001 14.0567 12.0001 13.6833 12.0001H11.7189C11.3588 12.0001 11.1787 12.0001 11.0046 12.0311C10.85 12.0586 10.6993 12.1043 10.5554 12.1671C10.3933 12.2378 10.2435 12.3377 9.94384 12.5375L8.75 13.3334\",\"stroke\":\"currentColor\",\"stroke-width\":\"1.33333\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","export default {\n  footerText: 'Powered by Kustomer',\n  footerNavigationChat: 'Chat',\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./footer.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./footer.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  privacyPolicy: 'Privacy Policy',\n  footerConsent:\n    'By using this chat, you are accepting and consenting to the practices described in our privacy policy.',\n};\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./footerConsent.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./footerConsent.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { Fragment, h } from 'preact';\nimport { useContext, useState } from 'preact/hooks';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport { SettingsContext } from 'widget_main/store';\nimport { useTranslations } from 'i18n/hooks';\nimport { useEffect, useRef } from 'react';\nimport classNames from 'classnames';\nimport { isMobileViewport } from 'widget_main/globals/dom';\nimport messages from './messages';\nimport styles from './footerConsent.scss';\n\nexport const FooterConsent = () => {\n  const [showToolTip, setShowTooltip] = useState<boolean>(false);\n  const [showCloseButtonInToolTip, setShowCloseButtonInToolTip] =\n    useState<boolean>(false);\n  const consentButtonRef = useRef<HTMLButtonElement>(null);\n  const closeButtonRef = useRef<HTMLButtonElement>(null);\n\n  const settings = useContext(SettingsContext);\n  const translations = useTranslations(messages);\n\n  // for a11y purposes, make sure the closebutton is available before we focus on it when opening the tooltip\n  useEffect(() => {\n    if (showCloseButtonInToolTip && closeButtonRef.current) {\n      closeButtonRef.current.focus();\n    }\n  }, [showCloseButtonInToolTip, consentButtonRef]);\n\n  if (!settings.botConsent?.enabled) {\n    return null;\n  }\n\n  let consentMessage = translations.footerConsent;\n  if (settings.botConsent.value !== 'default') {\n    consentMessage = settings.botConsent.value;\n  }\n\n  const handleMouseOver = () => {\n    if (isMobileViewport()) {\n      return;\n    }\n    setShowCloseButtonInToolTip(false);\n    setShowTooltip(true);\n  };\n\n  const handleMouseLeave = () => {\n    if (isMobileViewport()) {\n      return;\n    }\n    setShowCloseButtonInToolTip(false);\n    setShowTooltip(false);\n  };\n\n  const handleClick = () => {\n    if (showToolTip) {\n      setShowTooltip(false);\n      consentButtonRef.current?.focus();\n    } else {\n      setShowCloseButtonInToolTip(true);\n      setShowTooltip(true);\n    }\n  };\n\n  const renderToolTip = () => {\n    if (!showToolTip) {\n      return null;\n    }\n    return (\n      <div className={styles.footerTooltipContainer}>\n        <button\n          className={classNames(styles.footerTooltipContent, {\n            [styles.footerTooltipContentClicked]: showCloseButtonInToolTip,\n          })}\n          type=\"button\"\n          onClick={handleClick}\n          ref={closeButtonRef}\n        >\n          <div className={styles.footerTooltip}>{consentMessage}</div>\n          {showCloseButtonInToolTip && (\n            <div className={styles.closeButton}>\n              <CloseIcon width={18} height={18} />\n            </div>\n          )}\n        </button>\n      </div>\n    );\n  };\n\n  return (\n    <Fragment>\n      {settings.showBrandingIdentifier && <span className={styles.separator}>•</span>}\n      <button\n        ref={consentButtonRef}\n        className={styles.consent}\n        onMouseOver={handleMouseOver}\n        onMouseLeave={handleMouseLeave}\n        onFocus={() => undefined}\n        onClick={handleClick}\n      >\n        {translations.privacyPolicy}\n      </button>\n      {renderToolTip()}\n    </Fragment>\n  );\n};\n","import { FooterConsent } from './FooterConsent';\n\nexport default FooterConsent;\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport KustomerFooterLogo from 'widget_main/globals/assets/kustomer-footer-logo.svg'\nimport classNames from 'classnames';\n\nimport MessageProcessingIcon from 'widget_main/globals/assets/messageProcessing.svg';\nimport BookOpenPageVariantIcon from 'widget_main/globals/assets/bookOpenPageVariant.svg';\n\nimport { NavigationContext, SettingsContext } from 'widget_main/store';\nimport {\n  CONVERSATIONS_PATH,\n  KB_ARTICLE_PATH,\n  KB_SEARCH_PATH,\n  MESSAGE_THREAD_PATH,\n  WIDGET_TYPE_CHAT_KB,\n} from 'widget_main/globals/constants';\nimport Unread from 'widget_main/components/Unread';\nimport { isEnterKey } from 'widget_main/globals/keyboardEvents';\nimport { useTranslations } from 'i18n/hooks';\n\nimport { getKustomerCore } from 'widget_main/globals/helpers';\nimport messages from './messages';\n\nimport styles from './footer.scss';\nimport FooterConsent from './FooterConsent';\n\nconst kustomerCore = getKustomerCore();\nconst Footer = () => {\n  const navigation = useContext(NavigationContext);\n  const settings = useContext(SettingsContext);\n\n  const { showBrandingIdentifier } = settings;\n\n  const translations = useTranslations(messages, ['answers']);\n\n  const currentPage = navigation.page;\n\n  const isKBPath =\n    currentPage === KB_SEARCH_PATH || currentPage === KB_ARTICLE_PATH;\n\n  const isChatPath =\n    currentPage === CONVERSATIONS_PATH || currentPage === MESSAGE_THREAD_PATH;\n\n  const goToKBPath = () => {\n    navigation.updatePage(KB_SEARCH_PATH);\n  };\n\n  const goToChatPath = () => {\n    navigation.updatePage(CONVERSATIONS_PATH);\n  };\n\n  const handleKBClick = () => {\n    kustomerCore.kustomerEventCount({ name: 'footer.kb_button.click' });\n    goToKBPath();\n  };\n\n  const handleKBKeyPress = (e: KeyboardEvent) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n      kustomerCore.kustomerEventCount({\n        name: 'footer.kb_button.keypress',\n      });\n      goToKBPath();\n    }\n  };\n\n  const handleChatClick = () => {\n    kustomerCore.kustomerEventCount({ name: 'footer.chat_button.click' });\n    goToChatPath();\n  };\n\n  const handleChatKeyPress = (e: KeyboardEvent) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n      kustomerCore.kustomerEventCount({\n        name: 'footer.chat_button.keypress',\n      });\n      goToChatPath();\n    }\n  };\n\n  const renderFooterNavigation = () => {\n    if (settings.widgetType !== WIDGET_TYPE_CHAT_KB) return null;\n\n    return (\n      <div\n        className={styles.footerNavigation}\n        role=\"tablist\"\n        aria-labelledby={translations.answers}\n      >\n        <div\n          onKeyPress={handleKBKeyPress}\n          role=\"tab\"\n          tabIndex={0}\n          aria-controls={'kbSearchList'}\n          aria-label={translations.answers}\n          aria-selected={isKBPath}\n          onClick={isKBPath ? undefined : handleKBClick}\n          className={classNames(styles.itemContainer, {\n            [styles.highlighted]: isKBPath,\n          })}\n        >\n          <BookOpenPageVariantIcon\n            className={styles.icon}\n            data-kt=\"footerNavigationKbIcon\"\n            aria-label={`${translations.answers} icon`}\n          />\n          <p>{translations.answers}</p>\n        </div>\n        <div\n          onKeyPress={handleChatKeyPress}\n          role=\"tab\"\n          aria-controls=\"conversationList\"\n          aria-label={translations.footerNavigationChat}\n          aria-selected={isChatPath}\n          tabIndex={0}\n          onClick={isChatPath ? undefined : handleChatClick}\n          className={classNames(styles.itemContainer, {\n            [styles.highlighted]: isChatPath,\n          })}\n        >\n          <MessageProcessingIcon\n            className={styles.icon}\n            data-kt=\"footerNavigationChatIcon\"\n            aria-label={`${translations.footerNavigationChat} icon`}\n          />\n          <div className={styles.chatContainer}>\n            <p>{translations.footerNavigationChat}</p>\n            {isKBPath && <Unread className={styles.unread} limitCount />}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  return (\n    <div className={styles.footerContainer}>\n      {renderFooterNavigation()}\n      <div className={styles.footer}>\n        {showBrandingIdentifier ? <div><KustomerFooterLogo /></div> : null}\n        <FooterConsent />\n      </div>\n    </div>\n  );\n};\n\nexport default Footer;\n","import Footer from './Footer';\n\nexport default Footer;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./widget.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./widget.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n\nimport { h } from 'preact';\n\nexport default function (props) {\n    var styles = props.styles;\n    var rest = Object.assign({}, props);\n    delete rest.styles;\n\n    return h('svg', Object.assign({\"viewBox\":\"0 0 20 20\",\"fill\":\"none\",\"xmlns\":\"http://www.w3.org/2000/svg\"}, rest), [\"\\n\", h('path', {\"id\":\"svg-magnify-1RQZw78\",\"d\":\"M13.8938 13.8676L17.5 17.5M15.8333 9.16667C15.8333 12.8486 12.8486 15.8333 9.16667 15.8333C5.48477 15.8333 2.5 12.8486 2.5 9.16667C2.5 5.48477 5.48477 2.5 9.16667 2.5C12.8486 2.5 15.8333 5.48477 15.8333 9.16667Z\",\"stroke\":\"currentColor\",\"stroke-width\":\"1.4\",\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\"}, []), \"\\n\"]);\n};\n\n        ","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./kbHeader.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./kbHeader.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  articleSearchInputName: 'article search',\n  articleSearchInputPlaceholder: 'Search Help Articles',\n  articleSearchButton: 'Submit Search',\n  kbHeaderResults: '{{resultsCount}} results',\n  articleSearchClearButton: 'Clear Search Entry',\n};\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { getKustomerCore } from 'widget_main/globals/helpers';\nimport ChatIcon from 'widget_main/components/ChatIcon';\nimport Text from 'widget_main/components/Text';\nimport MagnifyIcon from 'widget_main/globals/assets/magnify.svg';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport {\n  KBContext,\n  NavigationContext,\n  SettingsContext,\n} from 'widget_main/store';\nimport { isEnterKey } from 'widget_main/globals/keyboardEvents';\nimport {\n  KB_ARTICLE_PATH,\n  KB_DEFLECT_ARTICLE_PATH,\n} from 'widget_main/globals/constants';\nimport { useTranslations } from 'i18n/hooks';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport styles from './kbHeader.scss';\n\nimport messages from './messages';\n\nconst kustomerCore = getKustomerCore();\n\nconst KBHeader = () => {\n  const kb = useContext(KBContext);\n  const navigation = useContext(NavigationContext);\n  const chatSettings = useContext(SettingsContext);\n  const translations = useTranslations(messages, ['answers']);\n\n  const lang = getMappedLanguage();\n\n  const { currentCategoryId, articleSearchResults } = kb;\n\n  const isArticleView =\n    navigation.page === KB_ARTICLE_PATH ||\n    navigation.page === KB_DEFLECT_ARTICLE_PATH;\n\n  const resultsCount = articleSearchResults?.length;\n\n  const handleUpdateSearchInput = (e) => {\n    kb.updateArticleSearchInput(e.target.value);\n  };\n\n  const handleClearSearchInput = () => {\n    kb.updateArticleSearchInput('');\n    kb.updateArticleSearchResults(undefined);\n  };\n\n  const handleClearKeyPress = (e: KeyboardEvent) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      handleClearSearchInput();\n    }\n  };\n\n  const runSearch = () => {\n    if (!kb.articleSearchInput) {\n      return handleClearSearchInput();\n    }\n\n    kb.updateArticleSearchFetching(true);\n\n    kustomerCore.kustomerEventCount({\n      name: 'kb_header.search_bar_submit.submit',\n    });\n\n    return kustomerCore.searchArticles(\n      { term: kb.articleSearchInput, lang },\n      (res, error) => {\n        if (!error) {\n          kb.updateArticleSearchResults(res.articles);\n          kb.updateArticles(res.articles);\n        }\n        kb.updateArticleSearchFetching(false);\n      },\n    );\n  };\n\n  const handleSearchKeyPress = (e: KeyboardEvent) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      runSearch();\n    }\n  };\n\n  const handleInputKeyPress = (e: KeyboardEvent) => {\n    if (isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n      runSearch();\n    }\n  };\n\n  const renderClearSearchButton = () => {\n    if (!kb.articleSearchInput) {\n      return null;\n    }\n    return (\n      <div\n        role=\"button\"\n        tabIndex={0}\n        onClick={handleClearSearchInput}\n        onKeyPress={handleClearKeyPress}\n        className={styles.clearIcon}\n        aria-label={translations.articleSearchClearButton}\n      >\n        <CloseIcon />\n      </div>\n    );\n  };\n\n  if (currentCategoryId === kb.rootCategory?.categoryId && !isArticleView) {\n    return (\n      <div class={styles.kbHeader}>\n        <div class={styles.content}>\n          <ChatIcon\n            className={styles.chatIconWrapper}\n            size={{ width: 50, height: 50 }}\n          />\n          <h4 className={styles.header}>{chatSettings?.teamName}</h4>\n        </div>\n        <div className={styles.inputContainer}>\n          <input\n            type=\"text\"\n            name={translations.articleSearchInputName}\n            value={kb.articleSearchInput}\n            className={styles.articleSearchInput}\n            placeholder={translations.articleSearchInputPlaceholder}\n            onChange={handleUpdateSearchInput}\n            onKeyPress={handleInputKeyPress}\n            autoComplete=\"off\"\n            data-kt=\"kbSearchInput\"\n            aria-label={translations.articleSearchInputPlaceholder}\n          />\n          {renderClearSearchButton()}\n          <div\n            role=\"button\"\n            tabIndex={0}\n            className={classNames(styles.searchIcon, {\n              [styles.highlighted]: kb.articleSearchInput?.length,\n            })}\n            onKeyPress={handleSearchKeyPress}\n            onClick={kb.articleSearchInput?.length ? runSearch : undefined}\n            aria-label={translations.articleSearchButton}\n          >\n            <MagnifyIcon />\n          </div>\n        </div>\n        <p className={styles.resultsCount}>\n          {resultsCount && resultsCount >= 0 ? (\n            <Text\n              fields={{ resultsCount }}\n              id=\"kbHeaderResults\"\n              defaultMessage={translations.kbHeaderResults}\n            />\n          ) : null}\n        </p>\n      </div>\n    );\n  }\n\n  return (\n    <div class={styles.currentView}>\n      <div class={styles.content}>\n        <p className={styles.header}>{translations.answers}</p>\n      </div>\n    </div>\n  );\n};\n\nexport default KBHeader;\n","import KbHeader from './KBHeader';\n\nexport default KbHeader;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./kbArticle.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./kbArticle.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport {\n  useCallback,\n  useContext,\n  useEffect,\n  useState,\n  useRef,\n} from 'preact/hooks';\nimport { KBContext, NavigationContext } from 'widget_main/store';\nimport Loader from 'widget_main/components/ui/Loader';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport { KB_ARTICLE_PATH, KB_SEARCH_PATH } from 'widget_main/globals/constants';\n\nimport { getKustomerCore } from 'widget_main/globals/helpers';\nimport styles from './kbArticle.scss';\n\nconst kustomerCore = getKustomerCore();\nexport const createKBArticleUrl = ({\n  baseDomain,\n  lang,\n  slug,\n  hash,\n  embed,\n  anchorHash,\n}: {\n  baseDomain: string;\n  lang: string;\n  slug: string;\n  hash: string;\n  embed?: boolean;\n  anchorHash?: string;\n}) => {\n  const params = new URLSearchParams();\n  let domain = baseDomain;\n  if (embed) {\n    params.set('web', '1');\n    // always want to load domains over https\n    if (domain.match(/^http:/gm)) {\n      domain = domain.replace(/^http:/gm, 'https:');\n    }\n  }\n\n  const slashSeparator = domain.match(/\\/$/) ? '' : '/';\n  const path = `${domain}${slashSeparator}${lang}/embed/articles/`;\n\n  const kbUrlPath = `${path}${slug}-${hash}?${params.toString()}`;\n\n  if (anchorHash) return `${kbUrlPath}${anchorHash}`;\n\n  return kbUrlPath;\n};\n\nconst KBArticle = () => {\n  const kb = useContext(KBContext);\n  const navigation = useContext(NavigationContext);\n  const [loading, setLoading] = useState(true);\n  const [anchorHash, setAnchorHash] = useState<string | undefined>();\n  const iframeRef = useRef<HTMLIFrameElement>(null);\n  const { articles, currentArticleId, config } = kb;\n\n  const lang = getMappedLanguage();\n\n  const navigateToArticle = (articleId) => {\n    if (articleId !== currentArticleId) setLoading(true);\n    kb.updateCurrentArticleId(articleId);\n    navigation.updatePage(KB_ARTICLE_PATH);\n  };\n\n  /* We need to listen to a message emitted from window.postMessage() to process when a link is clicked within the KB\n   * article embed in order to determine if it is a KB article link we should navigate to within the widget or open in\n   * a new tab. A similar piece of functionality exists in the iOS and Android SDKs, and so we should match.\n   *    https://github.com/kustomer/chat-sdk-ios/blob/main/SDK/KustomerSDK/KustomerChat/KustomerUI/KnowledgeBase/ViewControllers/KBArticleViewer.swift#L51\n   *    https://github.com/kustomer/customer-android/blob/master/kustomersdk/src/main/java/com/kustomer/kustomersdk/Activities/KUSKnowledgeBaseActivity.java#L169\n   *\n   * (The Android URL override function doesn't function the same, but it _does_ allow for navigation within the UI Webview)\n   *\n   * This work, however, does not keep track of a stack of pages if you navigate to multiple articles within one\n   * \"KB Article session\" meaning, if you navigate from KB Article 1 -> KB Article 2 -> KB Article 3 then click\n   * the \"Back\" arrow, we will take you back to the Article list, not KB Article 2.\n   *\n   * There is room for improvement here to manage navigation to cover the case above, specifically with the work being\n   * done here:\n   *    https://github.com/kustomer/chat-web/pull/614\n   */\n  const messageListener = useCallback(\n    (event: MessageEvent<{ url: string; target: string }>) => {\n      const { knowledgeBaseDomain, id } = config;\n\n      if (!knowledgeBaseDomain) {\n        return;\n      }\n      const { url, target } = event.data;\n\n      if (!url) return;\n\n      const articleUrl = new URL(url);\n      const articleUrlHash = articleUrl.hash;\n      const articleUrlPathname = articleUrl.pathname;\n      const kbBaseUrl = new URL(knowledgeBaseDomain);\n      const targetBlank = target === '_blank';\n\n      const currentIframe = iframeRef?.current;\n      const iframeSrc = currentIframe?.src;\n\n      if (iframeSrc && iframeSrc.length && articleUrlHash && !targetBlank) {\n        const currentIframePathname = new URL(iframeSrc)?.pathname;\n\n        if (currentIframePathname === articleUrlPathname) {\n          currentIframe.src = iframeSrc.split('#')[0] + articleUrlHash;\n          return;\n        }\n      }\n\n      if (targetBlank || articleUrl.hostname !== kbBaseUrl.hostname) {\n        window.open(url, '_blank');\n        return;\n      }\n\n      setAnchorHash(articleUrlHash);\n      // removes the lang of the article from the pathname to get the slug\n      const articleSlugHash = articleUrlPathname\n        .replaceAll(/^\\/[a-z_]*\\//g, '')\n        .replace('embed/articles/', '');\n\n      const articleSlug = articleSlugHash.slice(\n        0,\n        articleSlugHash.lastIndexOf('-'),\n      );\n      const articleHash = articleSlugHash.slice(\n        articleSlugHash.lastIndexOf('-') + 1,\n      );\n\n      const articleInStore = Object.keys(kb.articles || []).find(\n        (a) => kb.articles?.[a].slug === articleSlug,\n      );\n      if (articleInStore) {\n        navigateToArticle(articleInStore);\n        return;\n      }\n\n      kustomerCore\n        .getArticleBySlug({\n          articleSlug,\n          articleHash,\n          lang,\n          knowledgeBaseId: id,\n        })\n        .then((article) => {\n          const articleId = article?.articleId;\n          if (articleId) {\n            if (kb.articles?.[articleId]) {\n              navigateToArticle(articleId);\n              return;\n            }\n            kb.updateArticles([article]);\n            navigateToArticle(articleId);\n          } else {\n            navigation.updatePage(KB_SEARCH_PATH);\n          }\n        });\n    },\n    [kb],\n  );\n\n  useEffect(() => {\n    window.self.addEventListener('message', messageListener);\n    return () => {\n      window.self.removeEventListener('message', messageListener);\n    };\n  }, [kb]);\n\n  if (!currentArticleId) return null;\n\n  const article = articles?.[currentArticleId];\n\n  if (!article) return null;\n\n  const kbArticleUrl = createKBArticleUrl({\n    baseDomain: article.kbUrl || kb?.config.knowledgeBaseDomain || '',\n    lang: article.lang || lang,\n    slug: article.slug,\n    hash: article.hash,\n    embed: true,\n    anchorHash,\n  });\n\n  return (\n    <div className={styles.articleContainer}>\n      {loading ? (\n        <div className={styles.loaderWrapper}>\n          <Loader className={styles.loader} />\n        </div>\n      ) : null}\n      <iframe\n        ref={iframeRef}\n        data-kt=\"kbArticleBody\"\n        onLoad={() => setLoading(false)}\n        className={styles.articleIframe}\n        title={article.title}\n        src={kbArticleUrl}\n      />\n    </div>\n  );\n};\n\nexport default KBArticle;\n","export default {\n  noInternetConnection: 'No Internet Connection',\n};\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./focusTrap.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./focusTrap.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h } from 'preact';\nimport { Component, createRef } from 'react';\nimport styles from './focusTrap.scss';\n\n/**\n * Focus Trap React component\n * Used to trap focus inside the chat widget, while the widget is open\n */\nclass FocusTrap extends Component {\n  trapRef = createRef<HTMLDivElement>();\n\n  firstFocusable: HTMLElement | null = null;\n\n  lastFocusable: HTMLElement | null = null;\n\n  componentDidMount() {\n    this.setFocusTrap();\n    // listen to key presses\n    document.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    // remove key press listener\n    document.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  setFocusTrap = () => {\n    setTimeout(() => {\n      const dialog = this.trapRef.current;\n      if (!dialog) return;\n      // get all focusable elements inside the dialog\n      const focusableElements = [\n        'button',\n        'input',\n        'select',\n        'textarea',\n        'iframe',\n        'object',\n        'embed',\n        '[href]',\n        '[contenteditable]',\n        '[tabindex]:not([tabindex=\"-1\"])',\n      ];\n      const focusableContent = dialog.querySelectorAll(\n        focusableElements.join(', '),\n      );\n      if (focusableContent.length === 0) return;\n      this.firstFocusable = focusableContent[0] as HTMLElement | null;\n      this.lastFocusable = focusableContent[\n        focusableContent.length - 1\n      ] as HTMLElement | null;\n      this.firstFocusable?.focus();\n    }, 0);\n  };\n\n  handleKeyDown = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      // esca key should close chat widget\n      window.dispatchEvent(new Event('kustomerClose'));\n    } else if (e.key === 'Tab') {\n      if (e.shiftKey && document.activeElement === this.firstFocusable) {\n        e.preventDefault();\n        // if tabbing backwards and the first focusable element is\n        // focused, focus the last focusable element\n        this.lastFocusable?.focus();\n      } else if (!e.shiftKey && document.activeElement === this.lastFocusable) {\n        e.preventDefault();\n        // if tabbing forwards and the last focusable element is\n        // focused, focus the first focusable element\n        this.firstFocusable?.focus();\n      }\n    }\n  };\n\n  render() {\n    return (\n      <div\n        ref={this.trapRef}\n        role=\"dialog\"\n        aria-modal=\"true\"\n        class={styles.focusTrap}\n      >\n        {this.props.children}\n      </div>\n    );\n  }\n}\n\nexport default FocusTrap;\n","import { Fragment, h } from 'preact';\nimport { useContext, useEffect, useRef } from 'preact/hooks';\nimport classNames from 'classnames';\nimport {\n  ConnectionContext,\n  KBContext,\n  NavigationContext,\n} from 'widget_main/store';\nimport { useTranslations } from 'i18n/hooks';\nimport WifiStrengthOffOutline from 'widget_main/globals/assets/wifiStrengthOffOutline.svg';\nimport {\n  CONVERSATIONS_PATH,\n  MESSAGE_THREAD_PATH,\n  MODAL_ROOT_ID,\n  KB_SEARCH_PATH,\n  KB_ARTICLE_PATH,\n  KB_DEFLECT_ARTICLE_PATH,\n} from 'widget_main/globals/constants';\n\nimport ErrorBoundary from 'widget_main/components/ErrorBoundary';\nimport { useLocale, useVendors } from 'widget_main/vendors/hooks';\nimport Loader from 'widget_main/components/ui/Loader';\nimport {\n  focusOnFirstElementInWidget,\n  useFocusLock,\n} from 'widget_main/globals/dom';\nimport TitleBarButtons from '../TitleBarButtons';\nimport ConversationsHeader from '../../screens/Conversations/ConversationsHeader';\nimport MessageThreadHeader from '../../screens/MessageThread/MessageThreadHeader';\nimport Conversations from '../../screens/Conversations';\nimport MessageThread from '../../screens/MessageThread';\nimport KBSearchList from '../../screens/KBSearchList';\nimport Footer from '../Footer';\nimport styles from './widget.scss';\nimport KBHeader from '../KBHeader';\nimport KBArticle from '../../screens/KBArticle/KBArticle';\n\nimport messages from './messages';\nimport FocusTrap from '../FocusTrap/FocusTrap';\n\ninterface WidgetProps {\n  isMobile: boolean;\n  hideHistory?: boolean;\n  restartApp?: () => void;\n  loading: boolean;\n}\n\nconst Widget = ({\n  isMobile,\n  hideHistory,\n  restartApp,\n  loading,\n}: WidgetProps) => {\n  const chatWidgetRef = useRef<HTMLDivElement | null>(null);\n  const navigationState = useContext(NavigationContext);\n  const kb = useContext(KBContext);\n  const translations = useTranslations(messages);\n  const connection = useContext(ConnectionContext);\n  const [, isLoadingVendors] = useVendors();\n  const [isLoadingLocale] = useLocale();\n\n  const focusLockRef = useFocusLock();\n\n  const isLoading = isLoadingVendors || isLoadingLocale || loading;\n\n  useEffect(() => {\n    // trigger a focus on the iframe to ensure accessibility tools focus on the chat when it is\n    //  opened using the Kustomer.open() call\n    if (chatWidgetRef?.current) {\n      focusOnFirstElementInWidget(chatWidgetRef.current);\n    }\n  }, [chatWidgetRef]);\n\n  const onGoBackForMessageThreadPath = () => {\n    navigationState.updatePage(CONVERSATIONS_PATH);\n    navigationState.updateCurrentConversationId(undefined);\n    navigationState.updateInitAssistantPayload(undefined);\n  };\n\n  const renderHeader = () => {\n    switch (navigationState.page) {\n      case CONVERSATIONS_PATH:\n        return (\n          <Fragment>\n            <TitleBarButtons />\n            <ConversationsHeader />\n          </Fragment>\n        );\n      case MESSAGE_THREAD_PATH:\n        return (\n          <Fragment>\n            <TitleBarButtons\n              onGoBack={hideHistory ? undefined : onGoBackForMessageThreadPath}\n            />\n            <MessageThreadHeader />\n          </Fragment>\n        );\n      case KB_SEARCH_PATH: {\n        const { currentCategoryId } = kb;\n\n        let onGoBack;\n\n        if (currentCategoryId) {\n          const category = kb.categories?.[currentCategoryId];\n          const parent = category?.parentCategory;\n          onGoBack = parent\n            ? () => kb.updateCurrentCategoryId(parent)\n            : undefined;\n        }\n\n        return (\n          <Fragment>\n            <TitleBarButtons onGoBack={onGoBack} />\n            <KBHeader />\n          </Fragment>\n        );\n      }\n      case KB_ARTICLE_PATH: {\n        return (\n          <Fragment>\n            <TitleBarButtons\n              onGoBack={() => {\n                navigationState.updatePage(KB_SEARCH_PATH);\n              }}\n            />\n            <KBHeader />\n          </Fragment>\n        );\n      }\n      case KB_DEFLECT_ARTICLE_PATH: {\n        return (\n          <Fragment>\n            <TitleBarButtons\n              onGoBack={() => {\n                navigationState.updatePage(MESSAGE_THREAD_PATH);\n              }}\n            />\n            <KBHeader />\n          </Fragment>\n        );\n      }\n      default:\n        return (\n          <Fragment>\n            <TitleBarButtons />\n            <ConversationsHeader />\n          </Fragment>\n        );\n    }\n  };\n\n  const routeWithErrorBoundary = (node) => {\n    return (\n      <ErrorBoundary page={navigationState.page} restartApp={restartApp}>\n        {node}\n      </ErrorBoundary>\n    );\n  };\n\n  const renderRoute = () => {\n    switch (navigationState.page) {\n      case CONVERSATIONS_PATH:\n        return routeWithErrorBoundary(<Conversations />);\n      case MESSAGE_THREAD_PATH:\n        return routeWithErrorBoundary(<MessageThread isMobile={isMobile} />);\n      case KB_SEARCH_PATH:\n        return routeWithErrorBoundary(<KBSearchList />);\n      case KB_ARTICLE_PATH:\n        return routeWithErrorBoundary(<KBArticle />);\n      case KB_DEFLECT_ARTICLE_PATH:\n        return routeWithErrorBoundary(<KBArticle />);\n      default:\n        return routeWithErrorBoundary(<Conversations />);\n    }\n  };\n\n  const renderConnectionIndicator = () => {\n    if (connection === 'offline')\n      return (\n        <div\n          className={styles.connectionContainer}\n          data-kt=\"noInternetConnection\"\n        >\n          <WifiStrengthOffOutline className={styles.wifiIcon} />\n          <span>{translations.noInternetConnection}</span>\n        </div>\n      );\n\n    return null;\n  };\n\n  const renderWidget = () => {\n    // FocusTrap is used to trap focus within the widget when it is open.\n    // This prevents use from tabbing out of widget while it is open\n    return (\n      <Fragment>\n        <FocusTrap>\n          {renderHeader()}\n          {renderConnectionIndicator()}\n          <div id={MODAL_ROOT_ID} className={styles.modalContainer}>\n            {isLoading ? <Loader /> : renderRoute()}\n            <Footer />\n          </div>\n        </FocusTrap>\n      </Fragment>\n    );\n  };\n\n  return (\n    <div\n      class={classNames(styles.widgetWrapper, {\n        [styles.mobile]: isMobile,\n      })}\n      ref={focusLockRef}\n    >\n      <div class={styles.widget} ref={chatWidgetRef}>\n        {renderWidget()}\n      </div>\n    </div>\n  );\n};\n\nexport default Widget;\n","import Widget from './Widget';\n\nexport default Widget;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./chatRootIcon.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./chatRootIcon.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./proactivePopup.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../node_modules/sass-loader/dist/cjs.js!./proactivePopup.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./proactiveChatMessage.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./proactiveChatMessage.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./closeProactiveChatButton.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./closeProactiveChatButton.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export default {\n  close: 'Close Chat Popup',\n};\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport CloseIcon from 'widget_main/globals/assets/close.svg';\nimport classNames from 'classnames';\n\nimport Button from 'widget_main/components/ui/Button';\nimport { useTranslations } from 'i18n/hooks';\nimport { ProactiveChatContext } from 'widget_main/store';\nimport styles from './closeProactiveChatButton.scss';\nimport messages from './messages';\n\nconst CloseProactiveChatButton = ({ className }) => {\n  const translations = useTranslations(messages);\n  const { onCloseProactiveChat } = useContext(ProactiveChatContext);\n  return (\n    <div className={styles.closeProactiveChatButtonWrapper}>\n      <Button\n        variant=\"outlinePrimary\"\n        className={classNames(styles.closeProactiveChatButton, className)}\n        ariaLabel={translations.close}\n        onClick={onCloseProactiveChat}\n      >\n        <CloseIcon width={26} height={26} />\n      </Button>\n    </div>\n  );\n};\n\nexport default CloseProactiveChatButton;\n","import { h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport classNames from 'classnames';\nimport { InitialMessage } from 'core_main/api/assistant/types';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\n\nimport TemplateMessage from 'widget_main/components/ChatMessage/TemplateMessage/TemplateMessage';\nimport { ProactiveChatContext } from 'widget_main/store';\nimport styles from './proactiveChatMessage.scss';\n\ninterface ProactiveChatMessageProps {\n  initialMessages?: InitialMessage[];\n  className?: string;\n}\n\nconst ProactiveChatMessage = ({\n  initialMessages,\n  className,\n}: ProactiveChatMessageProps) => {\n  const { proactiveChat, handoffToMessageThread, onCloseProactiveChat } =\n    useContext(ProactiveChatContext);\n  if (!initialMessages) return null;\n\n  const handleClick = () => {\n    if (proactiveChat?.initResponse) {\n      handoffToMessageThread(\n        proactiveChat.initResponse?.assistant,\n        undefined,\n        undefined,\n        proactiveChat.initResponse,\n        null,\n        (/* result, error */) => {\n          onCloseProactiveChat();\n        },\n      );\n    }\n  };\n  const handleKeyPress = (e: KeyboardEvent) => {\n    if (keyboardEventHelpers.isEnterKey(e)) {\n      e.preventDefault();\n      e.stopPropagation();\n\n      if (handleClick) {\n        handleClick();\n      }\n    }\n  };\n  const renderMessages = (messages) => {\n    return messages.map((initialMessage) => {\n      const message = {\n        ...initialMessage,\n        createdAt: initialMessage.importedAt,\n        sentBy: {\n          type: 'user',\n        },\n      };\n      return (\n        <TemplateMessage\n          showAvatar={false}\n          showTimestamp={false}\n          message={message}\n          key={message?.id}\n          truncateLength={200}\n          chatBubbleInnerClassName={classNames(styles.chatBubble)}\n        />\n      );\n    });\n  };\n\n  return (\n    <div\n      className={classNames(styles.proactiveChatMessage, className)}\n      onClick={handleClick}\n      onKeyPress={handleKeyPress}\n      role=\"button\"\n      tabIndex={0}\n    >\n      {renderMessages(initialMessages)}\n    </div>\n  );\n};\n\nexport default ProactiveChatMessage;\n","\n      import API from \"!../../../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./proactiveChatInput.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../../../node_modules/sass-loader/dist/cjs.js!./proactiveChatInput.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","export const isInputHidden = (proactiveChat) => {\n  const messages = proactiveChat?.initResponse?.initialMessages;\n  if (!messages || !messages.length) return false;\n  const lastMessage = messages[messages.length - 1];\n  return lastMessage?.meta?.template?.templateType !== 'text';\n};\n","import { h } from 'preact';\nimport { useState, useContext } from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport {\n  ChatAvailabilityContext,\n  ConnectionContext,\n  ProactiveChatContext,\n} from 'widget_main/store';\nimport { OFFLINE } from 'widget_main/globals/constants';\n\nimport styles from './proactiveChatInput.scss';\nimport { isInputHidden } from './helpers';\nimport MessageThreadInput from '../../MessageThreadInput/MessageThreadInput';\nimport { MessageOptions } from '../../MessageThreadInput/types';\nimport TemplateActions from '../../../screens/MessageThread/TemplateActions';\n\nconst ProactiveChatInput = ({ isMobile, show }) => {\n  const connection = useContext(ConnectionContext);\n  const chatAvailability = useContext(ChatAvailabilityContext);\n\n  const [isCreatingConversation, setIsCreatingConversation] = useState(false);\n  const { proactiveChat, handoffToMessageThread, onCloseProactiveChat } =\n    useContext(ProactiveChatContext);\n\n  if (!proactiveChat || !proactiveChat.initResponse) return null;\n  const handleSubmit = (messageOptions: MessageOptions) => {\n    setIsCreatingConversation(true);\n    if (proactiveChat.initResponse) {\n      handoffToMessageThread(\n        proactiveChat.initResponse?.assistant,\n        messageOptions.body,\n        messageOptions.payload,\n        proactiveChat.initResponse,\n        null,\n        (/* result, error */) => {\n          setIsCreatingConversation(false);\n          onCloseProactiveChat();\n        },\n      );\n    }\n  };\n  const handleOnClickInput = isMobile\n    ? () => handleSubmit({ body: '' })\n    : undefined;\n\n  return (\n    <div\n      className={classNames(styles.inputContainer, {\n        [styles.expand]: show,\n      })}\n    >\n      <TemplateActions\n        onSubmit={handleSubmit}\n        disabled={connection === OFFLINE || isCreatingConversation}\n        supportedTypes={['quick_replies']}\n        className={styles.templateActions}\n        initialMessages={proactiveChat.initResponse?.initialMessages}\n      />\n\n      <MessageThreadInput\n        onSubmit={handleSubmit}\n        // eslint-disable-next-line jsx-a11y/no-autofocus\n        autoFocus={false}\n        onClick={handleOnClickInput}\n        showAttachmentButton={false}\n        isInputHidden={isInputHidden(proactiveChat)}\n        isSendDisabled={isCreatingConversation || connection === OFFLINE}\n        chatAvailability={chatAvailability}\n        className={styles.inputField}\n      />\n    </div>\n  );\n};\n\nexport default ProactiveChatInput;\n","import { h } from 'preact';\nimport { useState, useContext, useEffect, useRef } from 'preact/hooks';\nimport classNames from 'classnames';\n\nimport { ProactiveChatContext } from 'widget_main/store';\n\nimport { useLocale, useVendors } from 'widget_main/vendors/hooks';\nimport styles from './proactivePopup.scss';\nimport proactiveChatMessageStyles from './ProactiveChatMessage/proactiveChatMessage.scss';\n\nimport CloseProactiveChatButton from './CloseProactiveChatButton/CloseProactiveChatButton';\n\nimport ProactiveChatMessage from './ProactiveChatMessage/ProactiveChatMessage';\nimport { useResizeIframe } from './helpers';\nimport ProactiveChatInput from './ProactiveChatInput/ProactiveChatInput';\n\nconst ProactivePopup = ({ isMobile }) => {\n  const { proactiveChat } = useContext(ProactiveChatContext);\n\n  const [, isLoadingVendors, errorLoadingVendors] = useVendors();\n  const [isLoadingLocale] = useLocale();\n\n  const wrapperEl = useRef<HTMLDivElement>(null);\n\n  useResizeIframe(wrapperEl);\n  const proactiveChatLoadingOrError =\n    !proactiveChat ||\n    !proactiveChat.initResponse ||\n    isLoadingVendors ||\n    isLoadingLocale ||\n    errorLoadingVendors;\n  const [startAnimation, setStartAnimation] = useState(false);\n  useEffect(() => {\n    if (!proactiveChatLoadingOrError) {\n      setTimeout(() => setStartAnimation(true), 250);\n    }\n  }, [proactiveChatLoadingOrError]);\n  if (proactiveChatLoadingOrError) return null;\n\n  return (\n    <div\n      ref={wrapperEl}\n      class={classNames(styles.proactivePopupWrapper, {\n        [styles.mobile]: isMobile,\n      })}\n    >\n      <CloseProactiveChatButton className={styles.showCloseButton} />\n      <ProactiveChatMessage\n        initialMessages={proactiveChat?.initResponse?.initialMessages}\n        className={classNames({\n          [proactiveChatMessageStyles.fadeIn]: startAnimation,\n        })}\n      />\n      <ProactiveChatInput isMobile={isMobile} show={startAnimation} />\n    </div>\n  );\n};\n\nexport default ProactivePopup;\n","import { useEffect, useState, useCallback } from 'preact/hooks';\nimport debounce from 'lodash.debounce';\nimport {\n  getChatIconFrameSize,\n  setIframeSizeChatIcon,\n  setIframeSizeCustom,\n} from 'helpers/kustomer_api_iframe';\nimport styles from './proactivePopup.scss';\n\nconst debounceTime = 5;\nexport function useResizeObserver(targetEl, cb) {\n  const [observer, setObserver] = useState<ResizeObserver | null>(null);\n\n  useEffect(() => {\n    const obs = new ResizeObserver(debounce(cb, debounceTime));\n    setObserver(obs);\n  }, [cb, setObserver]);\n\n  useEffect(() => {\n    if (!observer || !targetEl) return;\n    observer.observe(targetEl);\n    // eslint-disable-next-line consistent-return\n    return () => observer && observer.disconnect();\n  }, [observer, targetEl]);\n}\n\nexport function useResizeIframe(targetEl) {\n  const [wrapperHeight, setWrapperHeight] = useState(0);\n\n  const resizeIframeCallback = useCallback((entries) => {\n    setWrapperHeight(entries[0].target.clientHeight);\n  }, []);\n  useResizeObserver(targetEl?.current, resizeIframeCallback);\n  useEffect(() => {\n    setIframeSizeCustom({\n      frameHeight: `${wrapperHeight + getChatIconFrameSize().height}px`,\n      frameWidth: styles.proactivePopupIframeWidth,\n    });\n    return () => {\n      setIframeSizeChatIcon();\n    };\n  }, [wrapperHeight, targetEl]);\n}\n","import { Fragment, h } from 'preact';\nimport { useContext } from 'preact/hooks';\nimport { forwardRef, Ref } from 'preact/compat';\nimport Unread from 'widget_main/components/Unread';\nimport ChatIcon from 'widget_main/components/ChatIcon';\nimport * as keyboardEventHelpers from 'widget_main/globals/keyboardEvents';\nimport classNames from 'classnames';\nimport { NavigationContext, ProactiveChatContext } from 'widget_main/store';\nimport { MESSAGE_THREAD_PATH } from 'widget_main/globals/constants';\nimport { getChatIconFrameSize } from 'helpers/kustomer_api_iframe';\nimport styles from './chatRootIcon.scss';\nimport ProactivePopup from '../ProactivePopup/ProactivePopup';\n\ninterface ChatRootIconProps {\n  onClick?: () => void;\n  isMobile: boolean;\n}\n\nconst ChatRootIcon = forwardRef(\n  ({ onClick, isMobile }: ChatRootIconProps, ref: Ref<HTMLDivElement>) => {\n    const { proactiveChat, onCloseProactiveChat } =\n      useContext(ProactiveChatContext);\n    const navigation = useContext(NavigationContext);\n\n    const handleChatIconClick = () => {\n      if (proactiveChat) {\n        navigation.updateInitAssistantPayload(proactiveChat.initResponse);\n        navigation.updateCurrentConversationId(undefined);\n        navigation.updatePage(MESSAGE_THREAD_PATH);\n        onCloseProactiveChat();\n      }\n      if (onClick) onClick();\n    };\n\n    const handleKeyPress = (e: KeyboardEvent) => {\n      if (keyboardEventHelpers.isEnterKey(e)) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        handleChatIconClick();\n      }\n    };\n\n    const renderProactiveChat = () => {\n      return proactiveChat ? <ProactivePopup isMobile={isMobile} /> : null;\n    };\n    const chatIconFrameSize = getChatIconFrameSize();\n    return (\n      <Fragment>\n        {renderProactiveChat()}\n        <div\n          className={classNames(\n            {\n              [styles.proactivePopupActive]: proactiveChat,\n            },\n            styles.chatIconWrapper,\n          )}\n          style={{\n            width: chatIconFrameSize.width,\n            height: chatIconFrameSize.height,\n          }}\n        >\n          <div\n            tabIndex={0}\n            role=\"button\"\n            onClick={handleChatIconClick}\n            onKeyPress={handleKeyPress}\n            className={classNames({\n              [styles.pointer]: !!onClick,\n            })}\n            ref={ref}\n            aria-labelledby=\"rootChatIcon\"\n          >\n            <ChatIcon id=\"rootChatIcon\" isEmbedIcon />\n          </div>\n          <Unread className={styles.unreadProp} />\n        </div>\n      </Fragment>\n    );\n  },\n);\nexport default ChatRootIcon;\n","import ChatRootIcon from './ChatRootIcon';\n\nexport default ChatRootIcon;\n","import { setIframeSrcDoc } from 'polyfills/helpers';\nimport { MESSAGE_POLL_SETTINGS } from 'widget_main/app/constants';\nimport { CSP_NONCE_ALLOWED_URLS } from 'helpers/nonce/helpers';\n\nexport const appendElementToDocument = (\n  element: HTMLElement,\n  callback?: () => void,\n) => {\n  const scriptEmbedElement = document.querySelector<HTMLScriptElement>(\n    '[data-kustomer-api-key]',\n  );\n\n  if (!scriptEmbedElement || !scriptEmbedElement.parentNode) return;\n\n  scriptEmbedElement.parentNode.insertBefore(element, scriptEmbedElement);\n  callback?.();\n};\n\n/**\n * Applies CSP nonce to dynamically loaded scripts based on their src URL.\n *\n * This function intercepts various DOM manipulation methods to automatically add\n * CSP nonces to script elements that have src attributes matching the allowed URLs.\n * This is essential for CSP compliance when using strict Content Security Policies.\n *\n * The function works by:\n * 1. Overriding Node.prototype.appendChild and insertBefore to catch scripts added to DOM\n * 2. Overriding document.head/body.appendChild for specific targeting\n * 3. Intercepting webpack's dynamic chunk loading mechanism\n *\n * URL filtering logic:\n * - Only scripts with src attributes that start with allowed base URLs get nonces\n * - Scripts without src attributes are skipped (inline scripts handled separately)\n * - If no allowedUrls provided, applies nonce to all scripts (backward compatibility)\n * - URL filtering provides security by limiting nonce application to trusted domains\n *\n * IMPORTANT: This function is idempotent - it will only execute once per page load,\n * regardless of how many times it's called. Subsequent calls will be ignored to\n * prevent DOM method override chains and memory leaks.\n *\n * @param nonce - The CSP nonce value to apply to matching scripts\n */\n// Track whether the nonce application has already been initialized\n// This ensures the function is idempotent and prevents multiple DOM method overrides\nlet areCSPOverridesApplied = false;\n\n// Export for testing purposes only\nexport const resetAreCSPOverridesAppliedState = () => {\n  areCSPOverridesApplied = false;\n};\n\nexport const applyNonceToDynamicScripts = (nonce?: string) => {\n  // Early return if no nonce provided\n  if (!nonce) return;\n\n  // Guard against multiple calls to ensure idempotency\n  if (areCSPOverridesApplied) {\n    return;\n  }\n\n  // Mark as applied to prevent future calls\n  areCSPOverridesApplied = true;\n\n  /**\n   * Checks if a script should receive a nonce.\n   *\n   * This function implements the script filtering logic:\n   * - Returns true if script has no src attribute (inline scripts always get nonces)\n   * - Returns true if script src starts with any allowed base URL\n   * - Returns false otherwise (security: don't apply nonce to untrusted domains)\n   *\n   * @param scriptSrc - The src attribute of the script element\n   * @returns boolean indicating whether the script should receive a nonce\n   */\n  const isScriptAllowed = (scriptSrc?: string) => {\n    if (!scriptSrc) {\n      return true; // No src, apply nonce to inline scripts\n    }\n\n    const isAllowed = CSP_NONCE_ALLOWED_URLS.some(pattern => {\n      if (typeof pattern === 'string') {\n        return scriptSrc.startsWith(pattern);\n      }\n      return false;\n    });\n\n    return isAllowed;\n  };\n\n  /**\n   * Override Node.prototype.appendChild to catch scripts added to any DOM node.\n   *\n   * This is a comprehensive approach that catches scripts added via appendChild\n   * regardless of which node they're being added to. This covers most dynamic\n   * script insertion methods used by frameworks and libraries.\n   */\n  const originalAppendChild = Node.prototype.appendChild;\n  Node.prototype.appendChild = function(this: Node, child: Node) {\n    // Only process script elements that don't already have a nonce\n    if (child instanceof HTMLScriptElement && !child.hasAttribute('nonce')) {\n      const scriptSrc = child.getAttribute('src') || undefined;\n      if (isScriptAllowed(scriptSrc)) {\n        child.setAttribute('nonce', nonce);\n      }\n    }\n    return originalAppendChild.call(this, child);\n  } as typeof Node.prototype.appendChild;\n\n  /**\n   * Override Node.prototype.insertBefore to catch scripts inserted before other elements.\n   *\n   * This covers scripts added via insertBefore, which is another common method\n   * for dynamically inserting script elements into the DOM.\n   */\n  const originalInsertBefore = Node.prototype.insertBefore;\n  Node.prototype.insertBefore = function(this: Node, newNode: Node, referenceNode: Node | null) {\n    // Only process script elements that don't already have a nonce\n    if (newNode instanceof HTMLScriptElement && !newNode.hasAttribute('nonce')) {\n      const scriptSrc = newNode.getAttribute('src') || undefined;\n      if (isScriptAllowed(scriptSrc)) {\n        newNode.setAttribute('nonce', nonce);\n      }\n    }\n    return originalInsertBefore.call(this, newNode, referenceNode);\n  } as typeof Node.prototype.insertBefore;\n\n  /**\n   * Override document.head.appendChild for targeted head script interception.\n   *\n   * Many frameworks and libraries specifically add scripts to document.head,\n   * so this provides a more targeted approach for head-based script insertion.\n   */\n  const originalHeadAppendChild = document.head.appendChild;\n  document.head.appendChild = function(child: Node) {\n    if (child instanceof HTMLScriptElement && !child.hasAttribute('nonce')) {\n      const scriptSrc = child.getAttribute('src') || undefined;\n      if (isScriptAllowed(scriptSrc)) {\n        child.setAttribute('nonce', nonce);\n      }\n    }\n    return originalHeadAppendChild.call(document.head, child);\n  } as typeof document.head.appendChild;\n\n  /**\n   * Override document.body.appendChild for targeted body script interception.\n   *\n   * Some scripts are added directly to document.body, so this provides\n   * targeted coverage for body-based script insertion.\n   */\n  const originalBodyAppendChild = document.body.appendChild;\n  document.body.appendChild = function(child: Node) {\n    if (child instanceof HTMLScriptElement && !child.hasAttribute('nonce')) {\n      const scriptSrc = child.getAttribute('src') || undefined;\n      if (isScriptAllowed(scriptSrc)) {\n        child.setAttribute('nonce', nonce);\n      }\n    }\n    return originalBodyAppendChild.call(document.body, child);\n  } as typeof document.body.appendChild;\n\n  /**\n   * Override document.body.append for targeted body script interception.\n   *\n   * The append method is a newer DOM API that can add multiple nodes at once.\n   * This override ensures scripts added via append also receive CSP nonces.\n   */\n  const originalBodyAppend = document.body.append;\n  document.body.append = function(...nodes: (Node | string)[]) {\n    nodes.forEach(node => {\n      if (node instanceof HTMLScriptElement && !node.hasAttribute('nonce')) {\n        const scriptSrc = node.getAttribute('src') || undefined;\n        if (isScriptAllowed(scriptSrc)) {\n          node.setAttribute('nonce', nonce);\n        }\n      }\n    });\n    return originalBodyAppend.call(document.body, ...nodes);\n  } as typeof document.body.append;\n\n  /**\n   * Override document.head.append for targeted head script interception.\n   *\n   * The append method is a newer DOM API that can add multiple nodes at once.\n   * This override ensures scripts added via append to head also receive CSP nonces.\n   */\n  const originalHeadAppend = document.head.append;\n  document.head.append = function(...nodes: (Node | string)[]) {\n    nodes.forEach(node => {\n      if (node instanceof HTMLScriptElement && !node.hasAttribute('nonce')) {\n        const scriptSrc = node.getAttribute('src') || undefined;\n        if (isScriptAllowed(scriptSrc)) {\n          node.setAttribute('nonce', nonce);\n        }\n      }\n    });\n    return originalHeadAppend.call(document.head, ...nodes);\n  } as typeof document.head.append;\n\n  /**\n   * Intercept webpack's dynamic chunk loading mechanism.\n   *\n   * Webpack uses a special mechanism for loading code splits and dynamic imports.\n   * This override specifically targets webpack's chunk loading to ensure that\n   * dynamically loaded webpack chunks also receive the appropriate CSP nonce.\n   *\n   * The webpack chunk loading process:\n   * 1. __webpack_require__.e() is called to load a chunk\n   * 2. Webpack creates script tags with the chunk ID in the src\n   * 3. This override finds those scripts and applies the nonce\n   */\n  // eslint-disable-next-line no-underscore-dangle\n  if ((window as any).__webpack_require__ && (window as any).__webpack_require__.e) {\n    // eslint-disable-next-line no-underscore-dangle\n    const originalEnsure = (window as any).__webpack_require__.e;\n    // eslint-disable-next-line no-underscore-dangle\n    (window as any).__webpack_require__.e = function(chunkId: string) {\n      return originalEnsure.call(this, chunkId).then(function() {\n        // Use setTimeout to ensure scripts are added to DOM before we process them\n        setTimeout(function() {\n          // Find all scripts that contain the chunk ID in their src\n          const scripts = document.querySelectorAll(`script[src*=\"${chunkId}\"]`);\n          scripts.forEach(function(script) {\n            // Only apply nonce if script doesn't already have one\n            if (!script.hasAttribute('nonce')) {\n              const scriptSrc = script.getAttribute('src') || undefined;\n              if (isScriptAllowed(scriptSrc)) {\n                script.setAttribute('nonce', nonce);\n              }\n            }\n          });\n        }, 0);\n      });\n    };\n  }\n};\n\n// eslint-disable-next-line import/prefer-default-export\nexport const setupIframeForApi = (\n  iframeId: string,\n  iframeStyles: string,\n  content: string,\n  iframeTitle: string,\n  nonce?: string\n) => {\n  const iframe = document.createElement('iframe');\n\n  iframe.setAttribute('id', iframeId);\n  iframe.setAttribute('title', iframeTitle);\n  iframe.setAttribute('aria-label', iframeTitle);\n  iframe.setAttribute('role', 'application');\n  iframe.setAttribute('tabindex', '0');\n  if (nonce) {\n    iframe.setAttribute('nonce', nonce);\n  }\n\n  iframe.style.cssText = iframeStyles;\n\n  appendElementToDocument(iframe, () => {\n    setIframeSrcDoc(iframe, content);\n  });\n};\n\nexport const getIframeForWidgetMain = (): HTMLIFrameElement | undefined => {\n  const iframe = document.getElementById(\n    'kustomer-ui-sdk-iframe',\n  ) as HTMLIFrameElement;\n\n  if (!iframe) return undefined;\n\n  return iframe;\n};\n\nexport const getIframeForCoreApi = () => {\n  const { frameElement } = window;\n  const iframe = (\n    frameElement?.nodeName === 'IFRAME'\n      ? frameElement\n      : document.getElementById('kustomer-core-sdk-iframe')\n  ) as HTMLIFrameElement | undefined;\n\n  if (iframe?.nodeName !== 'IFRAME') return undefined;\n\n  return iframe;\n};\n\nexport const setTrackingTokenInLocalStorage = (token) => {\n  try {\n    localStorage.setItem('kustomer-chat-tracking-token', token);\n  } catch {\n    throw new Error('Setting tracking token in local storage');\n  }\n};\n\nexport const getTrackingTokenFromLocalStorage = () => {\n  try {\n    return localStorage.getItem('kustomer-chat-tracking-token');\n  } catch {\n    throw new Error('Getting tracking token from local storage');\n  }\n};\n\nexport const removeTrackingTokenFromLocalStorage = () => {\n  try {\n    return localStorage.removeItem('kustomer-chat-tracking-token');\n  } catch {\n    throw new Error('Removing tracking token from local storage');\n  }\n};\n\n/// define the key for pollin ginterval local storage\nconst POLLING_INTERVAL_MS_LOCAL_STORAGE_KEY =\n  'kustomer-initial-chat-polling-interval-ms';\n\n/**\n * Removes the polling interval duration (in milliseconds) from local storage.\n * This is used to clear the stored polling interval setting.\n *\n * @throws {Error} If an error occurs while removing the polling interval.\n */\nexport const removePollingIntervalMsFromLocalStorage = () => {\n  try {\n    return localStorage.removeItem(POLLING_INTERVAL_MS_LOCAL_STORAGE_KEY);\n  } catch {\n    return console.warn(\n      'Error removing polling interval MS from local storage',\n    );\n  }\n};\n\n/**\n * Retrieves the polling interval duration (in milliseconds) from local storage.\n * If the value is not found or an error occurs, it returns the default polling interval.\n *\n * @returns {number} The polling interval in milliseconds, either from local storage or the default setting.\n */\nexport const getPollingIntervalMsFromLocalStorage = () => {\n  try {\n    const pollingIntervalMsString = localStorage.getItem(\n      POLLING_INTERVAL_MS_LOCAL_STORAGE_KEY,\n    );\n    if (pollingIntervalMsString === null) return MESSAGE_POLL_SETTINGS.interval;\n    return parseInt(pollingIntervalMsString, 10);\n  } catch {\n    // no matter what, return a value - in this case, default to previous behavior\n    removePollingIntervalMsFromLocalStorage(); // remove, cleanup\n    return MESSAGE_POLL_SETTINGS.interval;\n  }\n};\n\n/**\n * Stores the polling interval duration (in milliseconds) in local storage.\n * This value determines the interval at which polling operations should occur.\n *\n * @param {string} pollingIntervalMsString - The polling interval duration in milliseconds, stored as a string.\n * @throws {Error} If an error occurs while setting the polling interval.\n */\nexport const setPollingIntervalMsFromLocalStorage = (\n  pollingIntervalMsString: string,\n) => {\n  try {\n    return localStorage.setItem(\n      POLLING_INTERVAL_MS_LOCAL_STORAGE_KEY,\n      pollingIntervalMsString,\n    );\n  } catch {\n    return console.warn('Error setting polling interval MS in local storage');\n  }\n};\n\ninterface NavigatorWithStandalone extends Navigator {\n  standalone: boolean;\n}\n\n/**\n * Currently only needed as a check for iOS where we are seeing sentry errors caused by embedded views\n * https://developer.mozilla.org/en-US/docs/Web/API/Navigator#navigator.standalone\n */\nexport const isInAppBrowser = () => {\n  // this is something of a hack to get around TypeScript for a Safari/WebKit-only\n  const userAgent = window.navigator.userAgent.toLowerCase();\n  const ios = /iphone|ipod|ipad/.test(userAgent);\n  if (!ios) return false;\n\n  // If the device is considered \"standalone\", then we are in an embedded view\n  return (\n    'standalone' in window.navigator &&\n    (window.navigator as NavigatorWithStandalone).standalone\n  );\n};\n\n// In case the parent window is of a different origin\nexport function getSafeParentContext(windowParam: Window): Window | undefined {\n  const win = windowParam ?? window;\n  try {\n    // Check if parent exists and has a location object accessible (won't throw cross-origin)\n    if (win.parent && win.parent.location && win.parent.location.href) {\n      return win.parent;\n    }\n  } catch (e) {\n    return undefined;\n  }\n\n  // No parent or parent is the same window\n  return undefined;\n}\n","import { getPollingIntervalMsFromLocalStorage } from 'helpers/browser';\nimport { handleError } from 'globals/errors';\nimport { Component } from 'react';\nimport { AppProps, AppState } from './types';\n\nexport class Polling {\n  static pollIntervalTimer: NodeJS.Timeout | undefined;\n\n  /**\n   * Initiates polling for new messages in active conversations at a specified interval.\n   *\n   * Behavior:\n   * - If no new messages are received, the polling interval increases (backoff).\n   * - If new messages are received, polling resets to the original interval.\n   * - If an error occurs while fetching messages, the interval increases (backoff).\n   *\n   * @param {number} interval - The current polling interval in milliseconds.\n   * @param {Component<AppProps, AppState>} component - The React component managing polling state.\n   * @param {() => Promise<void>[]} fetchPromisesFn - A function returning an array of promises for fetching messages.\n   */\n  static poll = (\n    interval: number,\n    component: Component<AppProps, AppState>,\n    fetchPromisesFn: () => Promise<void>[],\n  ) => {\n    const oldMessageCount = component.state.polledMessageCount;\n    component.setState({ polledMessageCount: 0 }, () => {\n      // wait for all fetch operations to complete\n      Promise.all(fetchPromisesFn())\n        .then(() =>\n          this.backoffOrRestartPolling(\n            oldMessageCount || 0,\n            interval,\n            component,\n            fetchPromisesFn,\n          ),\n        )\n        .catch((e) => {\n          handleError(e, {\n            message: 'initApp Message Poller: Error fetching message history',\n          });\n          // if we have an error, backoff polling\n          this.backoffPolling(interval, component, fetchPromisesFn);\n        });\n    });\n  };\n\n  /**\n   * Determines whether to continue polling at the same interval, increase the polling interval (backoff),\n   * or reset to the original interval based on the number of new messages received.\n   *\n   * Behavior:\n   * - If no messages have ever been fetched (`oldMessageCount === 0` and `polledMessageCount === 0`),\n   *   the function does nothing, allowing the current interval to continue.\n   * - If the number of messages received (`polledMessageCount`) is the same as before (`oldMessageCount`),\n   *   it triggers **backoffPolling**, increasing the polling interval.\n   * - If new messages have been received (`polledMessageCount` > `oldMessageCount`),\n   *   it resets polling to the original interval via **restartPolling**.\n   *\n   * @param {number} oldMessageCount - The previous count of polled messages.\n   * @param {number} interval - The current polling interval in milliseconds.\n   * @param {Component<AppProps, AppState>} component - The React component managing polling state.\n   * @param {() => Promise<void>[]} fetchPromisesFn - A function returning an array of promises for fetching messages.\n   */\n  static backoffOrRestartPolling = (\n    oldMessageCount: number,\n    interval: number,\n    component: Component<AppProps, AppState>,\n    fetchPromisesFn: () => Promise<void>[],\n  ) => {\n    if (component.state.polledMessageCount === 0 && oldMessageCount === 0) {\n      // when nothing is fetched yet, do nothing\n      // allow timer to run at same interval again\n      return;\n    }\n    // if we have not received any new messages, backoff polling\n    if (component.state.polledMessageCount === oldMessageCount) {\n      this.backoffPolling(interval, component, fetchPromisesFn);\n    } else {\n      // if we have received new messages, restart polling back to original interval\n      this.restartPolling(component, fetchPromisesFn);\n    }\n  };\n\n  /**\n   * Stops the polling mechanism by clearing the existing interval timer.\n   * This prevents further polling until it is restarted.\n   */\n  static clearPolling = () => {\n    if (this.pollIntervalTimer) {\n      global.clearInterval(this.pollIntervalTimer);\n      this.pollIntervalTimer = undefined;\n    }\n  };\n\n  /**\n   * Increases the polling interval (backoff) by doubling it, up to a maximum of 120 minutes (7200000 ms).\n   * If polling is still needed, a new interval is set with the updated time.\n   *\n   * @param {number} interval - The current polling interval in milliseconds.\n   * @param {Component<AppProps, AppState>} component - The React component managing polling state.\n   * @param {() => Promise<void>[]} fetchPromisesFn - A function returning an array of promises for fetching messages.\n   */\n  static backoffPolling = (\n    interval: number,\n    component: Component<AppProps, AppState>,\n    fetchPromisesFn: () => Promise<void>[],\n  ) => {\n    this.clearPolling();\n    // Multiply interval by 2 but cap it at 120 minutes\n    const newInterval = Math.min(interval * 2, 7200000);\n    this.pollIntervalTimer = global.setInterval(() => {\n      this.poll(newInterval, component, fetchPromisesFn);\n    }, newInterval);\n  };\n\n  /**\n   * Restarts the polling mechanism using the polling interval stored in local storage.\n   * If polling is enabled (interval > 0), it sets a new polling interval.\n   *\n   * @param {Component<AppProps, AppState>} component - The React component managing polling state.\n   * @param {() => Promise<void>[]} fetchPromisesFn - A function returning an array of promises for fetching messages.\n   */\n  static restartPolling = (\n    component: Component<AppProps, AppState>,\n    fetchPromisesFn: () => Promise<void>[],\n  ) => {\n    this.clearPolling();\n    const pollingIntervalMs = getPollingIntervalMsFromLocalStorage();\n    if (pollingIntervalMs > 0) {\n      // 0 indicates polling is turned off, so skip if 0\n      this.pollIntervalTimer = global.setInterval(() => {\n        this.poll(pollingIntervalMs, component, fetchPromisesFn);\n      }, pollingIntervalMs);\n    }\n  };\n}\n","import { Page } from 'widget_main/store/types';\nimport { isMobileViewport } from 'widget_main/globals/dom';\nimport { EXPAND_NAV_ITEMS } from 'widget_main/app/constants';\nimport {\n  setIframeSizeChatIcon,\n  setIframeSizeDefaultWidget,\n  setIframeSizeFullScreen,\n  setIframeSizeHidden,\n  setIframeSizeWithExpandedUi,\n} from './index';\n\ninterface ResizeWidgetHelperProps {\n  page?: Page;\n  isChatHidden: boolean;\n  showWidget: boolean;\n  hideChatIcon: boolean;\n}\n\nexport const resizeWidgetHelper = ({\n  page,\n  isChatHidden,\n  showWidget,\n  hideChatIcon,\n}: ResizeWidgetHelperProps) => {\n  if (isChatHidden) {\n    setIframeSizeHidden();\n    return;\n  }\n  if (showWidget) {\n    if (isMobileViewport()) {\n      setIframeSizeFullScreen();\n    } else if (page && EXPAND_NAV_ITEMS.includes(page)) {\n      setIframeSizeWithExpandedUi();\n    } else {\n      setIframeSizeDefaultWidget();\n    }\n  } else {\n    setIframeSizeChatIcon(hideChatIcon);\n  }\n};\n","/**\n * This file is odd because it exists for the _rare_ case where translations\n * need to be accessible before the IntlProvider context is ready. Because of\n * how i18n currently works, all translations need to make their way into the\n * `src/i18n/messages.json` via the `npm run extract` command which consolidates\n * all `messages.json across the project into one file before translation\n * automatically occurs.\n *\n * NOTE: `pageTitleNotification` will not work with the custom <Text> component\n * in this package because it relies on translations being in this format\n *\n * {\n *  key: 'value'\n * }\n *\n * which is not the format used by preact-i18n's `translate` and other functions\n */\nexport default {\n  browserNotificationTitle: '{{teamName}} Chat',\n  pageTitleNotification: '({{number}}) chat',\n};\n","import type { GetMessagesCallbackResponse } from 'core_main/sdk/get_messages/types';\nimport { getKustomerCore } from 'widget_main/globals/helpers';\nimport { GetHistoricalMessagesParameters } from 'core_main/sdk/get_historical_messages/types';\nimport { SatisfactionCallbackResponse } from 'core_main/api/satisfaction/types';\nimport type { FetchMessageHistoryHelperOptions } from '../types';\n\nconst kustomerCore = getKustomerCore();\n\n// paginate and get all historical messages from Kustomer's API\n// - then mark the conversation as \"hasAllMessages\"\nexport const fetchAllMessagesFromKApi = (\n  conversationId: string,\n  options: FetchMessageHistoryHelperOptions,\n): Promise<GetMessagesCallbackResponse> => {\n  let done = false;\n  const output: GetMessagesCallbackResponse = {\n    messages: [],\n    satisfaction: {} as SatisfactionCallbackResponse,\n    conversationId,\n  };\n  // create recursive fetchFn\n  const fetchMsgs = (\n    conversationId: string,\n    options: FetchMessageHistoryHelperOptions,\n  ) =>\n    new Promise<GetMessagesCallbackResponse>((resolve, reject) => {\n      const params: GetHistoricalMessagesParameters = {\n        conversationId,\n        count: options.count,\n      };\n      if (options.before) {\n        params.before = options.before;\n      }\n      kustomerCore.getHistoricalMessages(\n        params,\n        (response: GetMessagesCallbackResponse, error) => {\n          if (error) {\n            reject(error);\n            return;\n          }\n          resolve(response);\n        },\n      );\n    }).then((res) => {\n      done = options.count\n        ? res.messages.length < options.count\n        : res.messages.length === 0;\n\n      output.conversationId = res.conversationId;\n      output.satisfaction = res.satisfaction;\n      output.messages = [...output.messages, ...res.messages];\n      if (!done && res.links?.next) {\n        const p = new URLSearchParams(res.links.next.split('?')[1]);\n        const before = p.get('before');\n        if (before) {\n          return fetchMsgs(conversationId, {\n            ...options,\n            before: decodeURIComponent(before),\n          });\n        }\n      }\n      return output;\n    });\n  return fetchMsgs(conversationId, options);\n};\n\n// wrap core API PubNub call in a promise\nexport const fetchAllMessagesFromPubNub = (\n  conversationId: string,\n): Promise<GetMessagesCallbackResponse> => {\n  return new Promise((resolve, reject) => {\n    kustomerCore.getMessages(\n      { conversationId },\n      (response: GetMessagesCallbackResponse, error) => {\n        if (error) {\n          reject(error);\n          return;\n        }\n        resolve(response);\n      },\n    );\n  });\n};\n","import { createOptimisticMessage } from 'widget_main/screens/MessageThread/helpers';\nimport { MessageCallbackResponse } from 'core_main/sdk/send_message/types';\nimport { ConversationEntity } from 'widget_main/store/types';\n\nimport type {\n  FetchMessageHistoryHelperResponse,\n  MessageHistoryEntity,\n} from '../types';\n\nimport { fetchAllMessagesFromKApi, fetchAllMessagesFromPubNub } from './api';\nimport * as assistantHelpers from './assistant';\n\nexport const selectOldestMessage = (options: MessageHistoryEntity) => {\n  const { messages, messagesById } = options;\n  const oldestMessageId = messages[0];\n  return messagesById?.[oldestMessageId];\n};\n\nexport const mergeAndSortByMessageTimestamps = (\n  previousMessages: Record<string, MessageCallbackResponse>,\n  newMessages: Record<string, MessageCallbackResponse>,\n) => {\n  const messagesById = {\n    ...previousMessages,\n  };\n  Object.assign(messagesById, newMessages);\n  const messages = Object.keys(messagesById)\n    .slice()\n    .sort((firstId, secondId) => {\n      const firstMsg = messagesById[firstId];\n      const secondMsg = messagesById[secondId];\n\n      const firstDate = new Date(firstMsg.createdAt);\n      const secondDate = new Date(secondMsg.createdAt);\n      return firstDate < secondDate ? -1 : 1;\n    });\n\n  return {\n    messagesById,\n    messages,\n  };\n};\n\nconst constructAssistedConversationWithOptimisticMessageError = (\n  conversation: ConversationEntity,\n) => {\n  const { conversationId } = conversation;\n  return assistantHelpers.getActiveAssistant().then((initAssistantPayload) => {\n    if (initAssistantPayload) {\n      const optimisticMessage = createOptimisticMessage({\n        conversationId,\n        body: conversation.preview,\n        isInAssistantMode: true,\n        initAssistantPayload,\n      });\n      optimisticMessage.showError = true;\n      return {\n        initialMessages: initAssistantPayload.initialMessages,\n        optimisticMessages: [optimisticMessage],\n      };\n    }\n    const optimisticMessage = createOptimisticMessage({\n      conversationId,\n      body: conversation.preview,\n      isInAssistantMode: false,\n    });\n    optimisticMessage.showError = true;\n    return {\n      optimisticMessages: [optimisticMessage],\n    };\n  });\n};\n\nconst checkForFailedAssistedConversation = (\n  conversation: ConversationEntity,\n): Promise<FetchMessageHistoryHelperResponse> => {\n  const initialMessageMissingOnAssistedConversation =\n    conversation?.isInAssistantMode && !conversation?.initialMessages?.length;\n  const emptyMessageState = {\n    messages: [],\n    messagesById: {},\n    hasAllMessages: true,\n  };\n  if (initialMessageMissingOnAssistedConversation) {\n    return constructAssistedConversationWithOptimisticMessageError(\n      conversation,\n    ).then((assistedConversationWithOptimisticMessage) => {\n      return {\n        ...emptyMessageState,\n        ...assistedConversationWithOptimisticMessage,\n      };\n    });\n  }\n  return Promise.resolve(emptyMessageState);\n};\n\nconst getMessagesFromPubNub = (\n  conversation: ConversationEntity,\n  messagesById: Record<string, MessageCallbackResponse>,\n): Promise<FetchMessageHistoryHelperResponse> => {\n  return fetchAllMessagesFromPubNub(conversation.conversationId).then(\n    (response) => {\n      const newMessagesById = response.messages.reduce((acc, val) => {\n        acc[val.messageId] = acc[val.messageId] || val;\n        return acc;\n      }, {});\n\n      const merged = mergeAndSortByMessageTimestamps(\n        messagesById,\n        newMessagesById,\n      );\n      const oldestMessage = selectOldestMessage({\n        messages: merged.messages,\n        messagesById: merged.messagesById,\n      });\n\n      // JB TODO: not all conversations have directionType currently, so this will often fallback to the conversation\n      // - this is fine temporarily since `hasAllMessages` will be set after fetching messages from our API\n      // - followup: the BE needs to always place directionType on the message, both inbound and outbound\n      const hasFirstMessage =\n        oldestMessage?.directionType?.startsWith('initial-') ||\n        conversation.hasAllMessages;\n      return {\n        ...merged,\n        satisfaction: response.satisfaction,\n        hasAllMessages: hasFirstMessage,\n      };\n    },\n  );\n};\n\nconst getMessagesFromKApi = (\n  conversation: ConversationEntity,\n  messagesById: Record<string, MessageCallbackResponse>,\n): Promise<FetchMessageHistoryHelperResponse> => {\n  const options = { count: 100 }; // use large page size to reduce number of requests\n  return fetchAllMessagesFromKApi(conversation.conversationId, options).then(\n    (response) => {\n      const newMessagesById = response.messages.reduce((acc, val) => {\n        acc[val.messageId] = acc[val.messageId] || val;\n        return acc;\n      }, {});\n\n      const merged = mergeAndSortByMessageTimestamps(\n        messagesById,\n        newMessagesById,\n      );\n\n      const oldestMessage = selectOldestMessage({\n        messages: merged.messages,\n        messagesById: merged.messagesById,\n      });\n\n      // JB TODO: this should always be true, if it's not perhaps we want to log to Sentry\n      // - this will not be true until we add directionType to the api response, so we can't log it yet\n      const hasFirstMessage =\n        oldestMessage?.directionType?.startsWith('initial-');\n      if (!hasFirstMessage) {\n        // console.log('ERROR: no first message found in our API!!!');\n      }\n      return {\n        ...merged,\n        satisfaction: response.satisfaction?.timetoken // TODO: this isn't actually on the response view, so this won't work. We need to fetch satisfaction separately on init\n          ? response.satisfaction\n          : conversation.satisfaction,\n        hasAllMessages: true, // trust that our API has all the messages that we know about\n      };\n    },\n  );\n};\n\n// Historical Message fetching logic:\n// 1. Check pubnub's history API first to see if it has all historical messages\n// 2. If error with Pubnub API, fallback to our API\n// 3. If Pubnub API doesn't have all messages, fallback to our API. It is source of truth\nconst fetchAllMessages = (\n  conversation: ConversationEntity,\n  messagesById: Record<string, MessageCallbackResponse>,\n): Promise<FetchMessageHistoryHelperResponse> => {\n  return getMessagesFromPubNub(conversation, messagesById)\n    .catch((_) => {\n      // swallowing error as they are logged to sentry in core_main\n      return getMessagesFromKApi(conversation, messagesById);\n    })\n    .then((result) => {\n      if (!result.hasAllMessages) {\n        return getMessagesFromKApi(conversation, messagesById);\n      }\n      return result;\n    })\n    .then((result) => {\n      // if there are no messages on this conversation, check if we had a failed assisted convo\n      // this is from a legacy implementation, thus it's original logic is preserved\n      const noMessages = result.messages?.length === 0;\n      if (noMessages) {\n        return checkForFailedAssistedConversation(conversation);\n      }\n\n      return result;\n    });\n};\n\n// JB TODO: deprecate this name and just use fetchAllMessages\n// eventually we should poll w/ this function for reliability\nexport const fetchMessageHistoryHelper = (\n  conversation: ConversationEntity,\n  messagesById: Record<string, MessageCallbackResponse>,\n): Promise<FetchMessageHistoryHelperResponse> => {\n  return fetchAllMessages(conversation, messagesById);\n};\n","import { Component, createRef, h, RefObject } from 'preact';\nimport produce, { Draft } from 'immer';\nimport { IntlProvider, translate } from 'preact-i18n';\nimport debounce from 'lodash.debounce';\nimport {\n  getKustomer,\n  getKustomerCore,\n  getKustomerLocalStorage,\n  runKustomerListenersForEvent,\n  setKustomerLocalStorage,\n} from 'widget_main/globals/helpers';\nimport Widget from 'widget_main/components/Widget';\n\nimport {\n  ChatAvailabilityContext,\n  ConnectionContext,\n  ConversationsContext,\n  HideNewConversationButtonSettingsContext,\n  KBContext,\n  MessagesContext,\n  NavigationContext,\n  ProactiveChatContext,\n  SettingsContext,\n  UnreadCountsContext,\n  WidgetActionsContext,\n} from 'widget_main/store';\nimport {\n  ConversationEntity,\n  ConversationsState,\n  Page,\n  ProactiveChatCallbackResponse,\n} from 'widget_main/store/types';\nimport {\n  CONVERSATIONS_PATH,\n  DEFAULT_SESSION_PAGE_SIZE,\n  KB_ARTICLE_PATH,\n  KB_SEARCH_PATH,\n  kustomerWidgetEventTypes,\n  MESSAGE_THREAD_PATH,\n  OFFLINE,\n  WIDGET_TYPE_CHAT,\n  WIDGET_TYPE_CHAT_KB,\n  WIDGET_TYPE_KB,\n} from 'widget_main/globals/constants';\nimport ChatRootIcon from 'widget_main/components/ChatRootIcon';\nimport { SatisfactionCallbackResponse } from 'core_main/api/satisfaction/types';\nimport { MessageAttachmentCallbackResponse } from 'core_main/sdk/send_message/types';\nimport { InitAssistantCallbackResponse } from 'core_main/sdk/init_assistant/types';\nimport { getMappedLanguage } from 'i18n/helpers';\nimport { handleError } from 'globals/errors';\nimport { Polling } from 'widget_main/app/polling';\n\nimport {\n  CreateConversationEventDetail,\n  CreateConversationWidgetApiParameters,\n  CreateConversationInDraftEventDetail,\n  CreateConversationInDraftWidgetApiParameters,\n  OpenConversationByIdEventDetail,\n} from 'widget/widget_api/types';\nimport {\n  ConversationDeletedCallbackResponse,\n  ConversationMergedCallbackResponse,\n} from 'core_main/pubnub/types';\nimport { isMobileViewport } from 'widget_main/globals/dom';\nimport {\n  appendChatNotificationToParentTitle,\n  clearChatNotificationFromParentTitle,\n  focusOnIframe,\n  focusOnWindowContainingIframe,\n  isWidgetInFocus,\n  setIframeSizeChatIcon,\n  setIframeSizeHidden,\n} from 'helpers/kustomer_api_iframe';\nimport { resizeWidgetHelper } from 'helpers/kustomer_api_iframe/helpers';\n\nimport { GetConversationsCallbackResponse } from 'core_main/sdk/get_conversations/types';\nimport { createCategoryTree } from 'widget_main/screens/KBSearchList/helpers';\nimport { ArticleCallbackResponse } from 'core_main/sdk/get_articles/types';\nimport * as helpers from './helpers';\nimport * as assistantHelpers from './helpers/assistant';\nimport { AppProps, AppState } from './types';\nimport { INITIAL_STATE } from './constants';\nimport defaultMessages from './messages';\nimport {\n  fetchMessageHistoryHelper,\n  mergeAndSortByMessageTimestamps,\n} from './helpers/message';\nimport { publicConstants } from '../../widget_api/constants';\nimport { lastOpenedPageIsSupportedByWidgetType } from './helpers';\n\nconst kustomerCore = getKustomerCore();\n\nconst DEFAULT_PROACTIVE_CHAT_INTERVAL = 1000;\nconst PROACTIVE_CHAT_RETRY_MULTIPLIER = 250;\nconst MAX_PROACTIVE_CHAT_FAILURES = 16;\n\nclass App extends Component<AppProps, AppState> {\n  proactiveChatInterval;\n\n  proactiveChatTries = 0;\n\n  chatRootIconRef: RefObject<HTMLDivElement>;\n\n  pollIntervalTimer: NodeJS.Timer | undefined;\n\n  constructor() {\n    super();\n    this.state = {\n      ...INITIAL_STATE,\n      navigation: {\n        ...INITIAL_STATE.navigation,\n        updatePage: this.updatePage,\n        updateCurrentConversationId: this.updateCurrentConversationId,\n        updateInitAssistantPayload: this.updateInitAssistantPayload,\n        updateConversationListScrollLocation: debounce(\n          this.updateConversationListScrollLocation,\n          50,\n        ),\n      },\n      widgetActions: {\n        openWidget: this.openWidget,\n        closeWidget: this.closeWidget,\n      },\n      conversations: {\n        ...INITIAL_STATE.conversations,\n        addConversation: this.addConversation,\n        endConversation: this.endConversation,\n        updateConversation: this.updateConversation,\n        addOptimisticMessage: this.addOptimisticMessage,\n        toggleOptimisticMessageError: this.toggleOptimisticMessageError,\n        removeOptimisticMessage: this.removeOptimisticMessage,\n        fetchMessageHistory: this.fetchMessageHistory,\n        fetchNextPageOfHistory: this.fetchNextPageOfHistory,\n        refreshConversations: this.refreshConversations,\n      },\n      messages: {\n        ...INITIAL_STATE.messages,\n        receiveMessage: this.messageReceivedHandler,\n        markArticleVisited: this.markArticleVisited,\n        resetHandoff: this.resetHandoff,\n        resetDraftHandoff: this.resetDraftHandoff,\n      },\n      kb: {\n        ...INITIAL_STATE.kb,\n        updateCategories: this.updateCategories,\n        updateArticleSearchResults: this.updateArticleSearchResults,\n        updateArticleSearchFetching: this.updateArticleSearchFetching,\n        updateFeaturedArticles: this.updateFeaturedArticles,\n        updateArticles: this.updateArticles,\n        updateCurrentCategoryId: this.updateCurrentCategoryId,\n        updateCurrentArticleId: this.updateCurrentArticleId,\n        updateArticleSearchInput: this.updateArticleSearchInput,\n        articleSearchFetching: false,\n      },\n      polledMessageCount: 0,\n    };\n\n    this.resizeHandler = debounce(this.resizeHandler, 150);\n    this.chatRootIconRef = createRef();\n  }\n\n  resizeWidget = (page?: Page) => {\n    const { navigation, isChatHidden, showWidget } = this.state;\n    const { hideChatIcon } = this.props;\n    resizeWidgetHelper({\n      page: page || navigation.page,\n      isChatHidden,\n      showWidget,\n      hideChatIcon,\n    });\n  };\n\n  resizeHandler = () => {\n    if (this.state.showWidget) {\n      this.resizeWidget();\n      this.setState(\n        produce((draftState: Draft<AppState>) => {\n          draftState.isMobile = isMobileViewport();\n        }),\n      );\n    }\n  };\n\n  addKustomerCoreListeners = () => {\n    kustomerCore.addListener(\n      'onMessageReceived',\n      this.agentMessageReceivedHandler,\n    );\n\n    kustomerCore.addListener(\n      'onUnreadCountChange',\n      this.unreadCountChangeHandler,\n    );\n\n    kustomerCore.addListener(\n      'onConversationEnded',\n      this.conversationEndedHandler,\n    );\n\n    kustomerCore.addListener(\n      'onConversationUnended',\n      this.conversationEndedHandler,\n    );\n\n    kustomerCore.addListener(\n      'onSatisfactionReceived',\n      this.satisfactionReceivedHandler,\n    );\n\n    kustomerCore.addListener(\n      'onConversationMerged',\n      this.conversationMergedHandler,\n    );\n\n    kustomerCore.addListener('onCustomerDelete', this.customerDeleteHandler);\n\n    kustomerCore.addListener(\n      'onConversationDeleted',\n      this.conversationDeletedHandler,\n    );\n\n    kustomerCore.addListener('onLogout', this.handleLogout);\n\n    kustomerCore.addListener('onAssistantEnded', this.endAssistantHandler);\n  };\n\n  removeKustomerCoreListeners = () => {\n    kustomerCore.removeListener(\n      'onMessageReceived',\n      this.agentMessageReceivedHandler,\n    );\n\n    kustomerCore.removeListener(\n      'onUnreadCountChange',\n      this.unreadCountChangeHandler,\n    );\n\n    kustomerCore.removeListener(\n      'onConversationEnded',\n      this.conversationEndedHandler,\n    );\n\n    kustomerCore.removeListener(\n      'onConversationUnended',\n      this.conversationEndedHandler,\n    );\n\n    kustomerCore.removeListener('onLogout', this.handleLogout);\n\n    kustomerCore.removeListener('onAssistantEnded', this.endAssistantHandler);\n\n    kustomerCore.removeListener(\n      'onConversationMerged',\n      this.conversationMergedHandler,\n    );\n\n    kustomerCore.removeListener('onCustomerDelete', this.customerDeleteHandler);\n\n    kustomerCore.removeListener(\n      'onConversationDeleted',\n      this.conversationDeletedHandler,\n    );\n  };\n\n  agentMessageReceivedHandler = (response, error) => {\n    const { messages } = this.state;\n    const { conversationId, messageId } = response;\n\n    const currentConversationId =\n      messages.messageData[messageId]?.conversationId;\n    const conversationIdChanged =\n      currentConversationId && conversationId !== currentConversationId;\n\n    if (response.sentBy.type === 'user' || conversationIdChanged) {\n      this.messageReceivedHandler(response, error);\n    }\n  };\n\n  handleNotifications = (response) => {\n    const { conversationId, body, notificationOverrides } = response;\n    const { showWidget } = this.state;\n    const { chatSettings, intlDefinitions } = this.props;\n    const { teamName, teamIconUrl } = chatSettings;\n\n    // only enable browser notifications if flag is set to true\n    const showNotifications =\n      getKustomer()?.startParameters?.showBrowserNotifications;\n\n    const sentNotification = (permission: NotificationPermission) => {\n      if (permission === 'granted' && (!document.hasFocus() || !showWidget)) {\n        const dictionary = intlDefinitions || {\n          ...defaultMessages,\n        };\n        const notificationTitle =\n          notificationOverrides.titleOverride ||\n          translate(\n            'browserNotificationTitle',\n            '',\n            dictionary,\n            {\n              teamName,\n            },\n            0,\n            `${teamName} Chat`,\n          );\n        const notificationBody = notificationOverrides.bodyOverride || body;\n        const notification = new Notification(notificationTitle, {\n          body: notificationBody,\n          icon: teamIconUrl,\n        });\n        notification.onclick = () => {\n          focusOnWindowContainingIframe();\n          focusOnIframe();\n          this.openConversationById({\n            detail: {\n              conversationId,\n            },\n          } as CustomEvent);\n          notification.close();\n        };\n      }\n    };\n\n    if (showNotifications && 'Notification' in window) {\n      if (Notification.permission === 'granted') {\n        sentNotification(Notification.permission);\n      } else {\n        try {\n          Notification.requestPermission().then((permission) =>\n            sentNotification(permission),\n          );\n        } catch (error) {\n          // Safari < 15 doesn't return a promise for requestPermissions, when called this way,\n          // it will throw a TypeError.\n          // If we catch this error, we will try to pass a callback as the first argument instead.\n          //  https://developer.mozilla.org/en-US/docs/Web/API/Notification/requestPermission#syntax\n          if (error instanceof TypeError) {\n            Notification.requestPermission((permission) => {\n              sentNotification(permission);\n            });\n          } else {\n            throw error;\n          }\n        }\n      }\n    }\n  };\n\n  messageReceivedHandler = (response, error) => {\n    if (error) {\n      handleError(error);\n      return;\n    }\n    const {\n      conversationId,\n      direction,\n      messageId,\n      createdAt,\n      isInAssistantMode,\n    } = response;\n\n    if (direction === 'out') {\n      this.handleNotifications(response);\n    }\n    const { conversations } = this.state;\n    if (!conversations.data[conversationId]) {\n      kustomerCore.getConversation(\n        { conversationId },\n        (conversation: ConversationEntity | null, error) => {\n          if (!conversation || error) return;\n          this.setState(\n            produce((draftState: Draft<AppState>) => {\n              try {\n                conversation.messages = [];\n                conversation.optimisticMessages = [];\n                draftState.conversations.data[conversationId] = conversation;\n                draftState.conversations.data[\n                  conversationId\n                ].isInAssistantMode = isInAssistantMode;\n              } catch (e) {\n                handleError(e, {\n                  message: 'Error receiving message',\n                });\n              }\n            }),\n            () => {\n              this.fetchMessageHistory(\n                conversationId,\n                this.state.conversations.data,\n              ).catch((e) =>\n                handleError(e, {\n                  message:\n                    'Message Receive Handler: Error fetching message history',\n                }),\n              );\n            },\n          );\n        },\n      );\n      return;\n    }\n    this.setState((prevState) => {\n      const { conversations } = prevState;\n      const conversation = conversations.data[conversationId];\n      const previousMessagesById = conversation.messages.reduce(\n        (acc, messageId) => {\n          acc[messageId] = prevState.messages.messageData[messageId];\n          return acc;\n        },\n        {},\n      );\n      const { messagesById, messages } = mergeAndSortByMessageTimestamps(\n        previousMessagesById,\n        {\n          [messageId]: response,\n        },\n      );\n\n      return produce(prevState, (draftState: Draft<AppState>) => {\n        const lastMessageId = messages[messages.length - 1];\n        const lastMessage = messagesById[lastMessageId];\n        const conversation = draftState.conversations.data[conversationId];\n        conversation.preview = lastMessage?.body;\n        conversation.lastMessageAt = createdAt;\n        conversation.messages = messages;\n        Object.assign(draftState.messages.messageData, messagesById);\n      });\n    });\n  };\n\n  unreadCountChangeHandler = (response) => {\n    const { total } = response;\n    const { conversationId, count } = response.change;\n    const { intlDefinitions } = this.props;\n\n    const showTitleNotifications =\n      getKustomer()?.startParameters?.showTitleNotifications;\n\n    // we want to update the state before we notify the customer with a title notification\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.unreadCounts.total = total;\n        draftState.unreadCounts.conversations[conversationId] = count;\n      }),\n      () => {\n        runKustomerListenersForEvent(\n          kustomerWidgetEventTypes.onUnread,\n          response,\n        );\n      },\n    );\n\n    if (showTitleNotifications) {\n      const dictionary = intlDefinitions || {\n        ...defaultMessages,\n      };\n      const chatCountString = translate(\n        'pageTitleNotification',\n        '',\n        dictionary,\n        {\n          number: total,\n        },\n        total,\n      );\n      if (!isWidgetInFocus() && total > 0) {\n        appendChatNotificationToParentTitle(chatCountString);\n      } else {\n        clearChatNotificationFromParentTitle(chatCountString);\n      }\n    }\n  };\n\n  conversationEndedHandler = (response) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        const { conversationId, ended } = response;\n        const conversation = draftState.conversations.data[conversationId];\n        if (conversation) {\n          conversation.ended = ended;\n        }\n      }),\n    );\n  };\n\n  endAssistantHandler = (response) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        const { conversationId, isInAssistantMode } = response;\n        const conversation = draftState.conversations.data[conversationId];\n        if (conversation) {\n          conversation.isInAssistantMode = isInAssistantMode;\n        }\n      }),\n    );\n  };\n\n  satisfactionReceivedHandler = (response: SatisfactionCallbackResponse) => {\n    const { conversationId } = response;\n\n    if (conversationId)\n      this.updateConversation(conversationId, { satisfaction: response });\n  };\n\n  conversationMergedHandler = (\n    response: ConversationMergedCallbackResponse,\n  ) => {\n    const { sourceConversationId, targetConversationId } = response;\n\n    // Get the unread count from the source conversation before merging\n    const sourceUnreadCount = this.state.unreadCounts.conversations[sourceConversationId] || 0;\n    const targetUnreadCount = this.state.unreadCounts.conversations[targetConversationId] || 0;\n\n    kustomerCore.getConversation(\n      {\n        conversationId: targetConversationId,\n      },\n      (conversation) => {\n        this.setState(\n          produce((draftState: Draft<AppState>) => {\n            // Add the target conversation if it doesn't exist\n            if (!draftState.conversations.data[targetConversationId]) {\n              conversation.messages = [];\n              conversation.optimisticMessages = [];\n              draftState.conversations.data[targetConversationId] = conversation;\n            }\n\n            // Mark the source conversation as merged\n            if (draftState.conversations.data[sourceConversationId]) {\n              draftState.conversations.data[sourceConversationId].movedToConversationId = targetConversationId;\n            }\n\n            // Consolidate unread counts\n            const newTargetUnreadCount = targetUnreadCount + sourceUnreadCount;\n            draftState.unreadCounts.conversations[targetConversationId] = newTargetUnreadCount;\n            // Total remains the same since we're just moving unread counts from source to target\n\n            // Remove the source conversation's unread count\n            delete draftState.unreadCounts.conversations[sourceConversationId];\n          }),\n          () => {\n            this.fetchMessageHistory(\n              targetConversationId,\n              this.state.conversations.data,\n            ).catch((e) =>\n              handleError(e, {\n                message: 'Error fetching history after conversation merge',\n              }),\n            );\n          },\n        );\n      },\n    );\n  };\n\n  customerDeleteHandler = () => {\n    kustomerCore.logout(() => null);\n  };\n\n  conversationDeletedHandler = (\n    response: ConversationDeletedCallbackResponse,\n  ) => {\n    const { conversationId } = response;\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        const conversation = draftState.conversations.data[conversationId];\n        if (conversation) {\n          conversation.deleted = true;\n          conversation.ended = true;\n        }\n        if (draftState.navigation.currentConversationId !== conversationId) {\n          delete draftState.conversations.data[conversationId];\n        }\n      }),\n    );\n  };\n\n  setInitialNavigation = (settings, startParameters) => {\n    const { widgetType } = settings;\n\n    let page;\n\n    switch (widgetType) {\n      case WIDGET_TYPE_KB:\n        page = KB_SEARCH_PATH;\n        break;\n      case WIDGET_TYPE_CHAT:\n        page = CONVERSATIONS_PATH;\n        break;\n      case WIDGET_TYPE_CHAT_KB:\n        if (\n          startParameters.preferredView === publicConstants.CHAT_HISTORY_VIEW\n        ) {\n          page = CONVERSATIONS_PATH;\n        } else {\n          page = KB_SEARCH_PATH;\n        }\n        break;\n      default:\n        page = CONVERSATIONS_PATH;\n    }\n\n    this.updatePage(page);\n  };\n\n  handleProactiveChatTrigger = (\n    proactiveChat?: ProactiveChatCallbackResponse,\n  ) => {\n    const isMobile = isMobileViewport();\n\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.proactiveChat = proactiveChat;\n        draftState.isMobile = isMobile;\n      }),\n    );\n  };\n\n  evaluateProactiveChatRules = () => {\n    assistantHelpers\n      .getActiveAssistant({\n        proactiveOnly: true,\n      })\n      .then((response) => {\n        if (response) {\n          const initResponse = {\n            ...response,\n            initialMessages: response?.initialMessages,\n          };\n          const callbackResponse: ProactiveChatCallbackResponse = {\n            initResponse,\n          };\n          const { hideHistory } = this.props;\n          const { navigation } = this.state;\n\n          // if the customer has an active conversation and the 'hideHistory' setting is enabled,\n          //  we need to wait for the Proactive chat rules to be evaluated but do not want to\n          //  trigger proactive chat so the end user does not lose their conversation so return early\n          if (hideHistory && Boolean(navigation.currentConversationId)) {\n            if (this.proactiveChatInterval)\n              clearInterval(this.proactiveChatInterval);\n            return;\n          }\n\n          this.handleProactiveChatTrigger(callbackResponse);\n          if (this.proactiveChatInterval)\n            clearInterval(this.proactiveChatInterval);\n        }\n\n        // if we get a success after a series of failures, restart the interval back to defaults\n        if (this.proactiveChatTries > 0) {\n          this.proactiveChatTries = 0;\n          clearInterval(this.proactiveChatInterval);\n          this.proactiveChatInterval = setInterval(\n            this.evaluateProactiveChatRules,\n            DEFAULT_PROACTIVE_CHAT_INTERVAL,\n          );\n        }\n      })\n      .catch((error) => {\n        this.proactiveChatTries++;\n        let errorMessage = 'Failed to trigger proactive chat:';\n        if (this.proactiveChatTries > 1) {\n          clearInterval(this.proactiveChatInterval);\n\n          // after 16 tries we will stop trying to ping the assistant endpoint\n          if (this.proactiveChatTries <= MAX_PROACTIVE_CHAT_FAILURES) {\n            // restart the interval with backoff\n            this.proactiveChatInterval = setInterval(\n              this.evaluateProactiveChatRules,\n              DEFAULT_PROACTIVE_CHAT_INTERVAL +\n                PROACTIVE_CHAT_RETRY_MULTIPLIER * this.proactiveChatTries,\n            );\n          } else {\n            errorMessage = 'Proactive chat error maximum reached';\n          }\n        }\n        handleError(error, {\n          message: errorMessage,\n          tags: { proactiveChat: true },\n        });\n      });\n  };\n\n  startProactiveChatEvaluation = () => {\n    if (this.proactiveChatTries === 0) {\n      this.evaluateProactiveChatRules();\n    }\n    this.proactiveChatInterval = setInterval(\n      this.evaluateProactiveChatRules,\n      DEFAULT_PROACTIVE_CHAT_INTERVAL,\n    );\n  };\n\n  fetchPageOfHistory = (page: number) => {\n    return new Promise<GetConversationsCallbackResponse>((resolve, reject) => {\n      kustomerCore.getConversations(\n        {\n          page,\n          pageSize: DEFAULT_SESSION_PAGE_SIZE,\n        },\n        (res, error) => {\n          if (error) {\n            reject(error);\n          } else {\n            resolve(res);\n          }\n        },\n      );\n    })\n      .then((res) => {\n        const newConversationState = helpers.mapConversationState(\n          res.conversations,\n          this.state.conversations.data,\n        );\n\n        this.setState(\n          produce((draftState: Draft<AppState>) => {\n            draftState.unreadCounts = kustomerCore.getUnreadCount();\n            Object.assign(draftState.conversations.data, newConversationState);\n          }),\n        );\n\n        return res;\n      })\n      .catch((e) => {\n        // we do not throw here due to a *very fun* issue with mobile browsers that throw an error on _any_ kind of request\n        //  cancellation (eg. page close, navigation, bad connection) during a fetch call and the error call is extremely\n        //  vague (see also: \"TypeError: Load failed\" errors)\n        //  example: visit this page in an iOS browser https://request-cancellation-test.vercel.app\n        //  For now, we will log the error\n        handleError(e, {\n          message: 'Error fetching history:',\n          tags: { fetchPageOfHistory: true },\n        });\n      });\n  };\n\n  fetchNextPageOfHistory = () => {\n    const { next } = this.state.conversations?.pages || {};\n    if (!next) return Promise.resolve();\n    return this.fetchPageOfHistory(next).then((res) => {\n      this.setState(\n        produce((draftState: Draft<AppState>) => {\n          draftState.conversations.pages = res?.pages;\n        }),\n      );\n      return res;\n    });\n  };\n\n  setConnectionToOnline = () => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.connection = 'online';\n      }),\n    );\n  };\n\n  refreshConversations = () => {\n    const currentConversations = this.state.conversations.data;\n    if (currentConversations && Object.keys(currentConversations).length) {\n      const upToPage = this.state.conversations.pages?.current || 1;\n      for (let i = 0; i < upToPage; i++) {\n        this.fetchPageOfHistory(i);\n      }\n    }\n  };\n\n  handleNetworkOnline = () => {\n    this.refreshConversations();\n    this.setConnectionToOnline();\n  };\n\n  handleNetworkOffline = () => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.connection = 'offline';\n      }),\n    );\n  };\n\n  handleLogin = (event) => {\n    const { parameters, callback } = event.detail;\n    const brandId = getKustomer()?.startParameters?.brandId;\n    const assistantId = getKustomer()?.startParameters?.assistantId;\n\n    kustomerCore.login(\n      { brandId, assistantId, ...parameters },\n      (res, error) => {\n        if (error) {\n          if (typeof callback === 'function') {\n            callback(null, error);\n\n            runKustomerListenersForEvent(\n              kustomerWidgetEventTypes.onLogin,\n              null,\n              error,\n            );\n          }\n          return;\n        }\n        this.resetEndCustomerState(() => {\n          this.fetchNextPageOfHistory()\n            .then(() => {\n              if (typeof callback === 'function') {\n                callback(res);\n              }\n\n              runKustomerListenersForEvent(\n                kustomerWidgetEventTypes.onLogin,\n                res,\n              );\n            })\n            .catch((historyError) => {\n              if (typeof callback === 'function') {\n                callback(res, historyError);\n              }\n\n              runKustomerListenersForEvent(\n                kustomerWidgetEventTypes.onLogin,\n                res,\n                historyError,\n              );\n            });\n        });\n      },\n    );\n  };\n\n  resetEndCustomerState = (cb) => {\n    this.setState((prevState) => {\n      return produce(prevState, (draftState: Draft<AppState>) => {\n        draftState.conversations = {\n          ...prevState.conversations,\n          ...INITIAL_STATE.conversations,\n        };\n\n        draftState.messages = {\n          ...prevState.messages,\n          ...INITIAL_STATE.messages,\n        };\n\n        draftState.unreadCounts = INITIAL_STATE.unreadCounts;\n\n        draftState.navigation = {\n          ...prevState.navigation,\n          ...INITIAL_STATE.navigation,\n        };\n      });\n    }, cb);\n  };\n\n  handleLogout = (_, error) => {\n    if (error) return;\n    this.resetEndCustomerState(() => {\n      runKustomerListenersForEvent(\n        kustomerWidgetEventTypes.onLogout,\n        null,\n        error,\n      );\n    });\n  };\n\n  checkParentLocationInterval() {\n    const { chatSettings } = this.props;\n    const { domainCriteria } = chatSettings;\n\n    if (!domainCriteria) return;\n\n    setInterval(() => {\n      const parentWindowLocation = window.parent.location.href;\n      const { currentLocation, isChatHidden } = this.state;\n\n      if (parentWindowLocation !== currentLocation) {\n        const isAllowed = kustomerCore.isUrlAllowed({\n          url: parentWindowLocation,\n        })?.allowed;\n\n        if (isAllowed) {\n          this.setState(\n            produce((draftState: Draft<AppState>) => {\n              draftState.isChatHidden = false;\n              draftState.currentLocation = parentWindowLocation;\n            }),\n          );\n        } else if (isChatHidden === false) {\n          this.setState(\n            produce((draftState: Draft<AppState>) => {\n              draftState.isChatHidden = true;\n              draftState.currentLocation = parentWindowLocation;\n            }),\n          );\n        }\n      }\n    }, 1000);\n  }\n\n  restoreWidgetLastOpenState = () => {\n    if (assistantHelpers.isAssistantPreview()) return;\n\n    if (getKustomerLocalStorage('wasWidgetOpen') && !isMobileViewport()) {\n      const lastOpenedPage = getKustomerLocalStorage('lastOpenPage');\n      const { widgetType } = this.props.chatSettings;\n\n      if (\n        lastOpenedPageIsSupportedByWidgetType(\n          lastOpenedPage as Page,\n          widgetType,\n        )\n      ) {\n        if (lastOpenedPage) {\n          this.updatePage(lastOpenedPage as Page);\n        }\n\n        if (lastOpenedPage === MESSAGE_THREAD_PATH) {\n          const lastOpenConversationId = getKustomerLocalStorage(\n            'lastOpenConversationId',\n          );\n\n          if (\n            lastOpenConversationId &&\n            this.state.conversations?.data?.[lastOpenConversationId]\n          ) {\n            this.updateCurrentConversationId(lastOpenConversationId as string);\n          } else {\n            this.updatePage(CONVERSATIONS_PATH);\n          }\n        }\n      }\n\n      this.openWidget();\n    }\n  };\n\n  resetHandoff = () => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        const { messages } = draftState;\n        const { handoff } = messages;\n\n        if (handoff?.assistantId && !handoff?.message) {\n          draftState.messages.handoff = {\n            assistantId: handoff?.assistantId,\n          };\n        } else {\n          draftState.messages.handoff = undefined;\n        }\n      }),\n    );\n  };\n\n  resetDraftHandoff = () => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.messages.draft = undefined;\n      }),\n    );\n  };\n\n  handoffToMessageThread = (\n    assistantId,\n    message,\n    payload,\n    initResponse?,\n    initError?,\n    callback?: CreateConversationWidgetApiParameters['callback'],\n    custom?,\n  ) => {\n    const handoffCallback = (res, error) => {\n      if (typeof callback === 'function') {\n        callback(res, error);\n      }\n\n      this.state.messages.resetHandoff();\n    };\n\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        if (!initError) {\n          draftState.messages.handoff = {\n            assistantId,\n            message,\n            payload,\n            callback: handoffCallback,\n            custom,\n          };\n          draftState.navigation.currentConversationId = undefined;\n          draftState.navigation.page = MESSAGE_THREAD_PATH;\n          draftState.navigation.initAssistantPayload = initResponse;\n        }\n      }),\n      () => {\n        this.openWidget();\n      },\n    );\n  };\n\n  handoffDraftToMessageThread = (\n    message,\n    callback?: CreateConversationInDraftWidgetApiParameters['callback'],\n  ) => {\n    const handoffCallback = (res, error) => {\n      if (typeof callback === 'function') {\n        callback(res, error);\n      }\n      this.state.messages.resetDraftHandoff();\n    };\n\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.messages.draft = {\n          message,\n          callback: handoffCallback,\n        };\n        draftState.navigation.currentConversationId = undefined;\n        draftState.navigation.page = MESSAGE_THREAD_PATH;\n      }),\n      () => {\n        this.openWidget();\n      },\n    );\n  };\n\n  createConversation = (event) => {\n    const detail: CreateConversationEventDetail = event?.detail;\n    const message = detail?.message;\n    const payload = detail?.payload;\n    const { custom } = detail;\n    const callback = detail?.callback;\n\n    if (this.state.connection === OFFLINE) {\n      if (typeof callback === 'function') {\n        return callback(null, new Error('No Internet Connection'));\n      }\n      return null;\n    }\n    return assistantHelpers\n      .getActiveAssistant({\n        assistant: detail?.assistantId,\n        dialog: detail.dialogId,\n      })\n      .then((response) => {\n        if (response) {\n          this.handoffToMessageThread(\n            response.assistant,\n            message,\n            payload,\n            response,\n            null,\n            callback,\n            custom,\n          );\n        } else {\n          this.handoffToMessageThread(\n            detail?.assistantId,\n            message,\n            payload,\n            null,\n            null,\n            callback,\n            custom,\n          );\n        }\n      })\n      .catch((error) => {\n        if (error && typeof callback === 'function') {\n          callback(null, error);\n        }\n      });\n  };\n\n  createConversationInDraft = (event) => {\n    const detail: CreateConversationInDraftEventDetail = event?.detail;\n    const message = detail?.message;\n    const callback = detail?.callback;\n    if (this.state.connection === OFFLINE) {\n      if (typeof callback === 'function') {\n        return callback(null, new Error('No Internet Connection'));\n      }\n      return null;\n    }\n    return this.handoffDraftToMessageThread(message, callback);\n  };\n\n  openKbArticle = (e: { detail: { articleId: string; cb } }) => {\n    const { articleId, cb } = e.detail;\n    const lang = getMappedLanguage();\n    const { knowledgeBaseId } = this.props.chatSettings;\n    kustomerCore.getArticleById(\n      {\n        articleId,\n        lang,\n        knowledgeBaseId,\n      },\n      (response, error) => {\n        if (error) {\n          if (typeof cb === 'function') {\n            cb(null, error);\n          } else {\n            throw error;\n          }\n          return;\n        }\n        this.state.kb.updateArticles([response]);\n        this.state.kb.updateCurrentArticleId(articleId);\n        this.state.navigation.updatePage(KB_ARTICLE_PATH);\n\n        this.openWidget();\n\n        if (typeof cb === 'function') {\n          cb(response);\n        }\n      },\n    );\n  };\n\n  fetchCategoryArticles(categoryId, categories, cb) {\n    const lang = getMappedLanguage();\n\n    const { kb } = this.state;\n    const { rootCategory } = kb;\n    const { knowledgeBaseId } = this.props.chatSettings;\n    kustomerCore.getArticles(\n      { categoryId, lang, knowledgeBaseId },\n      (res, err) => {\n        const updatedArticles = err ? [] : res.articles;\n\n        kb.updateArticles(updatedArticles);\n\n        kb.updateCategories(\n          {\n            ...categories,\n            [categoryId]: {\n              ...categories[categoryId],\n              articles: updatedArticles,\n            },\n          },\n          rootCategory,\n        );\n        cb();\n      },\n    );\n  }\n\n  navigateToCategory(categoryId: string, cb?) {\n    const { kb, navigation } = this.state;\n\n    kb.updateCurrentCategoryId(categoryId);\n    navigation.updatePage(KB_SEARCH_PATH);\n    this.openWidget();\n    if (typeof cb === 'function') {\n      cb(null);\n    }\n  }\n\n  openKbCategory = (e: { detail: { categoryId: string; cb } }) => {\n    const { categoryId, cb } = e.detail;\n\n    const lang = getMappedLanguage();\n\n    const { kb, navigation } = this.state;\n    const { categories } = kb;\n    const { knowledgeBaseId } = this.props.chatSettings;\n\n    // No categories. This means the KB has never been opened yet, either because the widget wasn't opened or the use\n    // was only on the chat screen. Load all categories and then load articles for that category.\n    if (!Object.keys(categories).length) {\n      kustomerCore.getCategories({ lang, knowledgeBaseId }, (res, err) => {\n        if (err) {\n          const langNotFound =\n            err?.title === 'Not Found' && err?.source === 'lang';\n\n          // Don't callback with error if issue is with lang. Component will gracefully handle that error.\n          this.navigateToCategory(categoryId);\n          if (!langNotFound && typeof cb === 'function') {\n            cb(null, err);\n          }\n          return;\n        }\n\n        const tree = createCategoryTree(res.categories);\n        kb.updateCategories(tree, res.rootCategory);\n\n        if (!tree[categoryId]) {\n          // Category doesn't exist.\n          // Callback with error, but still open kb to root category list so user doesn't have degraded experience.\n          this.navigateToCategory(res.rootCategory.categoryId);\n          if (typeof cb === 'function') {\n            cb(null, new Error('Category not found'));\n          }\n          return;\n        }\n\n        this.fetchCategoryArticles(categoryId, tree, () => {\n          this.navigateToCategory(categoryId, cb);\n        });\n      });\n    } else if (!categories[categoryId]) {\n      // Category doesn't exist.\n      // Callback with error, but still open kb to root category list so user doesn't have degraded experience.\n      navigation.updatePage(KB_SEARCH_PATH);\n      this.openWidget();\n      if (typeof cb === 'function') {\n        cb(null, new Error('Category not found'));\n      }\n    } else if (!categories[categoryId].articles) {\n      // Categories have been fetched already, but we need to load the articles.\n      this.fetchCategoryArticles(categoryId, categories, () => {\n        this.navigateToCategory(categoryId, cb);\n      });\n    } else {\n      // Everything already loaded, just navigate.\n      this.navigateToCategory(categoryId, cb);\n    }\n  };\n\n  handleRestart = () => {\n    this.setState({ loading: true, retryCount: this.state.retryCount + 1 });\n    kustomerCore.stop().then(() => {\n      this.removeKustomerCoreListeners();\n      this.resetEndCustomerState(() => {\n        this.props.reloadSettings().then(() => {\n          this.initApp();\n        });\n      });\n    });\n  };\n\n  componentDidMount() {\n    window.addEventListener('online', this.handleNetworkOnline);\n    window.addEventListener('offline', this.handleNetworkOffline);\n    window.addEventListener('kustomerOpen', this.openWidget);\n    window.addEventListener('kustomerClose', this.closeWidget);\n    window.addEventListener(\n      'kustomerCreateConversation',\n      this.createConversation,\n    );\n    window.addEventListener(\n      'kustomerOpenDraftConversation',\n      this.createConversationInDraft,\n    );\n    window.addEventListener('kustomerLogin', this.handleLogin);\n    window.addEventListener(\n      'kustomerOpenConversationById',\n      this.openConversationById,\n    );\n    window.addEventListener('kustomerOpenKbArticle', this.openKbArticle);\n    window.addEventListener('kustomerOpenKbCategory', this.openKbCategory);\n    window.addEventListener(\n      'kustomerGetOpenConversations',\n      this.getOpenConversations,\n    );\n    window.parent.addEventListener('resize', this.resizeHandler);\n\n    if (kustomerCore) {\n      this.initApp();\n    }\n  }\n\n  /**\n   * Generates an array of promises to fetch message history for active conversations.\n   *\n   * This function iterates over the active conversations and:\n   * - Skips conversations that are **deleted** or **ended**.\n   * - Returns a promise that fetches the message history for each valid conversation.\n   *\n   * @returns {Promise<void>[]} An array of promises for fetching message history.\n   */\n  pollingConversationFetches = () => {\n    const { data } = this.state.conversations;\n    return Object.keys(data).map((conversationId) => {\n      if (\n        data[conversationId]?.deleted === true || // Skip deleted messages\n        data[conversationId]?.ended === true // Skip ended conversations\n      ) {\n        return Promise.resolve();\n      }\n      return this.fetchMessageHistory(conversationId, data);\n    });\n  };\n\n  initApp = () => {\n    this.setState({\n      isChatHidden:\n        ['hidden', 'disabled'].includes(this.props.chatAvailability || '') ||\n        !kustomerCore.isUrlAllowed({\n          url: window.parent.location.href,\n        })?.allowed,\n    });\n\n    this.fetchNextPageOfHistory().then(() => {\n      const kustomer = getKustomer();\n      if (!assistantHelpers.isAssistantPreview()) {\n        this.startProactiveChatEvaluation();\n      }\n      kustomer.startFinished = true;\n\n      if (\n        !['hidden', 'disabled'].includes(this.props.chatAvailability as string)\n      ) {\n        this.checkParentLocationInterval();\n      }\n\n      this.setInitialNavigation(\n        this.props.chatSettings,\n        kustomer.startParameters,\n      );\n\n      window.parent.dispatchEvent(new CustomEvent('kustomerStart'));\n\n      assistantHelpers.startUpdatePageInterval(this.props.chatSettings);\n\n      this.addKustomerCoreListeners();\n\n      this.restoreWidgetLastOpenState();\n      const startCallback = kustomer?.startCallback;\n\n      this.setState({ loading: false });\n      kustomerCore.kustomerEventCount({ name: 'app.initialization.finish' });\n      if (typeof startCallback === 'function') startCallback();\n\n      // poll for messages from pubnub, with our API as a backup on interval\n      Polling.restartPolling(this, this.pollingConversationFetches);\n    });\n  };\n\n  componentDidUpdate(_, prevState) {\n    const { isChatHidden } = this.state;\n    if (!prevState.isChatHidden && isChatHidden) {\n      setIframeSizeHidden();\n    }\n\n    if (prevState.isChatHidden && !isChatHidden) {\n      this.resizeWidget();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeKustomerCoreListeners();\n    window.removeEventListener('online', this.handleNetworkOnline);\n    window.removeEventListener('offline', this.handleNetworkOffline);\n    window.removeEventListener('kustomerOpen', this.openWidget);\n    window.removeEventListener('kustomerClose', this.closeWidget);\n    window.removeEventListener(\n      'kustomerCreateConversation',\n      this.createConversation,\n    );\n    window.removeEventListener(\n      'kustomerOpenDraftConversation',\n      this.createConversationInDraft,\n    );\n    window.removeEventListener('kustomerLogin', this.handleLogin);\n    window.removeEventListener('kustomerOpenKbArticle', this.openKbArticle);\n    window.removeEventListener(\n      'kustomerOpenConversationById',\n      this.openConversationById,\n    );\n    window.removeEventListener(\n      'kustomerGetOpenConversations',\n      this.getOpenConversations,\n    );\n    window.parent.removeEventListener('resize', this.resizeHandler);\n    Polling.clearPolling();\n  }\n\n  fetchMessageHistory = (\n    conversationId: string,\n    conversationDataState: ConversationsState['data'],\n  ) => {\n    const conversation = conversationDataState[conversationId];\n    if (!conversation) return Promise.resolve();\n    const currentMessagesById = conversation.messages.reduce(\n      (acc, messageId) => {\n        acc[messageId] = this.state.messages.messageData[messageId];\n        return acc;\n      },\n      {},\n    );\n    return fetchMessageHistoryHelper(conversation, currentMessagesById).then(\n      (result) => {\n        const {\n          satisfaction,\n          messagesById: newMessagesById,\n          hasAllMessages,\n          initialMessages,\n          optimisticMessages,\n        } = result;\n        this.setState(\n          produce((draftState: Draft<AppState>) => {\n            // we must merge conversation messages again here, messagesById could be stale if a message is sent between when it was created and here\n            // - ideally we do not merge in two places, however existing fetching logic requires it\n            // get messagesById from state\n            const conversation = draftState.conversations.data[conversationId];\n            const prevMessagesById = conversation.messages.reduce(\n              (acc, messageId) => {\n                acc[messageId] = draftState.messages.messageData[messageId];\n                return acc;\n              },\n              {},\n            );\n\n            const {\n              messagesById: mergedMessagesById,\n              messages: mergedMessages,\n            } = mergeAndSortByMessageTimestamps(\n              prevMessagesById,\n              newMessagesById,\n            );\n\n            const draftConversation =\n              draftState.conversations.data[conversationId];\n            draftConversation.messages = mergedMessages;\n            draftConversation.satisfaction =\n              draftConversation.satisfaction || satisfaction;\n            draftConversation.hasAllMessages = hasAllMessages;\n            if (initialMessages) {\n              draftConversation.initialMessages = initialMessages;\n            }\n            if (optimisticMessages) {\n              draftConversation.optimisticMessages = optimisticMessages;\n            }\n            Object.assign(draftState.messages.messageData, mergedMessagesById);\n            draftState.polledMessageCount =\n              (this.state.polledMessageCount || 0) + result.messages.length;\n          }),\n        );\n      },\n    );\n  };\n\n  openWidget = (event?: CustomEvent | MouseEvent | KeyboardEvent) => {\n    const { isChatHidden, showWidget } = this.state;\n    if (isChatHidden || showWidget) {\n      return;\n    }\n\n    const isMobile = isMobileViewport();\n\n    this.setState(\n      (prevState) =>\n        produce(prevState, (draftState: Draft<AppState>) => {\n          draftState.showWidget = true;\n          draftState.isMobile = isMobile;\n        }),\n      () => {\n        this.resizeWidget();\n\n        setKustomerLocalStorage('wasWidgetOpen', true);\n\n        if (event?.detail?.callback) {\n          event.detail.callback();\n        }\n\n        kustomerCore.sendPresenceActivity({ presence: 'online' });\n\n        runKustomerListenersForEvent(kustomerWidgetEventTypes.onOpen);\n      },\n    );\n  };\n\n  closeWidget = (event?: CustomEvent | MouseEvent) => {\n    const { isChatHidden } = this.state;\n    const { hideChatIcon } = this.props;\n\n    if (isChatHidden) {\n      return;\n    }\n\n    setIframeSizeChatIcon(hideChatIcon);\n    this.setState(\n      (prevState) =>\n        produce(prevState, (draftState: Draft<AppState>) => {\n          draftState.showWidget = false;\n        }),\n      () => {\n        this.chatRootIconRef.current?.focus();\n\n        setKustomerLocalStorage('wasWidgetOpen', false);\n        if (event?.detail?.callback) {\n          event.detail.callback();\n        }\n\n        kustomerCore.sendPresenceActivity({ presence: 'offline' });\n\n        runKustomerListenersForEvent(kustomerWidgetEventTypes.onClose);\n        kustomerCore.kustomerEventCount({\n          name: 'app.close_widget.click',\n        });\n      },\n    );\n  };\n\n  openConversationById = (event: CustomEvent) => {\n    const { conversations } = this.state;\n\n    const detail: OpenConversationByIdEventDetail = event?.detail;\n\n    const conversationId = detail?.conversationId;\n    const callback = detail?.callback;\n\n    if (!conversationId || !conversations.data[conversationId]) {\n      if (callback) {\n        return callback(null, new Error('Invalid conversationId provided.'));\n      }\n    } else {\n      return this.setState(\n        (prevState) =>\n          produce(prevState, (draftState: Draft<AppState>) => {\n            draftState.navigation.currentConversationId = conversationId;\n            draftState.navigation.page = MESSAGE_THREAD_PATH;\n          }),\n        () => {\n          this.openWidget();\n          if (callback) callback(null);\n        },\n      );\n    }\n\n    return undefined;\n  };\n\n  getOpenConversations = (event: CustomEvent) => {\n    const { conversations } = this.state;\n\n    const openConversations = Object.values(conversations.data)\n      .filter((conversation) => !conversation.ended)\n      .map((conversation) => ({\n        conversationId: conversation.conversationId,\n      }));\n\n    if (event?.detail?.callback) {\n      event.detail.callback(openConversations);\n    }\n  };\n\n  updatePage = (page: Page) => {\n    this.resizeWidget(page);\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.navigation.page = page;\n      }),\n    );\n  };\n\n  updateCurrentConversationId = (conversationId?: string) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.navigation.currentConversationId = conversationId;\n      }),\n    );\n  };\n\n  updateInitAssistantPayload = (\n    initAssistantPayload: InitAssistantCallbackResponse | undefined,\n  ) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.navigation.initAssistantPayload = initAssistantPayload;\n      }),\n    );\n  };\n\n  updateConversationListScrollLocation = (location: number) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.navigation.conversationListScrollLocation = location;\n      }),\n    );\n  };\n\n  addConversation = (conversation, initialMessages) => {\n    const { conversationId, createdAt, isInAssistantMode, assistantId } =\n      conversation;\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.conversations.data[conversationId] = {\n          conversationId,\n          messages: [],\n          optimisticMessages: [],\n          createdAt,\n          isInAssistantMode,\n          initialMessages,\n          assistantId,\n          hasAllMessages: true,\n        };\n      }),\n    );\n  };\n\n  updateConversation: ConversationsState['updateConversation'] = (\n    conversationId,\n    conversationAttributes,\n  ) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        const current = draftState.conversations.data[conversationId];\n\n        draftState.conversations.data[conversationId] = {\n          ...current,\n          ...conversationAttributes,\n        };\n      }),\n    );\n  };\n\n  updateCategories = (categories, rootCategory) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.categories = categories;\n        draftState.kb.rootCategory = rootCategory;\n      }),\n    );\n  };\n\n  updateArticles = (articles) => {\n    const articlesToAdd = articles.reduce((acc, val) => {\n      acc[val.articleId] = val;\n\n      return acc;\n    }, {});\n\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.articles = {\n          ...this.state.kb.articles,\n          ...articlesToAdd,\n        };\n      }),\n    );\n  };\n\n  updateArticleSearchResults = (articles) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.articleSearchResults = articles;\n      }),\n    );\n  };\n\n  updateArticleSearchInput = (term: string) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.articleSearchInput = term;\n      }),\n    );\n  };\n\n  updateCurrentCategoryId = (categoryId) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.currentCategoryId = categoryId;\n      }),\n    );\n  };\n\n  updateCurrentArticleId = (articleId) => {\n    kustomerCore.getKnowledgeBaseConfig().then((config) => {\n      this.setState(\n        produce((draftState: Draft<AppState>) => {\n          draftState.kb.currentArticleId = articleId;\n          draftState.kb.config = config;\n        }),\n      );\n    });\n  };\n\n  updateArticleSearchFetching = (fetching: boolean) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.articleSearchFetching = fetching;\n      }),\n    );\n  };\n\n  updateFeaturedArticles = (articles: ArticleCallbackResponse[]) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.kb.featuredArticles = articles;\n      }),\n    );\n    this.updateArticles(articles);\n  };\n\n  endConversation = (conversationId) => {\n    kustomerCore.endConversation({\n      conversationId,\n    });\n  };\n\n  addOptimisticMessage = (conversationId, message) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        draftState.conversations.data[conversationId].optimisticMessages.push(\n          message,\n        );\n      }),\n    );\n  };\n\n  toggleOptimisticMessageError = (conversationId, optimisticId, value) => {\n    this.setState((prevState) => {\n      const { optimisticMessages } =\n        prevState.conversations.data[conversationId];\n      return produce(prevState, (draftState: Draft<AppState>) => {\n        draftState.conversations.data[conversationId].optimisticMessages =\n          optimisticMessages.map((message) => {\n            if (message.messageId === optimisticId) {\n              return {\n                ...message,\n                showError: value,\n              };\n            }\n            return message;\n          });\n      });\n    });\n  };\n\n  removeOptimisticMessage = (conversationId, optimisticMessageId) => {\n    this.setState(\n      produce((draftState: Draft<AppState>) => {\n        const conversation = draftState.conversations.data[conversationId];\n\n        let attachmentsToRevoke = [] as MessageAttachmentCallbackResponse[];\n\n        const withoutOptimisticMessage = conversation.optimisticMessages.filter(\n          (message) => {\n            const isMessage = message.messageId === optimisticMessageId;\n\n            if (isMessage && message.attachments) {\n              attachmentsToRevoke = message.attachments;\n            }\n\n            return !isMessage;\n          },\n        );\n\n        attachmentsToRevoke.forEach((attachment) => {\n          if (attachment.url) URL.revokeObjectURL(attachment.url);\n        });\n\n        conversation.optimisticMessages = withoutOptimisticMessage;\n      }),\n    );\n  };\n\n  markArticleVisited = (messageId, articleId) => {\n    this.setState((prevState) => {\n      return produce(prevState, (draftState: Draft<AppState>) => {\n        const message = draftState.messages.messageData[messageId];\n\n        const article = message?.meta?.articles?.find(\n          (article) => article.articleId === articleId,\n        );\n\n        if (article) {\n          article.visited = 1;\n        }\n      });\n    });\n  };\n\n  renderChatRootIcon() {\n    const { navigation, unreadCounts, proactiveChat, isMobile } = this.state;\n    const { hideChatIcon, chatSettings, chatAvailability, intlDefinitions } =\n      this.props;\n\n    if (hideChatIcon) {\n      return null;\n    }\n\n    const proactiveChatContext = {\n      proactiveChat,\n      onCloseProactiveChat: () => this.handleProactiveChatTrigger(),\n      handoffToMessageThread: this.handoffToMessageThread,\n    };\n    return (\n      <IntlProvider definition={intlDefinitions}>\n        <NavigationContext.Provider value={navigation}>\n          <ChatAvailabilityContext.Provider value={chatAvailability}>\n            <UnreadCountsContext.Provider value={unreadCounts}>\n              <SettingsContext.Provider value={chatSettings}>\n                <ProactiveChatContext.Provider value={proactiveChatContext}>\n                  <ChatRootIcon\n                    ref={this.chatRootIconRef}\n                    onClick={this.openWidget}\n                    isMobile={isMobile}\n                  />\n                </ProactiveChatContext.Provider>\n              </SettingsContext.Provider>\n            </UnreadCountsContext.Provider>\n          </ChatAvailabilityContext.Provider>\n        </NavigationContext.Provider>\n      </IntlProvider>\n    );\n  }\n\n  renderWidget() {\n    const {\n      navigation,\n      widgetActions,\n      conversations,\n      messages,\n      unreadCounts,\n      kb,\n      connection,\n      isMobile,\n      loading,\n      retryCount,\n    } = this.state;\n\n    const {\n      chatAvailability,\n      chatSettings,\n      hideNewConversationButtonSettings,\n      intlDefinitions,\n      hideHistory,\n    } = this.props;\n\n    return (\n      <IntlProvider definition={intlDefinitions}>\n        <NavigationContext.Provider value={navigation}>\n          <ChatAvailabilityContext.Provider value={chatAvailability}>\n            <HideNewConversationButtonSettingsContext.Provider\n              value={hideNewConversationButtonSettings}\n            >\n              <SettingsContext.Provider value={chatSettings}>\n                <WidgetActionsContext.Provider value={widgetActions}>\n                  <ConversationsContext.Provider value={conversations}>\n                    <UnreadCountsContext.Provider value={unreadCounts}>\n                      <MessagesContext.Provider value={messages}>\n                        <KBContext.Provider value={kb}>\n                          <ConnectionContext.Provider value={connection}>\n                            <Widget\n                              isMobile={isMobile}\n                              hideHistory={hideHistory}\n                              loading={loading}\n                              restartApp={\n                                retryCount < 3 ? this.handleRestart : undefined\n                              }\n                            />\n                          </ConnectionContext.Provider>\n                        </KBContext.Provider>\n                      </MessagesContext.Provider>\n                    </UnreadCountsContext.Provider>\n                  </ConversationsContext.Provider>\n                </WidgetActionsContext.Provider>\n              </SettingsContext.Provider>\n            </HideNewConversationButtonSettingsContext.Provider>\n          </ChatAvailabilityContext.Provider>\n        </NavigationContext.Provider>\n      </IntlProvider>\n    );\n  }\n\n  render(_, state) {\n    const { isChatHidden, showWidget } = state;\n    if (isChatHidden) {\n      return null;\n    }\n    return showWidget ? this.renderWidget() : this.renderChatRootIcon();\n  }\n}\n\nexport default App;\n","export enum IFRAME_MESSAGES {\n  INSIDE_BUSINESS_HOURS = 'INSIDE_BUSINESS_HOURS',\n  OUTSIDE_BUSINESS_HOURS = 'OUTSIDE_BUSINESS_HOURS',\n}\n","import { ChatIconPosition } from './types';\n\nexport const DEFAULT_Z_INDEX = '2147483000';\nexport const DEFAULT_CHAT_ICON_POSITION: ChatIconPosition = {\n  alignment: 'right',\n  horizontalPadding: 20,\n  verticalPadding: 20,\n};\n\nexport const publicConstants = {\n  KNOWLEDGE_BASE_VIEW: 'kb',\n  CHAT_HISTORY_VIEW: 'chat',\n};\n","import App from './App';\n\nexport default App;\n","\n      import API from \"!../../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./base.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../../node_modules/css-loader/dist/cjs.js??ruleSet[1].rules[5].use[1]!../../../../node_modules/sass-loader/dist/cjs.js!./base.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","import { h, render, Fragment, Component, options } from 'preact';\nimport { useEffect, useState } from 'preact/hooks';\nimport { isBrowserIE, installPolyfills } from 'polyfills/helpers';\nimport { enableES5 } from 'immer';\nimport {\n  getKustomer,\n  getKustomerCore,\n  handleFirstTab,\n  handleMouseClick,\n} from 'widget_main/globals/helpers';\n\nimport * as helpers from 'widget_main/app/helpers';\nimport { AppProps } from 'widget_main/app/types';\nimport { getNonce } from 'helpers/nonce/helpers';\nimport App from './app';\nimport './styles/base.scss';\nimport { initSentry } from '../../globals/sentry';\nimport { IFRAME_MESSAGES } from '../../globals/iframeMessages';\nimport { getMessagesForLanguage } from '../../i18n/helpers';\nimport { NormalizedStartParameters } from '../widget_api/types';\nimport { isInAppBrowser, applyNonceToDynamicScripts } from '../../helpers/browser';\n\nif (isBrowserIE()) {\n  enableES5();\n}\nconst kustomerCore = getKustomerCore();\n\nconst Root = ({\n  startParameters,\n}: {\n  startParameters: NormalizedStartParameters;\n}) => {\n  const [chatSettings, setChatSettings] = useState<AppProps['chatSettings']>();\n  const [intlDefinitions, setIntlDefinitions] =\n    useState<AppProps['intlDefinitions']>();\n  const [chatAvailability, setChatAvailability] =\n    useState<AppProps['chatAvailability']>();\n\n  useEffect(() => {\n    window.addEventListener('keydown', handleFirstTab);\n\n    return () => {\n      window.removeEventListener('keydown', handleFirstTab);\n      window.removeEventListener('mousedown', handleMouseClick);\n    };\n  }, []);\n\n  const loadSettings = () => {\n    // Even though kustomerCore.init returns a Promise, it is possible for it to resolve before pubnub finishes initiating.\n    // That is why we wrap it in another Promise that will only resolve once the callback is called.\n    return new Promise<void>((resolve) => {\n      kustomerCore.init(\n        {\n          scheduleId: startParameters.scheduleId,\n          brandId: startParameters.brandId,\n          lang: startParameters.lang,\n          assistantId: startParameters.assistantId,\n        },\n        (response, error) => {\n          if (error) return;\n          const { settings } = response;\n\n          if (settings.sentry?.web && !isInAppBrowser()) {\n            // can we get org info here? maybe we should decode the api key? or is there more info on settings?\n            initSentry(settings.sentry.web);\n          }\n\n          setChatSettings(settings);\n\n          // `chatAvailability` is based on business and holiday schedules, so we must wait until after settings are\n          // loaded to check this state from core. We are also able to override the availability from startParameters.\n          // We do this on the live preview page.\n          let chatAvailability = kustomerCore.isChatAvailable().availability;\n          const businessHoursOverride =\n            startParameters?.livePreviewOverrides?.businessHours;\n\n          if (businessHoursOverride === IFRAME_MESSAGES.INSIDE_BUSINESS_HOURS) {\n            chatAvailability = 'online';\n          } else if (\n            businessHoursOverride === IFRAME_MESSAGES.OUTSIDE_BUSINESS_HOURS\n          ) {\n            chatAvailability = 'offline';\n            if (settings.offhoursDisplay === 'none') {\n              chatAvailability = 'hidden';\n            }\n          }\n\n          setChatAvailability(chatAvailability);\n\n          helpers.setThemeVariables(settings);\n\n          resolve();\n        },\n      );\n    });\n  };\n\n  useEffect(() => {\n    // init on first render\n    loadSettings();\n    getMessagesForLanguage().then((langModule) => {\n      setIntlDefinitions(langModule?.default);\n    });\n  }, []);\n\n  if (!chatSettings) {\n    return null;\n  }\n\n  return (\n    <App\n      intlDefinitions={intlDefinitions}\n      chatSettings={chatSettings}\n      chatAvailability={chatAvailability}\n      hideHistory={startParameters?.hideHistory}\n      hideChatIcon={!!startParameters?.hideChatIcon}\n      hideNewConversationButtonSettings={{\n        onChatHistory: !!startParameters?.hideNewConversationButtonOnHistory,\n        onConversationEnd: !!startParameters?.hideNewConversationButtonOnEnd,\n      }}\n      reloadSettings={loadSettings}\n    />\n  );\n};\n\ninstallPolyfills().then(() => {\n  // preact-devtools claims to work in iframes, but that doesn't seem to work?\n  // Force install it to the top frame instead.\n  try {\n    // eslint-disable-next-line no-underscore-dangle\n    const devtools = (window.top as any)?.__PREACT_DEVTOOLS__;\n    if (devtools) {\n      devtools.attachPreact('10.6.4', options, {\n        Fragment,\n        Component,\n      });\n    }\n  } catch {}\n\n  // Apply CSP nonce to dynamically loaded scripts\n  /*\n    Simplified nonce detection logic:\n    - We now only look for a script tag with [data-kustomer-api-key],\n      as all entry points (widget.js, core.js, widget_api) now include this attribute.\n    The getNonce helper returns the nonce if present.\n  */\n  const scriptEmbedElement = document.querySelector('[data-kustomer-api-key]') as HTMLScriptElement | null;\n  const nonce = getNonce(scriptEmbedElement);\n  if (nonce) {\n    // Set up global interception to ensure all dynamically loaded scripts (this only includes resources from kustomer domains)\n    // receive the correct CSP nonce. This is required for compliance with strict CSP policies.\n    // Must be called before any dynamic imports or script loads occur.\n    applyNonceToDynamicScripts(nonce);\n  }\n\n  const startParameters = getKustomer()?.startParameters;\n\n  render(\n    <Root startParameters={startParameters} />,\n    document.getElementById('root') as HTMLElement,\n  );\n});\n","import { InitCallbackResponse } from 'core_main/sdk/init/types';\nimport colors from 'widget_main/styles/colors.scss';\nimport { ThemeVariables } from './types';\n\nexport const createTheme = (\n  settings: InitCallbackResponse['settings'],\n): ThemeVariables => {\n  return {\n    '--header-background-color':\n      settings.colors?.headerBackground || colors.white,\n    '--header-font-primary-color':\n      settings.colors?.headerPrimaryText || colors.primary,\n    '--header-font-secondary-color':\n      settings.colors?.headerSecondaryText || colors.secondary,\n    '--agent-bubble-background-color':\n      settings.colors?.agentBubbleBackground || colors.white,\n    '--agent-bubble-primary-font-color':\n      settings.colors?.agentBubblePrimaryText || colors.primary,\n    '--agent-bubble-secondary-font-color':\n      settings.colors?.agentBubbleSecondaryText || colors.secondary,\n    '--customer-bubble-background-color':\n      settings.colors?.customerBubbleBackground || colors.primarySlate,\n    '--customer-bubble-primary-font-color':\n      settings.colors?.customerBubblePrimaryText || colors.white,\n    '--primary-button-background-color':\n      settings.colors?.primaryButtonBackground || colors.primaryBlue,\n    '--primary-button-background-hover-color':\n      settings.colors?.primaryButtonBackgroundHover || colors.primaryDarkerBlue,\n    '--primary-button-font-color':\n      settings.colors?.primaryButtonText || colors.white,\n  };\n};\n"],"names":["leafPrototypes","getProto","inProgress","dataWebpackPrefix","hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","___CSS_LOADER_EXPORT___","id","locals","___CSS_LOADER_URL_REPLACEMENT_0___","cssWithMappingToString","list","this","map","item","content","concat","modules","mediaQuery","dedupe","alreadyImportedModules","_i","url","options","__esModule","test","slice","hash","needQuotes","replace","t","n","e","o","split","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","parseInt","freeGlobal","g","freeSelf","self","root","Function","objectToString","nativeMax","Math","max","nativeMin","min","now","Date","isObject","value","type","toNumber","isObjectLike","isSymbol","other","valueOf","isBinary","func","wait","lastArgs","lastThis","maxWait","result","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","TypeError","invokeFunc","time","args","thisArg","undefined","shouldInvoke","timeSinceLastCall","timerExpired","trailingEdge","setTimeout","remainingWait","debounced","isInvoking","leadingEdge","cancel","clearTimeout","flush","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","base","count","indexByIdentifier","obj","css","media","sourceMap","supports","layer","references","updater","addElementStyle","byIndex","splice","api","domAPI","update","newObj","remove","lastIdentifiers","newList","index","newLastIdentifiers","_index","memo","insert","style","target","styleTarget","document","querySelector","window","HTMLIFrameElement","contentDocument","head","getTarget","Error","appendChild","element","createElement","setAttributes","attributes","styleElement","nonce","setAttribute","insertStyleElement","needLayer","btoa","unescape","encodeURIComponent","JSON","stringify","styleTagTransform","parentNode","removeChild","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","m","getter","d","a","getPrototypeOf","__proto__","mode","then","ns","create","r","def","current","indexOf","getOwnPropertyNames","forEach","definition","defineProperty","enumerable","get","f","chunkId","Promise","all","keys","reduce","promises","u","globalThis","prop","l","done","script","needAttach","scripts","getElementsByTagName","s","getAttribute","charset","timeout","nc","src","onScriptComplete","prev","event","onerror","onload","doneFns","fn","bind","Symbol","toStringTag","p","installedChunks","j","installedChunkData","promise","resolve","reject","error","errorType","realSrc","message","name","request","webpackJsonpCallback","parentChunkLoadingFunction","data","chunkIds","moreModules","runtime","some","chunkLoadingGlobal","callback","constructor","reason","arr","remaining","res","val","status","setTimeoutFunc","setImmediateFunc","setImmediate","x","Boolean","noop","_state","_handled","_value","_deferreds","doResolve","handle","deferred","_immediateFn","cb","onFulfilled","onRejected","ret","newValue","finale","_unhandledRejectionFn","len","Handler","ex","prom","allSettled","race","err","console","warn","globalNS","ce","CustomEvent","cancelable","preventDefault","defaultPrevented","params","evt","origPrevent","bubbles","createEvent","initCustomEvent","detail","Event","c","h","children","defaultProps","y","props","ref","__k","__","__b","__e","__d","__c","__h","__v","vnode","_","context","k","b","__r","debounceRendering","sort","__P","__n","ownerSVGElement","z","w","v","A","P","N","M","nextSibling","insertBefore","$","setProperty","H","toLowerCase","addEventListener","T","I","removeEventListener","removeAttribute","contextType","__E","render","O","sub","state","__s","getDerivedStateFromProps","componentWillMount","componentDidMount","componentWillReceiveProps","shouldComponentUpdate","componentWillUpdate","componentDidUpdate","getChildContext","getSnapshotBeforeUpdate","L","diffed","localName","nodeType","createElementNS","is","childNodes","dangerouslySetInnerHTML","__html","innerHTML","C","checked","unmount","componentWillUnmount","S","B","D","Consumer","Provider","getDerivedStateFromError","setState","componentDidCatch","forceUpdate","__H","F","pop","requestAnimationFrame","cancelAnimationFrame","filter","isBrowserIE","userAgent","navigator","Q","Z","nn","has","set","delete","add","X","Map","Set","tn","writable","configurable","clear","freeze","isFrozen","rn","U","R","getOwnPropertyDescriptor","E","en","on","Proxy","revocable","revoke","proxy","J","from","G","W","Reflect","for","iterator","ownKeys","getOwnPropertySymbols","getOwnPropertyDescriptors","deleteProperty","setPrototypeOf","un","produce","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","K","finishDraft","applyPatches","path","op","an","isEnterKey","which","keyCode","isTabKey","isEscKey","getItemFromLocalStorage","_window$localStorage","localStorage","getItem","getKustomerCore","KustomerCore","getKustomer","parent","Kustomer","handleMouseClick","_document$getElementB","getElementById","classList","handleFirstTab","_document$getElementB2","keyboardEventHelpers","getKustomerLocalStorage","parse","setKustomerLocalStorage","kustomerState","_window$localStorage2","setItem","setItemInLocalStorage","_objectSpread","_defineProperty","runKustomerListenersForEvent","eventType","response","_getKustomer","_getKustomer$listener","_getKustomer$listener2","listeners","getLastAgentMessageInConversation","conversation","messagesState","messages","agentMessageId","reverse","find","messageId","_messagesState$messag","_messagesState$messag2","_messagesState$messag3","messageData","sentBy","getMessageAgentInformation","messageSentBy","settings","initAssistantPayload","_initAssistantPayload","_initAssistantPayload2","_initAssistantPayload3","avatarUrl","teamIconUrl","displayName","publicName","teamName","truncate","input","substring","CONVERSATIONS_PATH","MESSAGE_THREAD_PATH","KB_ARTICLE_PATH","KB_DEFLECT_ARTICLE_PATH","KB_SEARCH_PATH","MODAL_ROOT_ID","WIDGET_TYPE_CHAT","WIDGET_TYPE_KB","WIDGET_TYPE_CHAT_KB","kustomerWidgetEventTypes","OFFLINE","INITIAL_STATE","widgetActions","isChatHidden","isMobile","showWidget","navigation","currentConversationId","page","conversations","pages","next","unreadCounts","total","kb","categories","articles","articleSearchResults","articleSearchInput","currentCategoryId","currentArticleId","connection","loading","retryCount","EXPAND_NAV_ITEMS","getChatIconSize","startParameters","chatIconSize","width","height","getChatIconPosition","chatIconPosition","CSP_NONCE_ALLOWED_URLS","getNonce","scriptEmbedElement","embedElement","KustomerGetNonce","IntlContext","intl","defined","deepAssign","source","out","URL_FLAG","IntlProvider","scope","mark","rest","exclude","objectWithoutProperties","dictionary","location","String","match","Child","IntlProviderWrapper","getWrappedComponent","EMPTY","template","fields","replacer","currentFields","field","parts","Text","translate","plural","fallback","none","one","singular","many","HighlightI18N","dictionaryKey","background","title","translateMapping","onlyTextNodes","properties","selected","trim","Localizer","child","Html","html","useText","mapping","MarkupText","withText","WithTextWrapper","translations","ChatAvailabilityContext","createContext","SettingsContext","HideNewConversationButtonSettingsContext","onChatHistory","onConversationEnd","NavigationContext","WidgetActionsContext","ConversationsContext","MessagesContext","UnreadCountsContext","ProactiveChatContext","ConnectionContext","KBContext","answers","goBack","yes","no","newMessages","ErrorMessage","useTranslations","globalIds","contextInput","entries","acc","globals","globalMessages","definitions","styles","assign","getSentry","handleError","_ref","tags","CHAT_DISABLED","Sentry","captureException","errorBoundary","isReactComponent","__f","isPureReactComponent","$$typeof","__u","__R","__O","revealOrder","size","cancelBubble","persist","isPropagationStopped","isDefaultPrevented","nativeEvent","class","multiple","defaultValue","className","Button","variant","ariaLabel","onClick","block","disabled","buttonRef","_objectWithoutProperties","_excluded","_extends","button","onKeyPress","stopPropagation","defaultMessage","fallbackMessage","fieldValue","ErrorBoundaryComponent","restartApp","showRefreshButton","container","Send","header","subHeader","refreshButton","vendors","ErrorBoundary","_Component","_inherits","_super","_createSuper","_this","_classCallCheck","errored","_createClass","prevProps","prevState","draftState","nextProps","nextState","Component","LANGUAGES","af","am","ar","be","bg","bs","ca","cs","da","de","el","en_ca","en_gb","en_us","es","es_es","et","fi","fil","fr","fr_ca","he","hi","hr","hu","it","ja","ka","kk","kn","ko","ky","lt","lv","ms","nl","pa","pl","pt","pt_br","ro","ru","sk","sl","sq","sr","sv","sw","te","th","tr","tw","uk","ur","uz","vi","zh","zh_cn","zh_tw","EMPTY_OBJECT","getMessages","getLocale","getBrowserLocale","_windowNavigator$lang","windowNavigator","browserLanguage","languages","formatLocale","lang","langLowerCase","withoutDash","getMappedLanguage","langCode","_getKustomer2","_getKustomer2$startPa","startLang","startLangLocale","browserLocale","initLocale","mappedLanguage","_window","_window$Intl","dir","Intl","RelativeTimeFormat","_locales$default2","_locales$default2$map","localeFunction","locales","polyfilled","getLocaleData","catch","retry","retriesLeft","interval","useLocale","_useState2","_slicedToArray","useState","isLoadingLocale","setIsLoadingLocale","useContext","useEffect","finally","useVendors","_useState4","isLoadingVendors","setIsLoadingVendors","_useState6","loadingVendorsError","setIsLoadingVendorsError","mod","markedModule","dompurifyModule","_dompurifyModule$defa","addHook","node","addDomPurifyHooks","marked","dompurify","sanitizeHtml","dirtyHtml","config","_vendors2","_vendors2$dompurify","sanitize","loader","MOBILE_SCREEN_WIDTH","Number","sizings","mobileScreenWidth","MOBILE_SCREEN_HEIGHT","mobileScreenHeight","isMobileViewport","innerWidth","innerHeight","findFocusableElements","_toConsumableArray","querySelectorAll","offsetParent","useFocusLock","updateRef","eventListener","useCallback","activeDocument","ownerDocument","focusableContent","firstFocusableElement","lastFocusableElement","shiftKey","isShiftKey","activeElement","focus","TitleBarButton","href","tabIndex","rel","titleBarButton","closeModalAriaLabel","show","closeButton","onHide","bodyClassName","initialFocusRef","ariaLabelledby","modalRoot","dialogRef","useRef","focusLockRef","_initialFocusRef$curr","_dialogRef$current","createPortal","onKeyDown","role","modal","CloseIcon","body","goBackAriaLabel","endChatAriaLabel","minimizeChatAriaLabel","openInNewTabAriaLabel","confirmEndChatAriaLabel","cancelEndChatAriaLabelLabel","endChatModalPrompt","endChatModalButton","endChatModalCancelButton","kustomerCore","_conversations$data","_conversations$data$c","onGoBack","modalInitialFocusRef","endChatButtonRef","showEndChatModal","toggleEndChatModal","closeEndChatModal","cancelEndChat","_endChatButtonRef$cur","Fragment","backButton","ChevronLeftIcon","right","_getKustomer$startPar","knowledgeBaseDomain","hideArticleOpenInNewTab","articleExternalUrl","_kb$articles","article","slug","constructExternalArticleLink","OpenInNewIcon","renderOpenInNewTab","closableChat","ended","closeWidget","MinimizeIcon","Modal","endChatQuestion","endChatModalButtons","modalButton","endConversation","kustomerEventCount","cancelButton","newKustySVG","ChatIcon","color","svg","isEmbedIcon","chatSettings","embedIconUrl","iconUrl","chatIcon","backgroundSize","bgSize","getBackgroundSize","backgroundImage","embedIconColor","getHTMLFromMarkdown","markdown","markedOptions","_vendors","renderer","Renderer","linkRenderer","link","text","outputHTML","mediaPreviewAltText","modalStyles","position","top","left","backgroundColor","display","justifyContent","alignItems","zIndex","border","padding","cursor","closeButtonStyles","imageStyles","maxWidth","maxHeight","parentBody","containerRef","handleCloseKeyDown","_containerRef$current","alt","autoPlay","playsInline","controls","_ref$formatHtml","formatHtml","markdownRef","mediaPreviewData","setMediaPreviewData","openMediaPreviewOnImage","currentTarget","markdownContainer","images","image","markdownBody","MediaPreviewModal","_markdownRef$current","chatAvailability","greeting","conversationsHeader","chatIconWrapper","Markdown","breaks","offhoursMessage","agentAvatar","Avatar","userDisplayName","imageFetchState","setImageFetchState","avatar","formattedAvatarUrl","imageAlt","customImg","hideImg","onError","onLoad","renderAvatarUrl","_agentMessage$sentBy","_lastMessageAgentData","_lastMessageAgentData2","waitMessage","currentConversation","agentMessage","lastMessageAgentData","lastResponder","agentDisplayName","messageThreadHeader","info","appGenerated","MINUTE","HOUR","DAY","timeAgoJustNow","timestamp","timeAgo","date","rtf","formattedLang","messageDate","getTime","duration","floor","format","helpers","startTime","currentPage","previousPage","conversationId","withoutCount","limitCount","unreadCount","unread","findPageCondition","condition","session_currentPage","session_previousPage","currentPageSeconds","findPageCriteria","rule","_rule$criteria","_rule$criteria$and","_rule$criteria2","_rule$criteria2$or","or","criteria","and","getActiveAssistant","_getKustomer3","_getKustomer3$startPa","activeAssistant","assistant","dialog","getAssistant","session","referrer","round","language","aiAgentTeamId","initAssistant","assistantId","assistantOptions","getChatSettings","isAssistantPreview","_getKustomer4","_getKustomer4$startPa","_getKustomer4$startPa2","emulation","newConversation","leaveAMessage","newConversationButtonAriaLabel","viewNewConversation","navigateToConversationId","newConversationButton","updateCurrentConversationId","updateInitAssistantPayload","updatePage","restProps","emptyTitle","emptySubtitle","offHoursEmptyTitle","offHoursEmptySubtitle","previewAttachmentReceived","previewAttachmentSent","_conversations$pages2","hideNewConversationButtonSettings","setInterval","clearInterval","fetchingHistory","setFetchingHistory","previousScrollTop","CONVERSATION_LIST_ID","conversationCount","useLayoutEffect","conversationListScrollLocation","scrollTop","conversationList","_conversations$pages","openConversationFound","filteredConversations","_conversations$pages3","conversationsList","handleClickConversation","onScroll","_conversations$pages4","updateConversationListScrollLocation","scrollHeight","clientHeight","fetchNextPageOfHistory","noHistory","unreadConversationIds","movedToConversationId","getFilteredConversations","values","lastMessageAt","_lastAgentMessage$sen","_classNames","previewText","lastMessagePreview","_satisfaction$form","satisfaction","preview","satisfactionTimetoken","timetoken","satisfactionIntroduction","form","introduction","getLastMessagePreview","lastAgentMessage","unreadConversation","endedConversation","handleKeyPress","conversationDetails","conversationHeader","agentName","TimeAgo","conversationBody","ALLOWED_TAGS","Unread","unreadProp","empty","DecorativeImage","ConversationsEmpty","conversationsEmpty","offhoursImageUrl","offlineCustomImage","Offline","loaderWrapper","showLoader","Loader","singleSessionChat","NewConversationButton","createConversationButton","createConversationButtonWithNavigation","widgetType","_DisableZoomMetaElement","META_VIEWPORT_ID","getParentDocument","_window$parent","getParentHead","_this$getParentDocume","_this$getParentDocume2","getMetaViewport","_this$getParentDocume3","metaViewPortEl","buildMetaTag","metaViewportEl","DisableZoomMetaElement","getIsZoomAllowed","allowZoom","WIDGET_OPEN_ANIMATION","_KustomerApiIFrameElement","IFRAME_ID","getIframe","selfIframe","addKustomerMobileActiveClass","transition","minWidth","minHeight","bottom","alignment","overrides","removeKustomerMobileActiveClass","frameWidth","frameHeight","frameMinHeight","frameMaxHeight","widgetFrameMaxHeight","frameMinWidth","widgetMaxWidth","verticalPadding","horizontalPadding","parentDocument","_parentDocument$docum","documentElement","_parentDocument$docum2","iFrameElement","getChatIconFrameSize","iconSize","setIframeSize","setIframeSizeHidden","setIframeSizeChatIcon","isChatIconHidden","isWidgetInFocus","_iFrameElement$getIfr2","hasFocus","contentWindow","getParentWindowTitle","generateNotificationRegex","strippedNumbers","replaceAll","RegExp","useTouchMove","handleTouchMove","scrollWidth","clientWidth","CHAT_MESSAGE_THREAD_ID","scrollToBottom","showNewMessagesText","showScrollToCurrent","scrollToCurrentContainer","scrollToContainerFadeIn","scrollToContainerFadeOut","scrollToCurrent","hasNewMessages","chatMessageThread","scrollTo","behavior","ChevronRight","chevronDown","messageSendFailure","messageBot","processingAnswer","aiAnswer","fromAiAutomation","innerClassName","isOutbound","showAvatar","showBotIdentifier","showAIIdentifier","showOptimisticError","showTimestamp","showAIProcessingAnswer","isFromAiAutomation","includes","renderMessageMeta","messageMeta","useGenericSeparator","useAISeparator","separator","BotSparkle","outbound","chatBubble","optimisticError","inbound","avatarAndBubble","avatarWrapper","attachmentPreviewLabel","showPreviewModal","togglePreviewModal","mediaContainerRef","openPreview","videoPoster","muted","_mediaContainerRef$cu","SCALE_MAP","satisfactionRatingOption","highestSatisfactionRatingOption","lowestSatisfactionRatingOption","satisfactionRatingOptionDisabled","highestSatisfactionRatingOptionDisabled","lowestSatisfactionRatingOptionDisabled","scale","rating","labelLow","labelHigh","disabledString","scaleOptionsAriaLabels","optionContainer","option","optionIndex","imgUrl","isLow","isHigh","isSet","ratingOptionContainer","handleSetRatingKeyPress","labels","label","TextArea","forwardRef","onChange","_ref$autoFocus","autoFocus","onEnter","placeholder","_ref$maxLength","maxLength","rows","textArea","handleClick","getInitialAnswersFromSatisfaction","_satisfaction$respons","_satisfaction$respons2","_satisfaction$respons3","answer","_answer$selections","_answer$selectionsRaw","selections","selectionsRaw","questions","question","prompt","required","isRequired","displayType","answerRaw","SatisfactionMessageModal","_assertThisInitialized","bool","showSuccess","idx","selection","selectionRaw","valueRaw","_draftState$answers$i","_this$props","onSubmit","toggleSuccess","requiredTag","_this2","successScreen","CheckCircleIcon","checkCircleIcon","submitButton","_satisfaction$form$qu","_this3","disableForm","lockedAt","followupQuestionsContainer","_answers$idx3","questionContainer","questionLabel","renderRequired","enumeration","opt","_answers$idx","enumerationRaw","Radio","handleChangeRadioAnswer","_answers$idx2","_answers$idx2$selecti","Checkbox","handleChangeCheckboxAnswer","handleChangeTextAnswer","isSubmitDisabled","handleSubmit","_this$props2","modalBody","renderSuccess","renderForm","changeFeedbackButtonAriaLabel","changeFeedbackButton","viewFeedback","SatisfactionMessage","disableFeedback","ratingPrompt","showModal","setShowModal","openModal","submit","submitSatisfactionForm","satisfactionId","submittedAt","toISOString","updateConversation","satisfactionContainer","SatisfactionMessageScale","_response$form","_response$form$questi","feedbackButtonText","feedbackButton","changeFeedback","renderFeedbackButton","kbInlineRelatedArticle","kbInlineRelatedArticles","_message$meta6","_message$meta6$templa","_message$meta4","_message$meta4$articl","_message$meta5","_message$meta5$templa","agentData","chatBubbleInnerClassName","truncateLength","defaultMessages","navigateToArticleView","articleId","markArticleVisited","updateCurrentArticleId","handleClickArticle","_message$meta","_message$meta$article","sessionId","knowledgeBaseId","deflectionArticles","meta","version","visited","kbUrl","sendKbDeflectionClick","getArticleById","_kb$config","articleToAppend","updateArticles","renderMarkdown","truncated","templateType","ChatBubble","kbArticlesChatBubble","kbArticle","articleIcon","FileDocument","articleDetails","articleTitle","chevronRight","isLastInStreak","createdAt","followupText","_message$meta3","_message$meta3$templa","_message$meta2","kbInlineArticleHolder","related","icon","details","renderStandardMessage","ChatMessage","_message$sentBy","handleRetrySend","showNewMessageDivider","userTyping","renderMediaPreview","attachment","MediaWithPreview","mediaPreview","renderAttachments","attachments","attachmentId","attachmentWithoutMessage","contentType","isImage","isVideo","isPDF","isEnabled","showError","PdfIcon","pdfIcon","FilePresentIcon","filePreview","renderFilePreview","renderAttachment","newMessageDivider","newMessageDividerLine","newMessageDividerText","isAIGeneratingAnswer","typingIndicator","aiAssistantTypingIndicator","visuallyHidden","satisfactionBubble","TemplateMessage","renderInbound","retryMessage","renderOutbound","attachmentPreviewsAriaLabel","removeAttachment","removeAttachmentButton","closeIcon","renderCloseButton","file","imagePreview","renderImagePreview","_attachment$file","bytes","VideoIcon","pdfDetails","fileName","fileSize","ceil","ALLOWED_MIME_TYPES","MAX_FILE_SIZE","fileSizeError","fileTypeError","totalFileSizeError","attachmentButtonAriaLabel","addAttachment","fileInputRef","handlePromptForFileSelect","_fileInputRef$current","click","htmlFor","attachmentButton","AttachmentIcon","attachmentIcon","fileInput","_e$target$files","files","assertNonEmptyString","str","assertNumber","number","STORE_EMOJI","STORE_KEYVALUE","STORE_FAVORITES","INDEX_TOKENS","INDEX_COUNT","INDEX_GROUP_AND_ORDER","KEY_ETAG","KEY_URL","KEY_PREFERRED_SKINTONE","MODE_READONLY","MODE_READWRITE","INDEX_SKIN_UNICODE","uniqEmoji","emojis","uniqBy","unicode","openReqs","databaseCache","onCloseListeners","handleOpenOrDeleteReq","req","onblocked","onsuccess","dbPromise","db","storeName","readOnlyOrReadWrite","txn","transaction","durability","store","objectStore","oncomplete","closeDatabase","dbName","close","listener","irregularEmoticons","extractTokens","word","MIN_SEARCH_TEXT_LENGTH","normalizeTokens","callStore","method","getIDB","getAllIDB","commit","findCommonMembers","arrays","uniqByFunc","shortestArray","array","minItem","minBy","results","findIndex","async","loadData","emojiData","eTag","transformedData","annotation","emoticon","group","order","shortcodes","skins","emoji","tokens","flat","skinTones","skinUnicodes","skinVersions","tone","transformEmojiData","emojiStore","metaStore","oldETag","oldUrl","todo","checkFetched","put","onFetched","getEmojiBySearchQuery","query","intermediateResults","onDone","token","range","IDBKeyRange","bound","only","requiredKeys$1","customEmojiIndex","customEmojis","firstItemIsFaulty","assertCustomEmojis","sortByName","searchTrie","shortcode","currentMap","char","charAt","nextMap","valuesAtCoda","exact","queue","entriesSortedByKey","shift","trie","searchByExactMatch","searchByPrefix","shortcodeToEmoji","nameToEmoji","customEmoji","search","byShortcode","byName","cleanEmoji","warnETag","requiredKeys","assertStatus","dataSource","getETagAndData","fetch","headers","json","assertEmojiData","jsonChecksum","object","inBuffer","binary","buf","ArrayBuffer","Uint8Array","charCodeAt","binaryStringToArrayBuffer","outBinString","buffer","byteLength","fromCharCode","arrayBufferToBinaryString","crypto","subtle","digest","Database","locale","_dbName","_db","_lazyUpdate","_custom","_clear","_ready","_init","indexedDB","open","onupgradeneeded","oldVersion","createObjectStore","keyPath","indexes","indexName","multiEntry","createIndex","initialMigration","onclose","createDatabase","addOnCloseListener","isEmpty","loadDataForFirstTime","getETag","eTagAndData","hasData","checkForUpdates","ready","checkReady","getEmojiByGroup","getEmojiByShortcode","predicate","lastKey","processNextBatch","getAll","lowerBound","doFullDatabaseScanForSingleResult","lowerShortcodes","getEmojiByUnicodeOrName","unicodeOrName","getEmojiByUnicode","getPreferredSkinTone","setPreferredSkinTone","skinTone","incrementFavoriteEmojiCount","getTopFavoriteEmoji","limit","favoritesStore","openCursor","addResult","continue","primaryKey","custom","_shutdown","deleteDatabase","run","blank_object","run_all","fns","is_function","thing","safe_not_equal","src_url_equal_anchor","current_component","src_url_equal","element_src","append","anchor","detach","listen","handler","attr","attribute","set_data","wholeText","set_input_value","set_style","important","removeProperty","set_current_component","component","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","update_scheduled","schedule_update","add_render_callback","seen_callbacks","flushidx","saved_component","$$","fragment","before_update","dirty","ctx","after_update","outroing","transition_in","local","global","destroy_block","lookup","update_keyed_each","old_blocks","get_key","dynamic","destroy","create_each_block","get_context","old_indexes","new_blocks","new_lookup","deltas","child_ctx","abs","will_move","did_move","first","new_block","old_block","new_key","old_key","SvelteComponent","$destroy","on_destroy","destroy_component","$on","callbacks","$set","$$props","$$set","skip_bound","allGroups","groups","customGroup","rIC","requestIdleCallback","hasZwj","versionsAndTestEmoji","MOST_COMMONLY_USED_EMOJI","FONT_FAMILY","DEFAULT_CATEGORY_SORTING","getTextFeature","canvas","getContext","textBaseline","font","fillStyle","fillText","getImageData","testColorEmojiSupported","feature1","feature2","feature1Str","startsWith","compareFeatures","emojiSupportLevelPromise","determineEmojiSupportLevel","supportedZwjEmojis","halt","incrementOrDecrement","decrement","rAF","baselineEmojiWidth","resizeObserverSupported","ResizeObserver","calculateTextWidth","createRange","selectNode","getBoundingClientRect","Map_1","get_each_context","get_each_context_1","get_each_context_2","get_each_context_3","get_each_context_4","create_each_block_4","key_1","div","div_id_value","div_class_value","div_aria_selected_value","div_title_value","div_aria_label_value","t_value","new_ctx","detaching","create_each_block_3","button_aria_controls_value","button_aria_label_value","button_aria_selected_value","button_title_value","mounted","dispose","click_handler","create_else_block_1","img","img_src_value","create_if_block_1","create_each_block_2","button_role_value","button_class_value","button_id_value","select_block_type","current_block_type","if_block","create_each_block_1","div0","div0_id_value","div0_class_value","div1","div1_role_value","div1_aria_labelledby_value","div1_id_value","searchResultsLabel","category","each_blocks","each_1_lookup","each_value_2","create_else_block","create_if_block","select_block_type_1","create_fragment","section","div4","input_placeholder_value","input_aria_expanded_value","input_aria_activedescendant_value","t0","span0","t1","div2","button0","t2","button0_class_value","div2_class_value","span1","t3","div3","div3_class_value","div3_aria_label_value","div3_aria_activedescendant_value","div3_aria_hidden_value","div5","div5_aria_label_value","div7","div6","div8","t4","div8_class_value","div10","div9","div10_class_value","div10_role_value","div10_aria_label_value","div10_id_value","div11","div11_class_value","div11_aria_label_value","button1","section_aria_label_value","t0_value","searchLabel","t1_value","searchDescription","t3_value","skinToneDescription","each_blocks_3","each0_lookup","each_blocks_2","each1_lookup","each_blocks_1","each2_lookup","each3_lookup","each_value_4","each_value_3","get_key_1","each_value_1","get_key_2","each_value","get_key_3","textContent","skinTonesLabel","categoriesLabel","favoritesLabel","regionLabel","action_result","instance","$$self","$$invalidate","rootElement","baselineEmoji","tabpanelElement","skinToneDropdown","skinToneButtonText","pickerStyle","defaultFavoriteEmojis","currentGroup","activeSearchItemId","skinToneEmoji","i18n","database","customCategorySorting","currentEmojis","currentEmojisWithCategories","rawSearchText","searchText","searchMode","activeSearchItem","skinTonePickerExpanded","skinTonePickerExpandedAfterAnimation","currentSkinTone","activeSkinTone","skinToneButtonLabel","currentFavorites","numColumns","isRtl","scrollbarWidth","currentGroupIndex","groups$1","databaseLoaded","getRootNode","fireEvent","dispatchEvent","composed","unicodeWithSkin","isSkinToneOption","isZwjSupported","filterEmojisByVersion","emojiSupportLevel","summarizeEmojis","toSimpleSkinsMap","skin","summarizeEmojisForUI","onNavClick","clickEmoji","emojiSummary","skinTonedUnicode","onSkinToneOptionsClick","level","emojiUnsupportedMessage","handleDatabaseLoading","showingLoadingMessage","timeoutHandle","loadingMessage","networkErrorMessage","updateEmojis","currentSearchText","newEmojis","getEmojisBySearchQuery","currentGroupId","getEmojisByGroup","updatePreferredSkinTone","fill","zwjIndex","fromCodePoint","endsWith","applySkinTone","skinToneLabel","updateDefaultFavoriteEmojis","updateFavorites","dbFavorites","favorites","zwjEmojisToCheck","rootNode","emojiToDomNode","emojiWidth","supported","checkZwjSupport","checkZwjSupportAndUpdate","calculateCurrentEmojisWithCategories","categoriesToEmoji","once","uniq","onUpdate","resizeObserver","contentRect","observe","disconnect","calculateWidth","getComputedStyle","newNumColumns","getPropertyValue","newIsRtl","newScrollbarWidth","parentElement","goToNextOrPrevious","previous","doFocus","previousSibling","lastChild","contains","changeActiveSkinTone","nextSkinTone","relatedTarget","$$value","Picker","super","not_equal","append_styles","parent_component","on_mount","on_disconnect","make_dirty","intro","customElement","new_on_destroy","mount_component","init","enI18n","activities","objects","symbols","flags","PROPS","PickerElement","HTMLElement","attachShadow","shadowRoot","_ctx","_dbFlush","connectedCallback","_cmp","disconnectedCallback","observedAttributes","attributeChangedCallback","attrName","oldValue","_set","up","toUpperCase","_dbCreate","defineProperties","customElements","define","emojiPickerButtonAriaLabel","EmojiButton","onEmoji","_ref$onClose","onClose","showPicker","setShowPicker","emojiPickerRef","contentRef","closePicker","togglePicker","onEmojiSelect","_emojiPickerRef$curre","_emojiPickerRef$curre2","_emojiPickerRef$curre3","handleClickOutside","_currentRef$shadowRoo","currentRef","_currentRef$shadowRoo2","emojiIconButton","EmoticonIcon","tooltip","TEXT_AREA_ID","isInputHidden","isSendDisabled","draft","showAttachmentButton","setBody","setAttachments","errorMessage","setErrorMessage","_useState8","pendingCallback","setPendingCallback","_useState10","pendingCursorPosition","setPendingCursorPosition","textAreaRef","focusOnTextArea","cursorLocation","_element$focus","selectionStart","selectionEnd","URL","revokeObjectURL","removedAttachment","prevAttachments","debouncedUserTyping","useMemo","debounce","sendTypingActivity","typing","debouncedUserStoppedTyping","_textAreaRef$current","_textAreaRef$current2","overflow","resizeTextarea","handleChange","newBody","messageInput","hasError","AttachmentPreviews","lowerSection","AttachmentButton","previewUrl","createObjectURL","EmojiPicker","_textAreaElement$sele","_textAreaElement$sele2","textAreaElement","currentInputValue","SendIcon","sendIcon","ACTIONABLE_TEMPLATE_TYPES","IN_THREAD_TEMPLATE_ACTIONS","_currentMLL$children","_currentMLL$children2","selectedMLLChild","onSubmitMLLReply","currentMLL","setCurrentMLL","prevMLLs","updatePrevMLLs","handleClickOption","mllChild","branch","currentBranch","prevIds","mllPath","prevBranch","headerBackButton","prevMLL","newPrevMLLs","ChevronLeft","mllOptions","mllOption","mllChevron","flattenMLLTree","tree","getLastMessageWithTemplateAction","_lastMessage$meta","_lastMessage$meta$tem","lastMessage","formatListTemplateBody","titleText","detailsText","isMatchingReply","customerMessage","_agentMessage$meta","_agentMessage$meta$te","messageActions","actions","action","displayText","getLastTemplateActionReply","templateActionMessage","conversationMessages","rawDate","importedAt","messageTemplateDate","getLastTemplateActionOptimisticReply","optimisticMessages","optimisticMessage","listImageUrlAltText","imageUrl","imageError","setImageError","ImagePlaceholder","truncatedTitle","truncatedDetails","listItemContainer","listItem","infoContainer","endTypingTimeout","supportedTypes","initialMessages","showMLLModal","toggleMLLModal","setMLLChild","getCurrentConversation","handleClickQuickReply","payload","handleClickListReply","handleClickMLLReply","renderActions","lastMessageWithTemplateAction","_lastMessageWithTempl","_tree","_tree$children","quickReplyButton","ListAction","deflectionTemplateMessage","_deflectionTemplateMe","_deflectionTemplateMe2","lastDeflection","handleClickDeflectionReply","mllButton","mllButtonWithChevron","mllText","viewBox","answerFeedbackContainer","_classNames2","isText","valueType","emojiReplyButton","messageIds","getConversationMessages","_getCurrentConversati","_lastMessageWithTempl2","templateActionReplyMessage","inThread","templateActions","MLLModal","createOptimisticMessage","sendMessagePayload","isInAssistantMode","contentLength","getMessageIdsToMarkAsRead","isConversationMessage","isSentByAgent","direction","clearEndTypingTimeout","chatEndedLabel","chatDeletedLabel","chatConversationHasMoved","_messages$handoff2","threadRef","handoff","handoffCallback","setUserTyping","isCreatingConversation","setIsCreatingConversation","forceUpdateState","isAtBottomOfThread","setIsAtBottomOfThread","_useState12","setShowScrollToCurrent","_useState14","setShowNewMessagesText","_useState16","messageTotal","messageCount","setMessageCount","_useState18","showNewMessageDividerIndex","setShowNewMessageDividerIndex","_useState20","isThreadRendered","setIsThreadRendered","topOfChatRef","bottomOfChatRef","handleOnline","fetchMessageHistory","bottomRefIntersection","elementRef","_ref$threshold","threshold","_ref$root","_ref$rootMargin","rootMargin","io","IntersectionObserver","useIntersectionObserver","intersectionObserver","rootBounds","isIntersecting","fetchingInitialMessages","getInitialMessages","conversationInitialMessages","assistantInitialMessages","sendMessage","sendMessageParams","currentOptimisticMessage","messageParamsConversationId","toggleOptimisticMessageError","addOptimisticMessage","removeOptimisticMessage","receiveMessage","runHandoffCallback","messageOptions","_getCurrentConversati2","messagePayload","_messageOptions$body","_messages$handoff","createConversation","brand","brandId","sendPresenceActivity","presence","refreshConversations","addConversation","previousConversationMessageCount","_conversation$message","hasAllMessages","_messages$handoff3","_messages$handoff7","_messages$handoff4","_messages$handoff5","_messages$handoff6","pageIsVisible","setPageIsVisible","setPageVisibility","usePageVisibility","markRead","handleAgentTypingActivity","endTypingCallback","user","typingOpts","addListener","removeListener","_convo$optimisticMess","convo","_lastMessageConvo$sen","lastMessageConvo","isLastMessageFromCustomer","templateActionHelpers","_lastMessageWithTempl3","_getCurrentConversati3","lockInput","renderDivider","chatDividerContainer","chatDividerLine","chatDividerLabel","messageThread","messageThreadMobile","chatMessages","initialMessage","isLastMessage","_messagesToRender2","_messagesToRender3","messagesToRender","_messagesToRender","initialMessageTemplateIds","_initialMessage$meta","_initialMessage$meta$","_message$meta$templat","_message$meta2$templa","currentMessage","_currentMessage$meta","_currentMessage$meta$","_currentMessage$meta$2","date1","date2","date1InMs","date2InMs","nextMessage","isAiResponse","renderOptimisticMessages","renderThread","deleted","renderChatMovedDivider","_satisfaction","renderSatisfaction","TemplateActions","renderTemplateActions","ScrollToCurrent","createConversationContainer","inputContainer","MessageThreadInput","disableAttachments","renderFooter","isCategory","isLast","isListItemCategory","categoryId","showDescription","description","itemContainer","FolderIcon","FileDocumentOutlineIcon","itemIcon","information","ChevronRightIcon","chevronIcon","createCategoryTree","sorted","childCategories","sortedChildCategories","kbSearchListEmptyState","articlesEmptyAltText","kbSearchListMaxArticles","kbFeaturedArticles","kbCategories","_tree2","_tree3","updateLoading","langSupported","updateLangSupported","listContainer","rootCategory","getFeaturedArticles","updateFeaturedArticles","getCategories","updateCategories","updateCurrentCategoryId","currentList","renderEmptyState","articlesEmpty","ArticlesEmpty","emptyMessage","articleSearchFetching","listLoading","overMaxResults","_kb$featuredArticles2","_kb$featuredArticles3","handleListItemClick","categoryArticles","getArticles","updatedArticles","renderHeaderContent","headerContainer","headerTitle","headerDescription","featuredArticles","KBSearchListItem","_kb$featuredArticles","renderHeader","maxResultsLabel","footerText","footerNavigationChat","privacyPolicy","footerConsent","_settings$botConsent","showToolTip","setShowTooltip","showCloseButtonInToolTip","setShowCloseButtonInToolTip","consentButtonRef","closeButtonRef","botConsent","enabled","consentMessage","_consentButtonRef$cur","showBrandingIdentifier","consent","onMouseOver","onMouseLeave","onFocus","footerTooltipContainer","footerTooltipContent","footerTooltipContentClicked","footerTooltip","isKBPath","isChatPath","goToKBPath","goToChatPath","footerContainer","footerNavigation","highlighted","BookOpenPageVariantIcon","MessageProcessingIcon","chatContainer","footer","KustomerFooterLogo","FooterConsent","articleSearchInputName","articleSearchInputPlaceholder","articleSearchButton","kbHeaderResults","articleSearchClearButton","_kb$rootCategory","_kb$articleSearchInpu","_kb$articleSearchInpu2","isArticleView","resultsCount","handleClearSearchInput","updateArticleSearchInput","updateArticleSearchResults","runSearch","updateArticleSearchFetching","searchArticles","term","currentView","kbHeader","autoComplete","clearIcon","searchIcon","MagnifyIcon","setLoading","anchorHash","setAnchorHash","iframeRef","navigateToArticle","messageListener","_event$data","_URL","articleUrl","articleUrlHash","articleUrlPathname","pathname","kbBaseUrl","targetBlank","currentIframe","iframeSrc","hostname","articleSlugHash","articleSlug","lastIndexOf","articleHash","articleInStore","getArticleBySlug","_kb$articles2","kbArticleUrl","baseDomain","embed","URLSearchParams","domain","slashSeparator","kbUrlPath","createKBArticleUrl","articleContainer","articleIframe","noInternetConnection","FocusTrap","_len","_key","_this$firstFocusable","trapRef","firstFocusable","lastFocusable","_this$lastFocusable","_this$firstFocusable2","setFocusTrap","handleKeyDown","focusTrap","hideHistory","chatWidgetRef","navigationState","isLoading","onGoBackForMessageThreadPath","routeWithErrorBoundary","widgetWrapper","mobile","widget","TitleBarButtons","ConversationsHeader","MessageThreadHeader","_kb$categories","parentCategory","KBHeader","connectionContainer","WifiStrengthOffOutline","wifiIcon","modalContainer","Conversations","MessageThread","KBSearchList","KBArticle","renderRoute","Footer","onCloseProactiveChat","closeProactiveChatButtonWrapper","closeProactiveChatButton","_useContext","proactiveChat","handoffToMessageThread","_proactiveChat$initRe","initResponse","proactiveChatMessage","_proactiveChat$initRe2","handleOnClickInput","expand","inputField","targetEl","wrapperHeight","setWrapperHeight","resizeIframeCallback","_useVendors2","errorLoadingVendors","wrapperEl","observer","setObserver","obs","useResizeObserver","proactivePopupIframeWidth","proactiveChatLoadingOrError","startAnimation","setStartAnimation","proactivePopupWrapper","CloseProactiveChatButton","showCloseButton","ProactiveChatMessage","proactiveChatMessageStyles","fadeIn","ProactiveChatInput","ChatRootIcon","handleChatIconClick","chatIconFrameSize","ProactivePopup","proactivePopupActive","pointer","areCSPOverridesApplied","POLLING_INTERVAL_MS_LOCAL_STORAGE_KEY","Polling","fetchPromisesFn","oldMessageCount","polledMessageCount","backoffOrRestartPolling","backoffPolling","restartPolling","pollIntervalTimer","clearPolling","newInterval","poll","pollingIntervalMs","pollingIntervalMsString","_unused5","removeItem","_unused4","removePollingIntervalMsFromLocalStorage","getPollingIntervalMsFromLocalStorage","browserNotificationTitle","pageTitleNotification","selectOldestMessage","messagesById","oldestMessageId","mergeAndSortByMessageTimestamps","previousMessages","firstId","secondId","firstMsg","secondMsg","getMessagesFromKApi","output","fetchMsgs","before","getHistoricalMessages","_res$links","links","decodeURIComponent","_oldestMessage$direct2","_response$satisfactio","newMessagesById","merged","oldestMessage","directionType","fetchMessageHistoryHelper","_oldestMessage$direct","hasFirstMessage","getMessagesFromPubNub","_result$messages","_conversation$initial","initialMessageMissingOnAssistedConversation","emptyMessageState","assistantHelpers","constructAssistedConversationWithOptimisticMessageError","assistedConversationWithOptimisticMessage","checkForFailedAssistedConversation","fetchAllMessages","IFRAME_MESSAGES","DEFAULT_PROACTIVE_CHAT_INTERVAL","App","_this$state","hideChatIcon","setIframeSizeFullScreen","widgetFrameHeight","widgetFrameWidth","resizeWidgetHelper","resizeWidget","agentMessageReceivedHandler","unreadCountChangeHandler","conversationEndedHandler","satisfactionReceivedHandler","conversationMergedHandler","customerDeleteHandler","conversationDeletedHandler","handleLogout","endAssistantHandler","_messages$messageData","conversationIdChanged","messageReceivedHandler","notificationOverrides","intlDefinitions","showNotifications","showBrowserNotifications","sentNotification","permission","notificationTitle","titleOverride","notificationBody","bodyOverride","notification","Notification","onclick","_iFrameElement$getIfr","openConversationById","requestPermission","handleNotifications","previousMessagesById","_mergeAndSortByMessag","lastMessageId","getConversation","translatedString","currentTitle","regex","_response$change","change","showTitleNotifications","chatCountString","notificationText","titleContainsChatNotification","appendChatNotificationToParentTitle","sourceConversationId","targetConversationId","sourceUnreadCount","targetUnreadCount","newTargetUnreadCount","logout","preferredView","proactiveOnly","callbackResponse","proactiveChatInterval","handleProactiveChatTrigger","proactiveChatTries","evaluateProactiveChatRules","getConversations","pageSize","newConversationState","conversationDataState","getUnreadCount","fetchPageOfHistory","_this$state$conversat","currentConversations","_this$state$conversat2","upToPage","setConnectionToOnline","_event$detail","parameters","login","resetEndCustomerState","historyError","lastOpenedPage","lastOpenedPageIsSupportedByWidgetType","_this$state$conversat3","_this$state$conversat4","lastOpenConversationId","openWidget","initError","resetHandoff","resetDraftHandoff","dialogId","handoffDraftToMessageThread","_e$detail","_e$detail2","_this$state2","navigateToCategory","fetchCategoryArticles","langNotFound","stop","removeKustomerCoreListeners","reloadSettings","initApp","_data$conversationId","_data$conversationId2","_kustomerCore$isUrlAl","isUrlAllowed","allowed","kustomer","startProactiveChatEvaluation","startFinished","checkParentLocationInterval","setInitialNavigation","assistantRules","parentHref","addKustomerCoreListeners","restoreWidgetLastOpenState","startCallback","pollingConversationFetches","currentMessagesById","prevMessagesById","_mergeAndSortByMessag3","mergedMessagesById","mergedMessages","draftConversation","_this$state3","_event$detail2","_this$chatRootIconRef","_event$detail3","chatRootIconRef","_event$detail4","openConversations","conversationAttributes","articlesToAdd","getKnowledgeBaseConfig","fetching","optimisticId","optimisticMessageId","attachmentsToRevoke","withoutOptimisticMessage","isMessage","resizeHandler","domainCriteria","_kustomerCore$isUrlAl2","parentWindowLocation","_this2$state","currentLocation","_this$state4","handleNetworkOnline","handleNetworkOffline","createConversationInDraft","handleLogin","openKbArticle","openKbCategory","getOpenConversations","_this$state5","proactiveChatContext","_this$state6","_this$props3","Widget","handleRestart","renderWidget","renderChatRootIcon","enableES5","Root","setChatSettings","setIntlDefinitions","setChatAvailability","loadSettings","scheduleId","_settings$sentry","_startParameters$live","sentry","web","standalone","getClient","dsn","environment","process","release","initialScope","orgId","beforeSend","_event$exception","_event$exception$valu","exception","stacktrace","integrations","httpClientIntegration","failedRequestStatusCodes","ignoreErrors","isChatAvailable","availability","businessHoursOverride","livePreviewOverrides","businessHours","INSIDE_BUSINESS_HOURS","OUTSIDE_BUSINESS_HOURS","offhoursDisplay","theme","_settings$colors","_settings$colors2","_settings$colors3","_settings$colors4","_settings$colors5","_settings$colors6","_settings$colors7","_settings$colors8","_settings$colors9","_settings$colors10","_settings$colors11","colors","headerBackground","white","headerPrimaryText","primary","headerSecondaryText","secondary","agentBubbleBackground","agentBubblePrimaryText","agentBubbleSecondaryText","customerBubbleBackground","primarySlate","customerBubblePrimaryText","primaryButtonBackground","primaryBlue","primaryButtonBackgroundHover","primaryDarkerBlue","primaryButtonText","createTheme","variables","variable","_locales$default","_locales$default$mapp","langModule","hideNewConversationButtonOnHistory","hideNewConversationButtonOnEnd","_window$top","devtools","__PREACT_DEVTOOLS__","attachPreact","_unused","isScriptAllowed","scriptSrc","pattern","originalAppendChild","Node","HTMLScriptElement","hasAttribute","originalInsertBefore","newNode","referenceNode","originalHeadAppendChild","originalBodyAppendChild","originalBodyAppend","nodes","originalHeadAppend","_len2","_key2","originalEnsure","applyNonceToDynamicScripts"],"sourceRoot":""}